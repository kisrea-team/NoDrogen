/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-notion-x";
exports.ids = ["vendor-chunks/react-notion-x"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-notion-x/src/styles.css":
/*!****************************************************!*\
  !*** ./node_modules/react-notion-x/src/styles.css ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"c19fbcbcf7ec\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvc3JjL3N0eWxlcy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3Rpb24teC1leGFtcGxlLWZ1bGwvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvc3JjL3N0eWxlcy5jc3M/NjQyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImMxOWZiY2JjZjdlY1wiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/src/styles.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("function e(e){return e&&\"object\"==typeof e&&\"default\"in e?e.default:e}var t=e(__webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\")),n=e(__webpack_require__(/*! react-intersection-observer */ \"(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/node_modules/react-intersection-observer/dist/react-intersection-observer.cjs.js\")),r=__webpack_require__(/*! unionize */ \"(ssr)/./node_modules/unionize/lib/index.js\"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var a,i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(a=exports.ImageState||(exports.ImageState={})).NotAsked=\"NotAsked\",a.Loading=\"Loading\",a.LoadSuccess=\"LoadSuccess\",a.LoadError=\"LoadError\";var u=r.unionize({NotAsked:{},Buffering:{},Loading:{},LoadSuccess:{},LoadError:r.ofType()}),s=r.unionize({ViewChanged:r.ofType(),BufferingEnded:{},LoadSuccess:{},LoadError:r.ofType()}),d=function(e,t){return function(n){var r=m(g(e,t));r.promise.then(function(e){return n.update(s.LoadSuccess({}))}).catch(function(e){e.isCanceled||n.update(s.LoadError({msg:\"Failed to load\"}))}),n.promiseCache.loading=r}},f=function(e){e.promiseCache.buffering.cancel()},p=function(e){function r(t){var n=e.call(this,t)||this;return n.promiseCache={},n.initialState=u.NotAsked(),n.state=n.initialState,n.update=n.update.bind(n),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(r,e),r.reducer=function(e,t,n){return s.match(e,{ViewChanged:function(e){return!0===e.inView?n.src?u.match(t,{NotAsked:function(){return n.debounceDurationMs?{nextState:u.Buffering(),cmd:(e=n.debounceDurationMs,function(t){var n=m(l(e));n.promise.then(function(){return t.update(s.BufferingEnded())}).catch(function(e){}),t.promiseCache.buffering=n})}:{nextState:u.Loading(),cmd:d(n,n.experimentalDecode)};var e},default:function(){return{nextState:t}}}):{nextState:u.LoadSuccess()}:u.match(t,{Buffering:function(){return{nextState:u.NotAsked(),cmd:f}},default:function(){return{nextState:t}}})},BufferingEnded:function(){return{nextState:u.Loading(),cmd:d(n,n.experimentalDecode)}},LoadSuccess:function(){return{nextState:u.LoadSuccess()}},LoadError:function(e){return{nextState:u.LoadError(e)}}})},r.prototype.update=function(e){var t=this,n=r.reducer(e,this.state,this.props),o=n.nextState,a=n.cmd;this.props.debugActions&&( false&&0,console.log({action:e,prevState:this.state,nextState:o})),this.setState(o,function(){return a&&a(t)})},r.prototype.componentWillUnmount=function(){this.promiseCache.loading&&this.promiseCache.loading.cancel(),this.promiseCache.buffering&&this.promiseCache.buffering.cancel(),this.promiseCache={}},r.prototype.render=function(){var e=this,r=this.props,o=r.children,a=r.loadEagerly,d=r.observerProps,f=c(r,[\"children\",\"loadEagerly\",\"observerProps\",\"experimentalDecode\",\"debounceDurationMs\",\"debugActions\"]);return a?o({imageState:u.LoadSuccess().tag,imageProps:f}):t.createElement(n,i({rootMargin:\"50px 0px\",threshold:.01},d,{onChange:function(t){return e.update(s.ViewChanged({inView:t}))}}),function(t){return o({imageState:\"Buffering\"===e.state.tag?exports.ImageState.Loading:e.state.tag,imageProps:f,ref:t.ref})})},r.displayName=\"LazyImageFull\",r}(t.Component),g=function(e,t){var n=e.src,r=e.srcSet,o=e.alt,a=e.sizes;return void 0===t&&(t=!1),new Promise(function(e,i){var c=new Image;if(r&&(c.srcset=r),o&&(c.alt=o),a&&(c.sizes=a),c.src=n,t&&\"decode\"in c)return c.decode().then(function(t){return e(t)}).catch(function(e){return i(e)});c.onload=e,c.onerror=i})},l=function(e){return new Promise(function(t){return setTimeout(t,e)})},m=function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)}),e.catch(function(e){return r(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}},h=function(e){var n=e.actual,r=e.placeholder,o=e.loading,a=e.error,u=c(e,[\"actual\",\"placeholder\",\"loading\",\"error\"]);return t.createElement(p,i({},u),function(e){var t=e.imageProps,i=e.ref;switch(e.imageState){case exports.ImageState.NotAsked:return!!r&&r({imageProps:t,ref:i});case exports.ImageState.Loading:return o?o():!!r&&r({imageProps:t,ref:i});case exports.ImageState.LoadSuccess:return n({imageProps:t});case exports.ImageState.LoadError:return a?a():n({imageProps:t})}})};h.displayName=\"LazyImage\",exports.LazyImage=h,exports.LazyImageFull=p;\n//# sourceMappingURL=react-lazy-images.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvbm9kZV9tb2R1bGVzL3JlYWN0LWxhenktaW1hZ2VzL2Rpc3QvcmVhY3QtbGF6eS1pbWFnZXMuanMiLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyx3REFBd0QsUUFBUSxtQkFBTyxDQUFDLHdHQUFPLE9BQU8sbUJBQU8sQ0FBQyx3TEFBNkIsS0FBSyxtQkFBTyxDQUFDLDREQUFVLGtCQUFrQixpQ0FBaUMsYUFBYSxnQ0FBZ0MsY0FBYyxnQkFBZ0IsZ0RBQWdELFFBQVEsbUJBQW1CLG9DQUFvQyxpQ0FBaUMsSUFBSSx1RkFBdUYsU0FBUyx5QkFBeUIsZ0JBQWdCLFNBQVMsc0ZBQXNGLDZEQUE2RCxRQUFRLHNDQUFzQyxXQUFXLHlDQUF5QyxTQUFTLHdCQUF3QixrQkFBa0IsR0FBRywrRkFBK0Ysa0JBQWtCLFdBQVcsYUFBYSxXQUFXLGVBQWUsc0JBQXNCLGdCQUFnQix3Q0FBd0MsZUFBZSxzQkFBc0Isa0JBQWtCLG1CQUFtQixnQkFBZ0IsMkJBQTJCLGdDQUFnQyxHQUFHLG9CQUFvQixvQ0FBb0MscUJBQXFCLEdBQUcsNEJBQTRCLGVBQWUsa0NBQWtDLGVBQWUsY0FBYywyQkFBMkIsd0JBQXdCLGdGQUFnRixxQkFBcUIsYUFBYSxtQkFBbUIsNkVBQTZFLGdDQUFnQyxrQkFBa0Isd0JBQXdCLHFDQUFxQyxvQkFBb0IsNkJBQTZCLGdFQUFnRSxjQUFjLDBCQUEwQixvQ0FBb0MscUJBQXFCLDZCQUE2QixFQUFFLEVBQUUscURBQXFELE1BQU0sb0JBQW9CLE9BQU8sY0FBYyxHQUFHLDBCQUEwQixZQUFZLHFCQUFxQixPQUFPLDhCQUE4QixvQkFBb0IsT0FBTyxjQUFjLEVBQUUsMkJBQTJCLE9BQU8scURBQXFELHdCQUF3QixPQUFPLDJCQUEyQix1QkFBdUIsT0FBTywyQkFBMkIsRUFBRSxnQ0FBZ0Msc0VBQXNFLDBCQUEwQixNQUFtQyxFQUFFLENBQTJILGNBQWMsMENBQTBDLDhCQUE4QixlQUFlLEVBQUUsNkNBQTZDLHFKQUFxSiwrQkFBK0Isa0xBQWtMLFlBQVksNENBQTRDLHVCQUF1QixvQ0FBb0MsSUFBSSxxQkFBcUIsK0JBQStCLFNBQVMsSUFBSSxjQUFjLFVBQVUsbUdBQW1HLEVBQUUsRUFBRSxpQ0FBaUMsOEJBQThCLHlDQUF5QyxvREFBb0QsZ0JBQWdCLDBHQUEwRyxZQUFZLG9CQUFvQixZQUFZLEVBQUUsdUJBQXVCLEVBQUUsZUFBZSwrQkFBK0IsdUJBQXVCLEVBQUUsZUFBZSxTQUFTLE9BQU8sa0NBQWtDLG1CQUFtQixZQUFZLGNBQWMsT0FBTyxzQkFBc0IsWUFBWSxjQUFjLElBQUksRUFBRSxvQkFBb0IsT0FBTyxlQUFlLHVHQUF1Ryw2QkFBNkIsZ0JBQWdCLDJCQUEyQixxQkFBcUIsK0NBQStDLG1CQUFtQixFQUFFLHFEQUFxRCxtQkFBbUIsRUFBRSw4Q0FBOEMsYUFBYSxFQUFFLGtEQUFrRCxhQUFhLEdBQUcsR0FBRywwQkFBMEIsaUJBQWlCLEdBQUcscUJBQXFCO0FBQ3hySiIsInNvdXJjZXMiOlsid2VicGFjazovL25vdGlvbi14LWV4YW1wbGUtZnVsbC8uL25vZGVfbW9kdWxlcy9yZWFjdC1ub3Rpb24teC9ub2RlX21vZHVsZXMvcmVhY3QtbGF6eS1pbWFnZXMvZGlzdC9yZWFjdC1sYXp5LWltYWdlcy5qcz9lODAzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGUoZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImRlZmF1bHRcImluIGU/ZS5kZWZhdWx0OmV9dmFyIHQ9ZShyZXF1aXJlKFwicmVhY3RcIikpLG49ZShyZXF1aXJlKFwicmVhY3QtaW50ZXJzZWN0aW9uLW9ic2VydmVyXCIpKSxyPXJlcXVpcmUoXCJ1bmlvbml6ZVwiKSxvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKG89T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KShlLHQpfTt2YXIgYSxpPWZ1bmN0aW9uKCl7cmV0dXJuKGk9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxyPWFyZ3VtZW50cy5sZW5ndGg7bjxyO24rKylmb3IodmFyIG8gaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiBjKGUsdCl7dmFyIG49e307Zm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJnQuaW5kZXhPZihyKTwwJiYobltyXT1lW3JdKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxyLmxlbmd0aDtvKyspdC5pbmRleE9mKHJbb10pPDAmJihuW3Jbb11dPWVbcltvXV0pfXJldHVybiBufShhPWV4cG9ydHMuSW1hZ2VTdGF0ZXx8KGV4cG9ydHMuSW1hZ2VTdGF0ZT17fSkpLk5vdEFza2VkPVwiTm90QXNrZWRcIixhLkxvYWRpbmc9XCJMb2FkaW5nXCIsYS5Mb2FkU3VjY2Vzcz1cIkxvYWRTdWNjZXNzXCIsYS5Mb2FkRXJyb3I9XCJMb2FkRXJyb3JcIjt2YXIgdT1yLnVuaW9uaXplKHtOb3RBc2tlZDp7fSxCdWZmZXJpbmc6e30sTG9hZGluZzp7fSxMb2FkU3VjY2Vzczp7fSxMb2FkRXJyb3I6ci5vZlR5cGUoKX0pLHM9ci51bmlvbml6ZSh7Vmlld0NoYW5nZWQ6ci5vZlR5cGUoKSxCdWZmZXJpbmdFbmRlZDp7fSxMb2FkU3VjY2Vzczp7fSxMb2FkRXJyb3I6ci5vZlR5cGUoKX0pLGQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bShnKGUsdCkpO3IucHJvbWlzZS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuLnVwZGF0ZShzLkxvYWRTdWNjZXNzKHt9KSl9KS5jYXRjaChmdW5jdGlvbihlKXtlLmlzQ2FuY2VsZWR8fG4udXBkYXRlKHMuTG9hZEVycm9yKHttc2c6XCJGYWlsZWQgdG8gbG9hZFwifSkpfSksbi5wcm9taXNlQ2FjaGUubG9hZGluZz1yfX0sZj1mdW5jdGlvbihlKXtlLnByb21pc2VDYWNoZS5idWZmZXJpbmcuY2FuY2VsKCl9LHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0KXt2YXIgbj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gbi5wcm9taXNlQ2FjaGU9e30sbi5pbml0aWFsU3RhdGU9dS5Ob3RBc2tlZCgpLG4uc3RhdGU9bi5pbml0aWFsU3RhdGUsbi51cGRhdGU9bi51cGRhdGUuYmluZChuKSxufXJldHVybiBmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9byhlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KG4ucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBuKX0ocixlKSxyLnJlZHVjZXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBzLm1hdGNoKGUse1ZpZXdDaGFuZ2VkOmZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5pblZpZXc/bi5zcmM/dS5tYXRjaCh0LHtOb3RBc2tlZDpmdW5jdGlvbigpe3JldHVybiBuLmRlYm91bmNlRHVyYXRpb25Ncz97bmV4dFN0YXRlOnUuQnVmZmVyaW5nKCksY21kOihlPW4uZGVib3VuY2VEdXJhdGlvbk1zLGZ1bmN0aW9uKHQpe3ZhciBuPW0obChlKSk7bi5wcm9taXNlLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC51cGRhdGUocy5CdWZmZXJpbmdFbmRlZCgpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe30pLHQucHJvbWlzZUNhY2hlLmJ1ZmZlcmluZz1ufSl9OntuZXh0U3RhdGU6dS5Mb2FkaW5nKCksY21kOmQobixuLmV4cGVyaW1lbnRhbERlY29kZSl9O3ZhciBlfSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue25leHRTdGF0ZTp0fX19KTp7bmV4dFN0YXRlOnUuTG9hZFN1Y2Nlc3MoKX06dS5tYXRjaCh0LHtCdWZmZXJpbmc6ZnVuY3Rpb24oKXtyZXR1cm57bmV4dFN0YXRlOnUuTm90QXNrZWQoKSxjbWQ6Zn19LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57bmV4dFN0YXRlOnR9fX0pfSxCdWZmZXJpbmdFbmRlZDpmdW5jdGlvbigpe3JldHVybntuZXh0U3RhdGU6dS5Mb2FkaW5nKCksY21kOmQobixuLmV4cGVyaW1lbnRhbERlY29kZSl9fSxMb2FkU3VjY2VzczpmdW5jdGlvbigpe3JldHVybntuZXh0U3RhdGU6dS5Mb2FkU3VjY2VzcygpfX0sTG9hZEVycm9yOmZ1bmN0aW9uKGUpe3JldHVybntuZXh0U3RhdGU6dS5Mb2FkRXJyb3IoZSl9fX0pfSxyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXIucmVkdWNlcihlLHRoaXMuc3RhdGUsdGhpcy5wcm9wcyksbz1uLm5leHRTdGF0ZSxhPW4uY21kO3RoaXMucHJvcHMuZGVidWdBY3Rpb25zJiYoXCJwcm9kdWN0aW9uXCI9PT1wcm9jZXNzLmVudi5OT0RFX0VOViYmY29uc29sZS53YXJuKCdZb3UgYXJlIHJ1bm5pbmcgTGF6eUltYWdlIHdpdGggZGVidWdBY3Rpb25zPVwidHJ1ZVwiIGluIHByb2R1Y3Rpb24uIFRoaXMgbWlnaHQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMuJyksY29uc29sZS5sb2coe2FjdGlvbjplLHByZXZTdGF0ZTp0aGlzLnN0YXRlLG5leHRTdGF0ZTpvfSkpLHRoaXMuc2V0U3RhdGUobyxmdW5jdGlvbigpe3JldHVybiBhJiZhKHQpfSl9LHIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7dGhpcy5wcm9taXNlQ2FjaGUubG9hZGluZyYmdGhpcy5wcm9taXNlQ2FjaGUubG9hZGluZy5jYW5jZWwoKSx0aGlzLnByb21pc2VDYWNoZS5idWZmZXJpbmcmJnRoaXMucHJvbWlzZUNhY2hlLmJ1ZmZlcmluZy5jYW5jZWwoKSx0aGlzLnByb21pc2VDYWNoZT17fX0sci5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPXRoaXMucHJvcHMsbz1yLmNoaWxkcmVuLGE9ci5sb2FkRWFnZXJseSxkPXIub2JzZXJ2ZXJQcm9wcyxmPWMocixbXCJjaGlsZHJlblwiLFwibG9hZEVhZ2VybHlcIixcIm9ic2VydmVyUHJvcHNcIixcImV4cGVyaW1lbnRhbERlY29kZVwiLFwiZGVib3VuY2VEdXJhdGlvbk1zXCIsXCJkZWJ1Z0FjdGlvbnNcIl0pO3JldHVybiBhP28oe2ltYWdlU3RhdGU6dS5Mb2FkU3VjY2VzcygpLnRhZyxpbWFnZVByb3BzOmZ9KTp0LmNyZWF0ZUVsZW1lbnQobixpKHtyb290TWFyZ2luOlwiNTBweCAwcHhcIix0aHJlc2hvbGQ6LjAxfSxkLHtvbkNoYW5nZTpmdW5jdGlvbih0KXtyZXR1cm4gZS51cGRhdGUocy5WaWV3Q2hhbmdlZCh7aW5WaWV3OnR9KSl9fSksZnVuY3Rpb24odCl7cmV0dXJuIG8oe2ltYWdlU3RhdGU6XCJCdWZmZXJpbmdcIj09PWUuc3RhdGUudGFnP2V4cG9ydHMuSW1hZ2VTdGF0ZS5Mb2FkaW5nOmUuc3RhdGUudGFnLGltYWdlUHJvcHM6ZixyZWY6dC5yZWZ9KX0pfSxyLmRpc3BsYXlOYW1lPVwiTGF6eUltYWdlRnVsbFwiLHJ9KHQuQ29tcG9uZW50KSxnPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zcmMscj1lLnNyY1NldCxvPWUuYWx0LGE9ZS5zaXplcztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsaSl7dmFyIGM9bmV3IEltYWdlO2lmKHImJihjLnNyY3NldD1yKSxvJiYoYy5hbHQ9byksYSYmKGMuc2l6ZXM9YSksYy5zcmM9bix0JiZcImRlY29kZVwiaW4gYylyZXR1cm4gYy5kZWNvZGUoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9KTtjLm9ubG9hZD1lLGMub25lcnJvcj1pfSl9LGw9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3JldHVybiBzZXRUaW1lb3V0KHQsZSl9KX0sbT1mdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm57cHJvbWlzZTpuZXcgUHJvbWlzZShmdW5jdGlvbihuLHIpe2UudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdD9yKHtpc0NhbmNlbGVkOiEwfSk6bihlKX0pLGUuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHIodD97aXNDYW5jZWxlZDohMH06ZSl9KX0pLGNhbmNlbDpmdW5jdGlvbigpe3Q9ITB9fX0saD1mdW5jdGlvbihlKXt2YXIgbj1lLmFjdHVhbCxyPWUucGxhY2Vob2xkZXIsbz1lLmxvYWRpbmcsYT1lLmVycm9yLHU9YyhlLFtcImFjdHVhbFwiLFwicGxhY2Vob2xkZXJcIixcImxvYWRpbmdcIixcImVycm9yXCJdKTtyZXR1cm4gdC5jcmVhdGVFbGVtZW50KHAsaSh7fSx1KSxmdW5jdGlvbihlKXt2YXIgdD1lLmltYWdlUHJvcHMsaT1lLnJlZjtzd2l0Y2goZS5pbWFnZVN0YXRlKXtjYXNlIGV4cG9ydHMuSW1hZ2VTdGF0ZS5Ob3RBc2tlZDpyZXR1cm4hIXImJnIoe2ltYWdlUHJvcHM6dCxyZWY6aX0pO2Nhc2UgZXhwb3J0cy5JbWFnZVN0YXRlLkxvYWRpbmc6cmV0dXJuIG8/bygpOiEhciYmcih7aW1hZ2VQcm9wczp0LHJlZjppfSk7Y2FzZSBleHBvcnRzLkltYWdlU3RhdGUuTG9hZFN1Y2Nlc3M6cmV0dXJuIG4oe2ltYWdlUHJvcHM6dH0pO2Nhc2UgZXhwb3J0cy5JbWFnZVN0YXRlLkxvYWRFcnJvcjpyZXR1cm4gYT9hKCk6bih7aW1hZ2VQcm9wczp0fSl9fSl9O2guZGlzcGxheU5hbWU9XCJMYXp5SW1hZ2VcIixleHBvcnRzLkxhenlJbWFnZT1oLGV4cG9ydHMuTGF6eUltYWdlRnVsbD1wO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3QtbGF6eS1pbWFnZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/node_modules/react-intersection-observer/dist/react-intersection-observer.cjs.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/react-notion-x/node_modules/react-lazy-images/node_modules/react-intersection-observer/dist/react-intersection-observer.cjs.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar _extends = _interopDefault(__webpack_require__(/*! @babel/runtime/helpers/extends */ \"(ssr)/./node_modules/@babel/runtime/helpers/extends.js\"));\nvar _objectWithoutPropertiesLoose = _interopDefault(__webpack_require__(/*! @babel/runtime/helpers/objectWithoutPropertiesLoose */ \"(ssr)/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js\"));\nvar _inheritsLoose = _interopDefault(__webpack_require__(/*! @babel/runtime/helpers/inheritsLoose */ \"(ssr)/./node_modules/@babel/runtime/helpers/inheritsLoose.js\"));\nvar _assertThisInitialized = _interopDefault(__webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"(ssr)/./node_modules/@babel/runtime/helpers/assertThisInitialized.js\"));\nvar _defineProperty = _interopDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/@babel/runtime/helpers/defineProperty.js\"));\nvar React = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar invariant = _interopDefault(__webpack_require__(/*! invariant */ \"(ssr)/./node_modules/invariant/invariant.js\"));\n\nvar INSTANCE_MAP = new Map();\nvar OBSERVER_MAP = new Map();\n/**\n * Monitor element, and trigger callback when element becomes visible\n * @param element {HTMLElement}\n * @param callback {Function} Called with inView\n * @param options {Object} InterSection observer options\n * @param options.threshold {Number} Number between 0 and 1, indicating how much of the element should be visible before triggering\n * @param options.root {HTMLElement} It should have a unique id or data-intersection-id in order for the Observer to reused.\n * @param options.rootMargin {String} The CSS margin to apply to the root element.\n * @param rootId {String} Unique identifier for the root element, to enable reusing the IntersectionObserver\n */\n\nfunction observe(element, callback, options, rootId) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // Validate that the element is not being used in another <Observer />\n  invariant(!INSTANCE_MAP.has(element), \"react-intersection-observer: Trying to observe %s, but it's already being observed by another instance.\\nMake sure the `ref` is only used by a single <Observer /> instance.\\n\\n%s\", element); // IntersectionObserver needs a threshold to trigger, so set it to 0 if it's not defined.\n  // Modify the options object, since it's used in the onChange handler.\n\n  if (!options.threshold) options.threshold = 0;\n  var _options = options,\n      root = _options.root,\n      rootMargin = _options.rootMargin,\n      threshold = _options.threshold;\n  if (!element || !callback) return;\n  var observerId = rootMargin ? threshold.toString() + \"_\" + rootMargin : threshold.toString();\n\n  if (root) {\n    observerId = rootId ? rootId + \"_\" + observerId : null;\n  }\n\n  var observerInstance = observerId ? OBSERVER_MAP.get(observerId) : null;\n\n  if (!observerInstance) {\n    observerInstance = new IntersectionObserver(onChange, options);\n    if (observerId) OBSERVER_MAP.set(observerId, observerInstance);\n  }\n\n  var instance = {\n    callback: callback,\n    visible: false,\n    options: options,\n    observerId: observerId,\n    observer: !observerId ? observerInstance : undefined\n  };\n  INSTANCE_MAP.set(element, instance);\n  observerInstance.observe(element);\n  return instance;\n}\n/**\n * Stop observing an element. If an element is removed from the DOM or otherwise destroyed,\n * make sure to call this method.\n * @param element {HTMLElement}\n */\n\nfunction unobserve(element) {\n  if (!element) return;\n  var instance = INSTANCE_MAP.get(element);\n\n  if (instance) {\n    var observerId = instance.observerId,\n        observer = instance.observer;\n    var observerInstance = observerId ? OBSERVER_MAP.get(observerId) : observer;\n\n    if (observerInstance) {\n      observerInstance.unobserve(element);\n    } // Check if we are still observing any elements with the same threshold.\n\n\n    var itemsLeft = false;\n\n    if (observerId) {\n      INSTANCE_MAP.forEach(function (item, key) {\n        if (item && item.observerId === observerId && key !== element) {\n          itemsLeft = true;\n        }\n      });\n    }\n\n    if (observerInstance && !itemsLeft) {\n      // No more elements to observe for threshold, disconnect observer\n      observerInstance.disconnect();\n      OBSERVER_MAP.delete(observerId);\n    } // Remove reference to element\n\n\n    INSTANCE_MAP.delete(element);\n  }\n}\n\nfunction onChange(changes) {\n  changes.forEach(function (intersection) {\n    var isIntersecting = intersection.isIntersecting,\n        intersectionRatio = intersection.intersectionRatio,\n        target = intersection.target;\n    var instance = INSTANCE_MAP.get(target); // Firefox can report a negative intersectionRatio when scrolling.\n\n    if (instance && intersectionRatio >= 0) {\n      var options = instance.options;\n      var _inView = false;\n\n      if (Array.isArray(options.threshold)) {\n        // If threshold is an array, check if any of them intersects. This just triggers the onChange event multiple times.\n        _inView = options.threshold.some(function (threshold) {\n          return instance.visible ? intersectionRatio > threshold : intersectionRatio >= threshold;\n        });\n      } else if (options.threshold !== undefined) {\n        // Trigger on 0 ratio only when not visible. This is fallback for browsers without isIntersecting support\n        _inView = instance.visible ? intersectionRatio > options.threshold : intersectionRatio >= options.threshold;\n      }\n\n      if (isIntersecting !== undefined) {\n        // If isIntersecting is defined, ensure that the element is actually intersecting.\n        // Otherwise it reports a threshold of 0\n        _inView = _inView && isIntersecting;\n      }\n\n      instance.visible = _inView;\n      instance.callback(_inView, intersectionRatio);\n    }\n  });\n}\n\nfunction useInView(ref, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // $FlowFixMe - useState is not exposed in React Flow lib yet\n  var _React$useState = React.useState(false),\n      isInView = _React$useState[0],\n      setInView = _React$useState[1]; // $FlowFixMe - useEffect is not exposed in React Flow lib yet\n\n\n  React.useEffect(function () {\n    if (ref.current) {\n      observe(ref.current, function (inView) {\n        setInView(inView);\n\n        if (inView && options.triggerOnce) {\n          // If it should only trigger once, unobserve the element after it's inView\n          unobserve(ref.current);\n        }\n      }, {\n        threshold: options.threshold,\n        root: options.root,\n        rootMargin: options.rootMargin\n      }, options.rootId);\n    }\n\n    return function () {\n      unobserve(ref.current);\n    };\n  }, [options.threshold, options.root, options.rootMargin, options.rootId]);\n  return isInView;\n}\n\n/**\n * Monitors scroll, and triggers the children function with updated props\n *\n <InView>\n {({inView, ref}) => (\n   <h1 ref={ref}>{`${inView}`}</h1>\n )}\n </InView>\n */\nvar InView =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InView, _React$Component);\n\n  function InView() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      inView: false,\n      intersectionRatio: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"node\", null);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleNode\", function (node) {\n      if (_this.node) unobserve(_this.node);\n      _this.node = node;\n\n      _this.observeNode();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleChange\", function (inView, intersectionRatio) {\n      _this.setState({\n        inView: inView,\n        intersectionRatio: intersectionRatio\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange(inView, intersectionRatio);\n      }\n    });\n\n    return _this;\n  }\n\n  var _proto = InView.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (true) {\n      if (this.props.hasOwnProperty('render')) {\n        console.warn(\"react-intersection-observer: \\\"render\\\" is deprecated, and should be replaced with \\\"children\\\"\", this.node);\n      }\n\n      invariant(this.node, \"react-intersection-observer: No DOM node found. Make sure you forward \\\"ref\\\" to the root DOM element you want to observe.\");\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // If a IntersectionObserver option changed, reinit the observer\n    if (prevProps.rootMargin !== this.props.rootMargin || prevProps.root !== this.props.root || prevProps.threshold !== this.props.threshold) {\n      unobserve(this.node);\n      this.observeNode();\n    }\n\n    if (prevState.inView !== this.state.inView) {\n      if (this.state.inView && this.props.triggerOnce) {\n        unobserve(this.node);\n        this.node = null;\n      }\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.node) {\n      unobserve(this.node);\n      this.node = null;\n    }\n  };\n\n  _proto.observeNode = function observeNode() {\n    if (!this.node) return;\n    var _this$props = this.props,\n        threshold = _this$props.threshold,\n        root = _this$props.root,\n        rootMargin = _this$props.rootMargin,\n        rootId = _this$props.rootId;\n    observe(this.node, this.handleChange, {\n      threshold: threshold,\n      root: root,\n      rootMargin: rootMargin\n    }, rootId);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        render = _this$props2.render,\n        tag = _this$props2.tag,\n        triggerOnce = _this$props2.triggerOnce,\n        threshold = _this$props2.threshold,\n        root = _this$props2.root,\n        rootId = _this$props2.rootId,\n        rootMargin = _this$props2.rootMargin,\n        props = _objectWithoutPropertiesLoose(_this$props2, [\"children\", \"render\", \"tag\", \"triggerOnce\", \"threshold\", \"root\", \"rootId\", \"rootMargin\"]);\n\n    var _this$state = this.state,\n        inView = _this$state.inView,\n        intersectionRatio = _this$state.intersectionRatio;\n    var renderMethod = children || render;\n\n    if (typeof renderMethod === 'function') {\n      return renderMethod({\n        inView: inView,\n        intersectionRatio: intersectionRatio,\n        ref: this.handleNode\n      });\n    }\n\n    return React.createElement(tag || 'div', _extends({\n      ref: this.handleNode\n    }, props), children);\n  };\n\n  return InView;\n}(React.Component);\n\n_defineProperty(InView, \"defaultProps\", {\n  threshold: 0,\n  triggerOnce: false\n});\n\nexports.InView = InView;\nexports[\"default\"] = InView;\nexports.useInView = useInView;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvbm9kZV9tb2R1bGVzL3JlYWN0LWxhenktaW1hZ2VzL25vZGVfbW9kdWxlcy9yZWFjdC1pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIvZGlzdC9yZWFjdC1pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuY2pzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0QsZ0NBQWdDOztBQUVoQywrQkFBK0IsbUJBQU8sQ0FBQyw4RkFBZ0M7QUFDdkUsb0RBQW9ELG1CQUFPLENBQUMsd0lBQXFEO0FBQ2pILHFDQUFxQyxtQkFBTyxDQUFDLDBHQUFzQztBQUNuRiw2Q0FBNkMsbUJBQU8sQ0FBQywwSEFBOEM7QUFDbkcsc0NBQXNDLG1CQUFPLENBQUMsNEdBQXVDO0FBQ3JGLFlBQVksbUJBQU8sQ0FBQyx3R0FBTztBQUMzQixnQ0FBZ0MsbUJBQU8sQ0FBQyw4REFBVzs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsb0JBQW9CLFVBQVU7QUFDOUIsbUJBQW1CLFFBQVE7QUFDM0IsNkJBQTZCLFFBQVE7QUFDckMsd0JBQXdCLGFBQWE7QUFDckMsOEJBQThCLFFBQVE7QUFDdEMsa0JBQWtCLFFBQVE7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3T0FBd087QUFDeE87O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7O0FBR047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7O0FBRTdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQzs7O0FBR3RDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsRUFBRSxZQUFZO0FBQ2hCLFlBQVksSUFBSSxFQUFFLEdBQUcsT0FBTyxFQUFFO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsd0VBQXdFLGFBQWE7QUFDckY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFFBQVEsSUFBcUM7QUFDN0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsY0FBYztBQUNkLGtCQUFlO0FBQ2YsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90aW9uLXgtZXhhbXBsZS1mdWxsLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW5vdGlvbi14L25vZGVfbW9kdWxlcy9yZWFjdC1sYXp5LWltYWdlcy9ub2RlX21vZHVsZXMvcmVhY3QtaW50ZXJzZWN0aW9uLW9ic2VydmVyL2Rpc3QvcmVhY3QtaW50ZXJzZWN0aW9uLW9ic2VydmVyLmNqcy5qcz9hODFkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChleCkgeyByZXR1cm4gKGV4ICYmICh0eXBlb2YgZXggPT09ICdvYmplY3QnKSAmJiAnZGVmYXVsdCcgaW4gZXgpID8gZXhbJ2RlZmF1bHQnXSA6IGV4OyB9XG5cbnZhciBfZXh0ZW5kcyA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKSk7XG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgPSBfaW50ZXJvcERlZmF1bHQocmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlJykpO1xudmFyIF9pbmhlcml0c0xvb3NlID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNMb29zZScpKTtcbnZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemVkID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkJykpO1xudmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5JykpO1xudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBpbnZhcmlhbnQgPSBfaW50ZXJvcERlZmF1bHQocmVxdWlyZSgnaW52YXJpYW50JykpO1xuXG52YXIgSU5TVEFOQ0VfTUFQID0gbmV3IE1hcCgpO1xudmFyIE9CU0VSVkVSX01BUCA9IG5ldyBNYXAoKTtcbi8qKlxuICogTW9uaXRvciBlbGVtZW50LCBhbmQgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGVsZW1lbnQgYmVjb21lcyB2aXNpYmxlXG4gKiBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnR9XG4gKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBDYWxsZWQgd2l0aCBpblZpZXdcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IEludGVyU2VjdGlvbiBvYnNlcnZlciBvcHRpb25zXG4gKiBAcGFyYW0gb3B0aW9ucy50aHJlc2hvbGQge051bWJlcn0gTnVtYmVyIGJldHdlZW4gMCBhbmQgMSwgaW5kaWNhdGluZyBob3cgbXVjaCBvZiB0aGUgZWxlbWVudCBzaG91bGQgYmUgdmlzaWJsZSBiZWZvcmUgdHJpZ2dlcmluZ1xuICogQHBhcmFtIG9wdGlvbnMucm9vdCB7SFRNTEVsZW1lbnR9IEl0IHNob3VsZCBoYXZlIGEgdW5pcXVlIGlkIG9yIGRhdGEtaW50ZXJzZWN0aW9uLWlkIGluIG9yZGVyIGZvciB0aGUgT2JzZXJ2ZXIgdG8gcmV1c2VkLlxuICogQHBhcmFtIG9wdGlvbnMucm9vdE1hcmdpbiB7U3RyaW5nfSBUaGUgQ1NTIG1hcmdpbiB0byBhcHBseSB0byB0aGUgcm9vdCBlbGVtZW50LlxuICogQHBhcmFtIHJvb3RJZCB7U3RyaW5nfSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHJvb3QgZWxlbWVudCwgdG8gZW5hYmxlIHJldXNpbmcgdGhlIEludGVyc2VjdGlvbk9ic2VydmVyXG4gKi9cblxuZnVuY3Rpb24gb2JzZXJ2ZShlbGVtZW50LCBjYWxsYmFjaywgb3B0aW9ucywgcm9vdElkKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICAvLyBWYWxpZGF0ZSB0aGF0IHRoZSBlbGVtZW50IGlzIG5vdCBiZWluZyB1c2VkIGluIGFub3RoZXIgPE9ic2VydmVyIC8+XG4gIGludmFyaWFudCghSU5TVEFOQ0VfTUFQLmhhcyhlbGVtZW50KSwgXCJyZWFjdC1pbnRlcnNlY3Rpb24tb2JzZXJ2ZXI6IFRyeWluZyB0byBvYnNlcnZlICVzLCBidXQgaXQncyBhbHJlYWR5IGJlaW5nIG9ic2VydmVkIGJ5IGFub3RoZXIgaW5zdGFuY2UuXFxuTWFrZSBzdXJlIHRoZSBgcmVmYCBpcyBvbmx5IHVzZWQgYnkgYSBzaW5nbGUgPE9ic2VydmVyIC8+IGluc3RhbmNlLlxcblxcbiVzXCIsIGVsZW1lbnQpOyAvLyBJbnRlcnNlY3Rpb25PYnNlcnZlciBuZWVkcyBhIHRocmVzaG9sZCB0byB0cmlnZ2VyLCBzbyBzZXQgaXQgdG8gMCBpZiBpdCdzIG5vdCBkZWZpbmVkLlxuICAvLyBNb2RpZnkgdGhlIG9wdGlvbnMgb2JqZWN0LCBzaW5jZSBpdCdzIHVzZWQgaW4gdGhlIG9uQ2hhbmdlIGhhbmRsZXIuXG5cbiAgaWYgKCFvcHRpb25zLnRocmVzaG9sZCkgb3B0aW9ucy50aHJlc2hvbGQgPSAwO1xuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgcm9vdCA9IF9vcHRpb25zLnJvb3QsXG4gICAgICByb290TWFyZ2luID0gX29wdGlvbnMucm9vdE1hcmdpbixcbiAgICAgIHRocmVzaG9sZCA9IF9vcHRpb25zLnRocmVzaG9sZDtcbiAgaWYgKCFlbGVtZW50IHx8ICFjYWxsYmFjaykgcmV0dXJuO1xuICB2YXIgb2JzZXJ2ZXJJZCA9IHJvb3RNYXJnaW4gPyB0aHJlc2hvbGQudG9TdHJpbmcoKSArIFwiX1wiICsgcm9vdE1hcmdpbiA6IHRocmVzaG9sZC50b1N0cmluZygpO1xuXG4gIGlmIChyb290KSB7XG4gICAgb2JzZXJ2ZXJJZCA9IHJvb3RJZCA/IHJvb3RJZCArIFwiX1wiICsgb2JzZXJ2ZXJJZCA6IG51bGw7XG4gIH1cblxuICB2YXIgb2JzZXJ2ZXJJbnN0YW5jZSA9IG9ic2VydmVySWQgPyBPQlNFUlZFUl9NQVAuZ2V0KG9ic2VydmVySWQpIDogbnVsbDtcblxuICBpZiAoIW9ic2VydmVySW5zdGFuY2UpIHtcbiAgICBvYnNlcnZlckluc3RhbmNlID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG9uQ2hhbmdlLCBvcHRpb25zKTtcbiAgICBpZiAob2JzZXJ2ZXJJZCkgT0JTRVJWRVJfTUFQLnNldChvYnNlcnZlcklkLCBvYnNlcnZlckluc3RhbmNlKTtcbiAgfVxuXG4gIHZhciBpbnN0YW5jZSA9IHtcbiAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgdmlzaWJsZTogZmFsc2UsXG4gICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICBvYnNlcnZlcklkOiBvYnNlcnZlcklkLFxuICAgIG9ic2VydmVyOiAhb2JzZXJ2ZXJJZCA/IG9ic2VydmVySW5zdGFuY2UgOiB1bmRlZmluZWRcbiAgfTtcbiAgSU5TVEFOQ0VfTUFQLnNldChlbGVtZW50LCBpbnN0YW5jZSk7XG4gIG9ic2VydmVySW5zdGFuY2Uub2JzZXJ2ZShlbGVtZW50KTtcbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuLyoqXG4gKiBTdG9wIG9ic2VydmluZyBhbiBlbGVtZW50LiBJZiBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIG9yIG90aGVyd2lzZSBkZXN0cm95ZWQsXG4gKiBtYWtlIHN1cmUgdG8gY2FsbCB0aGlzIG1ldGhvZC5cbiAqIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB1bm9ic2VydmUoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgdmFyIGluc3RhbmNlID0gSU5TVEFOQ0VfTUFQLmdldChlbGVtZW50KTtcblxuICBpZiAoaW5zdGFuY2UpIHtcbiAgICB2YXIgb2JzZXJ2ZXJJZCA9IGluc3RhbmNlLm9ic2VydmVySWQsXG4gICAgICAgIG9ic2VydmVyID0gaW5zdGFuY2Uub2JzZXJ2ZXI7XG4gICAgdmFyIG9ic2VydmVySW5zdGFuY2UgPSBvYnNlcnZlcklkID8gT0JTRVJWRVJfTUFQLmdldChvYnNlcnZlcklkKSA6IG9ic2VydmVyO1xuXG4gICAgaWYgKG9ic2VydmVySW5zdGFuY2UpIHtcbiAgICAgIG9ic2VydmVySW5zdGFuY2UudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgIH0gLy8gQ2hlY2sgaWYgd2UgYXJlIHN0aWxsIG9ic2VydmluZyBhbnkgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSB0aHJlc2hvbGQuXG5cblxuICAgIHZhciBpdGVtc0xlZnQgPSBmYWxzZTtcblxuICAgIGlmIChvYnNlcnZlcklkKSB7XG4gICAgICBJTlNUQU5DRV9NQVAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW0ub2JzZXJ2ZXJJZCA9PT0gb2JzZXJ2ZXJJZCAmJiBrZXkgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICBpdGVtc0xlZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob2JzZXJ2ZXJJbnN0YW5jZSAmJiAhaXRlbXNMZWZ0KSB7XG4gICAgICAvLyBObyBtb3JlIGVsZW1lbnRzIHRvIG9ic2VydmUgZm9yIHRocmVzaG9sZCwgZGlzY29ubmVjdCBvYnNlcnZlclxuICAgICAgb2JzZXJ2ZXJJbnN0YW5jZS5kaXNjb25uZWN0KCk7XG4gICAgICBPQlNFUlZFUl9NQVAuZGVsZXRlKG9ic2VydmVySWQpO1xuICAgIH0gLy8gUmVtb3ZlIHJlZmVyZW5jZSB0byBlbGVtZW50XG5cblxuICAgIElOU1RBTkNFX01BUC5kZWxldGUoZWxlbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25DaGFuZ2UoY2hhbmdlcykge1xuICBjaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGludGVyc2VjdGlvbikge1xuICAgIHZhciBpc0ludGVyc2VjdGluZyA9IGludGVyc2VjdGlvbi5pc0ludGVyc2VjdGluZyxcbiAgICAgICAgaW50ZXJzZWN0aW9uUmF0aW8gPSBpbnRlcnNlY3Rpb24uaW50ZXJzZWN0aW9uUmF0aW8sXG4gICAgICAgIHRhcmdldCA9IGludGVyc2VjdGlvbi50YXJnZXQ7XG4gICAgdmFyIGluc3RhbmNlID0gSU5TVEFOQ0VfTUFQLmdldCh0YXJnZXQpOyAvLyBGaXJlZm94IGNhbiByZXBvcnQgYSBuZWdhdGl2ZSBpbnRlcnNlY3Rpb25SYXRpbyB3aGVuIHNjcm9sbGluZy5cblxuICAgIGlmIChpbnN0YW5jZSAmJiBpbnRlcnNlY3Rpb25SYXRpbyA+PSAwKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGluc3RhbmNlLm9wdGlvbnM7XG4gICAgICB2YXIgX2luVmlldyA9IGZhbHNlO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnRocmVzaG9sZCkpIHtcbiAgICAgICAgLy8gSWYgdGhyZXNob2xkIGlzIGFuIGFycmF5LCBjaGVjayBpZiBhbnkgb2YgdGhlbSBpbnRlcnNlY3RzLiBUaGlzIGp1c3QgdHJpZ2dlcnMgdGhlIG9uQ2hhbmdlIGV2ZW50IG11bHRpcGxlIHRpbWVzLlxuICAgICAgICBfaW5WaWV3ID0gb3B0aW9ucy50aHJlc2hvbGQuc29tZShmdW5jdGlvbiAodGhyZXNob2xkKSB7XG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnZpc2libGUgPyBpbnRlcnNlY3Rpb25SYXRpbyA+IHRocmVzaG9sZCA6IGludGVyc2VjdGlvblJhdGlvID49IHRocmVzaG9sZDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudGhyZXNob2xkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciBvbiAwIHJhdGlvIG9ubHkgd2hlbiBub3QgdmlzaWJsZS4gVGhpcyBpcyBmYWxsYmFjayBmb3IgYnJvd3NlcnMgd2l0aG91dCBpc0ludGVyc2VjdGluZyBzdXBwb3J0XG4gICAgICAgIF9pblZpZXcgPSBpbnN0YW5jZS52aXNpYmxlID8gaW50ZXJzZWN0aW9uUmF0aW8gPiBvcHRpb25zLnRocmVzaG9sZCA6IGludGVyc2VjdGlvblJhdGlvID49IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNJbnRlcnNlY3RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBJZiBpc0ludGVyc2VjdGluZyBpcyBkZWZpbmVkLCBlbnN1cmUgdGhhdCB0aGUgZWxlbWVudCBpcyBhY3R1YWxseSBpbnRlcnNlY3RpbmcuXG4gICAgICAgIC8vIE90aGVyd2lzZSBpdCByZXBvcnRzIGEgdGhyZXNob2xkIG9mIDBcbiAgICAgICAgX2luVmlldyA9IF9pblZpZXcgJiYgaXNJbnRlcnNlY3Rpbmc7XG4gICAgICB9XG5cbiAgICAgIGluc3RhbmNlLnZpc2libGUgPSBfaW5WaWV3O1xuICAgICAgaW5zdGFuY2UuY2FsbGJhY2soX2luVmlldywgaW50ZXJzZWN0aW9uUmF0aW8pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZUluVmlldyhyZWYsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIC8vICRGbG93Rml4TWUgLSB1c2VTdGF0ZSBpcyBub3QgZXhwb3NlZCBpbiBSZWFjdCBGbG93IGxpYiB5ZXRcbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIGlzSW5WaWV3ID0gX1JlYWN0JHVzZVN0YXRlWzBdLFxuICAgICAgc2V0SW5WaWV3ID0gX1JlYWN0JHVzZVN0YXRlWzFdOyAvLyAkRmxvd0ZpeE1lIC0gdXNlRWZmZWN0IGlzIG5vdCBleHBvc2VkIGluIFJlYWN0IEZsb3cgbGliIHlldFxuXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgIG9ic2VydmUocmVmLmN1cnJlbnQsIGZ1bmN0aW9uIChpblZpZXcpIHtcbiAgICAgICAgc2V0SW5WaWV3KGluVmlldyk7XG5cbiAgICAgICAgaWYgKGluVmlldyAmJiBvcHRpb25zLnRyaWdnZXJPbmNlKSB7XG4gICAgICAgICAgLy8gSWYgaXQgc2hvdWxkIG9ubHkgdHJpZ2dlciBvbmNlLCB1bm9ic2VydmUgdGhlIGVsZW1lbnQgYWZ0ZXIgaXQncyBpblZpZXdcbiAgICAgICAgICB1bm9ic2VydmUocmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIHRocmVzaG9sZDogb3B0aW9ucy50aHJlc2hvbGQsXG4gICAgICAgIHJvb3Q6IG9wdGlvbnMucm9vdCxcbiAgICAgICAgcm9vdE1hcmdpbjogb3B0aW9ucy5yb290TWFyZ2luXG4gICAgICB9LCBvcHRpb25zLnJvb3RJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVub2JzZXJ2ZShyZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW29wdGlvbnMudGhyZXNob2xkLCBvcHRpb25zLnJvb3QsIG9wdGlvbnMucm9vdE1hcmdpbiwgb3B0aW9ucy5yb290SWRdKTtcbiAgcmV0dXJuIGlzSW5WaWV3O1xufVxuXG4vKipcbiAqIE1vbml0b3JzIHNjcm9sbCwgYW5kIHRyaWdnZXJzIHRoZSBjaGlsZHJlbiBmdW5jdGlvbiB3aXRoIHVwZGF0ZWQgcHJvcHNcbiAqXG4gPEluVmlldz5cbiB7KHtpblZpZXcsIHJlZn0pID0+IChcbiAgIDxoMSByZWY9e3JlZn0+e2Ake2luVmlld31gfTwvaDE+XG4gKX1cbiA8L0luVmlldz5cbiAqL1xudmFyIEluVmlldyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShJblZpZXcsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEluVmlldygpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCwgW3RoaXNdLmNvbmNhdChhcmdzKSkgfHwgdGhpcztcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJzdGF0ZVwiLCB7XG4gICAgICBpblZpZXc6IGZhbHNlLFxuICAgICAgaW50ZXJzZWN0aW9uUmF0aW86IDBcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJub2RlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBcImhhbmRsZU5vZGVcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChfdGhpcy5ub2RlKSB1bm9ic2VydmUoX3RoaXMubm9kZSk7XG4gICAgICBfdGhpcy5ub2RlID0gbm9kZTtcblxuICAgICAgX3RoaXMub2JzZXJ2ZU5vZGUoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgXCJoYW5kbGVDaGFuZ2VcIiwgZnVuY3Rpb24gKGluVmlldywgaW50ZXJzZWN0aW9uUmF0aW8pIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaW5WaWV3OiBpblZpZXcsXG4gICAgICAgIGludGVyc2VjdGlvblJhdGlvOiBpbnRlcnNlY3Rpb25SYXRpb1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZShpblZpZXcsIGludGVyc2VjdGlvblJhdGlvKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBJblZpZXcucHJvdG90eXBlO1xuXG4gIF9wcm90by5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oYXNPd25Qcm9wZXJ0eSgncmVuZGVyJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwicmVhY3QtaW50ZXJzZWN0aW9uLW9ic2VydmVyOiBcXFwicmVuZGVyXFxcIiBpcyBkZXByZWNhdGVkLCBhbmQgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggXFxcImNoaWxkcmVuXFxcIlwiLCB0aGlzLm5vZGUpO1xuICAgICAgfVxuXG4gICAgICBpbnZhcmlhbnQodGhpcy5ub2RlLCBcInJlYWN0LWludGVyc2VjdGlvbi1vYnNlcnZlcjogTm8gRE9NIG5vZGUgZm91bmQuIE1ha2Ugc3VyZSB5b3UgZm9yd2FyZCBcXFwicmVmXFxcIiB0byB0aGUgcm9vdCBET00gZWxlbWVudCB5b3Ugd2FudCB0byBvYnNlcnZlLlwiKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgIC8vIElmIGEgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgb3B0aW9uIGNoYW5nZWQsIHJlaW5pdCB0aGUgb2JzZXJ2ZXJcbiAgICBpZiAocHJldlByb3BzLnJvb3RNYXJnaW4gIT09IHRoaXMucHJvcHMucm9vdE1hcmdpbiB8fCBwcmV2UHJvcHMucm9vdCAhPT0gdGhpcy5wcm9wcy5yb290IHx8IHByZXZQcm9wcy50aHJlc2hvbGQgIT09IHRoaXMucHJvcHMudGhyZXNob2xkKSB7XG4gICAgICB1bm9ic2VydmUodGhpcy5ub2RlKTtcbiAgICAgIHRoaXMub2JzZXJ2ZU5vZGUoKTtcbiAgICB9XG5cbiAgICBpZiAocHJldlN0YXRlLmluVmlldyAhPT0gdGhpcy5zdGF0ZS5pblZpZXcpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmluVmlldyAmJiB0aGlzLnByb3BzLnRyaWdnZXJPbmNlKSB7XG4gICAgICAgIHVub2JzZXJ2ZSh0aGlzLm5vZGUpO1xuICAgICAgICB0aGlzLm5vZGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5ub2RlKSB7XG4gICAgICB1bm9ic2VydmUodGhpcy5ub2RlKTtcbiAgICAgIHRoaXMubm9kZSA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5vYnNlcnZlTm9kZSA9IGZ1bmN0aW9uIG9ic2VydmVOb2RlKCkge1xuICAgIGlmICghdGhpcy5ub2RlKSByZXR1cm47XG4gICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgdGhyZXNob2xkID0gX3RoaXMkcHJvcHMudGhyZXNob2xkLFxuICAgICAgICByb290ID0gX3RoaXMkcHJvcHMucm9vdCxcbiAgICAgICAgcm9vdE1hcmdpbiA9IF90aGlzJHByb3BzLnJvb3RNYXJnaW4sXG4gICAgICAgIHJvb3RJZCA9IF90aGlzJHByb3BzLnJvb3RJZDtcbiAgICBvYnNlcnZlKHRoaXMubm9kZSwgdGhpcy5oYW5kbGVDaGFuZ2UsIHtcbiAgICAgIHRocmVzaG9sZDogdGhyZXNob2xkLFxuICAgICAgcm9vdDogcm9vdCxcbiAgICAgIHJvb3RNYXJnaW46IHJvb3RNYXJnaW5cbiAgICB9LCByb290SWQpO1xuICB9O1xuXG4gIF9wcm90by5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMyLmNoaWxkcmVuLFxuICAgICAgICByZW5kZXIgPSBfdGhpcyRwcm9wczIucmVuZGVyLFxuICAgICAgICB0YWcgPSBfdGhpcyRwcm9wczIudGFnLFxuICAgICAgICB0cmlnZ2VyT25jZSA9IF90aGlzJHByb3BzMi50cmlnZ2VyT25jZSxcbiAgICAgICAgdGhyZXNob2xkID0gX3RoaXMkcHJvcHMyLnRocmVzaG9sZCxcbiAgICAgICAgcm9vdCA9IF90aGlzJHByb3BzMi5yb290LFxuICAgICAgICByb290SWQgPSBfdGhpcyRwcm9wczIucm9vdElkLFxuICAgICAgICByb290TWFyZ2luID0gX3RoaXMkcHJvcHMyLnJvb3RNYXJnaW4sXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3RoaXMkcHJvcHMyLCBbXCJjaGlsZHJlblwiLCBcInJlbmRlclwiLCBcInRhZ1wiLCBcInRyaWdnZXJPbmNlXCIsIFwidGhyZXNob2xkXCIsIFwicm9vdFwiLCBcInJvb3RJZFwiLCBcInJvb3RNYXJnaW5cIl0pO1xuXG4gICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgaW5WaWV3ID0gX3RoaXMkc3RhdGUuaW5WaWV3LFxuICAgICAgICBpbnRlcnNlY3Rpb25SYXRpbyA9IF90aGlzJHN0YXRlLmludGVyc2VjdGlvblJhdGlvO1xuICAgIHZhciByZW5kZXJNZXRob2QgPSBjaGlsZHJlbiB8fCByZW5kZXI7XG5cbiAgICBpZiAodHlwZW9mIHJlbmRlck1ldGhvZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHJlbmRlck1ldGhvZCh7XG4gICAgICAgIGluVmlldzogaW5WaWV3LFxuICAgICAgICBpbnRlcnNlY3Rpb25SYXRpbzogaW50ZXJzZWN0aW9uUmF0aW8sXG4gICAgICAgIHJlZjogdGhpcy5oYW5kbGVOb2RlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCh0YWcgfHwgJ2RpdicsIF9leHRlbmRzKHtcbiAgICAgIHJlZjogdGhpcy5oYW5kbGVOb2RlXG4gICAgfSwgcHJvcHMpLCBjaGlsZHJlbik7XG4gIH07XG5cbiAgcmV0dXJuIEluVmlldztcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KEluVmlldywgXCJkZWZhdWx0UHJvcHNcIiwge1xuICB0aHJlc2hvbGQ6IDAsXG4gIHRyaWdnZXJPbmNlOiBmYWxzZVxufSk7XG5cbmV4cG9ydHMuSW5WaWV3ID0gSW5WaWV3O1xuZXhwb3J0cy5kZWZhdWx0ID0gSW5WaWV3O1xuZXhwb3J0cy51c2VJblZpZXcgPSB1c2VJblZpZXc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/node_modules/react-intersection-observer/dist/react-intersection-observer.cjs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/build/index.js":
/*!****************************************************!*\
  !*** ./node_modules/react-notion-x/build/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Breadcrumbs: () => (/* binding */ Breadcrumbs),\n/* harmony export */   Header: () => (/* binding */ Header),\n/* harmony export */   NotionContextConsumer: () => (/* binding */ NotionContextConsumer),\n/* harmony export */   NotionContextProvider: () => (/* binding */ NotionContextProvider),\n/* harmony export */   NotionRenderer: () => (/* binding */ NotionRenderer),\n/* harmony export */   PageIcon: () => (/* binding */ PageIcon),\n/* harmony export */   PageIconImpl: () => (/* binding */ PageIconImpl),\n/* harmony export */   Search: () => (/* binding */ Search),\n/* harmony export */   Text: () => (/* binding */ Text),\n/* harmony export */   cs: () => (/* binding */ cs),\n/* harmony export */   defaultMapImageUrl: () => (/* binding */ defaultMapImageUrl),\n/* harmony export */   defaultMapPageUrl: () => (/* binding */ defaultMapPageUrl),\n/* harmony export */   dummyLink: () => (/* binding */ dummyLink),\n/* harmony export */   formatDate: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatDate),\n/* harmony export */   formatNotionDateTime: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatNotionDateTime),\n/* harmony export */   getHashFragmentValue: () => (/* binding */ getHashFragmentValue),\n/* harmony export */   getListNumber: () => (/* binding */ getListNumber),\n/* harmony export */   getYoutubeId: () => (/* binding */ getYoutubeId),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isUrl: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   useNotionContext: () => (/* binding */ useNotionContext)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _fisch0920_medium_zoom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @fisch0920/medium-zoom */ \"(ssr)/./node_modules/@fisch0920/medium-zoom/dist/medium-zoom.min.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/notion-utils/build/index.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/is-url-superb/index.js\");\n/* harmony import */ var react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-hotkeys-hook */ \"(ssr)/./node_modules/react-hotkeys-hook/dist/index.js\");\n/* harmony import */ var react_lazy_images__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-lazy-images */ \"(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js\");\n/* harmony import */ var react_image__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-image */ \"(ssr)/./node_modules/react-image/cjs/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-fast-compare */ \"(ssr)/./node_modules/react-fast-compare/index.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/lodash.throttle/index.js\nvar require_lodash = __commonJS({\n  \"../../node_modules/lodash.throttle/index.js\"(exports, module) {\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var NAN = 0 / 0;\n    var symbolTag = \"[object Symbol]\";\n    var reTrim = /^\\s+|\\s+$/g;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var objectProto = Object.prototype;\n    var objectToString = objectProto.toString;\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    var now = function() {\n      return root.Date.now();\n    };\n    function debounce(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, result2 = wait - timeSinceLastCall;\n        return maxing ? nativeMin(result2, maxWait - timeSinceLastInvoke) : result2;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    function throttle3(func, wait, options) {\n      var leading = true, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = \"leading\" in options ? !!options.leading : leading;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        \"leading\": leading,\n        \"maxWait\": wait,\n        \"trailing\": trailing\n      });\n    }\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == \"object\" || type == \"function\");\n    }\n    function isObjectLike(value) {\n      return !!value && typeof value == \"object\";\n    }\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && objectToString.call(value) == symbolTag;\n    }\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, \"\");\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module.exports = throttle3;\n  }\n});\n\n// src/renderer.tsx\n\n\n\n// src/block.tsx\n\n\n\n// src/components/asset-wrapper.tsx\n\n\n\n// src/utils.ts\n\n\n// src/map-image-url.ts\nvar defaultMapImageUrl = (url, block) => {\n  if (!url) {\n    return null;\n  }\n  if (url.startsWith(\"data:\")) {\n    return url;\n  }\n  if (url.startsWith(\"https://images.unsplash.com\")) {\n    return url;\n  }\n  try {\n    const u = new URL(url);\n    if (u.pathname.startsWith(\"/secure.notion-static.com\") && u.hostname.endsWith(\".amazonaws.com\")) {\n      if (u.searchParams.has(\"X-Amz-Credential\") && u.searchParams.has(\"X-Amz-Signature\") && u.searchParams.has(\"X-Amz-Algorithm\")) {\n        return url;\n      }\n    }\n  } catch (e) {\n  }\n  if (url.startsWith(\"/images\")) {\n    url = `https://www.notion.so${url}`;\n  }\n  url = `https://www.notion.so${url.startsWith(\"/image\") ? url : `/image/${encodeURIComponent(url)}`}`;\n  const notionImageUrlV2 = new URL(url);\n  let table = block.parent_table === \"space\" ? \"block\" : block.parent_table;\n  if (table === \"collection\" || table === \"team\") {\n    table = \"block\";\n  }\n  notionImageUrlV2.searchParams.set(\"table\", table);\n  notionImageUrlV2.searchParams.set(\"id\", block.id);\n  notionImageUrlV2.searchParams.set(\"cache\", \"v2\");\n  url = notionImageUrlV2.toString();\n  return url;\n};\n\n// src/map-page-url.ts\nvar defaultMapPageUrl = (rootPageId) => (pageId) => {\n  pageId = (pageId || \"\").replace(/-/g, \"\");\n  if (rootPageId && pageId === rootPageId) {\n    return \"/\";\n  } else {\n    return `/${pageId}`;\n  }\n};\n\n// src/utils.ts\nvar cs = (...classes) => classes.filter((a) => !!a).join(\" \");\nvar groupBlockContent = (blockMap) => {\n  const output = [];\n  let lastType = void 0;\n  let index = -1;\n  Object.keys(blockMap).forEach((id) => {\n    var _a, _b;\n    const blockValue = (_a = blockMap[id]) == null ? void 0 : _a.value;\n    if (blockValue) {\n      (_b = blockValue.content) == null ? void 0 : _b.forEach((blockId) => {\n        var _a2, _b2;\n        const blockType = (_b2 = (_a2 = blockMap[blockId]) == null ? void 0 : _a2.value) == null ? void 0 : _b2.type;\n        if (blockType && blockType !== lastType) {\n          index++;\n          lastType = blockType;\n          output[index] = [];\n        }\n        if (index > -1) {\n          output[index].push(blockId);\n        }\n      });\n    }\n    lastType = void 0;\n  });\n  return output;\n};\nvar getListNumber = (blockId, blockMap) => {\n  const groups = groupBlockContent(blockMap);\n  const group = groups.find((g) => g.includes(blockId));\n  if (!group) {\n    return;\n  }\n  return group.indexOf(blockId) + 1;\n};\nvar getHashFragmentValue = (url) => {\n  return url.includes(\"#\") ? url.replace(/^.+(#.+)$/, \"$1\") : \"\";\n};\nvar isBrowser = typeof window !== \"undefined\";\nvar youtubeDomains = /* @__PURE__ */ new Set([\n  \"youtu.be\",\n  \"youtube.com\",\n  \"www.youtube.com\",\n  \"youtube-nocookie.com\",\n  \"www.youtube-nocookie.com\"\n]);\nvar getYoutubeId = (url) => {\n  try {\n    const { hostname } = new URL(url);\n    if (!youtubeDomains.has(hostname)) {\n      return null;\n    }\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/i;\n    const match = url.match(regExp);\n    if (match && match[2].length == 11) {\n      return match[2];\n    }\n  } catch (e) {\n  }\n  return null;\n};\n\n// src/components/asset.tsx\n\n\n\n// src/context.tsx\n\n\n// src/components/checkbox.tsx\n\n\n// src/icons/check.tsx\n\nfunction SvgCheck(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M5.5 12L14 3.5 12.5 2l-7 7-4-4.003L0 6.499z\"\n  }));\n}\nvar check_default = SvgCheck;\n\n// src/components/checkbox.tsx\nvar Checkbox = ({ isChecked }) => {\n  let content = null;\n  if (isChecked) {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-checked\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(check_default, null));\n  } else {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-unchecked\"\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-property notion-property-checkbox\"\n  }, content);\n};\n\n// src/components/header.tsx\n\n\n\n\n// src/icons/search-icon.tsx\n\nvar SearchIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    className: cs(\"notion-icon\", className),\n    viewBox: \"0 0 17 17\"\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M6.78027 13.6729C8.24805 13.6729 9.60156 13.1982 10.709 12.4072L14.875 16.5732C15.0684 16.7666 15.3232 16.8633 15.5957 16.8633C16.167 16.8633 16.5713 16.4238 16.5713 15.8613C16.5713 15.5977 16.4834 15.3516 16.29 15.1582L12.1504 11.0098C13.0205 9.86719 13.5391 8.45215 13.5391 6.91406C13.5391 3.19629 10.498 0.155273 6.78027 0.155273C3.0625 0.155273 0.0214844 3.19629 0.0214844 6.91406C0.0214844 10.6318 3.0625 13.6729 6.78027 13.6729ZM6.78027 12.2139C3.87988 12.2139 1.48047 9.81445 1.48047 6.91406C1.48047 4.01367 3.87988 1.61426 6.78027 1.61426C9.68066 1.61426 12.0801 4.01367 12.0801 6.91406C12.0801 9.81445 9.68066 12.2139 6.78027 12.2139Z\"\n  }));\n};\n\n// src/components/page-icon.tsx\n\n\n\n// src/icons/default-page-icon.tsx\n\nvar DefaultPageIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 30 30\",\n    width: \"16\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\"\n  }));\n};\n\n// src/components/lazy-image.tsx\n\n\n\nvar LazyImage = (_a) => {\n  var _b = _a, {\n    src,\n    alt,\n    className,\n    style,\n    zoomable = false,\n    priority = false,\n    height\n  } = _b, rest = __objRest(_b, [\n    \"src\",\n    \"alt\",\n    \"className\",\n    \"style\",\n    \"zoomable\",\n    \"priority\",\n    \"height\"\n  ]);\n  var _a2, _b2, _c;\n  const { recordMap, zoom, previewImages, forceCustomImages, components } = useNotionContext();\n  const zoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(zoom ? zoom.clone() : null);\n  const previewImage = previewImages ? (_c = (_a2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _a2[src]) != null ? _c : (_b2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _b2[(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.normalizeUrl)(src)] : null;\n  const onLoad = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (zoomable && (e.target.src || e.target.srcset)) {\n        if (zoomRef.current) {\n          ;\n          zoomRef.current.attach(e.target);\n        }\n      }\n    },\n    [zoomRef, zoomable]\n  );\n  const attachZoom = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (image) => {\n      if (zoomRef.current && image) {\n        ;\n        zoomRef.current.attach(image);\n      }\n    },\n    [zoomRef]\n  );\n  const attachZoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => zoomable ? attachZoom : void 0,\n    [zoomable, attachZoom]\n  );\n  if (previewImage) {\n    const aspectRatio = previewImage.originalHeight / previewImage.originalWidth;\n    if (components.Image) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        style,\n        className,\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        blurDataURL: previewImage.dataURIBase64,\n        placeholder: \"blur\",\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_lazy_images__WEBPACK_IMPORTED_MODULE_2__.LazyImageFull, __spreadProps(__spreadValues({\n      src\n    }, rest), {\n      experimentalDecode: true\n    }), ({ imageState, ref }) => {\n      const isLoaded = imageState === react_lazy_images__WEBPACK_IMPORTED_MODULE_2__.ImageState.LoadSuccess;\n      const wrapperStyle = {\n        width: \"100%\"\n      };\n      const imgStyle = {};\n      if (height) {\n        wrapperStyle.height = height;\n      } else {\n        imgStyle.position = \"absolute\";\n        wrapperStyle.paddingBottom = `${aspectRatio * 100}%`;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"lazy-image-wrapper\",\n          isLoaded && \"lazy-image-loaded\",\n          className\n        ),\n        style: wrapperStyle\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-preview\",\n        src: previewImage.dataURIBase64,\n        alt,\n        ref,\n        style,\n        decoding: \"async\"\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-real\",\n        src,\n        alt,\n        ref: attachZoomRef,\n        style: __spreadValues(__spreadValues({}, style), imgStyle),\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        decoding: \"async\",\n        loading: \"lazy\"\n      }));\n    });\n  } else {\n    if (components.Image && forceCustomImages) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        className,\n        style,\n        width: null,\n        height: height || null,\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({\n      className,\n      style,\n      src,\n      alt,\n      ref: attachZoomRef,\n      loading: \"lazy\",\n      decoding: \"async\"\n    }, rest));\n  }\n};\n\n// src/components/page-icon.tsx\nvar isIconBlock = (value) => {\n  return value.type === \"page\" || value.type === \"callout\" || value.type === \"collection_view\" || value.type === \"collection_view_page\";\n};\nvar PageIconImpl = ({\n  block,\n  className,\n  inline = true,\n  hideDefaultIcon = false,\n  defaultIcon\n}) => {\n  var _a;\n  const { mapImageUrl, recordMap, darkMode } = useNotionContext();\n  let isImage = false;\n  let content = null;\n  if (isIconBlock(block)) {\n    const icon = ((_a = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockIcon)(block, recordMap)) == null ? void 0 : _a.trim()) || defaultIcon;\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockTitle)(block, recordMap);\n    if (icon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(icon)) {\n      const url = mapImageUrl(icon, block);\n      isImage = true;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (icon && icon.startsWith(\"/icons/\")) {\n      const url = \"https://www.notion.so\" + icon + \"?mode=\" + (darkMode ? \"dark\" : \"light\");\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (!icon) {\n      if (!hideDefaultIcon) {\n        isImage = true;\n        content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultPageIcon, {\n          className: cs(className, \"notion-page-icon\"),\n          alt: title ? title : \"page icon\"\n        });\n      }\n    } else {\n      isImage = false;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: cs(className, \"notion-page-icon\"),\n        role: \"img\",\n        \"aria-label\": icon\n      }, icon);\n    }\n  }\n  if (!content) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      inline ? \"notion-page-icon-inline\" : \"notion-page-icon-hero\",\n      isImage ? \"notion-page-icon-image\" : \"notion-page-icon-span\"\n    )\n  }, content);\n};\nvar PageIcon = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageIconImpl);\n\n// src/components/search-dialog.tsx\nvar import_lodash = __toESM(require_lodash(), 1);\n\n\n\n// src/icons/clear-icon.tsx\n\nvar ClearIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 30 30\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M15,0C6.716,0,0,6.716,0,15s6.716,15,15,15s15-6.716,15-15S23.284,0,15,0z M22,20.6L20.6,22L15,16.4L9.4,22L8,20.6l5.6-5.6 L8,9.4L9.4,8l5.6,5.6L20.6,8L22,9.4L16.4,15L22,20.6z\"\n  }));\n};\n\n// src/icons/loading-icon.tsx\n\nvar LoadingIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 24 24\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"defs\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"linearGradient\", {\n    x1: \"28.1542969%\",\n    y1: \"63.7402344%\",\n    x2: \"74.6289062%\",\n    y2: \"17.7832031%\",\n    id: \"linearGradient-1\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 1)\",\n    offset: \"0%\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 0)\",\n    stopOpacity: \"0\",\n    offset: \"100%\"\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(-236.000000, -286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(238.000000, 286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"circle\", {\n    id: \"Oval-2\",\n    stroke: \"url(#linearGradient-1)\",\n    strokeWidth: \"4\",\n    cx: \"10\",\n    cy: \"12\",\n    r: \"10\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M10,2 C4.4771525,2 0,6.4771525 0,12\",\n    id: \"Oval-2\",\n    stroke: \"rgba(164, 164, 164, 1)\",\n    strokeWidth: \"4\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", {\n    id: \"Rectangle-1\",\n    fill: \"rgba(164, 164, 164, 1)\",\n    x: \"8\",\n    y: \"0\",\n    width: \"4\",\n    height: \"4\",\n    rx: \"8\"\n  })))));\n};\n\n// src/components/page-title.tsx\n\n\n\n// src/components/text.tsx\n\n\n\n// src/components/eoi.tsx\n\n\n// src/icons/type-github.tsx\n\nfunction SvgTypeGitHub(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 260 260\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n    fill: \"#161614\"\n  })));\n}\nvar type_github_default = SvgTypeGitHub;\n\n// src/components/eoi.tsx\nvar EOI = ({ block, inline, className }) => {\n  var _a, _b, _c;\n  const { components } = useNotionContext();\n  const { original_url, attributes, domain } = (block == null ? void 0 : block.format) || {};\n  if (!original_url || !attributes) {\n    return null;\n  }\n  const title = (_a = attributes.find((attr) => attr.id === \"title\")) == null ? void 0 : _a.values[0];\n  let owner = (_b = attributes.find((attr) => attr.id === \"owner\")) == null ? void 0 : _b.values[0];\n  const lastUpdatedAt = (_c = attributes.find((attr) => attr.id === \"updated_at\")) == null ? void 0 : _c.values[0];\n  const lastUpdated = lastUpdatedAt ? (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatNotionDateTime)(lastUpdatedAt) : null;\n  let externalImage;\n  switch (domain) {\n    case \"github.com\":\n      externalImage = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(type_github_default, null);\n      if (owner) {\n        const parts = owner.split(\"/\");\n        owner = parts[parts.length - 1];\n      }\n      break;\n    default:\n      if (true) {\n        console.log(\n          `Unsupported external_object_instance domain \"${domain}\"`,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: original_url,\n    className: cs(\n      \"notion-external\",\n      inline ? \"notion-external-mention\" : \"notion-external-block notion-row\",\n      className\n    )\n  }, externalImage && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-image\"\n  }, externalImage), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-description\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-title\"\n  }, title), (owner || lastUpdated) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-subtitle\"\n  }, owner && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, owner), owner && lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \" \\u2022 \"), lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \"Updated \", lastUpdated))));\n};\n\n// src/components/graceful-image.tsx\n\n\nvar GracefulImage = (props) => {\n  if (isBrowser) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_image__WEBPACK_IMPORTED_MODULE_5__.Img, __spreadValues({}, props));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({}, props));\n  }\n};\n\n// src/components/text.tsx\nvar Text = ({ value, block, linkProps, linkProtocol }) => {\n  const { components, recordMap, mapPageUrl, mapImageUrl, rootDomain } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, value == null ? void 0 : value.map(([text, decorations], index) => {\n    if (!decorations) {\n      if (text === \",\") {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n          key: index,\n          style: { padding: \"0.5em\" }\n        });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          key: index\n        }, text);\n      }\n    }\n    const formatted = decorations.reduce(\n      (element, decorator) => {\n        var _a, _b, _c, _d, _e;\n        switch (decorator[0]) {\n          case \"p\": {\n            const blockId = decorator[1];\n            const linkedBlock = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n            if (!linkedBlock) {\n              console.log('\"p\" missing block', blockId);\n              return null;\n            }\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n              className: \"notion-link\",\n              href: mapPageUrl(blockId)\n            }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n              block: linkedBlock\n            }));\n          }\n          case \"\\u2023\": {\n            const linkType = decorator[1][0];\n            const id = decorator[1][1];\n            switch (linkType) {\n              case \"u\": {\n                const user = (_b = recordMap.notion_user[id]) == null ? void 0 : _b.value;\n                if (!user) {\n                  console.log('\"\\u2023\" missing user', id);\n                  return null;\n                }\n                const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n                  className: \"notion-user\",\n                  src: mapImageUrl(user.profile_photo, block),\n                  alt: name\n                });\n              }\n              default: {\n                const linkedBlock = (_c = recordMap.block[id]) == null ? void 0 : _c.value;\n                if (!linkedBlock) {\n                  console.log('\"\\u2023\" missing block', linkType, id);\n                  return null;\n                }\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadProps(__spreadValues({\n                  className: \"notion-link\",\n                  href: mapPageUrl(id)\n                }, linkProps), {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n                  block: linkedBlock\n                }));\n              }\n            }\n          }\n          case \"h\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: `notion-${decorator[1]}`\n            }, element);\n          case \"c\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"code\", {\n              className: \"notion-inline-code\"\n            }, element);\n          case \"b\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"b\", null, element);\n          case \"i\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"em\", null, element);\n          case \"s\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"s\", null, element);\n          case \"_\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: \"notion-inline-underscore\"\n            }, element);\n          case \"e\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Equation, {\n              math: decorator[1],\n              inline: true\n            });\n          case \"m\":\n            return element;\n          case \"a\": {\n            const v = decorator[1];\n            const pathname = v.substr(1);\n            const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.parsePageId)(pathname, { uuid: true });\n            if ((v[0] === \"/\" || v.includes(rootDomain)) && id) {\n              const href = v.includes(rootDomain) ? v : `${mapPageUrl(id)}${getHashFragmentValue(v)}`;\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadValues({\n                className: \"notion-link\",\n                href\n              }, linkProps), element);\n            } else {\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, __spreadValues({\n                className: \"notion-link\",\n                href: linkProtocol ? `${linkProtocol}:${decorator[1]}` : decorator[1]\n              }, linkProps), element);\n            }\n          }\n          case \"d\": {\n            const v = decorator[1];\n            const type = v == null ? void 0 : v.type;\n            if (type === \"date\") {\n              const startDate = v.start_date;\n              return (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatDate)(startDate);\n            } else if (type === \"daterange\") {\n              const startDate = v.start_date;\n              const endDate = v.end_date;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatDate)(startDate)} \\u2192 ${(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.formatDate)(endDate)}`;\n            } else {\n              return element;\n            }\n          }\n          case \"u\": {\n            const userId = decorator[1];\n            const user = (_d = recordMap.notion_user[userId]) == null ? void 0 : _d.value;\n            if (!user) {\n              console.log(\"missing user\", userId);\n              return null;\n            }\n            const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n              className: \"notion-user\",\n              src: mapImageUrl(user.profile_photo, block),\n              alt: name\n            });\n          }\n          case \"eoi\": {\n            const blockId = decorator[1];\n            const externalObjectInstance = (_e = recordMap.block[blockId]) == null ? void 0 : _e.value;\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EOI, {\n              block: externalObjectInstance,\n              inline: true\n            });\n          }\n          default:\n            if (true) {\n              console.log(\"unsupported text format\", decorator);\n            }\n            return element;\n        }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, text)\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: index\n    }, formatted);\n  }));\n};\n\n// src/components/page-title.tsx\nvar PageTitleImpl = (_a) => {\n  var _b = _a, { block, className, defaultIcon } = _b, rest = __objRest(_b, [\"block\", \"className\", \"defaultIcon\"]);\n  var _a2, _b2;\n  const { recordMap } = useNotionContext();\n  if (!block)\n    return null;\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockTitle)(block, recordMap);\n    if (!title) {\n      return null;\n    }\n    const titleDecoration = [[title]];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n      className: cs(\"notion-page-title\", className)\n    }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      block,\n      defaultIcon,\n      className: \"notion-page-title-icon\"\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-page-title-text\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n      value: titleDecoration,\n      block\n    })));\n  }\n  if (!((_a2 = block.properties) == null ? void 0 : _a2.title)) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n    className: cs(\"notion-page-title\", className)\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n    block,\n    defaultIcon,\n    className: \"notion-page-title-icon\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-page-title-text\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: (_b2 = block.properties) == null ? void 0 : _b2.title,\n    block\n  })));\n};\nvar PageTitle = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageTitleImpl);\n\n// src/components/search-dialog.tsx\nvar SearchDialog = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      query: \"\",\n      searchResult: null,\n      searchError: null\n    };\n    this._onAfterOpen = () => {\n      if (this._inputRef.current) {\n        this._inputRef.current.focus();\n      }\n    };\n    this._onChangeQuery = (e) => {\n      const query = e.target.value;\n      this.setState({ query });\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      } else {\n        this._search();\n      }\n    };\n    this._onClearQuery = () => {\n      this._onChangeQuery({ target: { value: \"\" } });\n    };\n    this._warmupSearch = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      yield searchNotion({\n        query: \"\",\n        ancestorId: rootBlockId\n      });\n    });\n    this._searchImpl = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      const { query } = this.state;\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      }\n      this.setState({ isLoading: true });\n      const result = yield searchNotion({\n        query,\n        ancestorId: rootBlockId\n      });\n      console.log(\"search\", query, result);\n      let searchResult = null;\n      let searchError = null;\n      if (result.error || result.errorId) {\n        searchError = result;\n      } else {\n        searchResult = __spreadValues({}, result);\n        const results = searchResult.results.map((result2) => {\n          var _a, _b;\n          const block = (_a = searchResult.recordMap.block[result2.id]) == null ? void 0 : _a.value;\n          if (!block)\n            return;\n          const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockTitle)(block, searchResult.recordMap);\n          if (!title) {\n            return;\n          }\n          result2.title = title;\n          result2.block = block;\n          result2.recordMap = searchResult.recordMap;\n          result2.page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockParentPage)(block, searchResult.recordMap, {\n            inclusive: true\n          }) || block;\n          if (!result2.page.id) {\n            return;\n          }\n          if ((_b = result2.highlight) == null ? void 0 : _b.text) {\n            result2.highlight.html = result2.highlight.text.replace(/<gzkNfoUU>/gi, \"<b>\").replace(/<\\/gzkNfoUU>/gi, \"</b>\");\n          }\n          return result2;\n        }).filter(Boolean);\n        const searchResultsMap = results.reduce(\n          (map, result2) => __spreadProps(__spreadValues({}, map), {\n            [result2.page.id]: result2\n          }),\n          {}\n        );\n        searchResult.results = Object.values(searchResultsMap);\n      }\n      if (this.state.query === query) {\n        this.setState({ isLoading: false, searchResult, searchError });\n      }\n    });\n    this._inputRef = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  }\n  componentDidMount() {\n    this._search = (0, import_lodash.default)(this._searchImpl.bind(this), 1e3);\n    this._warmupSearch();\n  }\n  render() {\n    const { isOpen, onClose } = this.props;\n    const { isLoading, query, searchResult, searchError } = this.state;\n    const hasQuery = !!query.trim();\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextConsumer, null, (ctx2) => {\n      const { components, defaultPageIcon, mapPageUrl } = ctx2;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Modal, {\n        isOpen,\n        contentLabel: \"Search\",\n        className: \"notion-search\",\n        overlayClassName: \"notion-search-overlay\",\n        onRequestClose: onClose,\n        onAfterOpen: this._onAfterOpen\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"quickFindMenu\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"searchBar\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"inlineIcon\"\n      }, isLoading ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingIcon, {\n        className: \"loadingIcon\"\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n        className: \"searchInput\",\n        placeholder: \"Search\",\n        value: query,\n        ref: this._inputRef,\n        onChange: this._onChangeQuery\n      }), query && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        role: \"button\",\n        className: \"clearButton\",\n        onClick: this._onClearQuery\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClearIcon, {\n        className: \"clearIcon\"\n      }))), hasQuery && searchResult && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, searchResult.results.length ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadProps(__spreadValues({}, ctx2), {\n        recordMap: searchResult.recordMap\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"resultsPane\"\n      }, searchResult.results.map((result) => {\n        var _a;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          key: result.id,\n          className: cs(\"result\", \"notion-page-link\"),\n          href: mapPageUrl(\n            result.page.id,\n            searchResult.recordMap\n          )\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block: result.page,\n          defaultIcon: defaultPageIcon\n        }), ((_a = result.highlight) == null ? void 0 : _a.html) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-search-result-highlight\",\n          dangerouslySetInnerHTML: {\n            __html: result.highlight.html\n          }\n        }));\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"footer\", {\n        className: \"resultsFooter\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"resultsCount\"\n      }, searchResult.total), searchResult.total === 1 ? \" result\" : \" results\"))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"No results\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsDetail\"\n      }, \"Try different search terms\"))), hasQuery && !searchResult && searchError && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"Search error\"))));\n    });\n  }\n};\n\n// src/components/header.tsx\nvar Header = ({ block }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"header\", {\n    className: \"notion-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-nav-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumbs, {\n    block\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Search, {\n    block\n  })));\n};\nvar Breadcrumbs = ({ block, rootOnly = false }) => {\n  const { recordMap, mapPageUrl, components } = useNotionContext();\n  const breadcrumbs = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const breadcrumbs2 = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getPageBreadcrumbs)(recordMap, block.id);\n    if (rootOnly) {\n      return [breadcrumbs2[0]].filter(Boolean);\n    }\n    return breadcrumbs2;\n  }, [recordMap, block.id, rootOnly]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"breadcrumbs\",\n    key: \"breadcrumbs\"\n  }, breadcrumbs.map((breadcrumb, index) => {\n    if (!breadcrumb) {\n      return null;\n    }\n    const pageLinkProps = {};\n    const componentMap = {\n      pageLink: components.PageLink\n    };\n    if (breadcrumb.active) {\n      componentMap.pageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, props));\n    } else {\n      pageLinkProps.href = mapPageUrl(breadcrumb.pageId);\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: breadcrumb.pageId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(componentMap.pageLink, __spreadValues({\n      className: cs(\"breadcrumb\", breadcrumb.active && \"active\")\n    }, pageLinkProps), breadcrumb.icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      className: \"icon\",\n      block: breadcrumb.block\n    }), breadcrumb.title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"title\"\n    }, breadcrumb.title)), index < breadcrumbs.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"spacer\"\n    }, \"/\"));\n  }));\n};\nvar Search = ({ block, search, title = \"Search\" }) => {\n  const { searchNotion, rootPageId, isShowingSearch, onHideSearch } = useNotionContext();\n  const onSearchNotion = search || searchNotion;\n  const [isSearchOpen, setIsSearchOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(isShowingSearch);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsSearchOpen(isShowingSearch);\n  }, [isShowingSearch]);\n  const onOpenSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(true);\n  }, []);\n  const onCloseSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(false);\n    if (onHideSearch) {\n      onHideSearch();\n    }\n  }, [onHideSearch]);\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__.useHotkeys)(\"cmd+p\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__.useHotkeys)(\"cmd+k\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  const hasSearch = !!onSearchNotion;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    role: \"button\",\n    className: cs(\"breadcrumb\", \"button\", \"notion-search-button\"),\n    onClick: onOpenSearch\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, {\n    className: \"searchIcon\"\n  }), title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"title\"\n  }, title)), isSearchOpen && hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchDialog, {\n    isOpen: isSearchOpen,\n    rootBlockId: rootPageId || (block == null ? void 0 : block.id),\n    onClose: onCloseSearch,\n    searchNotion: onSearchNotion\n  }));\n};\n\n// src/next.tsx\n\n\nvar wrapNextImage = (NextImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextImage(_a) {\n    var _b = _a, {\n      src,\n      alt,\n      width,\n      height,\n      className,\n      style,\n      layout\n    } = _b, rest = __objRest(_b, [\n      \"src\",\n      \"alt\",\n      \"width\",\n      \"height\",\n      \"className\",\n      \"style\",\n      \"layout\"\n    ]);\n    if (!layout) {\n      layout = width && height ? \"intrinsic\" : \"fill\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextImage, __spreadValues({\n      className,\n      src,\n      alt,\n      width: layout === \"intrinsic\" && width,\n      height: layout === \"intrinsic\" && height,\n      objectFit: style == null ? void 0 : style.objectFit,\n      objectPosition: style == null ? void 0 : style.objectPosition,\n      layout\n    }, rest));\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_6__);\n};\nvar wrapNextLink = (NextLink) => function ReactNotionXNextLink(_a) {\n  var _b = _a, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  } = _b, linkProps = __objRest(_b, [\n    \"href\",\n    \"as\",\n    \"passHref\",\n    \"prefetch\",\n    \"replace\",\n    \"scroll\",\n    \"shallow\",\n    \"locale\"\n  ]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextLink, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, linkProps)));\n};\n\n// src/context.tsx\nvar DefaultLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\"\n}, props));\nvar DefaultLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultLink);\nvar DefaultPageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, props));\nvar DefaultPageLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultPageLink);\nvar DefaultEmbed = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, __spreadValues({}, props));\nvar DefaultHeader = Header;\nvar dummyLink = (_a) => {\n  var _b = _a, { href, rel, target, title } = _b, rest = __objRest(_b, [\"href\", \"rel\", \"target\", \"title\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({}, rest));\n};\nvar dummyComponent = (name) => () => {\n  console.warn(\n    `Warning: using empty component \"${name}\" (you should override this in NotionRenderer.components)`\n  );\n  return null;\n};\nvar dummyOverrideFn = (_, defaultValueFn) => defaultValueFn();\nvar defaultComponents = {\n  Image: null,\n  Link: DefaultLinkMemo,\n  PageLink: DefaultPageLinkMemo,\n  Checkbox,\n  Callout: void 0,\n  Code: dummyComponent(\"Code\"),\n  Equation: dummyComponent(\"Equation\"),\n  Collection: dummyComponent(\"Collection\"),\n  Property: void 0,\n  propertyTextValue: dummyOverrideFn,\n  propertySelectValue: dummyOverrideFn,\n  propertyRelationValue: dummyOverrideFn,\n  propertyFormulaValue: dummyOverrideFn,\n  propertyTitleValue: dummyOverrideFn,\n  propertyPersonValue: dummyOverrideFn,\n  propertyFileValue: dummyOverrideFn,\n  propertyCheckboxValue: dummyOverrideFn,\n  propertyUrlValue: dummyOverrideFn,\n  propertyEmailValue: dummyOverrideFn,\n  propertyPhoneNumberValue: dummyOverrideFn,\n  propertyNumberValue: dummyOverrideFn,\n  propertyLastEditedTimeValue: dummyOverrideFn,\n  propertyCreatedTimeValue: dummyOverrideFn,\n  propertyDateValue: dummyOverrideFn,\n  Pdf: dummyComponent(\"Pdf\"),\n  Tweet: dummyComponent(\"Tweet\"),\n  Modal: dummyComponent(\"Modal\"),\n  Header: DefaultHeader,\n  Embed: DefaultEmbed\n};\nvar defaultNotionContext = {\n  recordMap: {\n    block: {},\n    collection: {},\n    collection_view: {},\n    collection_query: {},\n    notion_user: {},\n    signed_urls: {}\n  },\n  components: defaultComponents,\n  mapPageUrl: defaultMapPageUrl(),\n  mapImageUrl: defaultMapImageUrl,\n  searchNotion: null,\n  isShowingSearch: false,\n  onHideSearch: null,\n  fullPage: false,\n  darkMode: false,\n  previewImages: false,\n  forceCustomImages: false,\n  showCollectionViewDropdown: true,\n  linkTableTitleProperties: true,\n  isLinkCollectionToUrlProperty: false,\n  showTableOfContents: false,\n  minTableOfContentsItems: 3,\n  defaultPageIcon: null,\n  defaultPageCover: null,\n  defaultPageCoverPosition: 0.5,\n  zoom: null\n};\nvar ctx = react__WEBPACK_IMPORTED_MODULE_0__.createContext(defaultNotionContext);\nvar NotionContextProvider = (_a) => {\n  var _b = _a, {\n    components: themeComponents = {},\n    children,\n    mapPageUrl,\n    mapImageUrl,\n    rootPageId\n  } = _b, rest = __objRest(_b, [\n    \"components\",\n    \"children\",\n    \"mapPageUrl\",\n    \"mapImageUrl\",\n    \"rootPageId\"\n  ]);\n  for (const key of Object.keys(rest)) {\n    if (rest[key] === void 0) {\n      delete rest[key];\n    }\n  }\n  const wrappedThemeComponents = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadValues({}, themeComponents),\n    [themeComponents]\n  );\n  if (wrappedThemeComponents.nextImage) {\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  }\n  if (wrappedThemeComponents.nextLink) {\n    wrappedThemeComponents.nextLink = wrapNextLink(themeComponents.nextLink);\n  }\n  for (const key of Object.keys(wrappedThemeComponents)) {\n    if (!wrappedThemeComponents[key]) {\n      delete wrappedThemeComponents[key];\n    }\n  }\n  const value = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadProps(__spreadValues(__spreadValues({}, defaultNotionContext), rest), {\n      rootPageId,\n      mapPageUrl: mapPageUrl != null ? mapPageUrl : defaultMapPageUrl(rootPageId),\n      mapImageUrl: mapImageUrl != null ? mapImageUrl : defaultMapImageUrl,\n      components: __spreadValues(__spreadValues({}, defaultComponents), wrappedThemeComponents)\n    }),\n    [mapImageUrl, mapPageUrl, wrappedThemeComponents, rootPageId, rest]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ctx.Provider, {\n    value\n  }, children);\n};\nvar NotionContextConsumer = ctx.Consumer;\nvar useNotionContext = () => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ctx);\n};\n\n// src/components/lite-youtube-embed.tsx\n\nvar qs = (params) => {\n  return Object.keys(params).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n  ).join(\"&\");\n};\nvar LiteYouTubeEmbed = ({\n  id,\n  defaultPlay = false,\n  mute = false,\n  lazyImage = false,\n  iframeTitle = \"YouTube video\",\n  alt = \"Video preview\",\n  params = {},\n  adLinksPreconnect = true,\n  style,\n  className\n}) => {\n  const muteParam = mute || defaultPlay ? \"1\" : \"0\";\n  const queryString = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => qs(__spreadValues({ autoplay: \"1\", mute: muteParam }, params)),\n    [muteParam, params]\n  );\n  const resolution = \"hqdefault\";\n  const posterUrl = `https://i.ytimg.com/vi/${id}/${resolution}.jpg`;\n  const ytUrl = \"https://www.youtube-nocookie.com\";\n  const iframeSrc = `${ytUrl}/embed/${id}?${queryString}`;\n  const [isPreconnected, setIsPreconnected] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [iframeInitialized, setIframeInitialized] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultPlay);\n  const [isIframeLoaded, setIsIframeLoaded] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const warmConnections = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (isPreconnected)\n      return;\n    setIsPreconnected(true);\n  }, [isPreconnected]);\n  const onLoadIframe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (iframeInitialized)\n      return;\n    setIframeInitialized(true);\n  }, [iframeInitialized]);\n  const onIframeLoaded = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsIframeLoaded(true);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preload\",\n    href: posterUrl,\n    as: \"image\"\n  }), isPreconnected && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: ytUrl\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://www.google.com\"\n  })), isPreconnected && adLinksPreconnect && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://static.doubleclick.net\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://googleads.g.doubleclick.net\"\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    onClick: onLoadIframe,\n    onPointerOver: warmConnections,\n    className: cs(\n      \"notion-yt-lite\",\n      isIframeLoaded && \"notion-yt-loaded\",\n      iframeInitialized && \"notion-yt-initialized\",\n      className\n    ),\n    style\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n    src: posterUrl,\n    className: \"notion-yt-thumbnail\",\n    loading: lazyImage ? \"lazy\" : void 0,\n    alt\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-yt-playbtn\"\n  }), iframeInitialized && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n    width: \"560\",\n    height: \"315\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true,\n    title: iframeTitle,\n    src: iframeSrc,\n    onLoad: onIframeLoaded\n  })));\n};\n\n// src/components/asset.tsx\nvar isServer = typeof window === \"undefined\";\nvar supportedAssetTypes = [\n  \"video\",\n  \"image\",\n  \"embed\",\n  \"figma\",\n  \"typeform\",\n  \"excalidraw\",\n  \"maps\",\n  \"tweet\",\n  \"pdf\",\n  \"gist\",\n  \"codepen\",\n  \"drive\"\n];\nvar Asset = ({ block, zoomable = true, children }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  const { recordMap, mapImageUrl, components } = useNotionContext();\n  if (!block || !supportedAssetTypes.includes(block.type)) {\n    return null;\n  }\n  const style = {\n    position: \"relative\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    flexDirection: \"column\"\n  };\n  const assetStyle = {};\n  if (block.format) {\n    const {\n      block_aspect_ratio,\n      block_height,\n      block_width,\n      block_full_width,\n      block_page_width,\n      block_preserve_scale\n    } = block.format;\n    if (block_full_width || block_page_width) {\n      if (block_full_width) {\n        style.width = \"100vw\";\n      } else {\n        style.width = \"100%\";\n      }\n      if (block.type === \"video\") {\n        if (block_height) {\n          style.height = block_height;\n        } else if (block_aspect_ratio) {\n          style.paddingBottom = `${block_aspect_ratio * 100}%`;\n        } else if (block_preserve_scale) {\n          style.objectFit = \"contain\";\n        }\n      } else if (block_aspect_ratio && block.type !== \"image\") {\n        style.paddingBottom = `${block_aspect_ratio * 100}%`;\n      } else if (block_height) {\n        style.height = block_height;\n      } else if (block_preserve_scale) {\n        if (block.type === \"image\") {\n          style.height = \"100%\";\n        } else {\n          style.paddingBottom = \"75%\";\n          style.minHeight = 100;\n        }\n      }\n    } else {\n      switch ((_a = block.format) == null ? void 0 : _a.block_alignment) {\n        case \"center\": {\n          style.alignSelf = \"center\";\n          break;\n        }\n        case \"left\": {\n          style.alignSelf = \"start\";\n          break;\n        }\n        case \"right\": {\n          style.alignSelf = \"end\";\n          break;\n        }\n      }\n      if (block_width) {\n        style.width = block_width;\n      }\n      if (block_preserve_scale && block.type !== \"image\") {\n        style.paddingBottom = \"50%\";\n        style.minHeight = 100;\n      } else {\n        if (block_height && block.type !== \"image\") {\n          style.height = block_height;\n        }\n      }\n    }\n    if (block.type === \"image\") {\n      assetStyle.objectFit = \"cover\";\n    } else if (block_preserve_scale) {\n      assetStyle.objectFit = \"contain\";\n    }\n  }\n  let source = ((_b = recordMap.signed_urls) == null ? void 0 : _b[block.id]) || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n  let content = null;\n  if (!source) {\n    return null;\n  }\n  if (block.type === \"tweet\") {\n    const src = source;\n    if (!src)\n      return null;\n    const id = src.split(\"?\")[0].split(\"/\").pop();\n    if (!id)\n      return null;\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      style: __spreadProps(__spreadValues({}, assetStyle), {\n        maxWidth: 420,\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      })\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Tweet, {\n      id\n    }));\n  } else if (block.type === \"pdf\") {\n    style.overflow = \"auto\";\n    style.background = \"rgb(226, 226, 226)\";\n    style.display = \"block\";\n    if (!style.padding) {\n      style.padding = \"8px 16px\";\n    }\n    if (!isServer) {\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Pdf, {\n        file: source\n      });\n    }\n  } else if (block.type === \"embed\" || block.type === \"video\" || block.type === \"figma\" || block.type === \"typeform\" || block.type === \"gist\" || block.type === \"maps\" || block.type === \"excalidraw\" || block.type === \"codepen\" || block.type === \"drive\") {\n    if (block.type === \"video\" && source && source.indexOf(\"youtube\") < 0 && source.indexOf(\"youtu.be\") < 0 && source.indexOf(\"vimeo\") < 0 && source.indexOf(\"wistia\") < 0 && source.indexOf(\"loom\") < 0 && source.indexOf(\"videoask\") < 0 && source.indexOf(\"getcloudapp\") < 0) {\n      style.paddingBottom = void 0;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", {\n        playsInline: true,\n        controls: true,\n        preload: \"metadata\",\n        style: assetStyle,\n        src: source,\n        title: block.type\n      });\n    } else {\n      let src = ((_f = block.format) == null ? void 0 : _f.display_source) || source;\n      if (src) {\n        const youtubeVideoId = block.type === \"video\" ? getYoutubeId(src) : null;\n        if (youtubeVideoId) {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LiteYouTubeEmbed, {\n            id: youtubeVideoId,\n            style: assetStyle,\n            className: \"notion-asset-object-fit\"\n          });\n        } else if (block.type === \"gist\") {\n          if (!src.endsWith(\".pibb\")) {\n            src = `${src}.pibb`;\n          }\n          assetStyle.width = \"100%\";\n          style.paddingBottom = \"50%\";\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            style: assetStyle,\n            className: \"notion-asset-object-fit\",\n            src,\n            title: \"GitHub Gist\",\n            frameBorder: \"0\",\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        } else {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            className: \"notion-asset-object-fit\",\n            style: assetStyle,\n            src,\n            title: `iframe ${block.type}`,\n            frameBorder: \"0\",\n            allowFullScreen: true,\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        }\n      }\n    }\n  } else if (block.type === \"image\") {\n    if (source.includes(\"file.notion.so\")) {\n      source = (_i = (_h = (_g = block.properties) == null ? void 0 : _g.source) == null ? void 0 : _h[0]) == null ? void 0 : _i[0];\n    }\n    const src = mapImageUrl(source, block);\n    const caption = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)((_j = block.properties) == null ? void 0 : _j.caption);\n    const alt = caption || \"notion image\";\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n      src,\n      alt,\n      zoomable,\n      height: style.height,\n      style: assetStyle\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    style\n  }, content, block.type === \"image\" && children), block.type !== \"image\" && children);\n};\n\n// src/components/asset-wrapper.tsx\nvar urlStyle = { width: \"100%\" };\nvar AssetWrapper = ({ blockId, block }) => {\n  var _a, _b, _c, _d, _e, _f;\n  const value = block;\n  const { components, mapPageUrl, rootDomain, zoom } = useNotionContext();\n  let isURL = false;\n  if (block.type === \"image\") {\n    const caption = (_c = (_b = (_a = value == null ? void 0 : value.properties) == null ? void 0 : _a.caption) == null ? void 0 : _b[0]) == null ? void 0 : _c[0];\n    if (caption) {\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.parsePageId)(caption, { uuid: true });\n      const isPage = caption.charAt(0) === \"/\" && id;\n      if (isPage || isValidURL(caption)) {\n        isURL = true;\n      }\n    }\n  }\n  const figure = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figure\", {\n    className: cs(\n      \"notion-asset-wrapper\",\n      `notion-asset-wrapper-${block.type}`,\n      ((_d = value.format) == null ? void 0 : _d.block_full_width) && \"notion-asset-wrapper-full\",\n      blockId\n    )\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Asset, {\n    block: value,\n    zoomable: zoom && !isURL\n  }, ((_e = value == null ? void 0 : value.properties) == null ? void 0 : _e.caption) && !isURL && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figcaption\", {\n    className: \"notion-asset-caption\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: value.properties.caption,\n    block\n  }))));\n  if (isURL) {\n    const caption = (_f = value == null ? void 0 : value.properties) == null ? void 0 : _f.caption[0][0];\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.parsePageId)(caption, { uuid: true });\n    const isPage = caption.charAt(0) === \"/\" && id;\n    const captionHostname = extractHostname(caption);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n      style: urlStyle,\n      href: isPage ? mapPageUrl(id) : caption,\n      target: captionHostname && captionHostname !== rootDomain && !caption.startsWith(\"/\") ? \"blank_\" : null\n    }, figure);\n  }\n  return figure;\n};\nfunction isValidURL(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  );\n  return !!pattern.test(str);\n}\nfunction extractHostname(url) {\n  try {\n    const hostname = new URL(url).hostname;\n    return hostname;\n  } catch (err) {\n    return \"\";\n  }\n}\n\n// src/components/audio.tsx\n\nvar Audio = ({ block, className }) => {\n  var _a, _b, _c;\n  const { recordMap } = useNotionContext();\n  const source = recordMap.signed_urls[block.id] || ((_c = (_b = (_a = block.properties) == null ? void 0 : _a.source) == null ? void 0 : _b[0]) == null ? void 0 : _c[0]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\"notion-audio\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", {\n    controls: true,\n    preload: \"none\",\n    src: source\n  }));\n};\n\n// src/components/file.tsx\n\n\n// src/icons/file-icon.tsx\n\nvar FileIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 30 30\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M22,8v12c0,3.866-3.134,7-7,7s-7-3.134-7-7V8c0-2.762,2.238-5,5-5s5,2.238,5,5v12c0,1.657-1.343,3-3,3s-3-1.343-3-3V8h-2v12c0,2.762,2.238,5,5,5s5-2.238,5-5V8c0-3.866-3.134-7-7-7S6,4.134,6,8v12c0,4.971,4.029,9,9,9s9-4.029,9-9V8H22z\"\n  }));\n};\n\n// src/components/file.tsx\nvar File = ({ block, className }) => {\n  var _a, _b, _c, _d, _e;\n  const { components, recordMap } = useNotionContext();\n  const source = recordMap.signed_urls[block.id] || ((_c = (_b = (_a = block.properties) == null ? void 0 : _a.source) == null ? void 0 : _b[0]) == null ? void 0 : _c[0]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\"notion-file\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    className: \"notion-file-link\",\n    href: source,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FileIcon, {\n    className: \"notion-file-icon\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-file-info\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-file-title\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: ((_d = block.properties) == null ? void 0 : _d.title) || [[\"File\"]],\n    block\n  })), ((_e = block.properties) == null ? void 0 : _e.size) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-file-size\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: block.properties.size,\n    block\n  })))));\n};\n\n// src/components/google-drive.tsx\n\nvar GoogleDrive = ({ block, className }) => {\n  var _a;\n  const { components, mapImageUrl } = useNotionContext();\n  const properties = (_a = block.format) == null ? void 0 : _a.drive_properties;\n  if (!properties)\n    return null;\n  let domain;\n  try {\n    const url = new URL(properties.url);\n    domain = url.hostname;\n  } catch (err) {\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\"notion-google-drive\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    className: \"notion-google-drive-link\",\n    href: properties.url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-preview\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n    src: mapImageUrl(properties.thumbnail, block),\n    alt: properties.title || \"Google Drive Document\",\n    loading: \"lazy\"\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-body\"\n  }, properties.title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-body-title\"\n  }, properties.title), properties.icon && domain && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-body-source\"\n  }, properties.icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-body-source-icon\",\n    style: {\n      backgroundImage: `url(${properties.icon})`\n    }\n  }), domain && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-google-drive-body-source-domain\"\n  }, domain)))));\n};\n\n// src/components/page-aside.tsx\nvar import_lodash2 = __toESM(require_lodash(), 1);\n\n\nvar PageAside = ({\n  toc,\n  activeSection,\n  setActiveSection,\n  pageAside,\n  hasToc,\n  hasAside,\n  className\n}) => {\n  const throttleMs = 100;\n  const actionSectionScrollSpy = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0, import_lodash2.default)(() => {\n      const sections = document.getElementsByClassName(\"notion-h\");\n      let prevBBox = null;\n      let currentSectionId = activeSection;\n      for (let i = 0; i < sections.length; ++i) {\n        const section = sections[i];\n        if (!section || !(section instanceof Element))\n          continue;\n        if (!currentSectionId) {\n          currentSectionId = section.getAttribute(\"data-id\");\n        }\n        const bbox = section.getBoundingClientRect();\n        const prevHeight = prevBBox ? bbox.top - prevBBox.bottom : 0;\n        const offset = Math.max(150, prevHeight / 4);\n        if (bbox.top - offset < 0) {\n          currentSectionId = section.getAttribute(\"data-id\");\n          prevBBox = bbox;\n          continue;\n        }\n        break;\n      }\n      setActiveSection(currentSectionId);\n    }, throttleMs),\n    [\n      setActiveSection\n    ]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!hasToc) {\n      return;\n    }\n    window.addEventListener(\"scroll\", actionSectionScrollSpy);\n    actionSectionScrollSpy();\n    return () => {\n      window.removeEventListener(\"scroll\", actionSectionScrollSpy);\n    };\n  }, [hasToc, actionSectionScrollSpy]);\n  if (!hasAside) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", {\n    className: cs(\"notion-aside\", className)\n  }, hasToc && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-aside-table-of-contents\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-aside-table-of-contents-header\"\n  }, \"Table of Contents\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"nav\", {\n    className: \"notion-table-of-contents\"\n  }, toc.map((tocItem) => {\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.uuidToId)(tocItem.id);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", {\n      key: id,\n      href: `#${id}`,\n      className: cs(\n        \"notion-table-of-contents-item\",\n        `notion-table-of-contents-item-indent-level-${tocItem.indentLevel}`,\n        activeSection === id && \"notion-table-of-contents-active-item\"\n      )\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-table-of-contents-item-body\",\n      style: {\n        display: \"inline-block\",\n        marginLeft: tocItem.indentLevel * 16\n      }\n    }, tocItem.text));\n  }))), pageAside);\n};\n\n// src/components/sync-pointer-block.tsx\n\nvar SyncPointerBlock = ({ block, level }) => {\n  var _a, _b;\n  if (!block) {\n    if (true) {\n      console.warn(\"missing sync pointer block\", block.id);\n    }\n    return null;\n  }\n  const syncPointerBlock = block;\n  const referencePointerId = (_b = (_a = syncPointerBlock == null ? void 0 : syncPointerBlock.format) == null ? void 0 : _a.transclusion_reference_pointer) == null ? void 0 : _b.id;\n  if (!referencePointerId) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionBlockRenderer, {\n    key: referencePointerId,\n    level,\n    blockId: referencePointerId\n  });\n};\n\n// src/icons/link-icon.tsx\n\nvar LinkIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 16 16\",\n    width: \"16\",\n    height: \"16\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\n  }));\n};\n\n// src/block.tsx\nvar tocIndentLevelCache = {};\nvar pageCoverStyleCache = {};\nvar Block = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D, _E, _F, _G, _H, _I, _J, _K, _L, _M, _N, _O, _P, _Q;\n  const ctx2 = useNotionContext();\n  const {\n    components,\n    fullPage,\n    darkMode,\n    recordMap,\n    mapPageUrl,\n    mapImageUrl,\n    showTableOfContents,\n    minTableOfContentsItems,\n    defaultPageIcon,\n    defaultPageCover,\n    defaultPageCoverPosition\n  } = ctx2;\n  const [activeSection, setActiveSection] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const {\n    block,\n    children,\n    level,\n    className,\n    bodyClassName,\n    header,\n    footer,\n    pageHeader,\n    pageFooter,\n    pageTitle,\n    pageAside,\n    pageCover,\n    hideBlockId,\n    disableHeader\n  } = props;\n  if (!block) {\n    return null;\n  }\n  if (level === 0 && block.type === \"collection_view\") {\n    ;\n    block.type = \"collection_view_page\";\n  }\n  const blockId = hideBlockId ? \"notion-block\" : `notion-block-${(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.uuidToId)(block.id)}`;\n  switch (block.type) {\n    case \"collection_view_page\":\n    case \"page\":\n      if (level === 0) {\n        const {\n          page_icon = defaultPageIcon,\n          page_cover = defaultPageCover,\n          page_cover_position = defaultPageCoverPosition,\n          page_full_width,\n          page_small_text\n        } = block.format || {};\n        if (fullPage) {\n          const properties = block.type === \"page\" ? block.properties : {\n            title: (_b = (_a = recordMap.collection[(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockCollectionId)(block, recordMap)]) == null ? void 0 : _a.value) == null ? void 0 : _b.name\n          };\n          const coverPosition = (1 - (page_cover_position || 0.5)) * 100;\n          const pageCoverObjectPosition = `center ${coverPosition}%`;\n          let pageCoverStyle = pageCoverStyleCache[pageCoverObjectPosition];\n          if (!pageCoverStyle) {\n            pageCoverStyle = pageCoverStyleCache[pageCoverObjectPosition] = {\n              objectPosition: pageCoverObjectPosition\n            };\n          }\n          const pageIcon = (_c = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockIcon)(block, recordMap)) != null ? _c : defaultPageIcon;\n          const isPageIconUrl = pageIcon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(pageIcon);\n          const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getPageTableOfContents)(\n            block,\n            recordMap\n          );\n          const hasToc = showTableOfContents && toc.length >= minTableOfContentsItems;\n          const hasAside = (hasToc || pageAside) && !page_full_width;\n          const hasPageCover = pageCover || page_cover;\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: cs(\n              \"notion\",\n              \"notion-app\",\n              darkMode ? \"dark-mode\" : \"light-mode\",\n              blockId,\n              className\n            )\n          }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: \"notion-viewport\"\n          }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: \"notion-frame\"\n          }, !disableHeader && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Header, {\n            block\n          }), header, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: \"notion-page-scroller\"\n          }, hasPageCover && (pageCover ? pageCover : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: \"notion-page-cover-wrapper\"\n          }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n            src: mapImageUrl(page_cover, block),\n            alt: (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)(properties == null ? void 0 : properties.title),\n            priority: true,\n            className: \"notion-page-cover\",\n            style: pageCoverStyle\n          }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"main\", {\n            className: cs(\n              \"notion-page\",\n              hasPageCover ? \"notion-page-has-cover\" : \"notion-page-no-cover\",\n              page_icon ? \"notion-page-has-icon\" : \"notion-page-no-icon\",\n              isPageIconUrl ? \"notion-page-has-image-icon\" : \"notion-page-has-text-icon\",\n              \"notion-full-page\",\n              page_full_width && \"notion-full-width\",\n              page_small_text && \"notion-small-text\",\n              bodyClassName\n            )\n          }, page_icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n            block,\n            defaultIcon: defaultPageIcon,\n            inline: false\n          }), pageHeader, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h1\", {\n            className: \"notion-title\"\n          }, pageTitle != null ? pageTitle : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n            value: properties == null ? void 0 : properties.title,\n            block\n          })), (block.type === \"collection_view_page\" || block.type === \"page\" && block.parent_table === \"collection\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Collection, {\n            block,\n            ctx: ctx2\n          }), block.type !== \"collection_view_page\" && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: cs(\n              \"notion-page-content\",\n              hasAside && \"notion-page-content-has-aside\",\n              hasToc && \"notion-page-content-has-toc\"\n            )\n          }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"article\", {\n            className: \"notion-page-content-inner\"\n          }, children), hasAside && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageAside, {\n            toc,\n            activeSection,\n            setActiveSection,\n            hasToc,\n            hasAside,\n            pageAside\n          })), pageFooter), footer)));\n        } else {\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"main\", {\n            className: cs(\n              \"notion\",\n              darkMode ? \"dark-mode\" : \"light-mode\",\n              \"notion-page\",\n              page_full_width && \"notion-full-width\",\n              page_small_text && \"notion-small-text\",\n              blockId,\n              className,\n              bodyClassName\n            )\n          }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n            className: \"notion-viewport\"\n          }), pageHeader, (block.type === \"collection_view_page\" || block.type === \"page\" && block.parent_table === \"collection\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Collection, {\n            block,\n            ctx: ctx2\n          }), block.type !== \"collection_view_page\" && children, pageFooter);\n        }\n      } else {\n        const blockColor = (_d = block.format) == null ? void 0 : _d.block_color;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          className: cs(\n            \"notion-page-link\",\n            blockColor && `notion-${blockColor}`,\n            blockId\n          ),\n          href: mapPageUrl(block.id)\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block\n        }));\n      }\n    case \"header\":\n    case \"sub_header\":\n    case \"sub_sub_header\": {\n      if (!block.properties)\n        return null;\n      const blockColor = (_e = block.format) == null ? void 0 : _e.block_color;\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.uuidToId)(block.id);\n      const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)(block.properties.title) || `Notion Header ${id}`;\n      let indentLevel = tocIndentLevelCache[block.id];\n      let indentLevelClass;\n      if (indentLevel === void 0) {\n        const page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockParentPage)(block, recordMap);\n        if (page) {\n          const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getPageTableOfContents)(page, recordMap);\n          const tocItem = toc.find((tocItem2) => tocItem2.id === block.id);\n          if (tocItem) {\n            indentLevel = tocItem.indentLevel;\n            tocIndentLevelCache[block.id] = indentLevel;\n          }\n        }\n      }\n      if (indentLevel !== void 0) {\n        indentLevelClass = `notion-h-indent-${indentLevel}`;\n      }\n      const isH1 = block.type === \"header\";\n      const isH2 = block.type === \"sub_header\";\n      const isH3 = block.type === \"sub_sub_header\";\n      const classNameStr = cs(\n        isH1 && \"notion-h notion-h1\",\n        isH2 && \"notion-h notion-h2\",\n        isH3 && \"notion-h notion-h3\",\n        blockColor && `notion-${blockColor}`,\n        indentLevelClass,\n        blockId\n      );\n      const innerHeader = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        id,\n        className: \"notion-header-anchor\"\n      }), !((_f = block.format) == null ? void 0 : _f.toggleable) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", {\n        className: \"notion-hash-link\",\n        href: `#${id}`,\n        title\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LinkIcon, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"notion-h-title\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: block.properties.title,\n        block\n      })));\n      let headerBlock = null;\n      if (isH1) {\n        headerBlock = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h2\", {\n          className: classNameStr,\n          \"data-id\": id\n        }, innerHeader);\n      } else if (isH2) {\n        headerBlock = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h3\", {\n          className: classNameStr,\n          \"data-id\": id\n        }, innerHeader);\n      } else {\n        headerBlock = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h4\", {\n          className: classNameStr,\n          \"data-id\": id\n        }, innerHeader);\n      }\n      if ((_g = block.format) == null ? void 0 : _g.toggleable) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"details\", {\n          className: cs(\"notion-toggle\", blockId)\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"summary\", null, headerBlock), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, children));\n      } else {\n        return headerBlock;\n      }\n    }\n    case \"divider\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"hr\", {\n        className: cs(\"notion-hr\", blockId)\n      });\n    case \"text\": {\n      if (!block.properties && !((_h = block.content) == null ? void 0 : _h.length)) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: cs(\"notion-blank\", blockId)\n        }, \"\\xA0\");\n      }\n      const blockColor = (_i = block.format) == null ? void 0 : _i.block_color;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"notion-text\",\n          blockColor && `notion-${blockColor}`,\n          blockId\n        )\n      }, ((_j = block.properties) == null ? void 0 : _j.title) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: block.properties.title,\n        block\n      }), children && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-text-children\"\n      }, children));\n    }\n    case \"bulleted_list\":\n    case \"numbered_list\": {\n      const wrapList = (content, start2) => block.type === \"bulleted_list\" ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", {\n        className: cs(\"notion-list\", \"notion-list-disc\", blockId)\n      }, content) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ol\", {\n        start: start2,\n        className: cs(\"notion-list\", \"notion-list-numbered\", blockId)\n      }, content);\n      let output = null;\n      if (block.content) {\n        output = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, block.properties && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: block.properties.title,\n          block\n        })), wrapList(children));\n      } else {\n        output = block.properties ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: block.properties.title,\n          block\n        })) : null;\n      }\n      const isTopLevel = block.type !== ((_l = (_k = recordMap.block[block.parent_id]) == null ? void 0 : _k.value) == null ? void 0 : _l.type);\n      const start = getListNumber(block.id, recordMap.block);\n      return isTopLevel ? wrapList(output, start) : output;\n    }\n    case \"embed\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Embed, {\n        blockId,\n        block\n      });\n    case \"tweet\":\n    case \"maps\":\n    case \"pdf\":\n    case \"figma\":\n    case \"typeform\":\n    case \"codepen\":\n    case \"excalidraw\":\n    case \"image\":\n    case \"gist\":\n    case \"video\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, {\n        blockId,\n        block\n      });\n    case \"drive\": {\n      const properties = (_m = block.format) == null ? void 0 : _m.drive_properties;\n      if (!properties) {\n        if ((_n = block.format) == null ? void 0 : _n.display_source) {\n          return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, {\n            blockId,\n            block\n          });\n        }\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GoogleDrive, {\n        block,\n        className: blockId\n      });\n    }\n    case \"audio\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Audio, {\n        block,\n        className: blockId\n      });\n    case \"file\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(File, {\n        block,\n        className: blockId\n      });\n    case \"equation\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Equation, {\n        block,\n        inline: false,\n        className: blockId\n      });\n    case \"code\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Code, {\n        block\n      });\n    case \"column_list\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\"notion-row\", blockId)\n      }, children);\n    case \"column\": {\n      const spacerWidth = `min(32px, 4vw)`;\n      const ratio = ((_o = block.format) == null ? void 0 : _o.column_ratio) || 0.5;\n      const parent = (_p = recordMap.block[block.parent_id]) == null ? void 0 : _p.value;\n      const columns = ((_q = parent == null ? void 0 : parent.content) == null ? void 0 : _q.length) || Math.max(2, Math.ceil(1 / ratio));\n      const width = `calc((100% - (${columns - 1} * ${spacerWidth})) * ${ratio})`;\n      const style = { width };\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\"notion-column\", blockId),\n        style\n      }, children), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-spacer\"\n      }));\n    }\n    case \"quote\": {\n      if (!block.properties)\n        return null;\n      const blockColor = (_r = block.format) == null ? void 0 : _r.block_color;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"blockquote\", {\n        className: cs(\n          \"notion-quote\",\n          blockColor && `notion-${blockColor}`,\n          blockId\n        )\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: block.properties.title,\n        block\n      })), children);\n    }\n    case \"collection_view\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Collection, {\n        block,\n        className: blockId,\n        ctx: ctx2\n      });\n    case \"callout\":\n      if (components.Callout) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Callout, {\n          block,\n          className: blockId\n        });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: cs(\n            \"notion-callout\",\n            ((_s = block.format) == null ? void 0 : _s.block_color) && `notion-${(_t = block.format) == null ? void 0 : _t.block_color}_co`,\n            blockId\n          )\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n          block\n        }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-callout-text\"\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: (_u = block.properties) == null ? void 0 : _u.title,\n          block\n        }), children));\n      }\n    case \"bookmark\": {\n      if (!block.properties)\n        return null;\n      const link = block.properties.link;\n      if (!link || !((_v = link[0]) == null ? void 0 : _v[0]))\n        return null;\n      let title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)(block.properties.title);\n      if (!title) {\n        title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)(link);\n      }\n      if (title) {\n        if (title.startsWith(\"http\")) {\n          try {\n            const url = new URL(title);\n            title = url.hostname;\n          } catch (err) {\n          }\n        }\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-row\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: cs(\n          \"notion-bookmark\",\n          ((_w = block.format) == null ? void 0 : _w.block_color) && `notion-${block.format.block_color}`,\n          blockId\n        ),\n        href: link[0][0]\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-title\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: [[title]],\n        block\n      })), ((_x = block.properties) == null ? void 0 : _x.description) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-description\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: (_y = block.properties) == null ? void 0 : _y.description,\n        block\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-link\"\n      }, ((_z = block.format) == null ? void 0 : _z.bookmark_icon) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-link-icon\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: mapImageUrl((_A = block.format) == null ? void 0 : _A.bookmark_icon, block),\n        alt: title\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-link-text\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: link,\n        block\n      })))), ((_B = block.format) == null ? void 0 : _B.bookmark_cover) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-bookmark-image\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: mapImageUrl((_C = block.format) == null ? void 0 : _C.bookmark_cover, block),\n        alt: (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getTextContent)((_D = block.properties) == null ? void 0 : _D.title),\n        style: {\n          objectFit: \"cover\"\n        }\n      }))));\n    }\n    case \"toggle\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"details\", {\n        className: cs(\"notion-toggle\", blockId)\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"summary\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: (_E = block.properties) == null ? void 0 : _E.title,\n        block\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, children));\n    case \"table_of_contents\": {\n      const page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getBlockParentPage)(block, recordMap);\n      if (!page)\n        return null;\n      const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.getPageTableOfContents)(page, recordMap);\n      const blockColor = (_F = block.format) == null ? void 0 : _F.block_color;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"notion-table-of-contents\",\n          blockColor && `notion-${blockColor}`,\n          blockId\n        )\n      }, toc.map((tocItem) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", {\n        key: tocItem.id,\n        href: `#${(0,notion_utils__WEBPACK_IMPORTED_MODULE_3__.uuidToId)(tocItem.id)}`,\n        className: \"notion-table-of-contents-item\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"notion-table-of-contents-item-body\",\n        style: {\n          display: \"inline-block\",\n          marginLeft: tocItem.indentLevel * 24\n        }\n      }, tocItem.text))));\n    }\n    case \"to_do\": {\n      const isChecked = ((_I = (_H = (_G = block.properties) == null ? void 0 : _G.checked) == null ? void 0 : _H[0]) == null ? void 0 : _I[0]) === \"Yes\";\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\"notion-to-do\", blockId)\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-to-do-item\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Checkbox, {\n        blockId,\n        isChecked\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"notion-to-do-body\",\n          isChecked && `notion-to-do-checked`\n        )\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: (_J = block.properties) == null ? void 0 : _J.title,\n        block\n      }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-to-do-children\"\n      }, children));\n    }\n    case \"transclusion_container\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\"notion-sync-block\", blockId)\n      }, children);\n    case \"transclusion_reference\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SyncPointerBlock, __spreadValues({\n        block,\n        level: level + 1\n      }, props));\n    case \"alias\": {\n      const blockPointerId = (_L = (_K = block == null ? void 0 : block.format) == null ? void 0 : _K.alias_pointer) == null ? void 0 : _L.id;\n      const linkedBlock = (_M = recordMap.block[blockPointerId]) == null ? void 0 : _M.value;\n      if (!linkedBlock) {\n        console.log('\"alias\" missing block', blockPointerId);\n        return null;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n        className: cs(\"notion-page-link\", blockPointerId),\n        href: mapPageUrl(blockPointerId)\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n        block: linkedBlock\n      }));\n    }\n    case \"table\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"table\", {\n        className: cs(\"notion-simple-table\", blockId)\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"tbody\", null, children));\n    case \"table_row\": {\n      const tableBlock = (_N = recordMap.block[block.parent_id]) == null ? void 0 : _N.value;\n      const order = (_O = tableBlock.format) == null ? void 0 : _O.table_block_column_order;\n      const formatMap = (_P = tableBlock.format) == null ? void 0 : _P.table_block_column_format;\n      const backgroundColor = (_Q = block.format) == null ? void 0 : _Q.block_color;\n      if (!tableBlock || !order) {\n        return null;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"tr\", {\n        className: cs(\n          \"notion-simple-table-row\",\n          backgroundColor && `notion-${backgroundColor}`,\n          blockId\n        )\n      }, order.map((column) => {\n        var _a2, _b2, _c2;\n        const color = (_a2 = formatMap == null ? void 0 : formatMap[column]) == null ? void 0 : _a2.color;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"td\", {\n          key: column,\n          className: color ? `notion-${color}` : \"\",\n          style: {\n            width: ((_b2 = formatMap == null ? void 0 : formatMap[column]) == null ? void 0 : _b2.width) || 120\n          }\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-simple-table-cell\"\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: ((_c2 = block.properties) == null ? void 0 : _c2[column]) || [[\"\\u3164\"]],\n          block\n        })));\n      }));\n    }\n    case \"external_object_instance\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EOI, {\n        block,\n        className: blockId\n      });\n    default:\n      if (true) {\n        console.log(\n          \"Unsupported type \" + block.type,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null);\n  }\n  return null;\n};\n\n// src/renderer.tsx\nvar NotionRenderer = (_a) => {\n  var _b = _a, {\n    components,\n    recordMap,\n    mapPageUrl,\n    mapImageUrl,\n    searchNotion,\n    isShowingSearch,\n    onHideSearch,\n    fullPage,\n    rootPageId,\n    rootDomain,\n    darkMode,\n    previewImages,\n    forceCustomImages,\n    showCollectionViewDropdown,\n    linkTableTitleProperties,\n    isLinkCollectionToUrlProperty,\n    isImageZoomable = true,\n    showTableOfContents,\n    minTableOfContentsItems,\n    defaultPageIcon,\n    defaultPageCover,\n    defaultPageCoverPosition\n  } = _b, rest = __objRest(_b, [\n    \"components\",\n    \"recordMap\",\n    \"mapPageUrl\",\n    \"mapImageUrl\",\n    \"searchNotion\",\n    \"isShowingSearch\",\n    \"onHideSearch\",\n    \"fullPage\",\n    \"rootPageId\",\n    \"rootDomain\",\n    \"darkMode\",\n    \"previewImages\",\n    \"forceCustomImages\",\n    \"showCollectionViewDropdown\",\n    \"linkTableTitleProperties\",\n    \"isLinkCollectionToUrlProperty\",\n    \"isImageZoomable\",\n    \"showTableOfContents\",\n    \"minTableOfContentsItems\",\n    \"defaultPageIcon\",\n    \"defaultPageCover\",\n    \"defaultPageCoverPosition\"\n  ]);\n  const zoom = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => typeof window !== \"undefined\" && _fisch0920_medium_zoom__WEBPACK_IMPORTED_MODULE_7__({\n      background: \"rgba(0, 0, 0, 0.8)\",\n      minZoomScale: 2,\n      margin: getMediumZoomMargin()\n    }),\n    []\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, {\n    components,\n    recordMap,\n    mapPageUrl,\n    mapImageUrl,\n    searchNotion,\n    isShowingSearch,\n    onHideSearch,\n    fullPage,\n    rootPageId,\n    rootDomain,\n    darkMode,\n    previewImages,\n    forceCustomImages,\n    showCollectionViewDropdown,\n    linkTableTitleProperties,\n    isLinkCollectionToUrlProperty,\n    showTableOfContents,\n    minTableOfContentsItems,\n    defaultPageIcon,\n    defaultPageCover,\n    defaultPageCoverPosition,\n    zoom: isImageZoomable ? zoom : null\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionBlockRenderer, __spreadValues({}, rest)));\n};\nvar NotionBlockRenderer = (_a) => {\n  var _b = _a, { level = 0, blockId } = _b, props = __objRest(_b, [\"level\", \"blockId\"]);\n  var _a2, _b2;\n  const { recordMap } = useNotionContext();\n  const id = blockId || Object.keys(recordMap.block)[0];\n  const block = (_a2 = recordMap.block[id]) == null ? void 0 : _a2.value;\n  if (!block) {\n    if (true) {\n      console.warn(\"missing block\", blockId);\n    }\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Block, __spreadValues({\n    key: id,\n    level,\n    block\n  }, props), (_b2 = block == null ? void 0 : block.content) == null ? void 0 : _b2.map((contentBlockId) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionBlockRenderer, __spreadValues({\n    key: contentBlockId,\n    blockId: contentBlockId,\n    level: level + 1\n  }, props))));\n};\nfunction getMediumZoomMargin() {\n  const width = window.innerWidth;\n  if (width < 500) {\n    return 8;\n  } else if (width < 800) {\n    return 20;\n  } else if (width < 1280) {\n    return 30;\n  } else if (width < 1600) {\n    return 40;\n  } else if (width < 1920) {\n    return 48;\n  } else {\n    return 72;\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRyx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDaUM7QUFDZTs7QUFFaEQ7QUFDaUM7QUFRWDs7QUFFdEI7QUFDaUM7QUFDMEI7O0FBRTNEO0FBQ3VFOztBQUV2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGtDQUFrQyxJQUFJO0FBQ3RDO0FBQ0EsZ0NBQWdDLDJDQUEyQyx3QkFBd0IsRUFBRTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUF1QkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3Rpb24teC1leGFtcGxlLWZ1bGwvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvaW5kZXguanM/NzVhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBfX2NvbW1vbkpTID0gKGNiLCBtb2QpID0+IGZ1bmN0aW9uIF9fcmVxdWlyZSgpIHtcbiAgcmV0dXJuIG1vZCB8fCAoMCwgY2JbX19nZXRPd25Qcm9wTmFtZXMoY2IpWzBdXSkoKG1vZCA9IHsgZXhwb3J0czoge30gfSkuZXhwb3J0cywgbW9kKSwgbW9kLmV4cG9ydHM7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQsIFwiZGVmYXVsdFwiLCB7IHZhbHVlOiBtb2QsIGVudW1lcmFibGU6IHRydWUgfSkgOiB0YXJnZXQsXG4gIG1vZFxuKSk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoLnRocm90dGxlL2luZGV4LmpzXG52YXIgcmVxdWlyZV9sb2Rhc2ggPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoLnRocm90dGxlL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgdmFyIEZVTkNfRVJST1JfVEVYVCA9IFwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiO1xuICAgIHZhciBOQU4gPSAwIC8gMDtcbiAgICB2YXIgc3ltYm9sVGFnID0gXCJbb2JqZWN0IFN5bWJvbF1cIjtcbiAgICB2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG4gICAgdmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcbiAgICB2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcbiAgICB2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcbiAgICB2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG4gICAgdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG4gICAgdmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gXCJvYmplY3RcIiAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcbiAgICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG4gICAgdmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG4gICAgdmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuICAgIHZhciBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcbiAgICB2YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGxhc3RBcmdzLCBsYXN0VGhpcywgbWF4V2FpdCwgcmVzdWx0LCB0aW1lcklkLCBsYXN0Q2FsbFRpbWUsIGxhc3RJbnZva2VUaW1lID0gMCwgbGVhZGluZyA9IGZhbHNlLCBtYXhpbmcgPSBmYWxzZSwgdHJhaWxpbmcgPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgICAgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgICAgIG1heGluZyA9IFwibWF4V2FpdFwiIGluIG9wdGlvbnM7XG4gICAgICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgICAgIHRyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgICAgICB2YXIgYXJncyA9IGxhc3RBcmdzLCB0aGlzQXJnID0gbGFzdFRoaXM7XG4gICAgICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB2b2lkIDA7XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICAgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSwgcmVzdWx0MiA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcbiAgICAgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQyLCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQyO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICAgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcbiAgICAgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdm9pZCAwIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgICAgICB0aW1lcklkID0gdm9pZCAwO1xuICAgICAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICBpZiAodGltZXJJZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRpbWVySWQgPT09IHZvaWQgMCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgICAgIHZhciB0aW1lID0gbm93KCksIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG4gICAgICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG4gICAgICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICAgICAgaWYgKHRpbWVySWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZXJJZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICAgICAgcmV0dXJuIGRlYm91bmNlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGhyb3R0bGUzKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZSwgdHJhaWxpbmcgPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9IFwibGVhZGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgICAgIHRyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7XG4gICAgICAgIFwibGVhZGluZ1wiOiBsZWFkaW5nLFxuICAgICAgICBcIm1heFdhaXRcIjogd2FpdCxcbiAgICAgICAgXCJ0cmFpbGluZ1wiOiB0cmFpbGluZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09IFwib2JqZWN0XCIgfHwgdHlwZSA9PSBcImZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcInN5bWJvbFwiIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIE5BTjtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gXCJmdW5jdGlvblwiID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyBcIlwiIDogb3RoZXI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCBcIlwiKTtcbiAgICAgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gICAgICByZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KSA6IHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGUzO1xuICB9XG59KTtcblxuLy8gc3JjL3JlbmRlcmVyLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyOSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBtZWRpdW1ab29tIGZyb20gXCJAZmlzY2gwOTIwL21lZGl1bS16b29tXCI7XG5cbi8vIHNyYy9ibG9jay50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjggZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICBnZXRCbG9ja0NvbGxlY3Rpb25JZCxcbiAgZ2V0QmxvY2tJY29uIGFzIGdldEJsb2NrSWNvbjIsXG4gIGdldEJsb2NrUGFyZW50UGFnZSBhcyBnZXRCbG9ja1BhcmVudFBhZ2UyLFxuICBnZXRQYWdlVGFibGVPZkNvbnRlbnRzLFxuICBnZXRUZXh0Q29udGVudCBhcyBnZXRUZXh0Q29udGVudDIsXG4gIHV1aWRUb0lkIGFzIHV1aWRUb0lkMlxufSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LXdyYXBwZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDIwIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgYXMgcGFyc2VQYWdlSWQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCB7IGlzVXJsLCBmb3JtYXREYXRlLCBmb3JtYXROb3Rpb25EYXRlVGltZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL21hcC1pbWFnZS11cmwudHNcbnZhciBkZWZhdWx0TWFwSW1hZ2VVcmwgPSAodXJsLCBibG9jaykgPT4ge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICh1cmwuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb21cIikpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgdSA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAodS5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3NlY3VyZS5ub3Rpb24tc3RhdGljLmNvbVwiKSAmJiB1Lmhvc3RuYW1lLmVuZHNXaXRoKFwiLmFtYXpvbmF3cy5jb21cIikpIHtcbiAgICAgIGlmICh1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1DcmVkZW50aWFsXCIpICYmIHUuc2VhcmNoUGFyYW1zLmhhcyhcIlgtQW16LVNpZ25hdHVyZVwiKSAmJiB1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1BbGdvcml0aG1cIikpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VzXCIpKSB7XG4gICAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsfWA7XG4gIH1cbiAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VcIikgPyB1cmwgOiBgL2ltYWdlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YH1gO1xuICBjb25zdCBub3Rpb25JbWFnZVVybFYyID0gbmV3IFVSTCh1cmwpO1xuICBsZXQgdGFibGUgPSBibG9jay5wYXJlbnRfdGFibGUgPT09IFwic3BhY2VcIiA/IFwiYmxvY2tcIiA6IGJsb2NrLnBhcmVudF90YWJsZTtcbiAgaWYgKHRhYmxlID09PSBcImNvbGxlY3Rpb25cIiB8fCB0YWJsZSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICB0YWJsZSA9IFwiYmxvY2tcIjtcbiAgfVxuICBub3Rpb25JbWFnZVVybFYyLnNlYXJjaFBhcmFtcy5zZXQoXCJ0YWJsZVwiLCB0YWJsZSk7XG4gIG5vdGlvbkltYWdlVXJsVjIuc2VhcmNoUGFyYW1zLnNldChcImlkXCIsIGJsb2NrLmlkKTtcbiAgbm90aW9uSW1hZ2VVcmxWMi5zZWFyY2hQYXJhbXMuc2V0KFwiY2FjaGVcIiwgXCJ2MlwiKTtcbiAgdXJsID0gbm90aW9uSW1hZ2VVcmxWMi50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLy8gc3JjL21hcC1wYWdlLXVybC50c1xudmFyIGRlZmF1bHRNYXBQYWdlVXJsID0gKHJvb3RQYWdlSWQpID0+IChwYWdlSWQpID0+IHtcbiAgcGFnZUlkID0gKHBhZ2VJZCB8fCBcIlwiKS5yZXBsYWNlKC8tL2csIFwiXCIpO1xuICBpZiAocm9vdFBhZ2VJZCAmJiBwYWdlSWQgPT09IHJvb3RQYWdlSWQpIHtcbiAgICByZXR1cm4gXCIvXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAvJHtwYWdlSWR9YDtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzLnRzXG52YXIgY3MgPSAoLi4uY2xhc3NlcykgPT4gY2xhc3Nlcy5maWx0ZXIoKGEpID0+ICEhYSkuam9pbihcIiBcIik7XG52YXIgZ3JvdXBCbG9ja0NvbnRlbnQgPSAoYmxvY2tNYXApID0+IHtcbiAgY29uc3Qgb3V0cHV0ID0gW107XG4gIGxldCBsYXN0VHlwZSA9IHZvaWQgMDtcbiAgbGV0IGluZGV4ID0gLTE7XG4gIE9iamVjdC5rZXlzKGJsb2NrTWFwKS5mb3JFYWNoKChpZCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgYmxvY2tWYWx1ZSA9IChfYSA9IGJsb2NrTWFwW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGlmIChibG9ja1ZhbHVlKSB7XG4gICAgICAoX2IgPSBibG9ja1ZhbHVlLmNvbnRlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5mb3JFYWNoKChibG9ja0lkKSA9PiB7XG4gICAgICAgIHZhciBfYTIsIF9iMjtcbiAgICAgICAgY29uc3QgYmxvY2tUeXBlID0gKF9iMiA9IChfYTIgPSBibG9ja01hcFtibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50eXBlO1xuICAgICAgICBpZiAoYmxvY2tUeXBlICYmIGJsb2NrVHlwZSAhPT0gbGFzdFR5cGUpIHtcbiAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIGxhc3RUeXBlID0gYmxvY2tUeXBlO1xuICAgICAgICAgIG91dHB1dFtpbmRleF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgIG91dHB1dFtpbmRleF0ucHVzaChibG9ja0lkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxhc3RUeXBlID0gdm9pZCAwO1xuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn07XG52YXIgZ2V0TGlzdE51bWJlciA9IChibG9ja0lkLCBibG9ja01hcCkgPT4ge1xuICBjb25zdCBncm91cHMgPSBncm91cEJsb2NrQ29udGVudChibG9ja01hcCk7XG4gIGNvbnN0IGdyb3VwID0gZ3JvdXBzLmZpbmQoKGcpID0+IGcuaW5jbHVkZXMoYmxvY2tJZCkpO1xuICBpZiAoIWdyb3VwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiBncm91cC5pbmRleE9mKGJsb2NrSWQpICsgMTtcbn07XG52YXIgZ2V0SGFzaEZyYWdtZW50VmFsdWUgPSAodXJsKSA9PiB7XG4gIHJldHVybiB1cmwuaW5jbHVkZXMoXCIjXCIpID8gdXJsLnJlcGxhY2UoL14uKygjLispJC8sIFwiJDFcIikgOiBcIlwiO1xufTtcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIHlvdXR1YmVEb21haW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcInlvdXR1LmJlXCIsXG4gIFwieW91dHViZS5jb21cIixcbiAgXCJ3d3cueW91dHViZS5jb21cIixcbiAgXCJ5b3V0dWJlLW5vY29va2llLmNvbVwiLFxuICBcInd3dy55b3V0dWJlLW5vY29va2llLmNvbVwiXG5dKTtcbnZhciBnZXRZb3V0dWJlSWQgPSAodXJsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBob3N0bmFtZSB9ID0gbmV3IFVSTCh1cmwpO1xuICAgIGlmICgheW91dHViZURvbWFpbnMuaGFzKGhvc3RuYW1lKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlZ0V4cCA9IC9eLiooeW91dHVcXC5iZVxcL3x2XFwvfHVcXC9cXHdcXC98ZW1iZWRcXC98d2F0Y2hcXD92PXwmdj0pKFteIyY/XSopLiovaTtcbiAgICBjb25zdCBtYXRjaCA9IHVybC5tYXRjaChyZWdFeHApO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXS5sZW5ndGggPT0gMTEpIHtcbiAgICAgIHJldHVybiBtYXRjaFsyXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxOSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldFRleHRDb250ZW50IH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29udGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2NoZWNrYm94LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaWNvbnMvY2hlY2sudHN4XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z0NoZWNrKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNS41IDEyTDE0IDMuNSAxMi41IDJsLTcgNy00LTQuMDAzTDAgNi40OTl6XCJcbiAgfSkpO1xufVxudmFyIGNoZWNrX2RlZmF1bHQgPSBTdmdDaGVjaztcblxuLy8gc3JjL2NvbXBvbmVudHMvY2hlY2tib3gudHN4XG52YXIgQ2hlY2tib3ggPSAoeyBpc0NoZWNrZWQgfSkgPT4ge1xuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmIChpc0NoZWNrZWQpIHtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtY2hlY2tlZFwiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KGNoZWNrX2RlZmF1bHQsIG51bGwpKTtcbiAgfSBlbHNlIHtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtdW5jaGVja2VkXCJcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eSBub3Rpb24tcHJvcGVydHktY2hlY2tib3hcIlxuICB9LCBjb250ZW50KTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2hlYWRlci50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRQYWdlQnJlYWRjcnVtYnMgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyB1c2VIb3RrZXlzIH0gZnJvbSBcInJlYWN0LWhvdGtleXMtaG9va1wiO1xuXG4vLyBzcmMvaWNvbnMvc2VhcmNoLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDMgZnJvbSBcInJlYWN0XCI7XG52YXIgU2VhcmNoSWNvbiA9IChwcm9wcykgPT4ge1xuICBjb25zdCBfYSA9IHByb3BzLCB7IGNsYXNzTmFtZSB9ID0gX2EsIHJlc3QgPSBfX29ialJlc3QoX2EsIFtcImNsYXNzTmFtZVwiXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24taWNvblwiLCBjbGFzc05hbWUpLFxuICAgIHZpZXdCb3g6IFwiMCAwIDE3IDE3XCJcbiAgfSwgcmVzdCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYuNzgwMjcgMTMuNjcyOUM4LjI0ODA1IDEzLjY3MjkgOS42MDE1NiAxMy4xOTgyIDEwLjcwOSAxMi40MDcyTDE0Ljg3NSAxNi41NzMyQzE1LjA2ODQgMTYuNzY2NiAxNS4zMjMyIDE2Ljg2MzMgMTUuNTk1NyAxNi44NjMzQzE2LjE2NyAxNi44NjMzIDE2LjU3MTMgMTYuNDIzOCAxNi41NzEzIDE1Ljg2MTNDMTYuNTcxMyAxNS41OTc3IDE2LjQ4MzQgMTUuMzUxNiAxNi4yOSAxNS4xNTgyTDEyLjE1MDQgMTEuMDA5OEMxMy4wMjA1IDkuODY3MTkgMTMuNTM5MSA4LjQ1MjE1IDEzLjUzOTEgNi45MTQwNkMxMy41MzkxIDMuMTk2MjkgMTAuNDk4IDAuMTU1MjczIDYuNzgwMjcgMC4xNTUyNzNDMy4wNjI1IDAuMTU1MjczIDAuMDIxNDg0NCAzLjE5NjI5IDAuMDIxNDg0NCA2LjkxNDA2QzAuMDIxNDg0NCAxMC42MzE4IDMuMDYyNSAxMy42NzI5IDYuNzgwMjcgMTMuNjcyOVpNNi43ODAyNyAxMi4yMTM5QzMuODc5ODggMTIuMjEzOSAxLjQ4MDQ3IDkuODE0NDUgMS40ODA0NyA2LjkxNDA2QzEuNDgwNDcgNC4wMTM2NyAzLjg3OTg4IDEuNjE0MjYgNi43ODAyNyAxLjYxNDI2QzkuNjgwNjYgMS42MTQyNiAxMi4wODAxIDQuMDEzNjcgMTIuMDgwMSA2LjkxNDA2QzEyLjA4MDEgOS44MTQ0NSA5LjY4MDY2IDEyLjIxMzkgNi43ODAyNyAxMi4yMTM5WlwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NiBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldEJsb2NrSWNvbiwgZ2V0QmxvY2tUaXRsZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2ljb25zL2RlZmF1bHQtcGFnZS1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q0IGZyb20gXCJyZWFjdFwiO1xudmFyIERlZmF1bHRQYWdlSWNvbiA9IChwcm9wcykgPT4ge1xuICBjb25zdCBfYSA9IHByb3BzLCB7IGNsYXNzTmFtZSB9ID0gX2EsIHJlc3QgPSBfX29ialJlc3QoX2EsIFtcImNsYXNzTmFtZVwiXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lXG4gIH0sIHJlc3QpLCB7XG4gICAgdmlld0JveDogXCIwIDAgMzAgMzBcIixcbiAgICB3aWR0aDogXCIxNlwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNiwxSDR2MjhoMjJWMTFMMTYsMXogTTE2LDMuODI4TDIzLjE3MiwxMUgxNlYzLjgyOHogTTI0LDI3SDZWM2g4djEwaDEwVjI3eiBNOCwxN2gxNHYtMkg4VjE3eiBNOCwyMWgxNHYtMkg4VjIxeiBNOCwyNWgxNHYtMkg4VjI1elwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2xhenktaW1hZ2UudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBub3JtYWxpemVVcmwgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyBJbWFnZVN0YXRlLCBMYXp5SW1hZ2VGdWxsIH0gZnJvbSBcInJlYWN0LWxhenktaW1hZ2VzXCI7XG52YXIgTGF6eUltYWdlID0gKF9hKSA9PiB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgc3JjLFxuICAgIGFsdCxcbiAgICBjbGFzc05hbWUsXG4gICAgc3R5bGUsXG4gICAgem9vbWFibGUgPSBmYWxzZSxcbiAgICBwcmlvcml0eSA9IGZhbHNlLFxuICAgIGhlaWdodFxuICB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcInNyY1wiLFxuICAgIFwiYWx0XCIsXG4gICAgXCJjbGFzc05hbWVcIixcbiAgICBcInN0eWxlXCIsXG4gICAgXCJ6b29tYWJsZVwiLFxuICAgIFwicHJpb3JpdHlcIixcbiAgICBcImhlaWdodFwiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjIsIF9jO1xuICBjb25zdCB7IHJlY29yZE1hcCwgem9vbSwgcHJldmlld0ltYWdlcywgZm9yY2VDdXN0b21JbWFnZXMsIGNvbXBvbmVudHMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3Qgem9vbVJlZiA9IFJlYWN0NS51c2VSZWYoem9vbSA/IHpvb20uY2xvbmUoKSA6IG51bGwpO1xuICBjb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VzID8gKF9jID0gKF9hMiA9IHJlY29yZE1hcCA9PSBudWxsID8gdm9pZCAwIDogcmVjb3JkTWFwLnByZXZpZXdfaW1hZ2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyW3NyY10pICE9IG51bGwgPyBfYyA6IChfYjIgPSByZWNvcmRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IHJlY29yZE1hcC5wcmV2aWV3X2ltYWdlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMltub3JtYWxpemVVcmwoc3JjKV0gOiBudWxsO1xuICBjb25zdCBvbkxvYWQgPSBSZWFjdDUudXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmICh6b29tYWJsZSAmJiAoZS50YXJnZXQuc3JjIHx8IGUudGFyZ2V0LnNyY3NldCkpIHtcbiAgICAgICAgaWYgKHpvb21SZWYuY3VycmVudCkge1xuICAgICAgICAgIDtcbiAgICAgICAgICB6b29tUmVmLmN1cnJlbnQuYXR0YWNoKGUudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW3pvb21SZWYsIHpvb21hYmxlXVxuICApO1xuICBjb25zdCBhdHRhY2hab29tID0gUmVhY3Q1LnVzZUNhbGxiYWNrKFxuICAgIChpbWFnZSkgPT4ge1xuICAgICAgaWYgKHpvb21SZWYuY3VycmVudCAmJiBpbWFnZSkge1xuICAgICAgICA7XG4gICAgICAgIHpvb21SZWYuY3VycmVudC5hdHRhY2goaW1hZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3pvb21SZWZdXG4gICk7XG4gIGNvbnN0IGF0dGFjaFpvb21SZWYgPSBSZWFjdDUudXNlTWVtbyhcbiAgICAoKSA9PiB6b29tYWJsZSA/IGF0dGFjaFpvb20gOiB2b2lkIDAsXG4gICAgW3pvb21hYmxlLCBhdHRhY2hab29tXVxuICApO1xuICBpZiAocHJldmlld0ltYWdlKSB7XG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxIZWlnaHQgLyBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxXaWR0aDtcbiAgICBpZiAoY29tcG9uZW50cy5JbWFnZSkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkltYWdlLCB7XG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICBzdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICB3aWR0aDogcHJldmlld0ltYWdlLm9yaWdpbmFsV2lkdGgsXG4gICAgICAgIGhlaWdodDogcHJldmlld0ltYWdlLm9yaWdpbmFsSGVpZ2h0LFxuICAgICAgICBibHVyRGF0YVVSTDogcHJldmlld0ltYWdlLmRhdGFVUklCYXNlNjQsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcImJsdXJcIixcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIG9uTG9hZFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlRnVsbCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBzcmNcbiAgICB9LCByZXN0KSwge1xuICAgICAgZXhwZXJpbWVudGFsRGVjb2RlOiB0cnVlXG4gICAgfSksICh7IGltYWdlU3RhdGUsIHJlZiB9KSA9PiB7XG4gICAgICBjb25zdCBpc0xvYWRlZCA9IGltYWdlU3RhdGUgPT09IEltYWdlU3RhdGUuTG9hZFN1Y2Nlc3M7XG4gICAgICBjb25zdCB3cmFwcGVyU3R5bGUgPSB7XG4gICAgICAgIHdpZHRoOiBcIjEwMCVcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IGltZ1N0eWxlID0ge307XG4gICAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICAgIHdyYXBwZXJTdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbWdTdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgd3JhcHBlclN0eWxlLnBhZGRpbmdCb3R0b20gPSBgJHthc3BlY3RSYXRpbyAqIDEwMH0lYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgIFwibGF6eS1pbWFnZS13cmFwcGVyXCIsXG4gICAgICAgICAgaXNMb2FkZWQgJiYgXCJsYXp5LWltYWdlLWxvYWRlZFwiLFxuICAgICAgICAgIGNsYXNzTmFtZVxuICAgICAgICApLFxuICAgICAgICBzdHlsZTogd3JhcHBlclN0eWxlXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibGF6eS1pbWFnZS1wcmV2aWV3XCIsXG4gICAgICAgIHNyYzogcHJldmlld0ltYWdlLmRhdGFVUklCYXNlNjQsXG4gICAgICAgIGFsdCxcbiAgICAgICAgcmVmLFxuICAgICAgICBzdHlsZSxcbiAgICAgICAgZGVjb2Rpbmc6IFwiYXN5bmNcIlxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImltZ1wiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJsYXp5LWltYWdlLXJlYWxcIixcbiAgICAgICAgc3JjLFxuICAgICAgICBhbHQsXG4gICAgICAgIHJlZjogYXR0YWNoWm9vbVJlZixcbiAgICAgICAgc3R5bGU6IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdHlsZSksIGltZ1N0eWxlKSxcbiAgICAgICAgd2lkdGg6IHByZXZpZXdJbWFnZS5vcmlnaW5hbFdpZHRoLFxuICAgICAgICBoZWlnaHQ6IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgZGVjb2Rpbmc6IFwiYXN5bmNcIixcbiAgICAgICAgbG9hZGluZzogXCJsYXp5XCJcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoY29tcG9uZW50cy5JbWFnZSAmJiBmb3JjZUN1c3RvbUltYWdlcykge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkltYWdlLCB7XG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICB3aWR0aDogbnVsbCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQgfHwgbnVsbCxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIG9uTG9hZFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgc3R5bGUsXG4gICAgICBzcmMsXG4gICAgICBhbHQsXG4gICAgICByZWY6IGF0dGFjaFpvb21SZWYsXG4gICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgIGRlY29kaW5nOiBcImFzeW5jXCJcbiAgICB9LCByZXN0KSk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtaWNvbi50c3hcbnZhciBpc0ljb25CbG9jayA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gdmFsdWUudHlwZSA9PT0gXCJwYWdlXCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjYWxsb3V0XCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIiB8fCB2YWx1ZS50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCI7XG59O1xudmFyIFBhZ2VJY29uSW1wbCA9ICh7XG4gIGJsb2NrLFxuICBjbGFzc05hbWUsXG4gIGlubGluZSA9IHRydWUsXG4gIGhpZGVEZWZhdWx0SWNvbiA9IGZhbHNlLFxuICBkZWZhdWx0SWNvblxufSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgbWFwSW1hZ2VVcmwsIHJlY29yZE1hcCwgZGFya01vZGUgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgbGV0IGlzSW1hZ2UgPSBmYWxzZTtcbiAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICBpZiAoaXNJY29uQmxvY2soYmxvY2spKSB7XG4gICAgY29uc3QgaWNvbiA9ICgoX2EgPSBnZXRCbG9ja0ljb24oYmxvY2ssIHJlY29yZE1hcCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmltKCkpIHx8IGRlZmF1bHRJY29uO1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZShibG9jaywgcmVjb3JkTWFwKTtcbiAgICBpZiAoaWNvbiAmJiBpc1VybChpY29uKSkge1xuICAgICAgY29uc3QgdXJsID0gbWFwSW1hZ2VVcmwoaWNvbiwgYmxvY2spO1xuICAgICAgaXNJbWFnZSA9IHRydWU7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KExhenlJbWFnZSwge1xuICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgYWx0OiB0aXRsZSB8fCBcInBhZ2UgaWNvblwiLFxuICAgICAgICBjbGFzc05hbWU6IGNzKGNsYXNzTmFtZSwgXCJub3Rpb24tcGFnZS1pY29uXCIpXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGljb24gJiYgaWNvbi5zdGFydHNXaXRoKFwiL2ljb25zL1wiKSkge1xuICAgICAgY29uc3QgdXJsID0gXCJodHRwczovL3d3dy5ub3Rpb24uc29cIiArIGljb24gKyBcIj9tb2RlPVwiICsgKGRhcmtNb2RlID8gXCJkYXJrXCIgOiBcImxpZ2h0XCIpO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgc3JjOiB1cmwsXG4gICAgICAgIGFsdDogdGl0bGUgfHwgXCJwYWdlIGljb25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaWNvbikge1xuICAgICAgaWYgKCFoaWRlRGVmYXVsdEljb24pIHtcbiAgICAgICAgaXNJbWFnZSA9IHRydWU7XG4gICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoRGVmYXVsdFBhZ2VJY29uLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKSxcbiAgICAgICAgICBhbHQ6IHRpdGxlID8gdGl0bGUgOiBcInBhZ2UgaWNvblwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpc0ltYWdlID0gZmFsc2U7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIiksXG4gICAgICAgIHJvbGU6IFwiaW1nXCIsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBpY29uXG4gICAgICB9LCBpY29uKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIGlubGluZSA/IFwibm90aW9uLXBhZ2UtaWNvbi1pbmxpbmVcIiA6IFwibm90aW9uLXBhZ2UtaWNvbi1oZXJvXCIsXG4gICAgICBpc0ltYWdlID8gXCJub3Rpb24tcGFnZS1pY29uLWltYWdlXCIgOiBcIm5vdGlvbi1wYWdlLWljb24tc3BhblwiXG4gICAgKVxuICB9LCBjb250ZW50KTtcbn07XG52YXIgUGFnZUljb24gPSBSZWFjdDYubWVtbyhQYWdlSWNvbkltcGwpO1xuXG4vLyBzcmMvY29tcG9uZW50cy9zZWFyY2gtZGlhbG9nLnRzeFxudmFyIGltcG9ydF9sb2Rhc2ggPSBfX3RvRVNNKHJlcXVpcmVfbG9kYXNoKCksIDEpO1xuaW1wb3J0ICogYXMgUmVhY3QxNCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldEJsb2NrUGFyZW50UGFnZSwgZ2V0QmxvY2tUaXRsZSBhcyBnZXRCbG9ja1RpdGxlMyB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2ljb25zL2NsZWFyLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDcgZnJvbSBcInJlYWN0XCI7XG52YXIgQ2xlYXJJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDMwIDMwXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTE1LDBDNi43MTYsMCwwLDYuNzE2LDAsMTVzNi43MTYsMTUsMTUsMTVzMTUtNi43MTYsMTUtMTVTMjMuMjg0LDAsMTUsMHogTTIyLDIwLjZMMjAuNiwyMkwxNSwxNi40TDkuNCwyMkw4LDIwLjZsNS42LTUuNiBMOCw5LjRMOS40LDhsNS42LDUuNkwyMC42LDhMMjIsOS40TDE2LjQsMTVMMjIsMjAuNnpcIlxuICB9KSk7XG59O1xuXG4vLyBzcmMvaWNvbnMvbG9hZGluZy1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q4IGZyb20gXCJyZWFjdFwiO1xudmFyIExvYWRpbmdJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcImRlZnNcIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwibGluZWFyR3JhZGllbnRcIiwge1xuICAgIHgxOiBcIjI4LjE1NDI5NjklXCIsXG4gICAgeTE6IFwiNjMuNzQwMjM0NCVcIixcbiAgICB4MjogXCI3NC42Mjg5MDYyJVwiLFxuICAgIHkyOiBcIjE3Ljc4MzIwMzElXCIsXG4gICAgaWQ6IFwibGluZWFyR3JhZGllbnQtMVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInN0b3BcIiwge1xuICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgb2Zmc2V0OiBcIjAlXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInN0b3BcIiwge1xuICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDApXCIsXG4gICAgc3RvcE9wYWNpdHk6IFwiMFwiLFxuICAgIG9mZnNldDogXCIxMDAlXCJcbiAgfSkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgaWQ6IFwiUGFnZS0xXCIsXG4gICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICBzdHJva2VXaWR0aDogXCIxXCIsXG4gICAgZmlsbDogXCJub25lXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtMjM2LjAwMDAwMCwgLTI4Ni4wMDAwMDApXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgyMzguMDAwMDAwLCAyODYuMDAwMDAwKVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcImNpcmNsZVwiLCB7XG4gICAgaWQ6IFwiT3ZhbC0yXCIsXG4gICAgc3Ryb2tlOiBcInVybCgjbGluZWFyR3JhZGllbnQtMSlcIixcbiAgICBzdHJva2VXaWR0aDogXCI0XCIsXG4gICAgY3g6IFwiMTBcIixcbiAgICBjeTogXCIxMlwiLFxuICAgIHI6IFwiMTBcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTAsMiBDNC40NzcxNTI1LDIgMCw2LjQ3NzE1MjUgMCwxMlwiLFxuICAgIGlkOiBcIk92YWwtMlwiLFxuICAgIHN0cm9rZTogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgc3Ryb2tlV2lkdGg6IFwiNFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICBpZDogXCJSZWN0YW5nbGUtMVwiLFxuICAgIGZpbGw6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAxKVwiLFxuICAgIHg6IFwiOFwiLFxuICAgIHk6IFwiMFwiLFxuICAgIHdpZHRoOiBcIjRcIixcbiAgICBoZWlnaHQ6IFwiNFwiLFxuICAgIHJ4OiBcIjhcIlxuICB9KSkpKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLXRpdGxlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldEJsb2NrVGl0bGUgYXMgZ2V0QmxvY2tUaXRsZTIgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL3RleHQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDEyIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy90eXBlLWdpdGh1Yi50c3hcbmltcG9ydCAqIGFzIFJlYWN0OSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVHaXRIdWIocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMjYwIDI2MFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwiZ1wiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xMjguMDAxMDYsMCBDNTcuMzE3MjkyNiwwIDAsNTcuMzA2Njk0MiAwLDEyOC4wMDEwNiBDMCwxODQuNTU1MjgxIDM2LjY3NjE5OTcsMjMyLjUzNTU0MiA4Ny41MzQ5MzcsMjQ5LjQ2MDg5OSBDOTMuOTMyMDIyMywyNTAuNjQ1Nzc5IDk2LjI4MDU4OCwyNDYuNjg0MTY1IDk2LjI4MDU4OCwyNDMuMzAzMzMzIEM5Ni4yODA1ODgsMjQwLjI1MTA0NSA5Ni4xNjE4ODc4LDIzMC4xNjc4OTkgOTYuMTA2Nzc3LDIxOS40NzIxNzYgQzYwLjQ5Njc1ODUsMjI3LjIxNTIzNSA1Mi45ODI2MjA3LDIwNC4zNjk3MTIgNTIuOTgyNjIwNywyMDQuMzY5NzEyIEM0Ny4xNTk5NTg0LDE4OS41NzQ1OTggMzguNzcwNDA4LDE4NS42NDA1MzggMzguNzcwNDA4LDE4NS42NDA1MzggQzI3LjE1Njg3ODUsMTc3LjY5NjExMyAzOS42NDU4MjA2LDE3Ny44NTkzMjUgMzkuNjQ1ODIwNiwxNzcuODU5MzI1IEM1Mi40OTkzNDE5LDE3OC43NjIyOTMgNTkuMjY3MzY1LDE5MS4wNDk4NyA1OS4yNjczNjUsMTkxLjA0OTg3IEM3MC42ODM3Njc1LDIxMC42MTg0MjMgODkuMjExNTc1MywyMDQuOTYxMDkzIDk2LjUxNTg2ODUsMjAxLjY5MDQ4MiBDOTcuNjY0NzE1NSwxOTMuNDE3NTEyIDEwMC45ODE5NTksMTg3Ljc3MDc4IDEwNC42NDI1ODMsMTg0LjU3NDM1NyBDNzYuMjExNzk5LDE4MS4zMzc2NiA0Ni4zMjQ4MTksMTcwLjM2MjE0NCA0Ni4zMjQ4MTksMTIxLjMxNTcwMiBDNDYuMzI0ODE5LDEwNy4zNDA4ODkgNTEuMzI1MDU4OCw5NS45MjIzNjgyIDU5LjUxMzI0MzcsODYuOTU4MzkzNyBDNTguMTg0MjI2OCw4My43MzQ0MTUyIDUzLjgwMjkyMjksNzAuNzE1NTYyIDYwLjc1MzIzNTQsNTMuMDg0MzYzNiBDNjAuNzUzMjM1NCw1My4wODQzNjM2IDcxLjUwMTk1MDEsNDkuNjQ0MTgxMyA5NS45NjI2NDEyLDY2LjIwNDk1OTUgQzEwNi4xNzI5NjcsNjMuMzY4ODc2IDExNy4xMjMwNDcsNjEuOTQ2NTk0OSAxMjguMDAxMDYsNjEuODk3ODQzMiBDMTM4Ljg3OTA3Myw2MS45NDY1OTQ5IDE0OS44Mzc2MzIsNjMuMzY4ODc2IDE2MC4wNjcwMzMsNjYuMjA0OTU5NSBDMTg0LjQ5ODA1LDQ5LjY0NDE4MTMgMTk1LjIzMTkyNiw1My4wODQzNjM2IDE5NS4yMzE5MjYsNTMuMDg0MzYzNiBDMjAyLjE5OTE5Nyw3MC43MTU1NjIgMTk3LjgxNTc3Myw4My43MzQ0MTUyIDE5Ni40ODY3NTYsODYuOTU4MzkzNyBDMjA0LjY5NDAxOCw5NS45MjIzNjgyIDIwOS42NjAzNDMsMTA3LjM0MDg4OSAyMDkuNjYwMzQzLDEyMS4zMTU3MDIgQzIwOS42NjAzNDMsMTcwLjQ3ODcyNSAxNzkuNzE2MTMzLDE4MS4zMDM3NDcgMTUxLjIxMzI4MSwxODQuNDcyNjE0IEMxNTUuODA0NDMsMTg4LjQ0NDgyOCAxNTkuODk1MzQyLDE5Ni4yMzQ1MTggMTU5Ljg5NTM0MiwyMDguMTc2NTkzIEMxNTkuODk1MzQyLDIyNS4zMDMzMTcgMTU5Ljc0Njk2OCwyMzkuMDg3MzYxIDE1OS43NDY5NjgsMjQzLjMwMzMzMyBDMTU5Ljc0Njk2OCwyNDYuNzA5NjAxIDE2Mi4wNTEwMiwyNTAuNzAwODkgMTY4LjUzOTI1LDI0OS40NDM5NDEgQzIxOS4zNzA0MzIsMjMyLjQ5OTUwNyAyNTYsMTg0LjUzNjIwNCAyNTYsMTI4LjAwMTA2IEMyNTYsNTcuMzA2Njk0MiAxOTguNjkxMTg3LDAgMTI4LjAwMTA2LDAgWiBNNDcuOTQwNTU5MywxODIuMzQwMjEyIEM0Ny42NTg2NDY1LDE4Mi45NzYxMDUgNDYuNjU4MTc0NSwxODMuMTY2ODczIDQ1Ljc0NjcyNzcsMTgyLjczMDIyNyBDNDQuODE4MzIzNSwxODIuMzEyNjU2IDQ0LjI5Njg5MTQsMTgxLjQ0NTcyMiA0NC41OTc4ODA4LDE4MC44MDc3MSBDNDQuODczNDM0NCwxODAuMTUyNzM5IDQ1Ljg3NjAyNiwxNzkuOTcwNDUgNDYuODAyMzEwMywxODAuNDA5MjE2IEM0Ny43MzI4MzQyLDE4MC44MjY3ODYgNDguMjYyNzQ1MSwxODEuNzAyMTk5IDQ3Ljk0MDU1OTMsMTgyLjM0MDIxMiBaIE01NC4yMzY3ODkyLDE4Ny45NTgyNTQgQzUzLjYyNjMzMTgsMTg4LjUyNDE5OSA1Mi40MzI5NzIzLDE4OC4yNjEzNjMgNTEuNjIzMjY4MiwxODcuMzY2ODc0IEM1MC43ODYwMDg4LDE4Ni40NzQ1MDQgNTAuNjI5MTU1MywxODUuMjgxMTQ0IDUxLjI0ODA5MTIsMTg0LjcwNjcyIEM1MS44Nzc2MjU0LDE4NC4xNDA3NzUgNTMuMDM0OTUxMiwxODQuNDA1NzMxIDUzLjg3NDMzMDIsMTg1LjI5ODEwMSBDNTQuNzExNTg5MiwxODYuMjAxMDY5IDU0Ljg3NDgwMTksMTg3LjM4NTk1IDU0LjIzNjc4OTIsMTg3Ljk1ODI1NCBaIE01OC41NTYyNDEzLDE5NS4xNDYzNDcgQzU3Ljc3MTk3MzIsMTk1LjY5MTA5NiA1Ni40ODk1ODg2LDE5NS4xODAyNjEgNTUuNjk2ODQxNywxOTQuMDQyMDEzIEM1NC45MTI1NzMzLDE5Mi45MDM3NjQgNTQuOTEyNTczMywxOTEuNTM4NzEzIDU1LjcxMzc5OSwxOTAuOTkxODQ1IEM1Ni41MDg2NjUxLDE5MC40NDQ5NzcgNTcuNzcxOTczMiwxOTAuOTM2NzM1IDU4LjU3NTMxODEsMTkyLjA2NjUwNSBDNTkuMzU3NDY2OSwxOTMuMjIzODMgNTkuMzU3NDY2OSwxOTQuNTg4ODggNTguNTU2MjQxMywxOTUuMTQ2MzQ3IFogTTY1Ljg2MTM1OTIsMjAzLjQ3MTE3NCBDNjUuMTU5NzU3MSwyMDQuMjQ0ODQ2IDYzLjY2NTQwODMsMjA0LjAzNzEyIDYyLjU3MTY3MTcsMjAyLjk4MTUzOCBDNjEuNDUyNDk5OSwyMDEuOTQ5MjcgNjEuMTQwOTEyMiwyMDAuNDg0NTk2IDYxLjg0NDYzNDEsMTk5LjcxMDkyNiBDNjIuNTU0NzE0NiwxOTguOTM1MTM3IDY0LjA1NzU0MjIsMTk5LjE1MzQ2IDY1LjE1OTc1NzEsMjAwLjIwMDU2NCBDNjYuMjcwNDUwNiwyMDEuMjMwNzEyIDY2LjYwOTU5MzYsMjAyLjcwNTk4NCA2NS44NjEzNTkyLDIwMy40NzExNzQgWiBNNzUuMzAyNTE1MSwyMDYuMjgxNTQyIEM3NC45OTMwNDc0LDIwNy4yODQxMzQgNzMuNTUzODA5LDIwNy43Mzk4NTcgNzIuMTAzOTcyNCwyMDcuMzEzODA5IEM3MC42NTYyNTU2LDIwNi44NzUwNDMgNjkuNzA4Nzc0OCwyMDUuNzAwNzYxIDcwLjAwMTI4NTcsMjA0LjY4NzU3MSBDNzAuMzAyMjc1LDIwMy42Nzg2MjEgNzEuNzQ3ODcyMSwyMDMuMjAzODIgNzMuMjA4MzA2OSwyMDMuNjU5NTQzIEM3NC42NTM5MDQxLDIwNC4wOTYxOSA3NS42MDM1MDQ4LDIwNS4yNjE5OTQgNzUuMzAyNTE1MSwyMDYuMjgxNTQyIFogTTg2LjA0Njk0NywyMDcuNDczNjI3IEM4Ni4wODI5ODA2LDIwOC41MjkyMDkgODQuODUzNTg3MSwyMDkuNDA0NjIyIDgzLjMzMTY4MjksMjA5LjQyMzcgQzgxLjgwMTMsMjA5LjQ1NzYxNCA4MC41NjM0MjgsMjA4LjYwMzM5OCA4MC41NDY0NzA4LDIwNy41NjQ3NzIgQzgwLjU0NjQ3MDgsMjA2LjQ5ODU5MSA4MS43NDgzMDg4LDIwNS42MzE2NTcgODMuMjc4NjkxNywyMDUuNjA2MjIxIEM4NC44MDA1OTYyLDIwNS41NzY1NDYgODYuMDQ2OTQ3LDIwNi40MjQ0MDMgODYuMDQ2OTQ3LDIwNy40NzM2MjcgWiBNOTYuNjAyMTQ3MSwyMDcuMDY5MDIzIEM5Ni43ODQ0MzY2LDIwOC4wOTkxNzEgOTUuNzI2NzM0MSwyMDkuMTU2ODcyIDk0LjIxNTQyOCwyMDkuNDM4Nzg1IEM5Mi43Mjk1NTc3LDIwOS43MTAwOTkgOTEuMzUzOTA4NiwyMDkuMDc0MjA2IDkxLjE2NTI2MDMsMjA4LjA1MjUzOCBDOTAuOTgwODUxNSwyMDYuOTk2OTU1IDkyLjA1NzYzMDYsMjA1LjkzOTI1MyA5My41NDEzODEzLDIwNS42NjU4MiBDOTUuMDU0ODA3LDIwNS40MDI5ODQgOTYuNDA5MjU5NiwyMDYuMDIxOTE5IDk2LjYwMjE0NzEsMjA3LjA2OTAyMyBaXCIsXG4gICAgZmlsbDogXCIjMTYxNjE0XCJcbiAgfSkpKTtcbn1cbnZhciB0eXBlX2dpdGh1Yl9kZWZhdWx0ID0gU3ZnVHlwZUdpdEh1YjtcblxuLy8gc3JjL2NvbXBvbmVudHMvZW9pLnRzeFxudmFyIEVPSSA9ICh7IGJsb2NrLCBpbmxpbmUsIGNsYXNzTmFtZSB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCB7IGNvbXBvbmVudHMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgeyBvcmlnaW5hbF91cmwsIGF0dHJpYnV0ZXMsIGRvbWFpbiB9ID0gKGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5mb3JtYXQpIHx8IHt9O1xuICBpZiAoIW9yaWdpbmFsX3VybCB8fCAhYXR0cmlidXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHRpdGxlID0gKF9hID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcInRpdGxlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWVzWzBdO1xuICBsZXQgb3duZXIgPSAoX2IgPSBhdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IFwib3duZXJcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZXNbMF07XG4gIGNvbnN0IGxhc3RVcGRhdGVkQXQgPSAoX2MgPSBhdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IFwidXBkYXRlZF9hdFwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnZhbHVlc1swXTtcbiAgY29uc3QgbGFzdFVwZGF0ZWQgPSBsYXN0VXBkYXRlZEF0ID8gZm9ybWF0Tm90aW9uRGF0ZVRpbWUobGFzdFVwZGF0ZWRBdCkgOiBudWxsO1xuICBsZXQgZXh0ZXJuYWxJbWFnZTtcbiAgc3dpdGNoIChkb21haW4pIHtcbiAgICBjYXNlIFwiZ2l0aHViLmNvbVwiOlxuICAgICAgZXh0ZXJuYWxJbWFnZSA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQodHlwZV9naXRodWJfZGVmYXVsdCwgbnVsbCk7XG4gICAgICBpZiAob3duZXIpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBvd25lci5zcGxpdChcIi9cIik7XG4gICAgICAgIG93bmVyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFVuc3VwcG9ydGVkIGV4dGVybmFsX29iamVjdF9pbnN0YW5jZSBkb21haW4gXCIke2RvbWFpbn1cImAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYmxvY2ssIG51bGwsIDIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkxpbmssIHtcbiAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcbiAgICBocmVmOiBvcmlnaW5hbF91cmwsXG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLWV4dGVybmFsXCIsXG4gICAgICBpbmxpbmUgPyBcIm5vdGlvbi1leHRlcm5hbC1tZW50aW9uXCIgOiBcIm5vdGlvbi1leHRlcm5hbC1ibG9jayBub3Rpb24tcm93XCIsXG4gICAgICBjbGFzc05hbWVcbiAgICApXG4gIH0sIGV4dGVybmFsSW1hZ2UgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1pbWFnZVwiXG4gIH0sIGV4dGVybmFsSW1hZ2UpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLWRlc2NyaXB0aW9uXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC10aXRsZVwiXG4gIH0sIHRpdGxlKSwgKG93bmVyIHx8IGxhc3RVcGRhdGVkKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlXCJcbiAgfSwgb3duZXIgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgb3duZXIpLCBvd25lciAmJiBsYXN0VXBkYXRlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCBcIiBcXHUyMDIyIFwiKSwgbGFzdFVwZGF0ZWQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgXCJVcGRhdGVkIFwiLCBsYXN0VXBkYXRlZCkpKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9ncmFjZWZ1bC1pbWFnZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbWcgfSBmcm9tIFwicmVhY3QtaW1hZ2VcIjtcbnZhciBHcmFjZWZ1bEltYWdlID0gKHByb3BzKSA9PiB7XG4gIGlmIChpc0Jyb3dzZXIpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChJbWcsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy90ZXh0LnRzeFxudmFyIFRleHQgPSAoeyB2YWx1ZSwgYmxvY2ssIGxpbmtQcm9wcywgbGlua1Byb3RvY29sIH0pID0+IHtcbiAgY29uc3QgeyBjb21wb25lbnRzLCByZWNvcmRNYXAsIG1hcFBhZ2VVcmwsIG1hcEltYWdlVXJsLCByb290RG9tYWluIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFJlYWN0MTIuRnJhZ21lbnQsIG51bGwsIHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5tYXAoKFt0ZXh0LCBkZWNvcmF0aW9uc10sIGluZGV4KSA9PiB7XG4gICAgaWYgKCFkZWNvcmF0aW9ucykge1xuICAgICAgaWYgKHRleHQgPT09IFwiLFwiKSB7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICBzdHlsZTogeyBwYWRkaW5nOiBcIjAuNWVtXCIgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFJlYWN0MTIuRnJhZ21lbnQsIHtcbiAgICAgICAgICBrZXk6IGluZGV4XG4gICAgICAgIH0sIHRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSBkZWNvcmF0aW9ucy5yZWR1Y2UoXG4gICAgICAoZWxlbWVudCwgZGVjb3JhdG9yKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHN3aXRjaCAoZGVjb3JhdG9yWzBdKSB7XG4gICAgICAgICAgY2FzZSBcInBcIjoge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZEJsb2NrID0gKF9hID0gcmVjb3JkTWFwLmJsb2NrW2Jsb2NrSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgICAgICAgICBpZiAoIWxpbmtlZEJsb2NrKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcInBcIiBtaXNzaW5nIGJsb2NrJywgYmxvY2tJZCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgaHJlZjogbWFwUGFnZVVybChibG9ja0lkKVxuICAgICAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgICAgICAgYmxvY2s6IGxpbmtlZEJsb2NrXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJcXHUyMDIzXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUeXBlID0gZGVjb3JhdG9yWzFdWzBdO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBkZWNvcmF0b3JbMV1bMV07XG4gICAgICAgICAgICBzd2l0Y2ggKGxpbmtUeXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ1XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gKF9iID0gcmVjb3JkTWFwLm5vdGlvbl91c2VyW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1wiXFx1MjAyM1wiIG1pc3NpbmcgdXNlcicsIGlkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gW3VzZXIuZ2l2ZW5fbmFtZSwgdXNlci5mYW1pbHlfbmFtZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KEdyYWNlZnVsSW1hZ2UsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdXNlclwiLFxuICAgICAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybCh1c2VyLnByb2ZpbGVfcGhvdG8sIGJsb2NrKSxcbiAgICAgICAgICAgICAgICAgIGFsdDogbmFtZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRCbG9jayA9IChfYyA9IHJlY29yZE1hcC5ibG9ja1tpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmtlZEJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXCJcXHUyMDIzXCIgbWlzc2luZyBibG9jaycsIGxpbmtUeXBlLCBpZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoaWQpXG4gICAgICAgICAgICAgICAgfSwgbGlua1Byb3BzKSwge1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFBhZ2VUaXRsZSwge1xuICAgICAgICAgICAgICAgICAgYmxvY2s6IGxpbmtlZEJsb2NrXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IGBub3Rpb24tJHtkZWNvcmF0b3JbMV19YFxuICAgICAgICAgICAgfSwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiY29kZVwiLCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24taW5saW5lLWNvZGVcIlxuICAgICAgICAgICAgfSwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcImJcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiYlwiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiaVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJlbVwiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJzXCIsIG51bGwsIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJfXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWlubGluZS11bmRlcnNjb3JlXCJcbiAgICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkVxdWF0aW9uLCB7XG4gICAgICAgICAgICAgIG1hdGg6IGRlY29yYXRvclsxXSxcbiAgICAgICAgICAgICAgaW5saW5lOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgY2FzZSBcImFcIjoge1xuICAgICAgICAgICAgY29uc3QgdiA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhuYW1lID0gdi5zdWJzdHIoMSk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlUGFnZUlkKHBhdGhuYW1lLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgICAgICAgICBpZiAoKHZbMF0gPT09IFwiL1wiIHx8IHYuaW5jbHVkZXMocm9vdERvbWFpbikpICYmIGlkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB2LmluY2x1ZGVzKHJvb3REb21haW4pID8gdiA6IGAke21hcFBhZ2VVcmwoaWQpfSR7Z2V0SGFzaEZyYWdtZW50VmFsdWUodil9YDtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlua1wiLFxuICAgICAgICAgICAgICAgIGhyZWZcbiAgICAgICAgICAgICAgfSwgbGlua1Byb3BzKSwgZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkxpbmssIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgICBocmVmOiBsaW5rUHJvdG9jb2wgPyBgJHtsaW5rUHJvdG9jb2x9OiR7ZGVjb3JhdG9yWzFdfWAgOiBkZWNvcmF0b3JbMV1cbiAgICAgICAgICAgICAgfSwgbGlua1Byb3BzKSwgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJkXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdiA9PSBudWxsID8gdm9pZCAwIDogdi50eXBlO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHYuc3RhcnRfZGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoc3RhcnREYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJkYXRlcmFuZ2VcIikge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSB2LnN0YXJ0X2RhdGU7XG4gICAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB2LmVuZF9kYXRlO1xuICAgICAgICAgICAgICByZXR1cm4gYCR7Zm9ybWF0RGF0ZShzdGFydERhdGUpfSBcXHUyMTkyICR7Zm9ybWF0RGF0ZShlbmREYXRlKX1gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJ1XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSAoX2QgPSByZWNvcmRNYXAubm90aW9uX3VzZXJbdXNlcklkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWlzc2luZyB1c2VyXCIsIHVzZXJJZCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IFt1c2VyLmdpdmVuX25hbWUsIHVzZXIuZmFtaWx5X25hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KEdyYWNlZnVsSW1hZ2UsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi11c2VyXCIsXG4gICAgICAgICAgICAgIHNyYzogbWFwSW1hZ2VVcmwodXNlci5wcm9maWxlX3Bob3RvLCBibG9jayksXG4gICAgICAgICAgICAgIGFsdDogbmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJlb2lcIjoge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsT2JqZWN0SW5zdGFuY2UgPSAoX2UgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZS52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KEVPSSwge1xuICAgICAgICAgICAgICBibG9jazogZXh0ZXJuYWxPYmplY3RJbnN0YW5jZSxcbiAgICAgICAgICAgICAgaW5saW5lOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICh0cnVlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5zdXBwb3J0ZWQgdGV4dCBmb3JtYXRcIiwgZGVjb3JhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCB0ZXh0KVxuICAgICk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwge1xuICAgICAga2V5OiBpbmRleFxuICAgIH0sIGZvcm1hdHRlZCk7XG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtdGl0bGUudHN4XG52YXIgUGFnZVRpdGxlSW1wbCA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwgeyBibG9jaywgY2xhc3NOYW1lLCBkZWZhdWx0SWNvbiB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcImJsb2NrXCIsIFwiY2xhc3NOYW1lXCIsIFwiZGVmYXVsdEljb25cIl0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2spXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZTIoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKCF0aXRsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRpdGxlRGVjb3JhdGlvbiA9IFtbdGl0bGVdXTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1wYWdlLXRpdGxlXCIsIGNsYXNzTmFtZSlcbiAgICB9LCByZXN0KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChQYWdlSWNvbiwge1xuICAgICAgYmxvY2ssXG4gICAgICBkZWZhdWx0SWNvbixcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS10aXRsZS1pY29uXCJcbiAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIlxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgdmFsdWU6IHRpdGxlRGVjb3JhdGlvbixcbiAgICAgIGJsb2NrXG4gICAgfSkpKTtcbiAgfVxuICBpZiAoISgoX2EyID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50aXRsZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tcGFnZS10aXRsZVwiLCBjbGFzc05hbWUpXG4gIH0sIHJlc3QpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgYmxvY2ssXG4gICAgZGVmYXVsdEljb24sXG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLWljb25cIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS10aXRsZS10ZXh0XCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgdmFsdWU6IChfYjIgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnRpdGxlLFxuICAgIGJsb2NrXG4gIH0pKSk7XG59O1xudmFyIFBhZ2VUaXRsZSA9IFJlYWN0MTMubWVtbyhQYWdlVGl0bGVJbXBsKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvc2VhcmNoLWRpYWxvZy50c3hcbnZhciBTZWFyY2hEaWFsb2cgPSBjbGFzcyBleHRlbmRzIFJlYWN0MTQuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBxdWVyeTogXCJcIixcbiAgICAgIHNlYXJjaFJlc3VsdDogbnVsbCxcbiAgICAgIHNlYXJjaEVycm9yOiBudWxsXG4gICAgfTtcbiAgICB0aGlzLl9vbkFmdGVyT3BlbiA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX29uQ2hhbmdlUXVlcnkgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBxdWVyeSB9KTtcbiAgICAgIGlmICghcXVlcnkudHJpbSgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IGZhbHNlLCBzZWFyY2hSZXN1bHQ6IG51bGwsIHNlYXJjaEVycm9yOiBudWxsIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZWFyY2goKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX29uQ2xlYXJRdWVyeSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX29uQ2hhbmdlUXVlcnkoeyB0YXJnZXQ6IHsgdmFsdWU6IFwiXCIgfSB9KTtcbiAgICB9O1xuICAgIHRoaXMuX3dhcm11cFNlYXJjaCA9ICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIHlpZWxkIHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5OiBcIlwiLFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VhcmNoSW1wbCA9ICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHsgcXVlcnkgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0OiBudWxsLCBzZWFyY2hFcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcInNlYXJjaFwiLCBxdWVyeSwgcmVzdWx0KTtcbiAgICAgIGxldCBzZWFyY2hSZXN1bHQgPSBudWxsO1xuICAgICAgbGV0IHNlYXJjaEVycm9yID0gbnVsbDtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3IgfHwgcmVzdWx0LmVycm9ySWQpIHtcbiAgICAgICAgc2VhcmNoRXJyb3IgPSByZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWFyY2hSZXN1bHQgPSBfX3NwcmVhZFZhbHVlcyh7fSwgcmVzdWx0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHNlYXJjaFJlc3VsdC5yZXN1bHRzLm1hcCgocmVzdWx0MikgPT4ge1xuICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgY29uc3QgYmxvY2sgPSAoX2EgPSBzZWFyY2hSZXN1bHQucmVjb3JkTWFwLmJsb2NrW3Jlc3VsdDIuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgICAgICAgaWYgKCFibG9jaylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUzKGJsb2NrLCBzZWFyY2hSZXN1bHQucmVjb3JkTWFwKTtcbiAgICAgICAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdDIudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICByZXN1bHQyLmJsb2NrID0gYmxvY2s7XG4gICAgICAgICAgcmVzdWx0Mi5yZWNvcmRNYXAgPSBzZWFyY2hSZXN1bHQucmVjb3JkTWFwO1xuICAgICAgICAgIHJlc3VsdDIucGFnZSA9IGdldEJsb2NrUGFyZW50UGFnZShibG9jaywgc2VhcmNoUmVzdWx0LnJlY29yZE1hcCwge1xuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlXG4gICAgICAgICAgfSkgfHwgYmxvY2s7XG4gICAgICAgICAgaWYgKCFyZXN1bHQyLnBhZ2UuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChfYiA9IHJlc3VsdDIuaGlnaGxpZ2h0KSA9PSBudWxsID8gdm9pZCAwIDogX2IudGV4dCkge1xuICAgICAgICAgICAgcmVzdWx0Mi5oaWdobGlnaHQuaHRtbCA9IHJlc3VsdDIuaGlnaGxpZ2h0LnRleHQucmVwbGFjZSgvPGd6a05mb1VVPi9naSwgXCI8Yj5cIikucmVwbGFjZSgvPFxcL2d6a05mb1VVPi9naSwgXCI8L2I+XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0MjtcbiAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzTWFwID0gcmVzdWx0cy5yZWR1Y2UoXG4gICAgICAgICAgKG1hcCwgcmVzdWx0MikgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWFwKSwge1xuICAgICAgICAgICAgW3Jlc3VsdDIucGFnZS5pZF06IHJlc3VsdDJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7fVxuICAgICAgICApO1xuICAgICAgICBzZWFyY2hSZXN1bHQucmVzdWx0cyA9IE9iamVjdC52YWx1ZXMoc2VhcmNoUmVzdWx0c01hcCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGF0ZS5xdWVyeSA9PT0gcXVlcnkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHNlYXJjaFJlc3VsdCwgc2VhcmNoRXJyb3IgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRSZWYgPSBSZWFjdDE0LmNyZWF0ZVJlZigpO1xuICB9XG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuX3NlYXJjaCA9ICgwLCBpbXBvcnRfbG9kYXNoLmRlZmF1bHQpKHRoaXMuX3NlYXJjaEltcGwuYmluZCh0aGlzKSwgMWUzKTtcbiAgICB0aGlzLl93YXJtdXBTZWFyY2goKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBpc09wZW4sIG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBpc0xvYWRpbmcsIHF1ZXJ5LCBzZWFyY2hSZXN1bHQsIHNlYXJjaEVycm9yIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGhhc1F1ZXJ5ID0gISFxdWVyeS50cmltKCk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoTm90aW9uQ29udGV4dENvbnN1bWVyLCBudWxsLCAoY3R4MikgPT4ge1xuICAgICAgY29uc3QgeyBjb21wb25lbnRzLCBkZWZhdWx0UGFnZUljb24sIG1hcFBhZ2VVcmwgfSA9IGN0eDI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLk1vZGFsLCB7XG4gICAgICAgIGlzT3BlbixcbiAgICAgICAgY29udGVudExhYmVsOiBcIlNlYXJjaFwiLFxuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaFwiLFxuICAgICAgICBvdmVybGF5Q2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2gtb3ZlcmxheVwiLFxuICAgICAgICBvblJlcXVlc3RDbG9zZTogb25DbG9zZSxcbiAgICAgICAgb25BZnRlck9wZW46IHRoaXMuX29uQWZ0ZXJPcGVuXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInF1aWNrRmluZE1lbnVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJzZWFyY2hCYXJcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJpbmxpbmVJY29uXCJcbiAgICAgIH0sIGlzTG9hZGluZyA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoTG9hZGluZ0ljb24sIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxvYWRpbmdJY29uXCJcbiAgICAgIH0pIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChTZWFyY2hJY29uLCBudWxsKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJzZWFyY2hJbnB1dFwiLFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJTZWFyY2hcIixcbiAgICAgICAgdmFsdWU6IHF1ZXJ5LFxuICAgICAgICByZWY6IHRoaXMuX2lucHV0UmVmLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5fb25DaGFuZ2VRdWVyeVxuICAgICAgfSksIHF1ZXJ5ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiY2xlYXJCdXR0b25cIixcbiAgICAgICAgb25DbGljazogdGhpcy5fb25DbGVhclF1ZXJ5XG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KENsZWFySWNvbiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiY2xlYXJJY29uXCJcbiAgICAgIH0pKSksIGhhc1F1ZXJ5ICYmIHNlYXJjaFJlc3VsdCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFJlYWN0MTQuRnJhZ21lbnQsIG51bGwsIHNlYXJjaFJlc3VsdC5yZXN1bHRzLmxlbmd0aCA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoTm90aW9uQ29udGV4dFByb3ZpZGVyLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjdHgyKSwge1xuICAgICAgICByZWNvcmRNYXA6IHNlYXJjaFJlc3VsdC5yZWNvcmRNYXBcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInJlc3VsdHNQYW5lXCJcbiAgICAgIH0sIHNlYXJjaFJlc3VsdC5yZXN1bHRzLm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgICAgIGtleTogcmVzdWx0LmlkLFxuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXCJyZXN1bHRcIiwgXCJub3Rpb24tcGFnZS1saW5rXCIpLFxuICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoXG4gICAgICAgICAgICByZXN1bHQucGFnZS5pZCxcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXBcbiAgICAgICAgICApXG4gICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgYmxvY2s6IHJlc3VsdC5wYWdlLFxuICAgICAgICAgIGRlZmF1bHRJY29uOiBkZWZhdWx0UGFnZUljb25cbiAgICAgICAgfSksICgoX2EgPSByZXN1bHQuaGlnaGxpZ2h0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuaHRtbCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2gtcmVzdWx0LWhpZ2hsaWdodFwiLFxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICAgICAgICBfX2h0bWw6IHJlc3VsdC5oaWdobGlnaHQuaHRtbFxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZm9vdGVyXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInJlc3VsdHNGb290ZXJcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyZXN1bHRzQ291bnRcIlxuICAgICAgfSwgc2VhcmNoUmVzdWx0LnRvdGFsKSwgc2VhcmNoUmVzdWx0LnRvdGFsID09PSAxID8gXCIgcmVzdWx0XCIgOiBcIiByZXN1bHRzXCIpKSkgOiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1BhbmVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNcIlxuICAgICAgfSwgXCJObyByZXN1bHRzXCIpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c0RldGFpbFwiXG4gICAgICB9LCBcIlRyeSBkaWZmZXJlbnQgc2VhcmNoIHRlcm1zXCIpKSksIGhhc1F1ZXJ5ICYmICFzZWFyY2hSZXN1bHQgJiYgc2VhcmNoRXJyb3IgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNQYW5lXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzXCJcbiAgICAgIH0sIFwiU2VhcmNoIGVycm9yXCIpKSkpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9oZWFkZXIudHN4XG52YXIgSGVhZGVyID0gKHsgYmxvY2sgfSkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChcImhlYWRlclwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1oZWFkZXJcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLW5hdi1oZWFkZXJcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KEJyZWFkY3J1bWJzLCB7XG4gICAgYmxvY2tcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoU2VhcmNoLCB7XG4gICAgYmxvY2tcbiAgfSkpKTtcbn07XG52YXIgQnJlYWRjcnVtYnMgPSAoeyBibG9jaywgcm9vdE9ubHkgPSBmYWxzZSB9KSA9PiB7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCBtYXBQYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gUmVhY3QxNS51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBicmVhZGNydW1iczIgPSBnZXRQYWdlQnJlYWRjcnVtYnMocmVjb3JkTWFwLCBibG9jay5pZCk7XG4gICAgaWYgKHJvb3RPbmx5KSB7XG4gICAgICByZXR1cm4gW2JyZWFkY3J1bWJzMlswXV0uZmlsdGVyKEJvb2xlYW4pO1xuICAgIH1cbiAgICByZXR1cm4gYnJlYWRjcnVtYnMyO1xuICB9LCBbcmVjb3JkTWFwLCBibG9jay5pZCwgcm9vdE9ubHldKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJicmVhZGNydW1ic1wiLFxuICAgIGtleTogXCJicmVhZGNydW1ic1wiXG4gIH0sIGJyZWFkY3J1bWJzLm1hcCgoYnJlYWRjcnVtYiwgaW5kZXgpID0+IHtcbiAgICBpZiAoIWJyZWFkY3J1bWIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBwYWdlTGlua1Byb3BzID0ge307XG4gICAgY29uc3QgY29tcG9uZW50TWFwID0ge1xuICAgICAgcGFnZUxpbms6IGNvbXBvbmVudHMuUGFnZUxpbmtcbiAgICB9O1xuICAgIGlmIChicmVhZGNydW1iLmFjdGl2ZSkge1xuICAgICAgY29tcG9uZW50TWFwLnBhZ2VMaW5rID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlTGlua1Byb3BzLmhyZWYgPSBtYXBQYWdlVXJsKGJyZWFkY3J1bWIucGFnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoUmVhY3QxNS5GcmFnbWVudCwge1xuICAgICAga2V5OiBicmVhZGNydW1iLnBhZ2VJZFxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TWFwLnBhZ2VMaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IGNzKFwiYnJlYWRjcnVtYlwiLCBicmVhZGNydW1iLmFjdGl2ZSAmJiBcImFjdGl2ZVwiKVxuICAgIH0sIHBhZ2VMaW5rUHJvcHMpLCBicmVhZGNydW1iLmljb24gJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChQYWdlSWNvbiwge1xuICAgICAgY2xhc3NOYW1lOiBcImljb25cIixcbiAgICAgIGJsb2NrOiBicmVhZGNydW1iLmJsb2NrXG4gICAgfSksIGJyZWFkY3J1bWIudGl0bGUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInRpdGxlXCJcbiAgICB9LCBicmVhZGNydW1iLnRpdGxlKSksIGluZGV4IDwgYnJlYWRjcnVtYnMubGVuZ3RoIC0gMSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3BhY2VyXCJcbiAgICB9LCBcIi9cIikpO1xuICB9KSk7XG59O1xudmFyIFNlYXJjaCA9ICh7IGJsb2NrLCBzZWFyY2gsIHRpdGxlID0gXCJTZWFyY2hcIiB9KSA9PiB7XG4gIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290UGFnZUlkLCBpc1Nob3dpbmdTZWFyY2gsIG9uSGlkZVNlYXJjaCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCBvblNlYXJjaE5vdGlvbiA9IHNlYXJjaCB8fCBzZWFyY2hOb3Rpb247XG4gIGNvbnN0IFtpc1NlYXJjaE9wZW4sIHNldElzU2VhcmNoT3Blbl0gPSBSZWFjdDE1LnVzZVN0YXRlKGlzU2hvd2luZ1NlYXJjaCk7XG4gIFJlYWN0MTUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4oaXNTaG93aW5nU2VhcmNoKTtcbiAgfSwgW2lzU2hvd2luZ1NlYXJjaF0pO1xuICBjb25zdCBvbk9wZW5TZWFyY2ggPSBSZWFjdDE1LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgb25DbG9zZVNlYXJjaCA9IFJlYWN0MTUudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzU2VhcmNoT3BlbihmYWxzZSk7XG4gICAgaWYgKG9uSGlkZVNlYXJjaCkge1xuICAgICAgb25IaWRlU2VhcmNoKCk7XG4gICAgfVxuICB9LCBbb25IaWRlU2VhcmNoXSk7XG4gIHVzZUhvdGtleXMoXCJjbWQrcFwiLCAoZXZlbnQpID0+IHtcbiAgICBvbk9wZW5TZWFyY2goKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcbiAgdXNlSG90a2V5cyhcImNtZCtrXCIsIChldmVudCkgPT4ge1xuICAgIG9uT3BlblNlYXJjaCgpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuICBjb25zdCBoYXNTZWFyY2ggPSAhIW9uU2VhcmNoTm90aW9uO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChSZWFjdDE1LkZyYWdtZW50LCBudWxsLCBoYXNTZWFyY2ggJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcm9sZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IGNzKFwiYnJlYWRjcnVtYlwiLCBcImJ1dHRvblwiLCBcIm5vdGlvbi1zZWFyY2gtYnV0dG9uXCIpLFxuICAgIG9uQ2xpY2s6IG9uT3BlblNlYXJjaFxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFNlYXJjaEljb24sIHtcbiAgICBjbGFzc05hbWU6IFwic2VhcmNoSWNvblwiXG4gIH0pLCB0aXRsZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInRpdGxlXCJcbiAgfSwgdGl0bGUpKSwgaXNTZWFyY2hPcGVuICYmIGhhc1NlYXJjaCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFNlYXJjaERpYWxvZywge1xuICAgIGlzT3BlbjogaXNTZWFyY2hPcGVuLFxuICAgIHJvb3RCbG9ja0lkOiByb290UGFnZUlkIHx8IChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suaWQpLFxuICAgIG9uQ2xvc2U6IG9uQ2xvc2VTZWFyY2gsXG4gICAgc2VhcmNoTm90aW9uOiBvblNlYXJjaE5vdGlvblxuICB9KSk7XG59O1xuXG4vLyBzcmMvbmV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTYgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwicmVhY3QtZmFzdC1jb21wYXJlXCI7XG52YXIgd3JhcE5leHRJbWFnZSA9IChOZXh0SW1hZ2UpID0+IHtcbiAgcmV0dXJuIFJlYWN0MTYubWVtbyhmdW5jdGlvbiBSZWFjdE5vdGlvblhOZXh0SW1hZ2UoX2EpIHtcbiAgICB2YXIgX2IgPSBfYSwge1xuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBzdHlsZSxcbiAgICAgIGxheW91dFxuICAgIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1xuICAgICAgXCJzcmNcIixcbiAgICAgIFwiYWx0XCIsXG4gICAgICBcIndpZHRoXCIsXG4gICAgICBcImhlaWdodFwiLFxuICAgICAgXCJjbGFzc05hbWVcIixcbiAgICAgIFwic3R5bGVcIixcbiAgICAgIFwibGF5b3V0XCJcbiAgICBdKTtcbiAgICBpZiAoIWxheW91dCkge1xuICAgICAgbGF5b3V0ID0gd2lkdGggJiYgaGVpZ2h0ID8gXCJpbnRyaW5zaWNcIiA6IFwiZmlsbFwiO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChOZXh0SW1hZ2UsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHNyYyxcbiAgICAgIGFsdCxcbiAgICAgIHdpZHRoOiBsYXlvdXQgPT09IFwiaW50cmluc2ljXCIgJiYgd2lkdGgsXG4gICAgICBoZWlnaHQ6IGxheW91dCA9PT0gXCJpbnRyaW5zaWNcIiAmJiBoZWlnaHQsXG4gICAgICBvYmplY3RGaXQ6IHN0eWxlID09IG51bGwgPyB2b2lkIDAgOiBzdHlsZS5vYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbjogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLm9iamVjdFBvc2l0aW9uLFxuICAgICAgbGF5b3V0XG4gICAgfSwgcmVzdCkpO1xuICB9LCBpc0VxdWFsKTtcbn07XG52YXIgd3JhcE5leHRMaW5rID0gKE5leHRMaW5rKSA9PiBmdW5jdGlvbiBSZWFjdE5vdGlvblhOZXh0TGluayhfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGhyZWYsXG4gICAgYXMsXG4gICAgcGFzc0hyZWYsXG4gICAgcHJlZmV0Y2gsXG4gICAgcmVwbGFjZSxcbiAgICBzY3JvbGwsXG4gICAgc2hhbGxvdyxcbiAgICBsb2NhbGVcbiAgfSA9IF9iLCBsaW5rUHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImhyZWZcIixcbiAgICBcImFzXCIsXG4gICAgXCJwYXNzSHJlZlwiLFxuICAgIFwicHJlZmV0Y2hcIixcbiAgICBcInJlcGxhY2VcIixcbiAgICBcInNjcm9sbFwiLFxuICAgIFwic2hhbGxvd1wiLFxuICAgIFwibG9jYWxlXCJcbiAgXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNi5jcmVhdGVFbGVtZW50KE5leHRMaW5rLCB7XG4gICAgaHJlZixcbiAgICBhcyxcbiAgICBwYXNzSHJlZixcbiAgICBwcmVmZXRjaCxcbiAgICByZXBsYWNlLFxuICAgIHNjcm9sbCxcbiAgICBzaGFsbG93LFxuICAgIGxvY2FsZVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNi5jcmVhdGVFbGVtZW50KFwiYVwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgbGlua1Byb3BzKSkpO1xufTtcblxuLy8gc3JjL2NvbnRleHQudHN4XG52YXIgRGVmYXVsdExpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG59LCBwcm9wcykpO1xudmFyIERlZmF1bHRMaW5rTWVtbyA9IFJlYWN0MTcubWVtbyhEZWZhdWx0TGluayk7XG52YXIgRGVmYXVsdFBhZ2VMaW5rID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFwiYVwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBEZWZhdWx0UGFnZUxpbmtNZW1vID0gUmVhY3QxNy5tZW1vKERlZmF1bHRQYWdlTGluayk7XG52YXIgRGVmYXVsdEVtYmVkID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KEFzc2V0V3JhcHBlciwgX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSk7XG52YXIgRGVmYXVsdEhlYWRlciA9IEhlYWRlcjtcbnZhciBkdW1teUxpbmsgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHsgaHJlZiwgcmVsLCB0YXJnZXQsIHRpdGxlIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1wiaHJlZlwiLCBcInJlbFwiLCBcInRhcmdldFwiLCBcInRpdGxlXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCByZXN0KSk7XG59O1xudmFyIGR1bW15Q29tcG9uZW50ID0gKG5hbWUpID0+ICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgIGBXYXJuaW5nOiB1c2luZyBlbXB0eSBjb21wb25lbnQgXCIke25hbWV9XCIgKHlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBpbiBOb3Rpb25SZW5kZXJlci5jb21wb25lbnRzKWBcbiAgKTtcbiAgcmV0dXJuIG51bGw7XG59O1xudmFyIGR1bW15T3ZlcnJpZGVGbiA9IChfLCBkZWZhdWx0VmFsdWVGbikgPT4gZGVmYXVsdFZhbHVlRm4oKTtcbnZhciBkZWZhdWx0Q29tcG9uZW50cyA9IHtcbiAgSW1hZ2U6IG51bGwsXG4gIExpbms6IERlZmF1bHRMaW5rTWVtbyxcbiAgUGFnZUxpbms6IERlZmF1bHRQYWdlTGlua01lbW8sXG4gIENoZWNrYm94LFxuICBDYWxsb3V0OiB2b2lkIDAsXG4gIENvZGU6IGR1bW15Q29tcG9uZW50KFwiQ29kZVwiKSxcbiAgRXF1YXRpb246IGR1bW15Q29tcG9uZW50KFwiRXF1YXRpb25cIiksXG4gIENvbGxlY3Rpb246IGR1bW15Q29tcG9uZW50KFwiQ29sbGVjdGlvblwiKSxcbiAgUHJvcGVydHk6IHZvaWQgMCxcbiAgcHJvcGVydHlUZXh0VmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlTZWxlY3RWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVJlbGF0aW9uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGb3JtdWxhVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlUaXRsZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGVyc29uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGaWxlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlDaGVja2JveFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5VXJsVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlFbWFpbFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGhvbmVOdW1iZXJWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eU51bWJlclZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5TGFzdEVkaXRlZFRpbWVWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eUNyZWF0ZWRUaW1lVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlEYXRlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgUGRmOiBkdW1teUNvbXBvbmVudChcIlBkZlwiKSxcbiAgVHdlZXQ6IGR1bW15Q29tcG9uZW50KFwiVHdlZXRcIiksXG4gIE1vZGFsOiBkdW1teUNvbXBvbmVudChcIk1vZGFsXCIpLFxuICBIZWFkZXI6IERlZmF1bHRIZWFkZXIsXG4gIEVtYmVkOiBEZWZhdWx0RW1iZWRcbn07XG52YXIgZGVmYXVsdE5vdGlvbkNvbnRleHQgPSB7XG4gIHJlY29yZE1hcDoge1xuICAgIGJsb2NrOiB7fSxcbiAgICBjb2xsZWN0aW9uOiB7fSxcbiAgICBjb2xsZWN0aW9uX3ZpZXc6IHt9LFxuICAgIGNvbGxlY3Rpb25fcXVlcnk6IHt9LFxuICAgIG5vdGlvbl91c2VyOiB7fSxcbiAgICBzaWduZWRfdXJsczoge31cbiAgfSxcbiAgY29tcG9uZW50czogZGVmYXVsdENvbXBvbmVudHMsXG4gIG1hcFBhZ2VVcmw6IGRlZmF1bHRNYXBQYWdlVXJsKCksXG4gIG1hcEltYWdlVXJsOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbjogbnVsbCxcbiAgaXNTaG93aW5nU2VhcmNoOiBmYWxzZSxcbiAgb25IaWRlU2VhcmNoOiBudWxsLFxuICBmdWxsUGFnZTogZmFsc2UsXG4gIGRhcmtNb2RlOiBmYWxzZSxcbiAgcHJldmlld0ltYWdlczogZmFsc2UsXG4gIGZvcmNlQ3VzdG9tSW1hZ2VzOiBmYWxzZSxcbiAgc2hvd0NvbGxlY3Rpb25WaWV3RHJvcGRvd246IHRydWUsXG4gIGxpbmtUYWJsZVRpdGxlUHJvcGVydGllczogdHJ1ZSxcbiAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHk6IGZhbHNlLFxuICBzaG93VGFibGVPZkNvbnRlbnRzOiBmYWxzZSxcbiAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXM6IDMsXG4gIGRlZmF1bHRQYWdlSWNvbjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlcjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uOiAwLjUsXG4gIHpvb206IG51bGxcbn07XG52YXIgY3R4ID0gUmVhY3QxNy5jcmVhdGVDb250ZXh0KGRlZmF1bHROb3Rpb25Db250ZXh0KTtcbnZhciBOb3Rpb25Db250ZXh0UHJvdmlkZXIgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjb21wb25lbnRzOiB0aGVtZUNvbXBvbmVudHMgPSB7fSxcbiAgICBjaGlsZHJlbixcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHJvb3RQYWdlSWRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb21wb25lbnRzXCIsXG4gICAgXCJjaGlsZHJlblwiLFxuICAgIFwibWFwUGFnZVVybFwiLFxuICAgIFwibWFwSW1hZ2VVcmxcIixcbiAgICBcInJvb3RQYWdlSWRcIlxuICBdKTtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVzdCkpIHtcbiAgICBpZiAocmVzdFtrZXldID09PSB2b2lkIDApIHtcbiAgICAgIGRlbGV0ZSByZXN0W2tleV07XG4gICAgfVxuICB9XG4gIGNvbnN0IHdyYXBwZWRUaGVtZUNvbXBvbmVudHMgPSBSZWFjdDE3LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe30sIHRoZW1lQ29tcG9uZW50cyksXG4gICAgW3RoZW1lQ29tcG9uZW50c11cbiAgKTtcbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dEltYWdlKSB7XG4gICAgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5JbWFnZSA9IHdyYXBOZXh0SW1hZ2UodGhlbWVDb21wb25lbnRzLm5leHRJbWFnZSk7XG4gIH1cbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dExpbmspIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMaW5rID0gd3JhcE5leHRMaW5rKHRoZW1lQ29tcG9uZW50cy5uZXh0TGluayk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMod3JhcHBlZFRoZW1lQ29tcG9uZW50cykpIHtcbiAgICBpZiAoIXdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XSkge1xuICAgICAgZGVsZXRlIHdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBSZWFjdDE3LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdE5vdGlvbkNvbnRleHQpLCByZXN0KSwge1xuICAgICAgcm9vdFBhZ2VJZCxcbiAgICAgIG1hcFBhZ2VVcmw6IG1hcFBhZ2VVcmwgIT0gbnVsbCA/IG1hcFBhZ2VVcmwgOiBkZWZhdWx0TWFwUGFnZVVybChyb290UGFnZUlkKSxcbiAgICAgIG1hcEltYWdlVXJsOiBtYXBJbWFnZVVybCAhPSBudWxsID8gbWFwSW1hZ2VVcmwgOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gICAgICBjb21wb25lbnRzOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdENvbXBvbmVudHMpLCB3cmFwcGVkVGhlbWVDb21wb25lbnRzKVxuICAgIH0pLFxuICAgIFttYXBJbWFnZVVybCwgbWFwUGFnZVVybCwgd3JhcHBlZFRoZW1lQ29tcG9uZW50cywgcm9vdFBhZ2VJZCwgcmVzdF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoY3R4LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufTtcbnZhciBOb3Rpb25Db250ZXh0Q29uc3VtZXIgPSBjdHguQ29uc3VtZXI7XG52YXIgdXNlTm90aW9uQ29udGV4dCA9ICgpID0+IHtcbiAgcmV0dXJuIFJlYWN0MTcudXNlQ29udGV4dChjdHgpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGl0ZS15b3V0dWJlLWVtYmVkLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxOCBmcm9tIFwicmVhY3RcIjtcbnZhciBxcyA9IChwYXJhbXMpID0+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgIChrZXkpID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSl9YFxuICApLmpvaW4oXCImXCIpO1xufTtcbnZhciBMaXRlWW91VHViZUVtYmVkID0gKHtcbiAgaWQsXG4gIGRlZmF1bHRQbGF5ID0gZmFsc2UsXG4gIG11dGUgPSBmYWxzZSxcbiAgbGF6eUltYWdlID0gZmFsc2UsXG4gIGlmcmFtZVRpdGxlID0gXCJZb3VUdWJlIHZpZGVvXCIsXG4gIGFsdCA9IFwiVmlkZW8gcHJldmlld1wiLFxuICBwYXJhbXMgPSB7fSxcbiAgYWRMaW5rc1ByZWNvbm5lY3QgPSB0cnVlLFxuICBzdHlsZSxcbiAgY2xhc3NOYW1lXG59KSA9PiB7XG4gIGNvbnN0IG11dGVQYXJhbSA9IG11dGUgfHwgZGVmYXVsdFBsYXkgPyBcIjFcIiA6IFwiMFwiO1xuICBjb25zdCBxdWVyeVN0cmluZyA9IFJlYWN0MTgudXNlTWVtbyhcbiAgICAoKSA9PiBxcyhfX3NwcmVhZFZhbHVlcyh7IGF1dG9wbGF5OiBcIjFcIiwgbXV0ZTogbXV0ZVBhcmFtIH0sIHBhcmFtcykpLFxuICAgIFttdXRlUGFyYW0sIHBhcmFtc11cbiAgKTtcbiAgY29uc3QgcmVzb2x1dGlvbiA9IFwiaHFkZWZhdWx0XCI7XG4gIGNvbnN0IHBvc3RlclVybCA9IGBodHRwczovL2kueXRpbWcuY29tL3ZpLyR7aWR9LyR7cmVzb2x1dGlvbn0uanBnYDtcbiAgY29uc3QgeXRVcmwgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUtbm9jb29raWUuY29tXCI7XG4gIGNvbnN0IGlmcmFtZVNyYyA9IGAke3l0VXJsfS9lbWJlZC8ke2lkfT8ke3F1ZXJ5U3RyaW5nfWA7XG4gIGNvbnN0IFtpc1ByZWNvbm5lY3RlZCwgc2V0SXNQcmVjb25uZWN0ZWRdID0gUmVhY3QxOC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpZnJhbWVJbml0aWFsaXplZCwgc2V0SWZyYW1lSW5pdGlhbGl6ZWRdID0gUmVhY3QxOC51c2VTdGF0ZShkZWZhdWx0UGxheSk7XG4gIGNvbnN0IFtpc0lmcmFtZUxvYWRlZCwgc2V0SXNJZnJhbWVMb2FkZWRdID0gUmVhY3QxOC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHdhcm1Db25uZWN0aW9ucyA9IFJlYWN0MTgudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpc1ByZWNvbm5lY3RlZClcbiAgICAgIHJldHVybjtcbiAgICBzZXRJc1ByZWNvbm5lY3RlZCh0cnVlKTtcbiAgfSwgW2lzUHJlY29ubmVjdGVkXSk7XG4gIGNvbnN0IG9uTG9hZElmcmFtZSA9IFJlYWN0MTgudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpZnJhbWVJbml0aWFsaXplZClcbiAgICAgIHJldHVybjtcbiAgICBzZXRJZnJhbWVJbml0aWFsaXplZCh0cnVlKTtcbiAgfSwgW2lmcmFtZUluaXRpYWxpemVkXSk7XG4gIGNvbnN0IG9uSWZyYW1lTG9hZGVkID0gUmVhY3QxOC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNJZnJhbWVMb2FkZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoUmVhY3QxOC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVsb2FkXCIsXG4gICAgaHJlZjogcG9zdGVyVXJsLFxuICAgIGFzOiBcImltYWdlXCJcbiAgfSksIGlzUHJlY29ubmVjdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoUmVhY3QxOC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVjb25uZWN0XCIsXG4gICAgaHJlZjogeXRVcmxcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlY29ubmVjdFwiLFxuICAgIGhyZWY6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbVwiXG4gIH0pKSwgaXNQcmVjb25uZWN0ZWQgJiYgYWRMaW5rc1ByZWNvbm5lY3QgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChSZWFjdDE4LkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiBcImh0dHBzOi8vc3RhdGljLmRvdWJsZWNsaWNrLm5ldFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiBcImh0dHBzOi8vZ29vZ2xlYWRzLmcuZG91YmxlY2xpY2submV0XCJcbiAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBvbkNsaWNrOiBvbkxvYWRJZnJhbWUsXG4gICAgb25Qb2ludGVyT3Zlcjogd2FybUNvbm5lY3Rpb25zLFxuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi15dC1saXRlXCIsXG4gICAgICBpc0lmcmFtZUxvYWRlZCAmJiBcIm5vdGlvbi15dC1sb2FkZWRcIixcbiAgICAgIGlmcmFtZUluaXRpYWxpemVkICYmIFwibm90aW9uLXl0LWluaXRpYWxpemVkXCIsXG4gICAgICBjbGFzc05hbWVcbiAgICApLFxuICAgIHN0eWxlXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgIHNyYzogcG9zdGVyVXJsLFxuICAgIGNsYXNzTmFtZTogXCJub3Rpb24teXQtdGh1bWJuYWlsXCIsXG4gICAgbG9hZGluZzogbGF6eUltYWdlID8gXCJsYXp5XCIgOiB2b2lkIDAsXG4gICAgYWx0XG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXl0LXBsYXlidG5cIlxuICB9KSwgaWZyYW1lSW5pdGlhbGl6ZWQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChcImlmcmFtZVwiLCB7XG4gICAgd2lkdGg6IFwiNTYwXCIsXG4gICAgaGVpZ2h0OiBcIjMxNVwiLFxuICAgIGZyYW1lQm9yZGVyOiBcIjBcIixcbiAgICBhbGxvdzogXCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVwiLFxuICAgIGFsbG93RnVsbFNjcmVlbjogdHJ1ZSxcbiAgICB0aXRsZTogaWZyYW1lVGl0bGUsXG4gICAgc3JjOiBpZnJhbWVTcmMsXG4gICAgb25Mb2FkOiBvbklmcmFtZUxvYWRlZFxuICB9KSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXNzZXQudHN4XG52YXIgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xudmFyIHN1cHBvcnRlZEFzc2V0VHlwZXMgPSBbXG4gIFwidmlkZW9cIixcbiAgXCJpbWFnZVwiLFxuICBcImVtYmVkXCIsXG4gIFwiZmlnbWFcIixcbiAgXCJ0eXBlZm9ybVwiLFxuICBcImV4Y2FsaWRyYXdcIixcbiAgXCJtYXBzXCIsXG4gIFwidHdlZXRcIixcbiAgXCJwZGZcIixcbiAgXCJnaXN0XCIsXG4gIFwiY29kZXBlblwiLFxuICBcImRyaXZlXCJcbl07XG52YXIgQXNzZXQgPSAoeyBibG9jaywgem9vbWFibGUgPSB0cnVlLCBjaGlsZHJlbiB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfajtcbiAgY29uc3QgeyByZWNvcmRNYXAsIG1hcEltYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2sgfHwgIXN1cHBvcnRlZEFzc2V0VHlwZXMuaW5jbHVkZXMoYmxvY2sudHlwZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzdHlsZSA9IHtcbiAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgIGFsaWduU2VsZjogXCJjZW50ZXJcIixcbiAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgbWF4V2lkdGg6IFwiMTAwJVwiLFxuICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCJcbiAgfTtcbiAgY29uc3QgYXNzZXRTdHlsZSA9IHt9O1xuICBpZiAoYmxvY2suZm9ybWF0KSB7XG4gICAgY29uc3Qge1xuICAgICAgYmxvY2tfYXNwZWN0X3JhdGlvLFxuICAgICAgYmxvY2tfaGVpZ2h0LFxuICAgICAgYmxvY2tfd2lkdGgsXG4gICAgICBibG9ja19mdWxsX3dpZHRoLFxuICAgICAgYmxvY2tfcGFnZV93aWR0aCxcbiAgICAgIGJsb2NrX3ByZXNlcnZlX3NjYWxlXG4gICAgfSA9IGJsb2NrLmZvcm1hdDtcbiAgICBpZiAoYmxvY2tfZnVsbF93aWR0aCB8fCBibG9ja19wYWdlX3dpZHRoKSB7XG4gICAgICBpZiAoYmxvY2tfZnVsbF93aWR0aCkge1xuICAgICAgICBzdHlsZS53aWR0aCA9IFwiMTAwdndcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgIGlmIChibG9ja19oZWlnaHQpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBibG9ja19oZWlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tfYXNwZWN0X3JhdGlvKSB7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2Jsb2NrX2FzcGVjdF9yYXRpbyAqIDEwMH0lYDtcbiAgICAgICAgfSBlbHNlIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSkge1xuICAgICAgICAgIHN0eWxlLm9iamVjdEZpdCA9IFwiY29udGFpblwiO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX2FzcGVjdF9yYXRpbyAmJiBibG9jay50eXBlICE9PSBcImltYWdlXCIpIHtcbiAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2Jsb2NrX2FzcGVjdF9yYXRpbyAqIDEwMH0lYDtcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2tfaGVpZ2h0KSB7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9IGJsb2NrX2hlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgIHN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjc1JVwiO1xuICAgICAgICAgIHN0eWxlLm1pbkhlaWdodCA9IDEwMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKChfYSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmJsb2NrX2FsaWdubWVudCkge1xuICAgICAgICBjYXNlIFwiY2VudGVyXCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcImNlbnRlclwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJpZ2h0XCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcImVuZFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2tfd2lkdGgpIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSBibG9ja193aWR0aDtcbiAgICAgIH1cbiAgICAgIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSAmJiBibG9jay50eXBlICE9PSBcImltYWdlXCIpIHtcbiAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNTAlXCI7XG4gICAgICAgIHN0eWxlLm1pbkhlaWdodCA9IDEwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChibG9ja19oZWlnaHQgJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gYmxvY2tfaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgIGFzc2V0U3R5bGUub2JqZWN0Rml0ID0gXCJjb3ZlclwiO1xuICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgIGFzc2V0U3R5bGUub2JqZWN0Rml0ID0gXCJjb250YWluXCI7XG4gICAgfVxuICB9XG4gIGxldCBzb3VyY2UgPSAoKF9iID0gcmVjb3JkTWFwLnNpZ25lZF91cmxzKSA9PSBudWxsID8gdm9pZCAwIDogX2JbYmxvY2suaWRdKSB8fCAoKF9lID0gKF9kID0gKF9jID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2VbMF0pO1xuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGJsb2NrLnR5cGUgPT09IFwidHdlZXRcIikge1xuICAgIGNvbnN0IHNyYyA9IHNvdXJjZTtcbiAgICBpZiAoIXNyYylcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlkID0gc3JjLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIi9cIikucG9wKCk7XG4gICAgaWYgKCFpZClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxOS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIHN0eWxlOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhc3NldFN0eWxlKSwge1xuICAgICAgICBtYXhXaWR0aDogNDIwLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIG1hcmdpbkxlZnQ6IFwiYXV0b1wiLFxuICAgICAgICBtYXJnaW5SaWdodDogXCJhdXRvXCJcbiAgICAgIH0pXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlR3ZWV0LCB7XG4gICAgICBpZFxuICAgIH0pKTtcbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcInBkZlwiKSB7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICBzdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2IoMjI2LCAyMjYsIDIyNilcIjtcbiAgICBzdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIGlmICghc3R5bGUucGFkZGluZykge1xuICAgICAgc3R5bGUucGFkZGluZyA9IFwiOHB4IDE2cHhcIjtcbiAgICB9XG4gICAgaWYgKCFpc1NlcnZlcikge1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QZGYsIHtcbiAgICAgICAgZmlsZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJlbWJlZFwiIHx8IGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIiB8fCBibG9jay50eXBlID09PSBcImZpZ21hXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJ0eXBlZm9ybVwiIHx8IGJsb2NrLnR5cGUgPT09IFwiZ2lzdFwiIHx8IGJsb2NrLnR5cGUgPT09IFwibWFwc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiZXhjYWxpZHJhd1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiY29kZXBlblwiIHx8IGJsb2NrLnR5cGUgPT09IFwiZHJpdmVcIikge1xuICAgIGlmIChibG9jay50eXBlID09PSBcInZpZGVvXCIgJiYgc291cmNlICYmIHNvdXJjZS5pbmRleE9mKFwieW91dHViZVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ5b3V0dS5iZVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ2aW1lb1wiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ3aXN0aWFcIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwibG9vbVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ2aWRlb2Fza1wiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJnZXRjbG91ZGFwcFwiKSA8IDApIHtcbiAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSB2b2lkIDA7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChcInZpZGVvXCIsIHtcbiAgICAgICAgcGxheXNJbmxpbmU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgICAgICBwcmVsb2FkOiBcIm1ldGFkYXRhXCIsXG4gICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICBzcmM6IHNvdXJjZSxcbiAgICAgICAgdGl0bGU6IGJsb2NrLnR5cGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3JjID0gKChfZiA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmRpc3BsYXlfc291cmNlKSB8fCBzb3VyY2U7XG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGNvbnN0IHlvdXR1YmVWaWRlb0lkID0gYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiID8gZ2V0WW91dHViZUlkKHNyYykgOiBudWxsO1xuICAgICAgICBpZiAoeW91dHViZVZpZGVvSWQpIHtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChMaXRlWW91VHViZUVtYmVkLCB7XG4gICAgICAgICAgICBpZDogeW91dHViZVZpZGVvSWQsXG4gICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtb2JqZWN0LWZpdFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJnaXN0XCIpIHtcbiAgICAgICAgICBpZiAoIXNyYy5lbmRzV2l0aChcIi5waWJiXCIpKSB7XG4gICAgICAgICAgICBzcmMgPSBgJHtzcmN9LnBpYmJgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3NldFN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNTAlXCI7XG4gICAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiwge1xuICAgICAgICAgICAgc3R5bGU6IGFzc2V0U3R5bGUsXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIixcbiAgICAgICAgICAgIHNyYyxcbiAgICAgICAgICAgIHRpdGxlOiBcIkdpdEh1YiBHaXN0XCIsXG4gICAgICAgICAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgICAgICAgIHNjcm9sbGluZzogXCJhdXRvXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIixcbiAgICAgICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICAgICAgc3JjLFxuICAgICAgICAgICAgdGl0bGU6IGBpZnJhbWUgJHtibG9jay50eXBlfWAsXG4gICAgICAgICAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IHRydWUsXG4gICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgICAgICAgIHNjcm9sbGluZzogXCJhdXRvXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICBpZiAoc291cmNlLmluY2x1ZGVzKFwiZmlsZS5ub3Rpb24uc29cIikpIHtcbiAgICAgIHNvdXJjZSA9IChfaSA9IChfaCA9IChfZyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZy5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfaFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pWzBdO1xuICAgIH1cbiAgICBjb25zdCBzcmMgPSBtYXBJbWFnZVVybChzb3VyY2UsIGJsb2NrKTtcbiAgICBjb25zdCBjYXB0aW9uID0gZ2V0VGV4dENvbnRlbnQoKF9qID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9qLmNhcHRpb24pO1xuICAgIGNvbnN0IGFsdCA9IGNhcHRpb24gfHwgXCJub3Rpb24gaW1hZ2VcIjtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgIHNyYyxcbiAgICAgIGFsdCxcbiAgICAgIHpvb21hYmxlLFxuICAgICAgaGVpZ2h0OiBzdHlsZS5oZWlnaHQsXG4gICAgICBzdHlsZTogYXNzZXRTdHlsZVxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOS5jcmVhdGVFbGVtZW50KFJlYWN0MTkuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlXG4gIH0sIGNvbnRlbnQsIGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIiAmJiBjaGlsZHJlbiksIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIiAmJiBjaGlsZHJlbik7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9hc3NldC13cmFwcGVyLnRzeFxudmFyIHVybFN0eWxlID0geyB3aWR0aDogXCIxMDAlXCIgfTtcbnZhciBBc3NldFdyYXBwZXIgPSAoeyBibG9ja0lkLCBibG9jayB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICBjb25zdCB2YWx1ZSA9IGJsb2NrO1xuICBjb25zdCB7IGNvbXBvbmVudHMsIG1hcFBhZ2VVcmwsIHJvb3REb21haW4sIHpvb20gfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgbGV0IGlzVVJMID0gZmFsc2U7XG4gIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICBjb25zdCBjYXB0aW9uID0gKF9jID0gKF9iID0gKF9hID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYXB0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2JbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXTtcbiAgICBpZiAoY2FwdGlvbikge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZVBhZ2VJZDIoY2FwdGlvbiwgeyB1dWlkOiB0cnVlIH0pO1xuICAgICAgY29uc3QgaXNQYWdlID0gY2FwdGlvbi5jaGFyQXQoMCkgPT09IFwiL1wiICYmIGlkO1xuICAgICAgaWYgKGlzUGFnZSB8fCBpc1ZhbGlkVVJMKGNhcHRpb24pKSB7XG4gICAgICAgIGlzVVJMID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgZmlndXJlID0gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcImZpZ3VyZVwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLWFzc2V0LXdyYXBwZXJcIixcbiAgICAgIGBub3Rpb24tYXNzZXQtd3JhcHBlci0ke2Jsb2NrLnR5cGV9YCxcbiAgICAgICgoX2QgPSB2YWx1ZS5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5ibG9ja19mdWxsX3dpZHRoKSAmJiBcIm5vdGlvbi1hc3NldC13cmFwcGVyLWZ1bGxcIixcbiAgICAgIGJsb2NrSWRcbiAgICApXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoQXNzZXQsIHtcbiAgICBibG9jazogdmFsdWUsXG4gICAgem9vbWFibGU6IHpvb20gJiYgIWlzVVJMXG4gIH0sICgoX2UgPSB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmNhcHRpb24pICYmICFpc1VSTCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KFwiZmlnY2FwdGlvblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1hc3NldC1jYXB0aW9uXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgdmFsdWU6IHZhbHVlLnByb3BlcnRpZXMuY2FwdGlvbixcbiAgICBibG9ja1xuICB9KSkpKTtcbiAgaWYgKGlzVVJMKSB7XG4gICAgY29uc3QgY2FwdGlvbiA9IChfZiA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FwdGlvblswXVswXTtcbiAgICBjb25zdCBpZCA9IHBhcnNlUGFnZUlkMihjYXB0aW9uLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgY29uc3QgaXNQYWdlID0gY2FwdGlvbi5jaGFyQXQoMCkgPT09IFwiL1wiICYmIGlkO1xuICAgIGNvbnN0IGNhcHRpb25Ib3N0bmFtZSA9IGV4dHJhY3RIb3N0bmFtZShjYXB0aW9uKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCB7XG4gICAgICBzdHlsZTogdXJsU3R5bGUsXG4gICAgICBocmVmOiBpc1BhZ2UgPyBtYXBQYWdlVXJsKGlkKSA6IGNhcHRpb24sXG4gICAgICB0YXJnZXQ6IGNhcHRpb25Ib3N0bmFtZSAmJiBjYXB0aW9uSG9zdG5hbWUgIT09IHJvb3REb21haW4gJiYgIWNhcHRpb24uc3RhcnRzV2l0aChcIi9cIikgPyBcImJsYW5rX1wiIDogbnVsbFxuICAgIH0sIGZpZ3VyZSk7XG4gIH1cbiAgcmV0dXJuIGZpZ3VyZTtcbn07XG5mdW5jdGlvbiBpc1ZhbGlkVVJMKHN0cikge1xuICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChcbiAgICBcIl4oaHR0cHM/OlxcXFwvXFxcXC8pPygoKFthLXpcXFxcZF0oW2EtelxcXFxkLV0qW2EtelxcXFxkXSkqKVxcXFwuKStbYS16XXsyLH18KChcXFxcZHsxLDN9XFxcXC4pezN9XFxcXGR7MSwzfSkpKFxcXFw6XFxcXGQrKT8oXFxcXC9bLWEtelxcXFxkJV8ufitdKikqKFxcXFw/WzsmYS16XFxcXGQlXy5+Kz0tXSopPyhcXFxcI1stYS16XFxcXGRfXSopPyRcIixcbiAgICBcImlcIlxuICApO1xuICByZXR1cm4gISFwYXR0ZXJuLnRlc3Qoc3RyKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RIb3N0bmFtZSh1cmwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBob3N0bmFtZSA9IG5ldyBVUkwodXJsKS5ob3N0bmFtZTtcbiAgICByZXR1cm4gaG9zdG5hbWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2F1ZGlvLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyMSBmcm9tIFwicmVhY3RcIjtcbnZhciBBdWRpbyA9ICh7IGJsb2NrLCBjbGFzc05hbWUgfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgeyByZWNvcmRNYXAgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3Qgc291cmNlID0gcmVjb3JkTWFwLnNpZ25lZF91cmxzW2Jsb2NrLmlkXSB8fCAoKF9jID0gKF9iID0gKF9hID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1hdWRpb1wiLCBjbGFzc05hbWUpXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIxLmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiLCB7XG4gICAgY29udHJvbHM6IHRydWUsXG4gICAgcHJlbG9hZDogXCJub25lXCIsXG4gICAgc3JjOiBzb3VyY2VcbiAgfSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvZmlsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjMgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy9maWxlLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDIyIGZyb20gXCJyZWFjdFwiO1xudmFyIEZpbGVJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lXG4gIH0sIHJlc3QpLCB7XG4gICAgdmlld0JveDogXCIwIDAgMzAgMzBcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTIyLDh2MTJjMCwzLjg2Ni0zLjEzNCw3LTcsN3MtNy0zLjEzNC03LTdWOGMwLTIuNzYyLDIuMjM4LTUsNS01czUsMi4yMzgsNSw1djEyYzAsMS42NTctMS4zNDMsMy0zLDNzLTMtMS4zNDMtMy0zVjhoLTJ2MTJjMCwyLjc2MiwyLjIzOCw1LDUsNXM1LTIuMjM4LDUtNVY4YzAtMy44NjYtMy4xMzQtNy03LTdTNiw0LjEzNCw2LDh2MTJjMCw0Ljk3MSw0LjAyOSw5LDksOXM5LTQuMDI5LDktOVY4SDIyelwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2ZpbGUudHN4XG52YXIgRmlsZSA9ICh7IGJsb2NrLCBjbGFzc05hbWUgfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICBjb25zdCB7IGNvbXBvbmVudHMsIHJlY29yZE1hcCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCBzb3VyY2UgPSByZWNvcmRNYXAuc2lnbmVkX3VybHNbYmxvY2suaWRdIHx8ICgoX2MgPSAoX2IgPSAoX2EgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2JbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWZpbGVcIiwgY2xhc3NOYW1lKVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyMy5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTGluaywge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZmlsZS1saW5rXCIsXG4gICAgaHJlZjogc291cmNlLFxuICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoRmlsZUljb24sIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWZpbGUtaWNvblwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWZpbGUtaW5mb1wiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZmlsZS10aXRsZVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgIHZhbHVlOiAoKF9kID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnRpdGxlKSB8fCBbW1wiRmlsZVwiXV0sXG4gICAgYmxvY2tcbiAgfSkpLCAoKF9lID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnNpemUpICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZmlsZS1zaXplXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjMuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgdmFsdWU6IGJsb2NrLnByb3BlcnRpZXMuc2l6ZSxcbiAgICBibG9ja1xuICB9KSkpKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9nb29nbGUtZHJpdmUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDI0IGZyb20gXCJyZWFjdFwiO1xudmFyIEdvb2dsZURyaXZlID0gKHsgYmxvY2ssIGNsYXNzTmFtZSB9KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgeyBjb21wb25lbnRzLCBtYXBJbWFnZVVybCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCBwcm9wZXJ0aWVzID0gKF9hID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZHJpdmVfcHJvcGVydGllcztcbiAgaWYgKCFwcm9wZXJ0aWVzKVxuICAgIHJldHVybiBudWxsO1xuICBsZXQgZG9tYWluO1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocHJvcGVydGllcy51cmwpO1xuICAgIGRvbWFpbiA9IHVybC5ob3N0bmFtZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tZ29vZ2xlLWRyaXZlXCIsIGNsYXNzTmFtZSlcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjQuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkxpbmssIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1saW5rXCIsXG4gICAgaHJlZjogcHJvcGVydGllcy51cmwsXG4gICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1nb29nbGUtZHJpdmUtcHJldmlld1wiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI0LmNyZWF0ZUVsZW1lbnQoR3JhY2VmdWxJbWFnZSwge1xuICAgIHNyYzogbWFwSW1hZ2VVcmwocHJvcGVydGllcy50aHVtYm5haWwsIGJsb2NrKSxcbiAgICBhbHQ6IHByb3BlcnRpZXMudGl0bGUgfHwgXCJHb29nbGUgRHJpdmUgRG9jdW1lbnRcIixcbiAgICBsb2FkaW5nOiBcImxhenlcIlxuICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZ29vZ2xlLWRyaXZlLWJvZHlcIlxuICB9LCBwcm9wZXJ0aWVzLnRpdGxlICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZ29vZ2xlLWRyaXZlLWJvZHktdGl0bGVcIlxuICB9LCBwcm9wZXJ0aWVzLnRpdGxlKSwgcHJvcGVydGllcy5pY29uICYmIGRvbWFpbiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1ib2R5LXNvdXJjZVwiXG4gIH0sIHByb3BlcnRpZXMuaWNvbiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1ib2R5LXNvdXJjZS1pY29uXCIsXG4gICAgc3R5bGU6IHtcbiAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgke3Byb3BlcnRpZXMuaWNvbn0pYFxuICAgIH1cbiAgfSksIGRvbWFpbiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1ib2R5LXNvdXJjZS1kb21haW5cIlxuICB9LCBkb21haW4pKSkpKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtYXNpZGUudHN4XG52YXIgaW1wb3J0X2xvZGFzaDIgPSBfX3RvRVNNKHJlcXVpcmVfbG9kYXNoKCksIDEpO1xuaW1wb3J0ICogYXMgUmVhY3QyNSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHV1aWRUb0lkIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xudmFyIFBhZ2VBc2lkZSA9ICh7XG4gIHRvYyxcbiAgYWN0aXZlU2VjdGlvbixcbiAgc2V0QWN0aXZlU2VjdGlvbixcbiAgcGFnZUFzaWRlLFxuICBoYXNUb2MsXG4gIGhhc0FzaWRlLFxuICBjbGFzc05hbWVcbn0pID0+IHtcbiAgY29uc3QgdGhyb3R0bGVNcyA9IDEwMDtcbiAgY29uc3QgYWN0aW9uU2VjdGlvblNjcm9sbFNweSA9IFJlYWN0MjUudXNlTWVtbyhcbiAgICAoKSA9PiAoMCwgaW1wb3J0X2xvZGFzaDIuZGVmYXVsdCkoKCkgPT4ge1xuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibm90aW9uLWhcIik7XG4gICAgICBsZXQgcHJldkJCb3ggPSBudWxsO1xuICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uSWQgPSBhY3RpdmVTZWN0aW9uO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbnNbaV07XG4gICAgICAgIGlmICghc2VjdGlvbiB8fCAhKHNlY3Rpb24gaW5zdGFuY2VvZiBFbGVtZW50KSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKCFjdXJyZW50U2VjdGlvbklkKSB7XG4gICAgICAgICAgY3VycmVudFNlY3Rpb25JZCA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYm94ID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgcHJldkhlaWdodCA9IHByZXZCQm94ID8gYmJveC50b3AgLSBwcmV2QkJveC5ib3R0b20gOiAwO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1heCgxNTAsIHByZXZIZWlnaHQgLyA0KTtcbiAgICAgICAgaWYgKGJib3gudG9wIC0gb2Zmc2V0IDwgMCkge1xuICAgICAgICAgIGN1cnJlbnRTZWN0aW9uSWQgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIik7XG4gICAgICAgICAgcHJldkJCb3ggPSBiYm94O1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc2V0QWN0aXZlU2VjdGlvbihjdXJyZW50U2VjdGlvbklkKTtcbiAgICB9LCB0aHJvdHRsZU1zKSxcbiAgICBbXG4gICAgICBzZXRBY3RpdmVTZWN0aW9uXG4gICAgXVxuICApO1xuICBSZWFjdDI1LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFoYXNUb2MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgYWN0aW9uU2VjdGlvblNjcm9sbFNweSk7XG4gICAgYWN0aW9uU2VjdGlvblNjcm9sbFNweSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBhY3Rpb25TZWN0aW9uU2Nyb2xsU3B5KTtcbiAgICB9O1xuICB9LCBbaGFzVG9jLCBhY3Rpb25TZWN0aW9uU2Nyb2xsU3B5XSk7XG4gIGlmICghaGFzQXNpZGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjUuY3JlYXRlRWxlbWVudChcImFzaWRlXCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWFzaWRlXCIsIGNsYXNzTmFtZSlcbiAgfSwgaGFzVG9jICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI1LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNpZGUtdGFibGUtb2YtY29udGVudHNcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzaWRlLXRhYmxlLW9mLWNvbnRlbnRzLWhlYWRlclwiXG4gIH0sIFwiVGFibGUgb2YgQ29udGVudHNcIiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI1LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGFibGUtb2YtY29udGVudHNcIlxuICB9LCB0b2MubWFwKCh0b2NJdGVtKSA9PiB7XG4gICAgY29uc3QgaWQgPSB1dWlkVG9JZCh0b2NJdGVtLmlkKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjUuY3JlYXRlRWxlbWVudChcImFcIiwge1xuICAgICAga2V5OiBpZCxcbiAgICAgIGhyZWY6IGAjJHtpZH1gLFxuICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgXCJub3Rpb24tdGFibGUtb2YtY29udGVudHMtaXRlbVwiLFxuICAgICAgICBgbm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzLWl0ZW0taW5kZW50LWxldmVsLSR7dG9jSXRlbS5pbmRlbnRMZXZlbH1gLFxuICAgICAgICBhY3RpdmVTZWN0aW9uID09PSBpZCAmJiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50cy1hY3RpdmUtaXRlbVwiXG4gICAgICApXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50cy1pdGVtLWJvZHlcIixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIG1hcmdpbkxlZnQ6IHRvY0l0ZW0uaW5kZW50TGV2ZWwgKiAxNlxuICAgICAgfVxuICAgIH0sIHRvY0l0ZW0udGV4dCkpO1xuICB9KSkpLCBwYWdlQXNpZGUpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvc3luYy1wb2ludGVyLWJsb2NrLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyNiBmcm9tIFwicmVhY3RcIjtcbnZhciBTeW5jUG9pbnRlckJsb2NrID0gKHsgYmxvY2ssIGxldmVsIH0pID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgaWYgKCFibG9jaykge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJtaXNzaW5nIHN5bmMgcG9pbnRlciBibG9ja1wiLCBibG9jay5pZCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN5bmNQb2ludGVyQmxvY2sgPSBibG9jaztcbiAgY29uc3QgcmVmZXJlbmNlUG9pbnRlcklkID0gKF9iID0gKF9hID0gc3luY1BvaW50ZXJCbG9jayA9PSBudWxsID8gdm9pZCAwIDogc3luY1BvaW50ZXJCbG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmFuc2NsdXNpb25fcmVmZXJlbmNlX3BvaW50ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pZDtcbiAgaWYgKCFyZWZlcmVuY2VQb2ludGVySWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjYuY3JlYXRlRWxlbWVudChOb3Rpb25CbG9ja1JlbmRlcmVyLCB7XG4gICAga2V5OiByZWZlcmVuY2VQb2ludGVySWQsXG4gICAgbGV2ZWwsXG4gICAgYmxvY2tJZDogcmVmZXJlbmNlUG9pbnRlcklkXG4gIH0pO1xufTtcblxuLy8gc3JjL2ljb25zL2xpbmstaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjcgZnJvbSBcInJlYWN0XCI7XG52YXIgTGlua0ljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjcuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWVcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNiAxNlwiLFxuICAgIHdpZHRoOiBcIjE2XCIsXG4gICAgaGVpZ2h0OiBcIjE2XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI3LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNy43NzUgMy4yNzVhLjc1Ljc1IDAgMDAxLjA2IDEuMDZsMS4yNS0xLjI1YTIgMiAwIDExMi44MyAyLjgzbC0yLjUgMi41YTIgMiAwIDAxLTIuODMgMCAuNzUuNzUgMCAwMC0xLjA2IDEuMDYgMy41IDMuNSAwIDAwNC45NSAwbDIuNS0yLjVhMy41IDMuNSAwIDAwLTQuOTUtNC45NWwtMS4yNSAxLjI1em0tNC42OSA5LjY0YTIgMiAwIDAxMC0yLjgzbDIuNS0yLjVhMiAyIDAgMDEyLjgzIDAgLjc1Ljc1IDAgMDAxLjA2LTEuMDYgMy41IDMuNSAwIDAwLTQuOTUgMGwtMi41IDIuNWEzLjUgMy41IDAgMDA0Ljk1IDQuOTVsMS4yNS0xLjI1YS43NS43NSAwIDAwLTEuMDYtMS4wNmwtMS4yNSAxLjI1YTIgMiAwIDAxLTIuODMgMHpcIlxuICB9KSk7XG59O1xuXG4vLyBzcmMvYmxvY2sudHN4XG52YXIgdG9jSW5kZW50TGV2ZWxDYWNoZSA9IHt9O1xudmFyIHBhZ2VDb3ZlclN0eWxlQ2FjaGUgPSB7fTtcbnZhciBCbG9jayA9IChwcm9wcykgPT4ge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeCwgX3ksIF96LCBfQSwgX0IsIF9DLCBfRCwgX0UsIF9GLCBfRywgX0gsIF9JLCBfSiwgX0ssIF9MLCBfTSwgX04sIF9PLCBfUCwgX1E7XG4gIGNvbnN0IGN0eDIgPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBjb21wb25lbnRzLFxuICAgIGZ1bGxQYWdlLFxuICAgIGRhcmtNb2RlLFxuICAgIHJlY29yZE1hcCxcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHNob3dUYWJsZU9mQ29udGVudHMsXG4gICAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXMsXG4gICAgZGVmYXVsdFBhZ2VJY29uLFxuICAgIGRlZmF1bHRQYWdlQ292ZXIsXG4gICAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uXG4gIH0gPSBjdHgyO1xuICBjb25zdCBbYWN0aXZlU2VjdGlvbiwgc2V0QWN0aXZlU2VjdGlvbl0gPSBSZWFjdDI4LnVzZVN0YXRlKG51bGwpO1xuICBjb25zdCB7XG4gICAgYmxvY2ssXG4gICAgY2hpbGRyZW4sXG4gICAgbGV2ZWwsXG4gICAgY2xhc3NOYW1lLFxuICAgIGJvZHlDbGFzc05hbWUsXG4gICAgaGVhZGVyLFxuICAgIGZvb3RlcixcbiAgICBwYWdlSGVhZGVyLFxuICAgIHBhZ2VGb290ZXIsXG4gICAgcGFnZVRpdGxlLFxuICAgIHBhZ2VBc2lkZSxcbiAgICBwYWdlQ292ZXIsXG4gICAgaGlkZUJsb2NrSWQsXG4gICAgZGlzYWJsZUhlYWRlclxuICB9ID0gcHJvcHM7XG4gIGlmICghYmxvY2spIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAobGV2ZWwgPT09IDAgJiYgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIDtcbiAgICBibG9jay50eXBlID0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiO1xuICB9XG4gIGNvbnN0IGJsb2NrSWQgPSBoaWRlQmxvY2tJZCA/IFwibm90aW9uLWJsb2NrXCIgOiBgbm90aW9uLWJsb2NrLSR7dXVpZFRvSWQyKGJsb2NrLmlkKX1gO1xuICBzd2l0Y2ggKGJsb2NrLnR5cGUpIHtcbiAgICBjYXNlIFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIjpcbiAgICBjYXNlIFwicGFnZVwiOlxuICAgICAgaWYgKGxldmVsID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBwYWdlX2ljb24gPSBkZWZhdWx0UGFnZUljb24sXG4gICAgICAgICAgcGFnZV9jb3ZlciA9IGRlZmF1bHRQYWdlQ292ZXIsXG4gICAgICAgICAgcGFnZV9jb3Zlcl9wb3NpdGlvbiA9IGRlZmF1bHRQYWdlQ292ZXJQb3NpdGlvbixcbiAgICAgICAgICBwYWdlX2Z1bGxfd2lkdGgsXG4gICAgICAgICAgcGFnZV9zbWFsbF90ZXh0XG4gICAgICAgIH0gPSBibG9jay5mb3JtYXQgfHwge307XG4gICAgICAgIGlmIChmdWxsUGFnZSkge1xuICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBibG9jay50eXBlID09PSBcInBhZ2VcIiA/IGJsb2NrLnByb3BlcnRpZXMgOiB7XG4gICAgICAgICAgICB0aXRsZTogKF9iID0gKF9hID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25bZ2V0QmxvY2tDb2xsZWN0aW9uSWQoYmxvY2ssIHJlY29yZE1hcCldKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYi5uYW1lXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBjb3ZlclBvc2l0aW9uID0gKDEgLSAocGFnZV9jb3Zlcl9wb3NpdGlvbiB8fCAwLjUpKSAqIDEwMDtcbiAgICAgICAgICBjb25zdCBwYWdlQ292ZXJPYmplY3RQb3NpdGlvbiA9IGBjZW50ZXIgJHtjb3ZlclBvc2l0aW9ufSVgO1xuICAgICAgICAgIGxldCBwYWdlQ292ZXJTdHlsZSA9IHBhZ2VDb3ZlclN0eWxlQ2FjaGVbcGFnZUNvdmVyT2JqZWN0UG9zaXRpb25dO1xuICAgICAgICAgIGlmICghcGFnZUNvdmVyU3R5bGUpIHtcbiAgICAgICAgICAgIHBhZ2VDb3ZlclN0eWxlID0gcGFnZUNvdmVyU3R5bGVDYWNoZVtwYWdlQ292ZXJPYmplY3RQb3NpdGlvbl0gPSB7XG4gICAgICAgICAgICAgIG9iamVjdFBvc2l0aW9uOiBwYWdlQ292ZXJPYmplY3RQb3NpdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFnZUljb24gPSAoX2MgPSBnZXRCbG9ja0ljb24yKGJsb2NrLCByZWNvcmRNYXApKSAhPSBudWxsID8gX2MgOiBkZWZhdWx0UGFnZUljb247XG4gICAgICAgICAgY29uc3QgaXNQYWdlSWNvblVybCA9IHBhZ2VJY29uICYmIGlzVXJsKHBhZ2VJY29uKTtcbiAgICAgICAgICBjb25zdCB0b2MgPSBnZXRQYWdlVGFibGVPZkNvbnRlbnRzKFxuICAgICAgICAgICAgYmxvY2ssXG4gICAgICAgICAgICByZWNvcmRNYXBcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGhhc1RvYyA9IHNob3dUYWJsZU9mQ29udGVudHMgJiYgdG9jLmxlbmd0aCA+PSBtaW5UYWJsZU9mQ29udGVudHNJdGVtcztcbiAgICAgICAgICBjb25zdCBoYXNBc2lkZSA9IChoYXNUb2MgfHwgcGFnZUFzaWRlKSAmJiAhcGFnZV9mdWxsX3dpZHRoO1xuICAgICAgICAgIGNvbnN0IGhhc1BhZ2VDb3ZlciA9IHBhZ2VDb3ZlciB8fCBwYWdlX2NvdmVyO1xuICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgIFwibm90aW9uXCIsXG4gICAgICAgICAgICAgIFwibm90aW9uLWFwcFwiLFxuICAgICAgICAgICAgICBkYXJrTW9kZSA/IFwiZGFyay1tb2RlXCIgOiBcImxpZ2h0LW1vZGVcIixcbiAgICAgICAgICAgICAgYmxvY2tJZCxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXZpZXdwb3J0XCJcbiAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWZyYW1lXCJcbiAgICAgICAgICB9LCAhZGlzYWJsZUhlYWRlciAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuSGVhZGVyLCB7XG4gICAgICAgICAgICBibG9ja1xuICAgICAgICAgIH0pLCBoZWFkZXIsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXNjcm9sbGVyXCJcbiAgICAgICAgICB9LCBoYXNQYWdlQ292ZXIgJiYgKHBhZ2VDb3ZlciA/IHBhZ2VDb3ZlciA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLWNvdmVyLXdyYXBwZXJcIlxuICAgICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICAgICAgICBzcmM6IG1hcEltYWdlVXJsKHBhZ2VfY292ZXIsIGJsb2NrKSxcbiAgICAgICAgICAgIGFsdDogZ2V0VGV4dENvbnRlbnQyKHByb3BlcnRpZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BlcnRpZXMudGl0bGUpLFxuICAgICAgICAgICAgcHJpb3JpdHk6IHRydWUsXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXBhZ2UtY292ZXJcIixcbiAgICAgICAgICAgIHN0eWxlOiBwYWdlQ292ZXJTdHlsZVxuICAgICAgICAgIH0pKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJtYWluXCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgIFwibm90aW9uLXBhZ2VcIixcbiAgICAgICAgICAgICAgaGFzUGFnZUNvdmVyID8gXCJub3Rpb24tcGFnZS1oYXMtY292ZXJcIiA6IFwibm90aW9uLXBhZ2Utbm8tY292ZXJcIixcbiAgICAgICAgICAgICAgcGFnZV9pY29uID8gXCJub3Rpb24tcGFnZS1oYXMtaWNvblwiIDogXCJub3Rpb24tcGFnZS1uby1pY29uXCIsXG4gICAgICAgICAgICAgIGlzUGFnZUljb25VcmwgPyBcIm5vdGlvbi1wYWdlLWhhcy1pbWFnZS1pY29uXCIgOiBcIm5vdGlvbi1wYWdlLWhhcy10ZXh0LWljb25cIixcbiAgICAgICAgICAgICAgXCJub3Rpb24tZnVsbC1wYWdlXCIsXG4gICAgICAgICAgICAgIHBhZ2VfZnVsbF93aWR0aCAmJiBcIm5vdGlvbi1mdWxsLXdpZHRoXCIsXG4gICAgICAgICAgICAgIHBhZ2Vfc21hbGxfdGV4dCAmJiBcIm5vdGlvbi1zbWFsbC10ZXh0XCIsXG4gICAgICAgICAgICAgIGJvZHlDbGFzc05hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9LCBwYWdlX2ljb24gJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChQYWdlSWNvbiwge1xuICAgICAgICAgICAgYmxvY2ssXG4gICAgICAgICAgICBkZWZhdWx0SWNvbjogZGVmYXVsdFBhZ2VJY29uLFxuICAgICAgICAgICAgaW5saW5lOiBmYWxzZVxuICAgICAgICAgIH0pLCBwYWdlSGVhZGVyLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiaDFcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi10aXRsZVwiXG4gICAgICAgICAgfSwgcGFnZVRpdGxlICE9IG51bGwgPyBwYWdlVGl0bGUgOiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wZXJ0aWVzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wZXJ0aWVzLnRpdGxlLFxuICAgICAgICAgICAgYmxvY2tcbiAgICAgICAgICB9KSksIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJwYWdlXCIgJiYgYmxvY2sucGFyZW50X3RhYmxlID09PSBcImNvbGxlY3Rpb25cIikgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkNvbGxlY3Rpb24sIHtcbiAgICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgICAgY3R4OiBjdHgyXG4gICAgICAgICAgfSksIGJsb2NrLnR5cGUgIT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgIFwibm90aW9uLXBhZ2UtY29udGVudFwiLFxuICAgICAgICAgICAgICBoYXNBc2lkZSAmJiBcIm5vdGlvbi1wYWdlLWNvbnRlbnQtaGFzLWFzaWRlXCIsXG4gICAgICAgICAgICAgIGhhc1RvYyAmJiBcIm5vdGlvbi1wYWdlLWNvbnRlbnQtaGFzLXRvY1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImFydGljbGVcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLWNvbnRlbnQtaW5uZXJcIlxuICAgICAgICAgIH0sIGNoaWxkcmVuKSwgaGFzQXNpZGUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChQYWdlQXNpZGUsIHtcbiAgICAgICAgICAgIHRvYyxcbiAgICAgICAgICAgIGFjdGl2ZVNlY3Rpb24sXG4gICAgICAgICAgICBzZXRBY3RpdmVTZWN0aW9uLFxuICAgICAgICAgICAgaGFzVG9jLFxuICAgICAgICAgICAgaGFzQXNpZGUsXG4gICAgICAgICAgICBwYWdlQXNpZGVcbiAgICAgICAgICB9KSksIHBhZ2VGb290ZXIpLCBmb290ZXIpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJtYWluXCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgIFwibm90aW9uXCIsXG4gICAgICAgICAgICAgIGRhcmtNb2RlID8gXCJkYXJrLW1vZGVcIiA6IFwibGlnaHQtbW9kZVwiLFxuICAgICAgICAgICAgICBcIm5vdGlvbi1wYWdlXCIsXG4gICAgICAgICAgICAgIHBhZ2VfZnVsbF93aWR0aCAmJiBcIm5vdGlvbi1mdWxsLXdpZHRoXCIsXG4gICAgICAgICAgICAgIHBhZ2Vfc21hbGxfdGV4dCAmJiBcIm5vdGlvbi1zbWFsbC10ZXh0XCIsXG4gICAgICAgICAgICAgIGJsb2NrSWQsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgYm9keUNsYXNzTmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi12aWV3cG9ydFwiXG4gICAgICAgICAgfSksIHBhZ2VIZWFkZXIsIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJwYWdlXCIgJiYgYmxvY2sucGFyZW50X3RhYmxlID09PSBcImNvbGxlY3Rpb25cIikgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkNvbGxlY3Rpb24sIHtcbiAgICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgICAgY3R4OiBjdHgyXG4gICAgICAgICAgfSksIGJsb2NrLnR5cGUgIT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIiAmJiBjaGlsZHJlbiwgcGFnZUZvb3Rlcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJsb2NrQ29sb3IgPSAoX2QgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5ibG9ja19jb2xvcjtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICBcIm5vdGlvbi1wYWdlLWxpbmtcIixcbiAgICAgICAgICAgIGJsb2NrQ29sb3IgJiYgYG5vdGlvbi0ke2Jsb2NrQ29sb3J9YCxcbiAgICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgICApLFxuICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoYmxvY2suaWQpXG4gICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgYmxvY2tcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIGNhc2UgXCJoZWFkZXJcIjpcbiAgICBjYXNlIFwic3ViX2hlYWRlclwiOlxuICAgIGNhc2UgXCJzdWJfc3ViX2hlYWRlclwiOiB7XG4gICAgICBpZiAoIWJsb2NrLnByb3BlcnRpZXMpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgYmxvY2tDb2xvciA9IChfZSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmJsb2NrX2NvbG9yO1xuICAgICAgY29uc3QgaWQgPSB1dWlkVG9JZDIoYmxvY2suaWQpO1xuICAgICAgY29uc3QgdGl0bGUgPSBnZXRUZXh0Q29udGVudDIoYmxvY2sucHJvcGVydGllcy50aXRsZSkgfHwgYE5vdGlvbiBIZWFkZXIgJHtpZH1gO1xuICAgICAgbGV0IGluZGVudExldmVsID0gdG9jSW5kZW50TGV2ZWxDYWNoZVtibG9jay5pZF07XG4gICAgICBsZXQgaW5kZW50TGV2ZWxDbGFzcztcbiAgICAgIGlmIChpbmRlbnRMZXZlbCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBnZXRCbG9ja1BhcmVudFBhZ2UyKGJsb2NrLCByZWNvcmRNYXApO1xuICAgICAgICBpZiAocGFnZSkge1xuICAgICAgICAgIGNvbnN0IHRvYyA9IGdldFBhZ2VUYWJsZU9mQ29udGVudHMocGFnZSwgcmVjb3JkTWFwKTtcbiAgICAgICAgICBjb25zdCB0b2NJdGVtID0gdG9jLmZpbmQoKHRvY0l0ZW0yKSA9PiB0b2NJdGVtMi5pZCA9PT0gYmxvY2suaWQpO1xuICAgICAgICAgIGlmICh0b2NJdGVtKSB7XG4gICAgICAgICAgICBpbmRlbnRMZXZlbCA9IHRvY0l0ZW0uaW5kZW50TGV2ZWw7XG4gICAgICAgICAgICB0b2NJbmRlbnRMZXZlbENhY2hlW2Jsb2NrLmlkXSA9IGluZGVudExldmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGluZGVudExldmVsICE9PSB2b2lkIDApIHtcbiAgICAgICAgaW5kZW50TGV2ZWxDbGFzcyA9IGBub3Rpb24taC1pbmRlbnQtJHtpbmRlbnRMZXZlbH1gO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNIMSA9IGJsb2NrLnR5cGUgPT09IFwiaGVhZGVyXCI7XG4gICAgICBjb25zdCBpc0gyID0gYmxvY2sudHlwZSA9PT0gXCJzdWJfaGVhZGVyXCI7XG4gICAgICBjb25zdCBpc0gzID0gYmxvY2sudHlwZSA9PT0gXCJzdWJfc3ViX2hlYWRlclwiO1xuICAgICAgY29uc3QgY2xhc3NOYW1lU3RyID0gY3MoXG4gICAgICAgIGlzSDEgJiYgXCJub3Rpb24taCBub3Rpb24taDFcIixcbiAgICAgICAgaXNIMiAmJiBcIm5vdGlvbi1oIG5vdGlvbi1oMlwiLFxuICAgICAgICBpc0gzICYmIFwibm90aW9uLWggbm90aW9uLWgzXCIsXG4gICAgICAgIGJsb2NrQ29sb3IgJiYgYG5vdGlvbi0ke2Jsb2NrQ29sb3J9YCxcbiAgICAgICAgaW5kZW50TGV2ZWxDbGFzcyxcbiAgICAgICAgYmxvY2tJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGlubmVySGVhZGVyID0gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGlkLFxuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWhlYWRlci1hbmNob3JcIlxuICAgICAgfSksICEoKF9mID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2YudG9nZ2xlYWJsZSkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImFcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWhhc2gtbGlua1wiLFxuICAgICAgICBocmVmOiBgIyR7aWR9YCxcbiAgICAgICAgdGl0bGVcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoTGlua0ljb24sIG51bGwpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWgtdGl0bGVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiBibG9jay5wcm9wZXJ0aWVzLnRpdGxlLFxuICAgICAgICBibG9ja1xuICAgICAgfSkpKTtcbiAgICAgIGxldCBoZWFkZXJCbG9jayA9IG51bGw7XG4gICAgICBpZiAoaXNIMSkge1xuICAgICAgICBoZWFkZXJCbG9jayA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJoMlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVTdHIsXG4gICAgICAgICAgXCJkYXRhLWlkXCI6IGlkXG4gICAgICAgIH0sIGlubmVySGVhZGVyKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNIMikge1xuICAgICAgICBoZWFkZXJCbG9jayA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVTdHIsXG4gICAgICAgICAgXCJkYXRhLWlkXCI6IGlkXG4gICAgICAgIH0sIGlubmVySGVhZGVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlYWRlckJsb2NrID0gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImg0XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVN0cixcbiAgICAgICAgICBcImRhdGEtaWRcIjogaWRcbiAgICAgICAgfSwgaW5uZXJIZWFkZXIpO1xuICAgICAgfVxuICAgICAgaWYgKChfZyA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLnRvZ2dsZWFibGUpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkZXRhaWxzXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXRvZ2dsZVwiLCBibG9ja0lkKVxuICAgICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwic3VtbWFyeVwiLCBudWxsLCBoZWFkZXJCbG9jayksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgY2hpbGRyZW4pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBoZWFkZXJCbG9jaztcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSBcImRpdmlkZXJcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWhyXCIsIGJsb2NrSWQpXG4gICAgICB9KTtcbiAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICBpZiAoIWJsb2NrLnByb3BlcnRpZXMgJiYgISgoX2ggPSBibG9jay5jb250ZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2gubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1ibGFua1wiLCBibG9ja0lkKVxuICAgICAgICB9LCBcIlxceEEwXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgYmxvY2tDb2xvciA9IChfaSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLmJsb2NrX2NvbG9yO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgIFwibm90aW9uLXRleHRcIixcbiAgICAgICAgICBibG9ja0NvbG9yICYmIGBub3Rpb24tJHtibG9ja0NvbG9yfWAsXG4gICAgICAgICAgYmxvY2tJZFxuICAgICAgICApXG4gICAgICB9LCAoKF9qID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9qLnRpdGxlKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgdmFsdWU6IGJsb2NrLnByb3BlcnRpZXMudGl0bGUsXG4gICAgICAgIGJsb2NrXG4gICAgICB9KSwgY2hpbGRyZW4gJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGV4dC1jaGlsZHJlblwiXG4gICAgICB9LCBjaGlsZHJlbikpO1xuICAgIH1cbiAgICBjYXNlIFwiYnVsbGV0ZWRfbGlzdFwiOlxuICAgIGNhc2UgXCJudW1iZXJlZF9saXN0XCI6IHtcbiAgICAgIGNvbnN0IHdyYXBMaXN0ID0gKGNvbnRlbnQsIHN0YXJ0MikgPT4gYmxvY2sudHlwZSA9PT0gXCJidWxsZXRlZF9saXN0XCIgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwidWxcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWxpc3RcIiwgXCJub3Rpb24tbGlzdC1kaXNjXCIsIGJsb2NrSWQpXG4gICAgICB9LCBjb250ZW50KSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJvbFwiLCB7XG4gICAgICAgIHN0YXJ0OiBzdGFydDIsXG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tbGlzdFwiLCBcIm5vdGlvbi1saXN0LW51bWJlcmVkXCIsIGJsb2NrSWQpXG4gICAgICB9LCBjb250ZW50KTtcbiAgICAgIGxldCBvdXRwdXQgPSBudWxsO1xuICAgICAgaWYgKGJsb2NrLmNvbnRlbnQpIHtcbiAgICAgICAgb3V0cHV0ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChSZWFjdDI4LkZyYWdtZW50LCBudWxsLCBibG9jay5wcm9wZXJ0aWVzICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgICB2YWx1ZTogYmxvY2sucHJvcGVydGllcy50aXRsZSxcbiAgICAgICAgICBibG9ja1xuICAgICAgICB9KSksIHdyYXBMaXN0KGNoaWxkcmVuKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXQgPSBibG9jay5wcm9wZXJ0aWVzID8gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgIHZhbHVlOiBibG9jay5wcm9wZXJ0aWVzLnRpdGxlLFxuICAgICAgICAgIGJsb2NrXG4gICAgICAgIH0pKSA6IG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBpc1RvcExldmVsID0gYmxvY2sudHlwZSAhPT0gKChfbCA9IChfayA9IHJlY29yZE1hcC5ibG9ja1tibG9jay5wYXJlbnRfaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2sudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfbC50eXBlKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gZ2V0TGlzdE51bWJlcihibG9jay5pZCwgcmVjb3JkTWFwLmJsb2NrKTtcbiAgICAgIHJldHVybiBpc1RvcExldmVsID8gd3JhcExpc3Qob3V0cHV0LCBzdGFydCkgOiBvdXRwdXQ7XG4gICAgfVxuICAgIGNhc2UgXCJlbWJlZFwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5FbWJlZCwge1xuICAgICAgICBibG9ja0lkLFxuICAgICAgICBibG9ja1xuICAgICAgfSk7XG4gICAgY2FzZSBcInR3ZWV0XCI6XG4gICAgY2FzZSBcIm1hcHNcIjpcbiAgICBjYXNlIFwicGRmXCI6XG4gICAgY2FzZSBcImZpZ21hXCI6XG4gICAgY2FzZSBcInR5cGVmb3JtXCI6XG4gICAgY2FzZSBcImNvZGVwZW5cIjpcbiAgICBjYXNlIFwiZXhjYWxpZHJhd1wiOlxuICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgIGNhc2UgXCJnaXN0XCI6XG4gICAgY2FzZSBcInZpZGVvXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChBc3NldFdyYXBwZXIsIHtcbiAgICAgICAgYmxvY2tJZCxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pO1xuICAgIGNhc2UgXCJkcml2ZVwiOiB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gKF9tID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX20uZHJpdmVfcHJvcGVydGllcztcbiAgICAgIGlmICghcHJvcGVydGllcykge1xuICAgICAgICBpZiAoKF9uID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX24uZGlzcGxheV9zb3VyY2UpIHtcbiAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChBc3NldFdyYXBwZXIsIHtcbiAgICAgICAgICAgIGJsb2NrSWQsXG4gICAgICAgICAgICBibG9ja1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChHb29nbGVEcml2ZSwge1xuICAgICAgICBibG9jayxcbiAgICAgICAgY2xhc3NOYW1lOiBibG9ja0lkXG4gICAgICB9KTtcbiAgICB9XG4gICAgY2FzZSBcImF1ZGlvXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChBdWRpbywge1xuICAgICAgICBibG9jayxcbiAgICAgICAgY2xhc3NOYW1lOiBibG9ja0lkXG4gICAgICB9KTtcbiAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoRmlsZSwge1xuICAgICAgICBibG9jayxcbiAgICAgICAgY2xhc3NOYW1lOiBibG9ja0lkXG4gICAgICB9KTtcbiAgICBjYXNlIFwiZXF1YXRpb25cIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuRXF1YXRpb24sIHtcbiAgICAgICAgYmxvY2ssXG4gICAgICAgIGlubGluZTogZmFsc2UsXG4gICAgICAgIGNsYXNzTmFtZTogYmxvY2tJZFxuICAgICAgfSk7XG4gICAgY2FzZSBcImNvZGVcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuQ29kZSwge1xuICAgICAgICBibG9ja1xuICAgICAgfSk7XG4gICAgY2FzZSBcImNvbHVtbl9saXN0XCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tcm93XCIsIGJsb2NrSWQpXG4gICAgICB9LCBjaGlsZHJlbik7XG4gICAgY2FzZSBcImNvbHVtblwiOiB7XG4gICAgICBjb25zdCBzcGFjZXJXaWR0aCA9IGBtaW4oMzJweCwgNHZ3KWA7XG4gICAgICBjb25zdCByYXRpbyA9ICgoX28gPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfby5jb2x1bW5fcmF0aW8pIHx8IDAuNTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IChfcCA9IHJlY29yZE1hcC5ibG9ja1tibG9jay5wYXJlbnRfaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX3AudmFsdWU7XG4gICAgICBjb25zdCBjb2x1bW5zID0gKChfcSA9IHBhcmVudCA9PSBudWxsID8gdm9pZCAwIDogcGFyZW50LmNvbnRlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfcS5sZW5ndGgpIHx8IE1hdGgubWF4KDIsIE1hdGguY2VpbCgxIC8gcmF0aW8pKTtcbiAgICAgIGNvbnN0IHdpZHRoID0gYGNhbGMoKDEwMCUgLSAoJHtjb2x1bW5zIC0gMX0gKiAke3NwYWNlcldpZHRofSkpICogJHtyYXRpb30pYDtcbiAgICAgIGNvbnN0IHN0eWxlID0geyB3aWR0aCB9O1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoUmVhY3QyOC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tY29sdW1uXCIsIGJsb2NrSWQpLFxuICAgICAgICBzdHlsZVxuICAgICAgfSwgY2hpbGRyZW4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zcGFjZXJcIlxuICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXNlIFwicXVvdGVcIjoge1xuICAgICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGJsb2NrQ29sb3IgPSAoX3IgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfci5ibG9ja19jb2xvcjtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiYmxvY2txdW90ZVwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgXCJub3Rpb24tcXVvdGVcIixcbiAgICAgICAgICBibG9ja0NvbG9yICYmIGBub3Rpb24tJHtibG9ja0NvbG9yfWAsXG4gICAgICAgICAgYmxvY2tJZFxuICAgICAgICApXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICB2YWx1ZTogYmxvY2sucHJvcGVydGllcy50aXRsZSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pKSwgY2hpbGRyZW4pO1xuICAgIH1cbiAgICBjYXNlIFwiY29sbGVjdGlvbl92aWV3XCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkNvbGxlY3Rpb24sIHtcbiAgICAgICAgYmxvY2ssXG4gICAgICAgIGNsYXNzTmFtZTogYmxvY2tJZCxcbiAgICAgICAgY3R4OiBjdHgyXG4gICAgICB9KTtcbiAgICBjYXNlIFwiY2FsbG91dFwiOlxuICAgICAgaWYgKGNvbXBvbmVudHMuQ2FsbG91dCkge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkNhbGxvdXQsIHtcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICBjbGFzc05hbWU6IGJsb2NrSWRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgIFwibm90aW9uLWNhbGxvdXRcIixcbiAgICAgICAgICAgICgoX3MgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfcy5ibG9ja19jb2xvcikgJiYgYG5vdGlvbi0keyhfdCA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF90LmJsb2NrX2NvbG9yfV9jb2AsXG4gICAgICAgICAgICBibG9ja0lkXG4gICAgICAgICAgKVxuICAgICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgICAgICAgYmxvY2tcbiAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY2FsbG91dC10ZXh0XCJcbiAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgICAgdmFsdWU6IChfdSA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfdS50aXRsZSxcbiAgICAgICAgICBibG9ja1xuICAgICAgICB9KSwgY2hpbGRyZW4pKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiYm9va21hcmtcIjoge1xuICAgICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGxpbmsgPSBibG9jay5wcm9wZXJ0aWVzLmxpbms7XG4gICAgICBpZiAoIWxpbmsgfHwgISgoX3YgPSBsaW5rWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX3ZbMF0pKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGxldCB0aXRsZSA9IGdldFRleHRDb250ZW50MihibG9jay5wcm9wZXJ0aWVzLnRpdGxlKTtcbiAgICAgIGlmICghdGl0bGUpIHtcbiAgICAgICAgdGl0bGUgPSBnZXRUZXh0Q29udGVudDIobGluayk7XG4gICAgICB9XG4gICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgaWYgKHRpdGxlLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGl0bGUpO1xuICAgICAgICAgICAgdGl0bGUgPSB1cmwuaG9zdG5hbWU7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcm93XCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5MaW5rLCB7XG4gICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICBcIm5vdGlvbi1ib29rbWFya1wiLFxuICAgICAgICAgICgoX3cgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfdy5ibG9ja19jb2xvcikgJiYgYG5vdGlvbi0ke2Jsb2NrLmZvcm1hdC5ibG9ja19jb2xvcn1gLFxuICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgKSxcbiAgICAgICAgaHJlZjogbGlua1swXVswXVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCB0aXRsZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib29rbWFyay10aXRsZVwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgdmFsdWU6IFtbdGl0bGVdXSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pKSwgKChfeCA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfeC5kZXNjcmlwdGlvbikgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYm9va21hcmstZGVzY3JpcHRpb25cIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiAoX3kgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX3kuZGVzY3JpcHRpb24sXG4gICAgICAgIGJsb2NrXG4gICAgICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvb2ttYXJrLWxpbmtcIlxuICAgICAgfSwgKChfeiA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF96LmJvb2ttYXJrX2ljb24pICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvb2ttYXJrLWxpbmstaWNvblwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KExhenlJbWFnZSwge1xuICAgICAgICBzcmM6IG1hcEltYWdlVXJsKChfQSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9BLmJvb2ttYXJrX2ljb24sIGJsb2NrKSxcbiAgICAgICAgYWx0OiB0aXRsZVxuICAgICAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib29rbWFyay1saW5rLXRleHRcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiBsaW5rLFxuICAgICAgICBibG9ja1xuICAgICAgfSkpKSksICgoX0IgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfQi5ib29rbWFya19jb3ZlcikgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYm9va21hcmstaW1hZ2VcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgc3JjOiBtYXBJbWFnZVVybCgoX0MgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfQy5ib29rbWFya19jb3ZlciwgYmxvY2spLFxuICAgICAgICBhbHQ6IGdldFRleHRDb250ZW50MigoX0QgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX0QudGl0bGUpLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9iamVjdEZpdDogXCJjb3ZlclwiXG4gICAgICAgIH1cbiAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBjYXNlIFwidG9nZ2xlXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRldGFpbHNcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXRvZ2dsZVwiLCBibG9ja0lkKVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcInN1bW1hcnlcIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiAoX0UgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX0UudGl0bGUsXG4gICAgICAgIGJsb2NrXG4gICAgICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgY2hpbGRyZW4pKTtcbiAgICBjYXNlIFwidGFibGVfb2ZfY29udGVudHNcIjoge1xuICAgICAgY29uc3QgcGFnZSA9IGdldEJsb2NrUGFyZW50UGFnZTIoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgICBpZiAoIXBhZ2UpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgdG9jID0gZ2V0UGFnZVRhYmxlT2ZDb250ZW50cyhwYWdlLCByZWNvcmRNYXApO1xuICAgICAgY29uc3QgYmxvY2tDb2xvciA9IChfRiA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9GLmJsb2NrX2NvbG9yO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgIFwibm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzXCIsXG4gICAgICAgICAgYmxvY2tDb2xvciAmJiBgbm90aW9uLSR7YmxvY2tDb2xvcn1gLFxuICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgKVxuICAgICAgfSwgdG9jLm1hcCgodG9jSXRlbSkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImFcIiwge1xuICAgICAgICBrZXk6IHRvY0l0ZW0uaWQsXG4gICAgICAgIGhyZWY6IGAjJHt1dWlkVG9JZDIodG9jSXRlbS5pZCl9YCxcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50cy1pdGVtXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50cy1pdGVtLWJvZHlcIixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICAgIG1hcmdpbkxlZnQ6IHRvY0l0ZW0uaW5kZW50TGV2ZWwgKiAyNFxuICAgICAgICB9XG4gICAgICB9LCB0b2NJdGVtLnRleHQpKSkpO1xuICAgIH1cbiAgICBjYXNlIFwidG9fZG9cIjoge1xuICAgICAgY29uc3QgaXNDaGVja2VkID0gKChfSSA9IChfSCA9IChfRyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfRy5jaGVja2VkKSA9PSBudWxsID8gdm9pZCAwIDogX0hbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfSVswXSkgPT09IFwiWWVzXCI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tdG8tZG9cIiwgYmxvY2tJZClcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRvLWRvLWl0ZW1cIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkNoZWNrYm94LCB7XG4gICAgICAgIGJsb2NrSWQsXG4gICAgICAgIGlzQ2hlY2tlZFxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgIFwibm90aW9uLXRvLWRvLWJvZHlcIixcbiAgICAgICAgICBpc0NoZWNrZWQgJiYgYG5vdGlvbi10by1kby1jaGVja2VkYFxuICAgICAgICApXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgdmFsdWU6IChfSiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfSi50aXRsZSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRvLWRvLWNoaWxkcmVuXCJcbiAgICAgIH0sIGNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGNhc2UgXCJ0cmFuc2NsdXNpb25fY29udGFpbmVyXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tc3luYy1ibG9ja1wiLCBibG9ja0lkKVxuICAgICAgfSwgY2hpbGRyZW4pO1xuICAgIGNhc2UgXCJ0cmFuc2NsdXNpb25fcmVmZXJlbmNlXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChTeW5jUG9pbnRlckJsb2NrLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgIGJsb2NrLFxuICAgICAgICBsZXZlbDogbGV2ZWwgKyAxXG4gICAgICB9LCBwcm9wcykpO1xuICAgIGNhc2UgXCJhbGlhc1wiOiB7XG4gICAgICBjb25zdCBibG9ja1BvaW50ZXJJZCA9IChfTCA9IChfSyA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfSy5hbGlhc19wb2ludGVyKSA9PSBudWxsID8gdm9pZCAwIDogX0wuaWQ7XG4gICAgICBjb25zdCBsaW5rZWRCbG9jayA9IChfTSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja1BvaW50ZXJJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfTS52YWx1ZTtcbiAgICAgIGlmICghbGlua2VkQmxvY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1wiYWxpYXNcIiBtaXNzaW5nIGJsb2NrJywgYmxvY2tQb2ludGVySWQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1wYWdlLWxpbmtcIiwgYmxvY2tQb2ludGVySWQpLFxuICAgICAgICBocmVmOiBtYXBQYWdlVXJsKGJsb2NrUG9pbnRlcklkKVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgYmxvY2s6IGxpbmtlZEJsb2NrXG4gICAgICB9KSk7XG4gICAgfVxuICAgIGNhc2UgXCJ0YWJsZVwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tc2ltcGxlLXRhYmxlXCIsIGJsb2NrSWQpXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIiwgbnVsbCwgY2hpbGRyZW4pKTtcbiAgICBjYXNlIFwidGFibGVfcm93XCI6IHtcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSAoX04gPSByZWNvcmRNYXAuYmxvY2tbYmxvY2sucGFyZW50X2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9OLnZhbHVlO1xuICAgICAgY29uc3Qgb3JkZXIgPSAoX08gPSB0YWJsZUJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9PLnRhYmxlX2Jsb2NrX2NvbHVtbl9vcmRlcjtcbiAgICAgIGNvbnN0IGZvcm1hdE1hcCA9IChfUCA9IHRhYmxlQmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX1AudGFibGVfYmxvY2tfY29sdW1uX2Zvcm1hdDtcbiAgICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IChfUSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9RLmJsb2NrX2NvbG9yO1xuICAgICAgaWYgKCF0YWJsZUJsb2NrIHx8ICFvcmRlcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgIFwibm90aW9uLXNpbXBsZS10YWJsZS1yb3dcIixcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgJiYgYG5vdGlvbi0ke2JhY2tncm91bmRDb2xvcn1gLFxuICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgKVxuICAgICAgfSwgb3JkZXIubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgdmFyIF9hMiwgX2IyLCBfYzI7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gKF9hMiA9IGZvcm1hdE1hcCA9PSBudWxsID8gdm9pZCAwIDogZm9ybWF0TWFwW2NvbHVtbl0pID09IG51bGwgPyB2b2lkIDAgOiBfYTIuY29sb3I7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAgICAgIGtleTogY29sdW1uLFxuICAgICAgICAgIGNsYXNzTmFtZTogY29sb3IgPyBgbm90aW9uLSR7Y29sb3J9YCA6IFwiXCIsXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIHdpZHRoOiAoKF9iMiA9IGZvcm1hdE1hcCA9PSBudWxsID8gdm9pZCAwIDogZm9ybWF0TWFwW2NvbHVtbl0pID09IG51bGwgPyB2b2lkIDAgOiBfYjIud2lkdGgpIHx8IDEyMFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zaW1wbGUtdGFibGUtY2VsbFwiXG4gICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI4LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgIHZhbHVlOiAoKF9jMiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYzJbY29sdW1uXSkgfHwgW1tcIlxcdTMxNjRcIl1dLFxuICAgICAgICAgIGJsb2NrXG4gICAgICAgIH0pKSk7XG4gICAgICB9KSk7XG4gICAgfVxuICAgIGNhc2UgXCJleHRlcm5hbF9vYmplY3RfaW5zdGFuY2VcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KEVPSSwge1xuICAgICAgICBibG9jayxcbiAgICAgICAgY2xhc3NOYW1lOiBibG9ja0lkXG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJVbnN1cHBvcnRlZCB0eXBlIFwiICsgYmxvY2sudHlwZSxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShibG9jaywgbnVsbCwgMilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gc3JjL3JlbmRlcmVyLnRzeFxudmFyIE5vdGlvblJlbmRlcmVyID0gKF9hKSA9PiB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgY29tcG9uZW50cyxcbiAgICByZWNvcmRNYXAsXG4gICAgbWFwUGFnZVVybCxcbiAgICBtYXBJbWFnZVVybCxcbiAgICBzZWFyY2hOb3Rpb24sXG4gICAgaXNTaG93aW5nU2VhcmNoLFxuICAgIG9uSGlkZVNlYXJjaCxcbiAgICBmdWxsUGFnZSxcbiAgICByb290UGFnZUlkLFxuICAgIHJvb3REb21haW4sXG4gICAgZGFya01vZGUsXG4gICAgcHJldmlld0ltYWdlcyxcbiAgICBmb3JjZUN1c3RvbUltYWdlcyxcbiAgICBzaG93Q29sbGVjdGlvblZpZXdEcm9wZG93bixcbiAgICBsaW5rVGFibGVUaXRsZVByb3BlcnRpZXMsXG4gICAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHksXG4gICAgaXNJbWFnZVpvb21hYmxlID0gdHJ1ZSxcbiAgICBzaG93VGFibGVPZkNvbnRlbnRzLFxuICAgIG1pblRhYmxlT2ZDb250ZW50c0l0ZW1zLFxuICAgIGRlZmF1bHRQYWdlSWNvbixcbiAgICBkZWZhdWx0UGFnZUNvdmVyLFxuICAgIGRlZmF1bHRQYWdlQ292ZXJQb3NpdGlvblxuICB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImNvbXBvbmVudHNcIixcbiAgICBcInJlY29yZE1hcFwiLFxuICAgIFwibWFwUGFnZVVybFwiLFxuICAgIFwibWFwSW1hZ2VVcmxcIixcbiAgICBcInNlYXJjaE5vdGlvblwiLFxuICAgIFwiaXNTaG93aW5nU2VhcmNoXCIsXG4gICAgXCJvbkhpZGVTZWFyY2hcIixcbiAgICBcImZ1bGxQYWdlXCIsXG4gICAgXCJyb290UGFnZUlkXCIsXG4gICAgXCJyb290RG9tYWluXCIsXG4gICAgXCJkYXJrTW9kZVwiLFxuICAgIFwicHJldmlld0ltYWdlc1wiLFxuICAgIFwiZm9yY2VDdXN0b21JbWFnZXNcIixcbiAgICBcInNob3dDb2xsZWN0aW9uVmlld0Ryb3Bkb3duXCIsXG4gICAgXCJsaW5rVGFibGVUaXRsZVByb3BlcnRpZXNcIixcbiAgICBcImlzTGlua0NvbGxlY3Rpb25Ub1VybFByb3BlcnR5XCIsXG4gICAgXCJpc0ltYWdlWm9vbWFibGVcIixcbiAgICBcInNob3dUYWJsZU9mQ29udGVudHNcIixcbiAgICBcIm1pblRhYmxlT2ZDb250ZW50c0l0ZW1zXCIsXG4gICAgXCJkZWZhdWx0UGFnZUljb25cIixcbiAgICBcImRlZmF1bHRQYWdlQ292ZXJcIixcbiAgICBcImRlZmF1bHRQYWdlQ292ZXJQb3NpdGlvblwiXG4gIF0pO1xuICBjb25zdCB6b29tID0gUmVhY3QyOS51c2VNZW1vKFxuICAgICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgbWVkaXVtWm9vbSh7XG4gICAgICBiYWNrZ3JvdW5kOiBcInJnYmEoMCwgMCwgMCwgMC44KVwiLFxuICAgICAgbWluWm9vbVNjYWxlOiAyLFxuICAgICAgbWFyZ2luOiBnZXRNZWRpdW1ab29tTWFyZ2luKClcbiAgICB9KSxcbiAgICBbXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjkuY3JlYXRlRWxlbWVudChOb3Rpb25Db250ZXh0UHJvdmlkZXIsIHtcbiAgICBjb21wb25lbnRzLFxuICAgIHJlY29yZE1hcCxcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHNlYXJjaE5vdGlvbixcbiAgICBpc1Nob3dpbmdTZWFyY2gsXG4gICAgb25IaWRlU2VhcmNoLFxuICAgIGZ1bGxQYWdlLFxuICAgIHJvb3RQYWdlSWQsXG4gICAgcm9vdERvbWFpbixcbiAgICBkYXJrTW9kZSxcbiAgICBwcmV2aWV3SW1hZ2VzLFxuICAgIGZvcmNlQ3VzdG9tSW1hZ2VzLFxuICAgIHNob3dDb2xsZWN0aW9uVmlld0Ryb3Bkb3duLFxuICAgIGxpbmtUYWJsZVRpdGxlUHJvcGVydGllcyxcbiAgICBpc0xpbmtDb2xsZWN0aW9uVG9VcmxQcm9wZXJ0eSxcbiAgICBzaG93VGFibGVPZkNvbnRlbnRzLFxuICAgIG1pblRhYmxlT2ZDb250ZW50c0l0ZW1zLFxuICAgIGRlZmF1bHRQYWdlSWNvbixcbiAgICBkZWZhdWx0UGFnZUNvdmVyLFxuICAgIGRlZmF1bHRQYWdlQ292ZXJQb3NpdGlvbixcbiAgICB6b29tOiBpc0ltYWdlWm9vbWFibGUgPyB6b29tIDogbnVsbFxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOS5jcmVhdGVFbGVtZW50KE5vdGlvbkJsb2NrUmVuZGVyZXIsIF9fc3ByZWFkVmFsdWVzKHt9LCByZXN0KSkpO1xufTtcbnZhciBOb3Rpb25CbG9ja1JlbmRlcmVyID0gKF9hKSA9PiB7XG4gIHZhciBfYiA9IF9hLCB7IGxldmVsID0gMCwgYmxvY2tJZCB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJsZXZlbFwiLCBcImJsb2NrSWRcIl0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGlkID0gYmxvY2tJZCB8fCBPYmplY3Qua2V5cyhyZWNvcmRNYXAuYmxvY2spWzBdO1xuICBjb25zdCBibG9jayA9IChfYTIgPSByZWNvcmRNYXAuYmxvY2tbaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnZhbHVlO1xuICBpZiAoIWJsb2NrKSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIm1pc3NpbmcgYmxvY2tcIiwgYmxvY2tJZCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOS5jcmVhdGVFbGVtZW50KEJsb2NrLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAga2V5OiBpZCxcbiAgICBsZXZlbCxcbiAgICBibG9ja1xuICB9LCBwcm9wcyksIChfYjIgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suY29udGVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5tYXAoKGNvbnRlbnRCbG9ja0lkKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOS5jcmVhdGVFbGVtZW50KE5vdGlvbkJsb2NrUmVuZGVyZXIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBrZXk6IGNvbnRlbnRCbG9ja0lkLFxuICAgIGJsb2NrSWQ6IGNvbnRlbnRCbG9ja0lkLFxuICAgIGxldmVsOiBsZXZlbCArIDFcbiAgfSwgcHJvcHMpKSkpO1xufTtcbmZ1bmN0aW9uIGdldE1lZGl1bVpvb21NYXJnaW4oKSB7XG4gIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGlmICh3aWR0aCA8IDUwMCkge1xuICAgIHJldHVybiA4O1xuICB9IGVsc2UgaWYgKHdpZHRoIDwgODAwKSB7XG4gICAgcmV0dXJuIDIwO1xuICB9IGVsc2UgaWYgKHdpZHRoIDwgMTI4MCkge1xuICAgIHJldHVybiAzMDtcbiAgfSBlbHNlIGlmICh3aWR0aCA8IDE2MDApIHtcbiAgICByZXR1cm4gNDA7XG4gIH0gZWxzZSBpZiAod2lkdGggPCAxOTIwKSB7XG4gICAgcmV0dXJuIDQ4O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiA3MjtcbiAgfVxufVxuZXhwb3J0IHtcbiAgQnJlYWRjcnVtYnMsXG4gIEhlYWRlcixcbiAgTm90aW9uQ29udGV4dENvbnN1bWVyLFxuICBOb3Rpb25Db250ZXh0UHJvdmlkZXIsXG4gIE5vdGlvblJlbmRlcmVyLFxuICBQYWdlSWNvbixcbiAgUGFnZUljb25JbXBsLFxuICBTZWFyY2gsXG4gIFRleHQsXG4gIGNzLFxuICBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIGRlZmF1bHRNYXBQYWdlVXJsLFxuICBkdW1teUxpbmssXG4gIGZvcm1hdERhdGUsXG4gIGZvcm1hdE5vdGlvbkRhdGVUaW1lLFxuICBnZXRIYXNoRnJhZ21lbnRWYWx1ZSxcbiAgZ2V0TGlzdE51bWJlcixcbiAgZ2V0WW91dHViZUlkLFxuICBpc0Jyb3dzZXIsXG4gIGlzVXJsLFxuICB1c2VOb3Rpb25Db250ZXh0XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/build/third-party/code.js":
/*!***************************************************************!*\
  !*** ./node_modules/react-notion-x/build/third-party/code.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Code: () => (/* binding */ Code)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/notion-utils/build/index.js\");\n/* harmony import */ var prismjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prismjs */ \"(ssr)/./node_modules/prismjs/prism.js\");\n/* harmony import */ var prismjs_components_prism_clike_min_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prismjs/components/prism-clike.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-clike.min.js\");\n/* harmony import */ var prismjs_components_prism_css_extras_min_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prismjs/components/prism-css-extras.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-css-extras.min.js\");\n/* harmony import */ var prismjs_components_prism_css_min_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prismjs/components/prism-css.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-css.min.js\");\n/* harmony import */ var prismjs_components_prism_javascript_min_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prismjs/components/prism-javascript.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-javascript.min.js\");\n/* harmony import */ var prismjs_components_prism_js_extras_min_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prismjs/components/prism-js-extras.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-js-extras.min.js\");\n/* harmony import */ var prismjs_components_prism_json_min_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! prismjs/components/prism-json.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-json.min.js\");\n/* harmony import */ var prismjs_components_prism_jsx_min_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prismjs/components/prism-jsx.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-jsx.min.js\");\n/* harmony import */ var prismjs_components_prism_tsx_min_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! prismjs/components/prism-tsx.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-tsx.min.js\");\n/* harmony import */ var prismjs_components_prism_typescript_min_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! prismjs/components/prism-typescript.min.js */ \"(ssr)/./node_modules/prismjs/components/prism-typescript.min.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/is-url-superb/index.js\");\n/* harmony import */ var react_image__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-image */ \"(ssr)/./node_modules/react-image/cjs/index.js\");\n/* harmony import */ var react_lazy_images__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-lazy-images */ \"(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js\");\n/* harmony import */ var react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-hotkeys-hook */ \"(ssr)/./node_modules/react-hotkeys-hook/dist/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-fast-compare */ \"(ssr)/./node_modules/react-fast-compare/index.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/clipboard-copy/index.js\nvar require_clipboard_copy = __commonJS({\n  \"../../node_modules/clipboard-copy/index.js\"(exports, module) {\n    module.exports = clipboardCopy;\n    function makeError() {\n      return new DOMException(\"The request is not allowed\", \"NotAllowedError\");\n    }\n    function copyClipboardApi(text) {\n      return __async(this, null, function* () {\n        if (!navigator.clipboard) {\n          throw makeError();\n        }\n        return navigator.clipboard.writeText(text);\n      });\n    }\n    function copyExecCommand(text) {\n      return __async(this, null, function* () {\n        const span = document.createElement(\"span\");\n        span.textContent = text;\n        span.style.whiteSpace = \"pre\";\n        span.style.webkitUserSelect = \"auto\";\n        span.style.userSelect = \"all\";\n        document.body.appendChild(span);\n        const selection = window.getSelection();\n        const range = window.document.createRange();\n        selection.removeAllRanges();\n        range.selectNode(span);\n        selection.addRange(range);\n        let success = false;\n        try {\n          success = window.document.execCommand(\"copy\");\n        } finally {\n          selection.removeAllRanges();\n          window.document.body.removeChild(span);\n        }\n        if (!success)\n          throw makeError();\n      });\n    }\n    function clipboardCopy(text) {\n      return __async(this, null, function* () {\n        try {\n          yield copyClipboardApi(text);\n        } catch (err) {\n          try {\n            yield copyExecCommand(text);\n          } catch (err2) {\n            throw err2 || err || makeError();\n          }\n        }\n      });\n    }\n  }\n});\n\n// ../../node_modules/lodash.throttle/index.js\nvar require_lodash = __commonJS({\n  \"../../node_modules/lodash.throttle/index.js\"(exports, module) {\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var NAN = 0 / 0;\n    var symbolTag = \"[object Symbol]\";\n    var reTrim = /^\\s+|\\s+$/g;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var objectProto = Object.prototype;\n    var objectToString = objectProto.toString;\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    var now = function() {\n      return root.Date.now();\n    };\n    function debounce(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, result2 = wait - timeSinceLastCall;\n        return maxing ? nativeMin(result2, maxWait - timeSinceLastInvoke) : result2;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    function throttle2(func, wait, options) {\n      var leading = true, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = \"leading\" in options ? !!options.leading : leading;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        \"leading\": leading,\n        \"maxWait\": wait,\n        \"trailing\": trailing\n      });\n    }\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == \"object\" || type == \"function\");\n    }\n    function isObjectLike(value) {\n      return !!value && typeof value == \"object\";\n    }\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && objectToString.call(value) == symbolTag;\n    }\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, \"\");\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module.exports = throttle2;\n  }\n});\n\n// src/third-party/code.tsx\nvar import_clipboard_copy = __toESM(require_clipboard_copy(), 1);\n\n\n\n\n\n\n\n\n\n\n\n\n\n// src/components/text.tsx\n\n\n\n// src/context.tsx\n\n\n// src/components/asset-wrapper.tsx\n\n\n\n// src/utils.ts\n\n\n// src/map-image-url.ts\nvar defaultMapImageUrl = (url, block) => {\n  if (!url) {\n    return null;\n  }\n  if (url.startsWith(\"data:\")) {\n    return url;\n  }\n  if (url.startsWith(\"https://images.unsplash.com\")) {\n    return url;\n  }\n  try {\n    const u = new URL(url);\n    if (u.pathname.startsWith(\"/secure.notion-static.com\") && u.hostname.endsWith(\".amazonaws.com\")) {\n      if (u.searchParams.has(\"X-Amz-Credential\") && u.searchParams.has(\"X-Amz-Signature\") && u.searchParams.has(\"X-Amz-Algorithm\")) {\n        return url;\n      }\n    }\n  } catch (e) {\n  }\n  if (url.startsWith(\"/images\")) {\n    url = `https://www.notion.so${url}`;\n  }\n  url = `https://www.notion.so${url.startsWith(\"/image\") ? url : `/image/${encodeURIComponent(url)}`}`;\n  const notionImageUrlV2 = new URL(url);\n  let table = block.parent_table === \"space\" ? \"block\" : block.parent_table;\n  if (table === \"collection\" || table === \"team\") {\n    table = \"block\";\n  }\n  notionImageUrlV2.searchParams.set(\"table\", table);\n  notionImageUrlV2.searchParams.set(\"id\", block.id);\n  notionImageUrlV2.searchParams.set(\"cache\", \"v2\");\n  url = notionImageUrlV2.toString();\n  return url;\n};\n\n// src/map-page-url.ts\nvar defaultMapPageUrl = (rootPageId) => (pageId) => {\n  pageId = (pageId || \"\").replace(/-/g, \"\");\n  if (rootPageId && pageId === rootPageId) {\n    return \"/\";\n  } else {\n    return `/${pageId}`;\n  }\n};\n\n// src/utils.ts\nvar cs = (...classes) => classes.filter((a) => !!a).join(\" \");\nvar getHashFragmentValue = (url) => {\n  return url.includes(\"#\") ? url.replace(/^.+(#.+)$/, \"$1\") : \"\";\n};\nvar isBrowser = typeof window !== \"undefined\";\nvar youtubeDomains = /* @__PURE__ */ new Set([\n  \"youtu.be\",\n  \"youtube.com\",\n  \"www.youtube.com\",\n  \"youtube-nocookie.com\",\n  \"www.youtube-nocookie.com\"\n]);\nvar getYoutubeId = (url) => {\n  try {\n    const { hostname } = new URL(url);\n    if (!youtubeDomains.has(hostname)) {\n      return null;\n    }\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/i;\n    const match = url.match(regExp);\n    if (match && match[2].length == 11) {\n      return match[2];\n    }\n  } catch (e) {\n  }\n  return null;\n};\n\n// src/components/eoi.tsx\n\n\n// src/icons/type-github.tsx\n\nfunction SvgTypeGitHub(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 260 260\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n    fill: \"#161614\"\n  })));\n}\nvar type_github_default = SvgTypeGitHub;\n\n// src/components/eoi.tsx\nvar EOI = ({ block, inline, className }) => {\n  var _a, _b, _c;\n  const { components } = useNotionContext();\n  const { original_url, attributes, domain } = (block == null ? void 0 : block.format) || {};\n  if (!original_url || !attributes) {\n    return null;\n  }\n  const title = (_a = attributes.find((attr) => attr.id === \"title\")) == null ? void 0 : _a.values[0];\n  let owner = (_b = attributes.find((attr) => attr.id === \"owner\")) == null ? void 0 : _b.values[0];\n  const lastUpdatedAt = (_c = attributes.find((attr) => attr.id === \"updated_at\")) == null ? void 0 : _c.values[0];\n  const lastUpdated = lastUpdatedAt ? (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.formatNotionDateTime)(lastUpdatedAt) : null;\n  let externalImage;\n  switch (domain) {\n    case \"github.com\":\n      externalImage = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(type_github_default, null);\n      if (owner) {\n        const parts = owner.split(\"/\");\n        owner = parts[parts.length - 1];\n      }\n      break;\n    default:\n      if (true) {\n        console.log(\n          `Unsupported external_object_instance domain \"${domain}\"`,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: original_url,\n    className: cs(\n      \"notion-external\",\n      inline ? \"notion-external-mention\" : \"notion-external-block notion-row\",\n      className\n    )\n  }, externalImage && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-image\"\n  }, externalImage), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-description\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-title\"\n  }, title), (owner || lastUpdated) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-subtitle\"\n  }, owner && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, owner), owner && lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \" \\u2022 \"), lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \"Updated \", lastUpdated))));\n};\n\n// src/components/graceful-image.tsx\n\n\nvar GracefulImage = (props) => {\n  if (isBrowser) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_image__WEBPACK_IMPORTED_MODULE_12__.Img, __spreadValues({}, props));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({}, props));\n  }\n};\n\n// src/components/lazy-image.tsx\n\n\n\nvar LazyImage = (_a) => {\n  var _b = _a, {\n    src,\n    alt,\n    className,\n    style,\n    zoomable = false,\n    priority = false,\n    height\n  } = _b, rest = __objRest(_b, [\n    \"src\",\n    \"alt\",\n    \"className\",\n    \"style\",\n    \"zoomable\",\n    \"priority\",\n    \"height\"\n  ]);\n  var _a2, _b2, _c;\n  const { recordMap, zoom, previewImages, forceCustomImages, components } = useNotionContext();\n  const zoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(zoom ? zoom.clone() : null);\n  const previewImage = previewImages ? (_c = (_a2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _a2[src]) != null ? _c : (_b2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _b2[(0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.normalizeUrl)(src)] : null;\n  const onLoad = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (zoomable && (e.target.src || e.target.srcset)) {\n        if (zoomRef.current) {\n          ;\n          zoomRef.current.attach(e.target);\n        }\n      }\n    },\n    [zoomRef, zoomable]\n  );\n  const attachZoom = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (image) => {\n      if (zoomRef.current && image) {\n        ;\n        zoomRef.current.attach(image);\n      }\n    },\n    [zoomRef]\n  );\n  const attachZoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => zoomable ? attachZoom : void 0,\n    [zoomable, attachZoom]\n  );\n  if (previewImage) {\n    const aspectRatio = previewImage.originalHeight / previewImage.originalWidth;\n    if (components.Image) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        style,\n        className,\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        blurDataURL: previewImage.dataURIBase64,\n        placeholder: \"blur\",\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_lazy_images__WEBPACK_IMPORTED_MODULE_13__.LazyImageFull, __spreadProps(__spreadValues({\n      src\n    }, rest), {\n      experimentalDecode: true\n    }), ({ imageState, ref }) => {\n      const isLoaded = imageState === react_lazy_images__WEBPACK_IMPORTED_MODULE_13__.ImageState.LoadSuccess;\n      const wrapperStyle = {\n        width: \"100%\"\n      };\n      const imgStyle = {};\n      if (height) {\n        wrapperStyle.height = height;\n      } else {\n        imgStyle.position = \"absolute\";\n        wrapperStyle.paddingBottom = `${aspectRatio * 100}%`;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"lazy-image-wrapper\",\n          isLoaded && \"lazy-image-loaded\",\n          className\n        ),\n        style: wrapperStyle\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-preview\",\n        src: previewImage.dataURIBase64,\n        alt,\n        ref,\n        style,\n        decoding: \"async\"\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-real\",\n        src,\n        alt,\n        ref: attachZoomRef,\n        style: __spreadValues(__spreadValues({}, style), imgStyle),\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        decoding: \"async\",\n        loading: \"lazy\"\n      }));\n    });\n  } else {\n    if (components.Image && forceCustomImages) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        className,\n        style,\n        width: null,\n        height: height || null,\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({\n      className,\n      style,\n      src,\n      alt,\n      ref: attachZoomRef,\n      loading: \"lazy\",\n      decoding: \"async\"\n    }, rest));\n  }\n};\n\n// src/components/page-icon.tsx\n\n\n\n// src/icons/default-page-icon.tsx\n\nvar DefaultPageIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 30 30\",\n    width: \"16\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\"\n  }));\n};\n\n// src/components/page-icon.tsx\nvar isIconBlock = (value) => {\n  return value.type === \"page\" || value.type === \"callout\" || value.type === \"collection_view\" || value.type === \"collection_view_page\";\n};\nvar PageIconImpl = ({\n  block,\n  className,\n  inline = true,\n  hideDefaultIcon = false,\n  defaultIcon\n}) => {\n  var _a;\n  const { mapImageUrl, recordMap, darkMode } = useNotionContext();\n  let isImage = false;\n  let content = null;\n  if (isIconBlock(block)) {\n    const icon = ((_a = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockIcon)(block, recordMap)) == null ? void 0 : _a.trim()) || defaultIcon;\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockTitle)(block, recordMap);\n    if (icon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(icon)) {\n      const url = mapImageUrl(icon, block);\n      isImage = true;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (icon && icon.startsWith(\"/icons/\")) {\n      const url = \"https://www.notion.so\" + icon + \"?mode=\" + (darkMode ? \"dark\" : \"light\");\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (!icon) {\n      if (!hideDefaultIcon) {\n        isImage = true;\n        content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultPageIcon, {\n          className: cs(className, \"notion-page-icon\"),\n          alt: title ? title : \"page icon\"\n        });\n      }\n    } else {\n      isImage = false;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: cs(className, \"notion-page-icon\"),\n        role: \"img\",\n        \"aria-label\": icon\n      }, icon);\n    }\n  }\n  if (!content) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      inline ? \"notion-page-icon-inline\" : \"notion-page-icon-hero\",\n      isImage ? \"notion-page-icon-image\" : \"notion-page-icon-span\"\n    )\n  }, content);\n};\nvar PageIcon = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageIconImpl);\n\n// src/components/page-title.tsx\n\n\nvar PageTitleImpl = (_a) => {\n  var _b = _a, { block, className, defaultIcon } = _b, rest = __objRest(_b, [\"block\", \"className\", \"defaultIcon\"]);\n  var _a2, _b2;\n  const { recordMap } = useNotionContext();\n  if (!block)\n    return null;\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockTitle)(block, recordMap);\n    if (!title) {\n      return null;\n    }\n    const titleDecoration = [[title]];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n      className: cs(\"notion-page-title\", className)\n    }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      block,\n      defaultIcon,\n      className: \"notion-page-title-icon\"\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-page-title-text\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n      value: titleDecoration,\n      block\n    })));\n  }\n  if (!((_a2 = block.properties) == null ? void 0 : _a2.title)) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n    className: cs(\"notion-page-title\", className)\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n    block,\n    defaultIcon,\n    className: \"notion-page-title-icon\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-page-title-text\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: (_b2 = block.properties) == null ? void 0 : _b2.title,\n    block\n  })));\n};\nvar PageTitle = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageTitleImpl);\n\n// src/components/header.tsx\n\n\n\n\n// src/icons/search-icon.tsx\n\nvar SearchIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    className: cs(\"notion-icon\", className),\n    viewBox: \"0 0 17 17\"\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M6.78027 13.6729C8.24805 13.6729 9.60156 13.1982 10.709 12.4072L14.875 16.5732C15.0684 16.7666 15.3232 16.8633 15.5957 16.8633C16.167 16.8633 16.5713 16.4238 16.5713 15.8613C16.5713 15.5977 16.4834 15.3516 16.29 15.1582L12.1504 11.0098C13.0205 9.86719 13.5391 8.45215 13.5391 6.91406C13.5391 3.19629 10.498 0.155273 6.78027 0.155273C3.0625 0.155273 0.0214844 3.19629 0.0214844 6.91406C0.0214844 10.6318 3.0625 13.6729 6.78027 13.6729ZM6.78027 12.2139C3.87988 12.2139 1.48047 9.81445 1.48047 6.91406C1.48047 4.01367 3.87988 1.61426 6.78027 1.61426C9.68066 1.61426 12.0801 4.01367 12.0801 6.91406C12.0801 9.81445 9.68066 12.2139 6.78027 12.2139Z\"\n  }));\n};\n\n// src/components/search-dialog.tsx\nvar import_lodash = __toESM(require_lodash(), 1);\n\n\n\n// src/icons/clear-icon.tsx\n\nvar ClearIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 30 30\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M15,0C6.716,0,0,6.716,0,15s6.716,15,15,15s15-6.716,15-15S23.284,0,15,0z M22,20.6L20.6,22L15,16.4L9.4,22L8,20.6l5.6-5.6 L8,9.4L9.4,8l5.6,5.6L20.6,8L22,9.4L16.4,15L22,20.6z\"\n  }));\n};\n\n// src/icons/loading-icon.tsx\n\nvar LoadingIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 24 24\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"defs\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"linearGradient\", {\n    x1: \"28.1542969%\",\n    y1: \"63.7402344%\",\n    x2: \"74.6289062%\",\n    y2: \"17.7832031%\",\n    id: \"linearGradient-1\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 1)\",\n    offset: \"0%\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 0)\",\n    stopOpacity: \"0\",\n    offset: \"100%\"\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(-236.000000, -286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(238.000000, 286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"circle\", {\n    id: \"Oval-2\",\n    stroke: \"url(#linearGradient-1)\",\n    strokeWidth: \"4\",\n    cx: \"10\",\n    cy: \"12\",\n    r: \"10\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M10,2 C4.4771525,2 0,6.4771525 0,12\",\n    id: \"Oval-2\",\n    stroke: \"rgba(164, 164, 164, 1)\",\n    strokeWidth: \"4\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", {\n    id: \"Rectangle-1\",\n    fill: \"rgba(164, 164, 164, 1)\",\n    x: \"8\",\n    y: \"0\",\n    width: \"4\",\n    height: \"4\",\n    rx: \"8\"\n  })))));\n};\n\n// src/components/search-dialog.tsx\nvar SearchDialog = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      query: \"\",\n      searchResult: null,\n      searchError: null\n    };\n    this._onAfterOpen = () => {\n      if (this._inputRef.current) {\n        this._inputRef.current.focus();\n      }\n    };\n    this._onChangeQuery = (e) => {\n      const query = e.target.value;\n      this.setState({ query });\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      } else {\n        this._search();\n      }\n    };\n    this._onClearQuery = () => {\n      this._onChangeQuery({ target: { value: \"\" } });\n    };\n    this._warmupSearch = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      yield searchNotion({\n        query: \"\",\n        ancestorId: rootBlockId\n      });\n    });\n    this._searchImpl = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      const { query } = this.state;\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      }\n      this.setState({ isLoading: true });\n      const result = yield searchNotion({\n        query,\n        ancestorId: rootBlockId\n      });\n      console.log(\"search\", query, result);\n      let searchResult = null;\n      let searchError = null;\n      if (result.error || result.errorId) {\n        searchError = result;\n      } else {\n        searchResult = __spreadValues({}, result);\n        const results = searchResult.results.map((result2) => {\n          var _a, _b;\n          const block = (_a = searchResult.recordMap.block[result2.id]) == null ? void 0 : _a.value;\n          if (!block)\n            return;\n          const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockTitle)(block, searchResult.recordMap);\n          if (!title) {\n            return;\n          }\n          result2.title = title;\n          result2.block = block;\n          result2.recordMap = searchResult.recordMap;\n          result2.page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockParentPage)(block, searchResult.recordMap, {\n            inclusive: true\n          }) || block;\n          if (!result2.page.id) {\n            return;\n          }\n          if ((_b = result2.highlight) == null ? void 0 : _b.text) {\n            result2.highlight.html = result2.highlight.text.replace(/<gzkNfoUU>/gi, \"<b>\").replace(/<\\/gzkNfoUU>/gi, \"</b>\");\n          }\n          return result2;\n        }).filter(Boolean);\n        const searchResultsMap = results.reduce(\n          (map, result2) => __spreadProps(__spreadValues({}, map), {\n            [result2.page.id]: result2\n          }),\n          {}\n        );\n        searchResult.results = Object.values(searchResultsMap);\n      }\n      if (this.state.query === query) {\n        this.setState({ isLoading: false, searchResult, searchError });\n      }\n    });\n    this._inputRef = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  }\n  componentDidMount() {\n    this._search = (0, import_lodash.default)(this._searchImpl.bind(this), 1e3);\n    this._warmupSearch();\n  }\n  render() {\n    const { isOpen, onClose } = this.props;\n    const { isLoading, query, searchResult, searchError } = this.state;\n    const hasQuery = !!query.trim();\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextConsumer, null, (ctx2) => {\n      const { components, defaultPageIcon, mapPageUrl } = ctx2;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Modal, {\n        isOpen,\n        contentLabel: \"Search\",\n        className: \"notion-search\",\n        overlayClassName: \"notion-search-overlay\",\n        onRequestClose: onClose,\n        onAfterOpen: this._onAfterOpen\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"quickFindMenu\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"searchBar\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"inlineIcon\"\n      }, isLoading ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingIcon, {\n        className: \"loadingIcon\"\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n        className: \"searchInput\",\n        placeholder: \"Search\",\n        value: query,\n        ref: this._inputRef,\n        onChange: this._onChangeQuery\n      }), query && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        role: \"button\",\n        className: \"clearButton\",\n        onClick: this._onClearQuery\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClearIcon, {\n        className: \"clearIcon\"\n      }))), hasQuery && searchResult && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, searchResult.results.length ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadProps(__spreadValues({}, ctx2), {\n        recordMap: searchResult.recordMap\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"resultsPane\"\n      }, searchResult.results.map((result) => {\n        var _a;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          key: result.id,\n          className: cs(\"result\", \"notion-page-link\"),\n          href: mapPageUrl(\n            result.page.id,\n            searchResult.recordMap\n          )\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block: result.page,\n          defaultIcon: defaultPageIcon\n        }), ((_a = result.highlight) == null ? void 0 : _a.html) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-search-result-highlight\",\n          dangerouslySetInnerHTML: {\n            __html: result.highlight.html\n          }\n        }));\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"footer\", {\n        className: \"resultsFooter\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"resultsCount\"\n      }, searchResult.total), searchResult.total === 1 ? \" result\" : \" results\"))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"No results\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsDetail\"\n      }, \"Try different search terms\"))), hasQuery && !searchResult && searchError && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"Search error\"))));\n    });\n  }\n};\n\n// src/components/header.tsx\nvar Header = ({ block }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"header\", {\n    className: \"notion-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-nav-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumbs, {\n    block\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Search, {\n    block\n  })));\n};\nvar Breadcrumbs = ({ block, rootOnly = false }) => {\n  const { recordMap, mapPageUrl, components } = useNotionContext();\n  const breadcrumbs = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const breadcrumbs2 = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getPageBreadcrumbs)(recordMap, block.id);\n    if (rootOnly) {\n      return [breadcrumbs2[0]].filter(Boolean);\n    }\n    return breadcrumbs2;\n  }, [recordMap, block.id, rootOnly]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"breadcrumbs\",\n    key: \"breadcrumbs\"\n  }, breadcrumbs.map((breadcrumb, index) => {\n    if (!breadcrumb) {\n      return null;\n    }\n    const pageLinkProps = {};\n    const componentMap = {\n      pageLink: components.PageLink\n    };\n    if (breadcrumb.active) {\n      componentMap.pageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, props));\n    } else {\n      pageLinkProps.href = mapPageUrl(breadcrumb.pageId);\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: breadcrumb.pageId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(componentMap.pageLink, __spreadValues({\n      className: cs(\"breadcrumb\", breadcrumb.active && \"active\")\n    }, pageLinkProps), breadcrumb.icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      className: \"icon\",\n      block: breadcrumb.block\n    }), breadcrumb.title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"title\"\n    }, breadcrumb.title)), index < breadcrumbs.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"spacer\"\n    }, \"/\"));\n  }));\n};\nvar Search = ({ block, search, title = \"Search\" }) => {\n  const { searchNotion, rootPageId, isShowingSearch, onHideSearch } = useNotionContext();\n  const onSearchNotion = search || searchNotion;\n  const [isSearchOpen, setIsSearchOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(isShowingSearch);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsSearchOpen(isShowingSearch);\n  }, [isShowingSearch]);\n  const onOpenSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(true);\n  }, []);\n  const onCloseSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(false);\n    if (onHideSearch) {\n      onHideSearch();\n    }\n  }, [onHideSearch]);\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_15__.useHotkeys)(\"cmd+p\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_15__.useHotkeys)(\"cmd+k\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  const hasSearch = !!onSearchNotion;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    role: \"button\",\n    className: cs(\"breadcrumb\", \"button\", \"notion-search-button\"),\n    onClick: onOpenSearch\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, {\n    className: \"searchIcon\"\n  }), title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"title\"\n  }, title)), isSearchOpen && hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchDialog, {\n    isOpen: isSearchOpen,\n    rootBlockId: rootPageId || (block == null ? void 0 : block.id),\n    onClose: onCloseSearch,\n    searchNotion: onSearchNotion\n  }));\n};\n\n// src/components/asset.tsx\n\n\n\n// src/components/lite-youtube-embed.tsx\n\nvar qs = (params) => {\n  return Object.keys(params).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n  ).join(\"&\");\n};\nvar LiteYouTubeEmbed = ({\n  id,\n  defaultPlay = false,\n  mute = false,\n  lazyImage = false,\n  iframeTitle = \"YouTube video\",\n  alt = \"Video preview\",\n  params = {},\n  adLinksPreconnect = true,\n  style,\n  className\n}) => {\n  const muteParam = mute || defaultPlay ? \"1\" : \"0\";\n  const queryString = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => qs(__spreadValues({ autoplay: \"1\", mute: muteParam }, params)),\n    [muteParam, params]\n  );\n  const resolution = \"hqdefault\";\n  const posterUrl = `https://i.ytimg.com/vi/${id}/${resolution}.jpg`;\n  const ytUrl = \"https://www.youtube-nocookie.com\";\n  const iframeSrc = `${ytUrl}/embed/${id}?${queryString}`;\n  const [isPreconnected, setIsPreconnected] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [iframeInitialized, setIframeInitialized] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultPlay);\n  const [isIframeLoaded, setIsIframeLoaded] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const warmConnections = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (isPreconnected)\n      return;\n    setIsPreconnected(true);\n  }, [isPreconnected]);\n  const onLoadIframe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (iframeInitialized)\n      return;\n    setIframeInitialized(true);\n  }, [iframeInitialized]);\n  const onIframeLoaded = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsIframeLoaded(true);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preload\",\n    href: posterUrl,\n    as: \"image\"\n  }), isPreconnected && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: ytUrl\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://www.google.com\"\n  })), isPreconnected && adLinksPreconnect && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://static.doubleclick.net\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://googleads.g.doubleclick.net\"\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    onClick: onLoadIframe,\n    onPointerOver: warmConnections,\n    className: cs(\n      \"notion-yt-lite\",\n      isIframeLoaded && \"notion-yt-loaded\",\n      iframeInitialized && \"notion-yt-initialized\",\n      className\n    ),\n    style\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n    src: posterUrl,\n    className: \"notion-yt-thumbnail\",\n    loading: lazyImage ? \"lazy\" : void 0,\n    alt\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-yt-playbtn\"\n  }), iframeInitialized && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n    width: \"560\",\n    height: \"315\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true,\n    title: iframeTitle,\n    src: iframeSrc,\n    onLoad: onIframeLoaded\n  })));\n};\n\n// src/components/asset.tsx\nvar isServer = typeof window === \"undefined\";\nvar supportedAssetTypes = [\n  \"video\",\n  \"image\",\n  \"embed\",\n  \"figma\",\n  \"typeform\",\n  \"excalidraw\",\n  \"maps\",\n  \"tweet\",\n  \"pdf\",\n  \"gist\",\n  \"codepen\",\n  \"drive\"\n];\nvar Asset = ({ block, zoomable = true, children }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  const { recordMap, mapImageUrl, components } = useNotionContext();\n  if (!block || !supportedAssetTypes.includes(block.type)) {\n    return null;\n  }\n  const style = {\n    position: \"relative\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    flexDirection: \"column\"\n  };\n  const assetStyle = {};\n  if (block.format) {\n    const {\n      block_aspect_ratio,\n      block_height,\n      block_width,\n      block_full_width,\n      block_page_width,\n      block_preserve_scale\n    } = block.format;\n    if (block_full_width || block_page_width) {\n      if (block_full_width) {\n        style.width = \"100vw\";\n      } else {\n        style.width = \"100%\";\n      }\n      if (block.type === \"video\") {\n        if (block_height) {\n          style.height = block_height;\n        } else if (block_aspect_ratio) {\n          style.paddingBottom = `${block_aspect_ratio * 100}%`;\n        } else if (block_preserve_scale) {\n          style.objectFit = \"contain\";\n        }\n      } else if (block_aspect_ratio && block.type !== \"image\") {\n        style.paddingBottom = `${block_aspect_ratio * 100}%`;\n      } else if (block_height) {\n        style.height = block_height;\n      } else if (block_preserve_scale) {\n        if (block.type === \"image\") {\n          style.height = \"100%\";\n        } else {\n          style.paddingBottom = \"75%\";\n          style.minHeight = 100;\n        }\n      }\n    } else {\n      switch ((_a = block.format) == null ? void 0 : _a.block_alignment) {\n        case \"center\": {\n          style.alignSelf = \"center\";\n          break;\n        }\n        case \"left\": {\n          style.alignSelf = \"start\";\n          break;\n        }\n        case \"right\": {\n          style.alignSelf = \"end\";\n          break;\n        }\n      }\n      if (block_width) {\n        style.width = block_width;\n      }\n      if (block_preserve_scale && block.type !== \"image\") {\n        style.paddingBottom = \"50%\";\n        style.minHeight = 100;\n      } else {\n        if (block_height && block.type !== \"image\") {\n          style.height = block_height;\n        }\n      }\n    }\n    if (block.type === \"image\") {\n      assetStyle.objectFit = \"cover\";\n    } else if (block_preserve_scale) {\n      assetStyle.objectFit = \"contain\";\n    }\n  }\n  let source = ((_b = recordMap.signed_urls) == null ? void 0 : _b[block.id]) || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n  let content = null;\n  if (!source) {\n    return null;\n  }\n  if (block.type === \"tweet\") {\n    const src = source;\n    if (!src)\n      return null;\n    const id = src.split(\"?\")[0].split(\"/\").pop();\n    if (!id)\n      return null;\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      style: __spreadProps(__spreadValues({}, assetStyle), {\n        maxWidth: 420,\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      })\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Tweet, {\n      id\n    }));\n  } else if (block.type === \"pdf\") {\n    style.overflow = \"auto\";\n    style.background = \"rgb(226, 226, 226)\";\n    style.display = \"block\";\n    if (!style.padding) {\n      style.padding = \"8px 16px\";\n    }\n    if (!isServer) {\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Pdf, {\n        file: source\n      });\n    }\n  } else if (block.type === \"embed\" || block.type === \"video\" || block.type === \"figma\" || block.type === \"typeform\" || block.type === \"gist\" || block.type === \"maps\" || block.type === \"excalidraw\" || block.type === \"codepen\" || block.type === \"drive\") {\n    if (block.type === \"video\" && source && source.indexOf(\"youtube\") < 0 && source.indexOf(\"youtu.be\") < 0 && source.indexOf(\"vimeo\") < 0 && source.indexOf(\"wistia\") < 0 && source.indexOf(\"loom\") < 0 && source.indexOf(\"videoask\") < 0 && source.indexOf(\"getcloudapp\") < 0) {\n      style.paddingBottom = void 0;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", {\n        playsInline: true,\n        controls: true,\n        preload: \"metadata\",\n        style: assetStyle,\n        src: source,\n        title: block.type\n      });\n    } else {\n      let src = ((_f = block.format) == null ? void 0 : _f.display_source) || source;\n      if (src) {\n        const youtubeVideoId = block.type === \"video\" ? getYoutubeId(src) : null;\n        if (youtubeVideoId) {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LiteYouTubeEmbed, {\n            id: youtubeVideoId,\n            style: assetStyle,\n            className: \"notion-asset-object-fit\"\n          });\n        } else if (block.type === \"gist\") {\n          if (!src.endsWith(\".pibb\")) {\n            src = `${src}.pibb`;\n          }\n          assetStyle.width = \"100%\";\n          style.paddingBottom = \"50%\";\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            style: assetStyle,\n            className: \"notion-asset-object-fit\",\n            src,\n            title: \"GitHub Gist\",\n            frameBorder: \"0\",\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        } else {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            className: \"notion-asset-object-fit\",\n            style: assetStyle,\n            src,\n            title: `iframe ${block.type}`,\n            frameBorder: \"0\",\n            allowFullScreen: true,\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        }\n      }\n    }\n  } else if (block.type === \"image\") {\n    if (source.includes(\"file.notion.so\")) {\n      source = (_i = (_h = (_g = block.properties) == null ? void 0 : _g.source) == null ? void 0 : _h[0]) == null ? void 0 : _i[0];\n    }\n    const src = mapImageUrl(source, block);\n    const caption = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getTextContent)((_j = block.properties) == null ? void 0 : _j.caption);\n    const alt = caption || \"notion image\";\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n      src,\n      alt,\n      zoomable,\n      height: style.height,\n      style: assetStyle\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    style\n  }, content, block.type === \"image\" && children), block.type !== \"image\" && children);\n};\n\n// src/components/asset-wrapper.tsx\nvar urlStyle = { width: \"100%\" };\nvar AssetWrapper = ({ blockId, block }) => {\n  var _a, _b, _c, _d, _e, _f;\n  const value = block;\n  const { components, mapPageUrl, rootDomain, zoom } = useNotionContext();\n  let isURL = false;\n  if (block.type === \"image\") {\n    const caption = (_c = (_b = (_a = value == null ? void 0 : value.properties) == null ? void 0 : _a.caption) == null ? void 0 : _b[0]) == null ? void 0 : _c[0];\n    if (caption) {\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.parsePageId)(caption, { uuid: true });\n      const isPage = caption.charAt(0) === \"/\" && id;\n      if (isPage || isValidURL(caption)) {\n        isURL = true;\n      }\n    }\n  }\n  const figure = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figure\", {\n    className: cs(\n      \"notion-asset-wrapper\",\n      `notion-asset-wrapper-${block.type}`,\n      ((_d = value.format) == null ? void 0 : _d.block_full_width) && \"notion-asset-wrapper-full\",\n      blockId\n    )\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Asset, {\n    block: value,\n    zoomable: zoom && !isURL\n  }, ((_e = value == null ? void 0 : value.properties) == null ? void 0 : _e.caption) && !isURL && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figcaption\", {\n    className: \"notion-asset-caption\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: value.properties.caption,\n    block\n  }))));\n  if (isURL) {\n    const caption = (_f = value == null ? void 0 : value.properties) == null ? void 0 : _f.caption[0][0];\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.parsePageId)(caption, { uuid: true });\n    const isPage = caption.charAt(0) === \"/\" && id;\n    const captionHostname = extractHostname(caption);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n      style: urlStyle,\n      href: isPage ? mapPageUrl(id) : caption,\n      target: captionHostname && captionHostname !== rootDomain && !caption.startsWith(\"/\") ? \"blank_\" : null\n    }, figure);\n  }\n  return figure;\n};\nfunction isValidURL(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  );\n  return !!pattern.test(str);\n}\nfunction extractHostname(url) {\n  try {\n    const hostname = new URL(url).hostname;\n    return hostname;\n  } catch (err) {\n    return \"\";\n  }\n}\n\n// src/components/checkbox.tsx\n\n\n// src/icons/check.tsx\n\nfunction SvgCheck(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M5.5 12L14 3.5 12.5 2l-7 7-4-4.003L0 6.499z\"\n  }));\n}\nvar check_default = SvgCheck;\n\n// src/components/checkbox.tsx\nvar Checkbox = ({ isChecked }) => {\n  let content = null;\n  if (isChecked) {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-checked\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(check_default, null));\n  } else {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-unchecked\"\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-property notion-property-checkbox\"\n  }, content);\n};\n\n// src/next.tsx\n\n\nvar wrapNextImage = (NextImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextImage(_a) {\n    var _b = _a, {\n      src,\n      alt,\n      width,\n      height,\n      className,\n      style,\n      layout\n    } = _b, rest = __objRest(_b, [\n      \"src\",\n      \"alt\",\n      \"width\",\n      \"height\",\n      \"className\",\n      \"style\",\n      \"layout\"\n    ]);\n    if (!layout) {\n      layout = width && height ? \"intrinsic\" : \"fill\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextImage, __spreadValues({\n      className,\n      src,\n      alt,\n      width: layout === \"intrinsic\" && width,\n      height: layout === \"intrinsic\" && height,\n      objectFit: style == null ? void 0 : style.objectFit,\n      objectPosition: style == null ? void 0 : style.objectPosition,\n      layout\n    }, rest));\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_16__);\n};\nvar wrapNextLink = (NextLink) => function ReactNotionXNextLink(_a) {\n  var _b = _a, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  } = _b, linkProps = __objRest(_b, [\n    \"href\",\n    \"as\",\n    \"passHref\",\n    \"prefetch\",\n    \"replace\",\n    \"scroll\",\n    \"shallow\",\n    \"locale\"\n  ]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextLink, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, linkProps)));\n};\n\n// src/context.tsx\nvar DefaultLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\"\n}, props));\nvar DefaultLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultLink);\nvar DefaultPageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, props));\nvar DefaultPageLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultPageLink);\nvar DefaultEmbed = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, __spreadValues({}, props));\nvar DefaultHeader = Header;\nvar dummyComponent = (name) => () => {\n  console.warn(\n    `Warning: using empty component \"${name}\" (you should override this in NotionRenderer.components)`\n  );\n  return null;\n};\nvar dummyOverrideFn = (_, defaultValueFn) => defaultValueFn();\nvar defaultComponents = {\n  Image: null,\n  Link: DefaultLinkMemo,\n  PageLink: DefaultPageLinkMemo,\n  Checkbox,\n  Callout: void 0,\n  Code: dummyComponent(\"Code\"),\n  Equation: dummyComponent(\"Equation\"),\n  Collection: dummyComponent(\"Collection\"),\n  Property: void 0,\n  propertyTextValue: dummyOverrideFn,\n  propertySelectValue: dummyOverrideFn,\n  propertyRelationValue: dummyOverrideFn,\n  propertyFormulaValue: dummyOverrideFn,\n  propertyTitleValue: dummyOverrideFn,\n  propertyPersonValue: dummyOverrideFn,\n  propertyFileValue: dummyOverrideFn,\n  propertyCheckboxValue: dummyOverrideFn,\n  propertyUrlValue: dummyOverrideFn,\n  propertyEmailValue: dummyOverrideFn,\n  propertyPhoneNumberValue: dummyOverrideFn,\n  propertyNumberValue: dummyOverrideFn,\n  propertyLastEditedTimeValue: dummyOverrideFn,\n  propertyCreatedTimeValue: dummyOverrideFn,\n  propertyDateValue: dummyOverrideFn,\n  Pdf: dummyComponent(\"Pdf\"),\n  Tweet: dummyComponent(\"Tweet\"),\n  Modal: dummyComponent(\"Modal\"),\n  Header: DefaultHeader,\n  Embed: DefaultEmbed\n};\nvar defaultNotionContext = {\n  recordMap: {\n    block: {},\n    collection: {},\n    collection_view: {},\n    collection_query: {},\n    notion_user: {},\n    signed_urls: {}\n  },\n  components: defaultComponents,\n  mapPageUrl: defaultMapPageUrl(),\n  mapImageUrl: defaultMapImageUrl,\n  searchNotion: null,\n  isShowingSearch: false,\n  onHideSearch: null,\n  fullPage: false,\n  darkMode: false,\n  previewImages: false,\n  forceCustomImages: false,\n  showCollectionViewDropdown: true,\n  linkTableTitleProperties: true,\n  isLinkCollectionToUrlProperty: false,\n  showTableOfContents: false,\n  minTableOfContentsItems: 3,\n  defaultPageIcon: null,\n  defaultPageCover: null,\n  defaultPageCoverPosition: 0.5,\n  zoom: null\n};\nvar ctx = react__WEBPACK_IMPORTED_MODULE_0__.createContext(defaultNotionContext);\nvar NotionContextProvider = (_a) => {\n  var _b = _a, {\n    components: themeComponents = {},\n    children,\n    mapPageUrl,\n    mapImageUrl,\n    rootPageId\n  } = _b, rest = __objRest(_b, [\n    \"components\",\n    \"children\",\n    \"mapPageUrl\",\n    \"mapImageUrl\",\n    \"rootPageId\"\n  ]);\n  for (const key of Object.keys(rest)) {\n    if (rest[key] === void 0) {\n      delete rest[key];\n    }\n  }\n  const wrappedThemeComponents = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadValues({}, themeComponents),\n    [themeComponents]\n  );\n  if (wrappedThemeComponents.nextImage) {\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  }\n  if (wrappedThemeComponents.nextLink) {\n    wrappedThemeComponents.nextLink = wrapNextLink(themeComponents.nextLink);\n  }\n  for (const key of Object.keys(wrappedThemeComponents)) {\n    if (!wrappedThemeComponents[key]) {\n      delete wrappedThemeComponents[key];\n    }\n  }\n  const value = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadProps(__spreadValues(__spreadValues({}, defaultNotionContext), rest), {\n      rootPageId,\n      mapPageUrl: mapPageUrl != null ? mapPageUrl : defaultMapPageUrl(rootPageId),\n      mapImageUrl: mapImageUrl != null ? mapImageUrl : defaultMapImageUrl,\n      components: __spreadValues(__spreadValues({}, defaultComponents), wrappedThemeComponents)\n    }),\n    [mapImageUrl, mapPageUrl, wrappedThemeComponents, rootPageId, rest]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ctx.Provider, {\n    value\n  }, children);\n};\nvar NotionContextConsumer = ctx.Consumer;\nvar useNotionContext = () => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ctx);\n};\n\n// src/components/text.tsx\nvar Text = ({ value, block, linkProps, linkProtocol }) => {\n  const { components, recordMap, mapPageUrl, mapImageUrl, rootDomain } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, value == null ? void 0 : value.map(([text, decorations], index) => {\n    if (!decorations) {\n      if (text === \",\") {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n          key: index,\n          style: { padding: \"0.5em\" }\n        });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          key: index\n        }, text);\n      }\n    }\n    const formatted = decorations.reduce(\n      (element, decorator) => {\n        var _a, _b, _c, _d, _e;\n        switch (decorator[0]) {\n          case \"p\": {\n            const blockId = decorator[1];\n            const linkedBlock = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n            if (!linkedBlock) {\n              console.log('\"p\" missing block', blockId);\n              return null;\n            }\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n              className: \"notion-link\",\n              href: mapPageUrl(blockId)\n            }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n              block: linkedBlock\n            }));\n          }\n          case \"\\u2023\": {\n            const linkType = decorator[1][0];\n            const id = decorator[1][1];\n            switch (linkType) {\n              case \"u\": {\n                const user = (_b = recordMap.notion_user[id]) == null ? void 0 : _b.value;\n                if (!user) {\n                  console.log('\"\\u2023\" missing user', id);\n                  return null;\n                }\n                const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n                  className: \"notion-user\",\n                  src: mapImageUrl(user.profile_photo, block),\n                  alt: name\n                });\n              }\n              default: {\n                const linkedBlock = (_c = recordMap.block[id]) == null ? void 0 : _c.value;\n                if (!linkedBlock) {\n                  console.log('\"\\u2023\" missing block', linkType, id);\n                  return null;\n                }\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadProps(__spreadValues({\n                  className: \"notion-link\",\n                  href: mapPageUrl(id)\n                }, linkProps), {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n                  block: linkedBlock\n                }));\n              }\n            }\n          }\n          case \"h\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: `notion-${decorator[1]}`\n            }, element);\n          case \"c\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"code\", {\n              className: \"notion-inline-code\"\n            }, element);\n          case \"b\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"b\", null, element);\n          case \"i\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"em\", null, element);\n          case \"s\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"s\", null, element);\n          case \"_\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: \"notion-inline-underscore\"\n            }, element);\n          case \"e\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Equation, {\n              math: decorator[1],\n              inline: true\n            });\n          case \"m\":\n            return element;\n          case \"a\": {\n            const v = decorator[1];\n            const pathname = v.substr(1);\n            const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.parsePageId)(pathname, { uuid: true });\n            if ((v[0] === \"/\" || v.includes(rootDomain)) && id) {\n              const href = v.includes(rootDomain) ? v : `${mapPageUrl(id)}${getHashFragmentValue(v)}`;\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadValues({\n                className: \"notion-link\",\n                href\n              }, linkProps), element);\n            } else {\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, __spreadValues({\n                className: \"notion-link\",\n                href: linkProtocol ? `${linkProtocol}:${decorator[1]}` : decorator[1]\n              }, linkProps), element);\n            }\n          }\n          case \"d\": {\n            const v = decorator[1];\n            const type = v == null ? void 0 : v.type;\n            if (type === \"date\") {\n              const startDate = v.start_date;\n              return (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.formatDate)(startDate);\n            } else if (type === \"daterange\") {\n              const startDate = v.start_date;\n              const endDate = v.end_date;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.formatDate)(startDate)} \\u2192 ${(0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.formatDate)(endDate)}`;\n            } else {\n              return element;\n            }\n          }\n          case \"u\": {\n            const userId = decorator[1];\n            const user = (_d = recordMap.notion_user[userId]) == null ? void 0 : _d.value;\n            if (!user) {\n              console.log(\"missing user\", userId);\n              return null;\n            }\n            const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n              className: \"notion-user\",\n              src: mapImageUrl(user.profile_photo, block),\n              alt: name\n            });\n          }\n          case \"eoi\": {\n            const blockId = decorator[1];\n            const externalObjectInstance = (_e = recordMap.block[blockId]) == null ? void 0 : _e.value;\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EOI, {\n              block: externalObjectInstance,\n              inline: true\n            });\n          }\n          default:\n            if (true) {\n              console.log(\"unsupported text format\", decorator);\n            }\n            return element;\n        }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, text)\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: index\n    }, formatted);\n  }));\n};\n\n// src/icons/copy.tsx\n\nfunction SvgCopy(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    fill: \"currentColor\",\n    viewBox: \"0 0 16 16\",\n    width: \"1em\",\n    version: \"1.1\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\n  }));\n}\nvar copy_default = SvgCopy;\n\n// src/third-party/code.tsx\nvar Code = ({ block, defaultLanguage = \"typescript\", className }) => {\n  var _a, _b, _c;\n  const [isCopied, setIsCopied] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const copyTimeout = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n  const { recordMap } = useNotionContext();\n  const content = (0,notion_utils__WEBPACK_IMPORTED_MODULE_11__.getBlockTitle)(block, recordMap);\n  const language = (((_c = (_b = (_a = block.properties) == null ? void 0 : _a.language) == null ? void 0 : _b[0]) == null ? void 0 : _c[0]) || defaultLanguage).toLowerCase();\n  const caption = block.properties.caption;\n  const codeRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (codeRef.current) {\n      try {\n        (0,prismjs__WEBPACK_IMPORTED_MODULE_1__.highlightElement)(codeRef.current);\n      } catch (err) {\n        console.warn(\"prismjs highlight error\", err);\n      }\n    }\n  }, [codeRef]);\n  const onClickCopyToClipboard = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    (0, import_clipboard_copy.default)(content);\n    setIsCopied(true);\n    if (copyTimeout.current) {\n      clearTimeout(copyTimeout.current);\n      copyTimeout.current = null;\n    }\n    copyTimeout.current = setTimeout(() => {\n      setIsCopied(false);\n    }, 1200);\n  }, [content, copyTimeout]);\n  const copyButton = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-code-copy-button\",\n    onClick: onClickCopyToClipboard\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(copy_default, null));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"pre\", {\n    className: cs(\"notion-code\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-code-copy\"\n  }, copyButton, isCopied && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-code-copy-tooltip\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, isCopied ? \"Copied\" : \"Copy\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"code\", {\n    className: `language-${language}`,\n    ref: codeRef\n  }, content)), caption && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figcaption\", {\n    className: \"notion-asset-caption\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: caption,\n    block\n  })));\n};\n\n/*! clipboard-copy. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvdGhpcmQtcGFydHkvY29kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRyx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNpQztBQUM4QjtBQUNwQjtBQUNJO0FBQ0s7QUFDUDtBQUNPO0FBQ0Q7QUFDTDtBQUNEO0FBQ0E7QUFDTzs7QUFFcEQ7QUFDaUM7QUFDMEI7O0FBRTNEO0FBQ2lDOztBQUVqQztBQUNpQztBQUNVOztBQUUzQztBQUN1RTs7QUFFdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QjtBQUNqRTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0E7QUFDQSxHQUFHLG1CQUFtQixnREFBcUI7QUFDM0M7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsY0FBYyxrREFBa0Q7QUFDaEU7QUFDQSxrQ0FBa0MsMkNBQWdCO0FBQ2xELHNCQUFzQix5Q0FBYztBQUNwQyxVQUFVLFlBQVk7QUFDdEIsa0JBQWtCLDREQUFjO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IseUNBQWM7QUFDaEMsRUFBRSw0Q0FBaUI7QUFDbkI7QUFDQTtBQUNBLFFBQVEseURBQWdCO0FBQ3hCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUNBQWlDLDhDQUFtQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxxQ0FBcUMsZ0RBQXFCO0FBQzFEO0FBQ0E7QUFDQSxHQUFHLGtCQUFrQixnREFBcUI7QUFDMUMseUJBQXlCLGdEQUFxQixDQUFDLDJDQUFnQix3QkFBd0IsZ0RBQXFCO0FBQzVHO0FBQ0EsR0FBRyxrQkFBa0IsZ0RBQXFCO0FBQzFDO0FBQ0EsR0FBRywwQ0FBMEMsZ0RBQXFCO0FBQ2xFO0FBQ0EsR0FBRyxrQkFBa0IsZ0RBQXFCLCtEQUErRCxnREFBcUI7QUFDOUgsMkJBQTJCLFNBQVM7QUFDcEM7QUFDQSxHQUFHLHdDQUF3QyxnREFBcUI7QUFDaEU7QUFDQSxHQUFHLGtCQUFrQixnREFBcUI7QUFDMUM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3Rpb24teC1leGFtcGxlLWZ1bGwvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvdGhpcmQtcGFydHkvY29kZS5qcz9lNjQ1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbnZhciBfX29ialJlc3QgPSAoc291cmNlLCBleGNsdWRlKSA9PiB7XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKHNvdXJjZSwgcHJvcCkgJiYgZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMClcbiAgICAgIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgaWYgKHNvdXJjZSAhPSBudWxsICYmIF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKHNvdXJjZSkpIHtcbiAgICAgIGlmIChleGNsdWRlLmluZGV4T2YocHJvcCkgPCAwICYmIF9fcHJvcElzRW51bS5jYWxsKHNvdXJjZSwgcHJvcCkpXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICB9XG4gIHJldHVybiB0YXJnZXQ7XG59O1xudmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkge1xuICByZXR1cm4gbW9kIHx8ICgwLCBjYltfX2dldE93blByb3BOYW1lcyhjYilbMF1dKSgobW9kID0geyBleHBvcnRzOiB7fSB9KS5leHBvcnRzLCBtb2QpLCBtb2QuZXhwb3J0cztcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldCkgPT4gKHRhcmdldCA9IG1vZCAhPSBudWxsID8gX19jcmVhdGUoX19nZXRQcm90b09mKG1vZCkpIDoge30sIF9fY29weVByb3BzKFxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9jbGlwYm9hcmQtY29weS9pbmRleC5qc1xudmFyIHJlcXVpcmVfY2xpcGJvYXJkX2NvcHkgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvY2xpcGJvYXJkLWNvcHkvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGNsaXBib2FyZENvcHk7XG4gICAgZnVuY3Rpb24gbWFrZUVycm9yKCkge1xuICAgICAgcmV0dXJuIG5ldyBET01FeGNlcHRpb24oXCJUaGUgcmVxdWVzdCBpcyBub3QgYWxsb3dlZFwiLCBcIk5vdEFsbG93ZWRFcnJvclwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29weUNsaXBib2FyZEFwaSh0ZXh0KSB7XG4gICAgICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAoIW5hdmlnYXRvci5jbGlwYm9hcmQpIHtcbiAgICAgICAgICB0aHJvdyBtYWtlRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29weUV4ZWNDb21tYW5kKHRleHQpIHtcbiAgICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIHNwYW4uc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlXCI7XG4gICAgICAgIHNwYW4uc3R5bGUud2Via2l0VXNlclNlbGVjdCA9IFwiYXV0b1wiO1xuICAgICAgICBzcGFuLnN0eWxlLnVzZXJTZWxlY3QgPSBcImFsbFwiO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShzcGFuKTtcbiAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdWNjZXNzID0gd2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc3Bhbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdWNjZXNzKVxuICAgICAgICAgIHRocm93IG1ha2VFcnJvcigpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsaXBib2FyZENvcHkodGV4dCkge1xuICAgICAgcmV0dXJuIF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB5aWVsZCBjb3B5Q2xpcGJvYXJkQXBpKHRleHQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgeWllbGQgY29weUV4ZWNDb21tYW5kKHRleHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycjIpIHtcbiAgICAgICAgICAgIHRocm93IGVycjIgfHwgZXJyIHx8IG1ha2VFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qc1xudmFyIHJlcXVpcmVfbG9kYXNoID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIHZhciBGVU5DX0VSUk9SX1RFWFQgPSBcIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjtcbiAgICB2YXIgTkFOID0gMCAvIDA7XG4gICAgdmFyIHN5bWJvbFRhZyA9IFwiW29iamVjdCBTeW1ib2xdXCI7XG4gICAgdmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuICAgIHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG4gICAgdmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG4gICAgdmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG4gICAgdmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuICAgIHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuICAgIHZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09IFwib2JqZWN0XCIgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG4gICAgdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbiAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICAgIHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuICAgIHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcbiAgICB2YXIgbmF0aXZlTWluID0gTWF0aC5taW47XG4gICAgdmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsYXN0QXJncywgbGFzdFRoaXMsIG1heFdhaXQsIHJlc3VsdCwgdGltZXJJZCwgbGFzdENhbGxUaW1lLCBsYXN0SW52b2tlVGltZSA9IDAsIGxlYWRpbmcgPSBmYWxzZSwgbWF4aW5nID0gZmFsc2UsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhpbmcgPSBcIm1heFdhaXRcIiBpbiBvcHRpb25zO1xuICAgICAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBsYXN0QXJncywgdGhpc0FyZyA9IGxhc3RUaGlzO1xuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdm9pZCAwO1xuICAgICAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsIHJlc3VsdDIgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG4gICAgICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0MiwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0MjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG4gICAgICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHZvaWQgMCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgICAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgdGltZXJJZCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRpbWVySWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHJldHVybiB0aW1lcklkID09PSB2b2lkIDAgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpLCBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuICAgICAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuICAgICAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgICAgIGlmICh0aW1lcklkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWVySWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgICAgIHJldHVybiBkZWJvdW5jZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRocm90dGxlMihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGVhZGluZyA9IHRydWUsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSBcImxlYWRpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICAgICBcImxlYWRpbmdcIjogbGVhZGluZyxcbiAgICAgICAgXCJtYXhXYWl0XCI6IHdhaXQsXG4gICAgICAgIFwidHJhaWxpbmdcIjogdHJhaWxpbmdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSBcIm9iamVjdFwiIHx8IHR5cGUgPT0gXCJmdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzeW1ib2xcIiB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBOQU47XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgICAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgXCJcIiA6IG90aGVyO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgXCJcIik7XG4gICAgICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICAgICAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlMjtcbiAgfVxufSk7XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2RlLnRzeFxudmFyIGltcG9ydF9jbGlwYm9hcmRfY29weSA9IF9fdG9FU00ocmVxdWlyZV9jbGlwYm9hcmRfY29weSgpLCAxKTtcbmltcG9ydCAqIGFzIFJlYWN0MjIgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRCbG9ja1RpdGxlIGFzIGdldEJsb2NrVGl0bGU0IH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgaGlnaGxpZ2h0RWxlbWVudCB9IGZyb20gXCJwcmlzbWpzXCI7XG5pbXBvcnQgXCJwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tY2xpa2UubWluLmpzXCI7XG5pbXBvcnQgXCJwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tY3NzLWV4dHJhcy5taW4uanNcIjtcbmltcG9ydCBcInByaXNtanMvY29tcG9uZW50cy9wcmlzbS1jc3MubWluLmpzXCI7XG5pbXBvcnQgXCJwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tamF2YXNjcmlwdC5taW4uanNcIjtcbmltcG9ydCBcInByaXNtanMvY29tcG9uZW50cy9wcmlzbS1qcy1leHRyYXMubWluLmpzXCI7XG5pbXBvcnQgXCJwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tanNvbi5taW4uanNcIjtcbmltcG9ydCBcInByaXNtanMvY29tcG9uZW50cy9wcmlzbS1qc3gubWluLmpzXCI7XG5pbXBvcnQgXCJwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tdHN4Lm1pbi5qc1wiO1xuaW1wb3J0IFwicHJpc21qcy9jb21wb25lbnRzL3ByaXNtLXR5cGVzY3JpcHQubWluLmpzXCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL3RleHQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDIwIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgYXMgcGFyc2VQYWdlSWQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29udGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTkgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LXdyYXBwZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy91dGlscy50c1xuaW1wb3J0IHsgaXNVcmwsIGZvcm1hdERhdGUsIGZvcm1hdE5vdGlvbkRhdGVUaW1lIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvbWFwLWltYWdlLXVybC50c1xudmFyIGRlZmF1bHRNYXBJbWFnZVVybCA9ICh1cmwsIGJsb2NrKSA9PiB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHVybC5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGlmICh1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbVwiKSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCB1ID0gbmV3IFVSTCh1cmwpO1xuICAgIGlmICh1LnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvc2VjdXJlLm5vdGlvbi1zdGF0aWMuY29tXCIpICYmIHUuaG9zdG5hbWUuZW5kc1dpdGgoXCIuYW1hem9uYXdzLmNvbVwiKSkge1xuICAgICAgaWYgKHUuc2VhcmNoUGFyYW1zLmhhcyhcIlgtQW16LUNyZWRlbnRpYWxcIikgJiYgdS5zZWFyY2hQYXJhbXMuaGFzKFwiWC1BbXotU2lnbmF0dXJlXCIpICYmIHUuc2VhcmNoUGFyYW1zLmhhcyhcIlgtQW16LUFsZ29yaXRobVwiKSkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIGlmICh1cmwuc3RhcnRzV2l0aChcIi9pbWFnZXNcIikpIHtcbiAgICB1cmwgPSBgaHR0cHM6Ly93d3cubm90aW9uLnNvJHt1cmx9YDtcbiAgfVxuICB1cmwgPSBgaHR0cHM6Ly93d3cubm90aW9uLnNvJHt1cmwuc3RhcnRzV2l0aChcIi9pbWFnZVwiKSA/IHVybCA6IGAvaW1hZ2UvJHtlbmNvZGVVUklDb21wb25lbnQodXJsKX1gfWA7XG4gIGNvbnN0IG5vdGlvbkltYWdlVXJsVjIgPSBuZXcgVVJMKHVybCk7XG4gIGxldCB0YWJsZSA9IGJsb2NrLnBhcmVudF90YWJsZSA9PT0gXCJzcGFjZVwiID8gXCJibG9ja1wiIDogYmxvY2sucGFyZW50X3RhYmxlO1xuICBpZiAodGFibGUgPT09IFwiY29sbGVjdGlvblwiIHx8IHRhYmxlID09PSBcInRlYW1cIikge1xuICAgIHRhYmxlID0gXCJibG9ja1wiO1xuICB9XG4gIG5vdGlvbkltYWdlVXJsVjIuc2VhcmNoUGFyYW1zLnNldChcInRhYmxlXCIsIHRhYmxlKTtcbiAgbm90aW9uSW1hZ2VVcmxWMi5zZWFyY2hQYXJhbXMuc2V0KFwiaWRcIiwgYmxvY2suaWQpO1xuICBub3Rpb25JbWFnZVVybFYyLnNlYXJjaFBhcmFtcy5zZXQoXCJjYWNoZVwiLCBcInYyXCIpO1xuICB1cmwgPSBub3Rpb25JbWFnZVVybFYyLnRvU3RyaW5nKCk7XG4gIHJldHVybiB1cmw7XG59O1xuXG4vLyBzcmMvbWFwLXBhZ2UtdXJsLnRzXG52YXIgZGVmYXVsdE1hcFBhZ2VVcmwgPSAocm9vdFBhZ2VJZCkgPT4gKHBhZ2VJZCkgPT4ge1xuICBwYWdlSWQgPSAocGFnZUlkIHx8IFwiXCIpLnJlcGxhY2UoLy0vZywgXCJcIik7XG4gIGlmIChyb290UGFnZUlkICYmIHBhZ2VJZCA9PT0gcm9vdFBhZ2VJZCkge1xuICAgIHJldHVybiBcIi9cIjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYC8ke3BhZ2VJZH1gO1xuICB9XG59O1xuXG4vLyBzcmMvdXRpbHMudHNcbnZhciBjcyA9ICguLi5jbGFzc2VzKSA9PiBjbGFzc2VzLmZpbHRlcigoYSkgPT4gISFhKS5qb2luKFwiIFwiKTtcbnZhciBnZXRIYXNoRnJhZ21lbnRWYWx1ZSA9ICh1cmwpID0+IHtcbiAgcmV0dXJuIHVybC5pbmNsdWRlcyhcIiNcIikgPyB1cmwucmVwbGFjZSgvXi4rKCMuKykkLywgXCIkMVwiKSA6IFwiXCI7XG59O1xudmFyIGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG52YXIgeW91dHViZURvbWFpbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwieW91dHUuYmVcIixcbiAgXCJ5b3V0dWJlLmNvbVwiLFxuICBcInd3dy55b3V0dWJlLmNvbVwiLFxuICBcInlvdXR1YmUtbm9jb29raWUuY29tXCIsXG4gIFwid3d3LnlvdXR1YmUtbm9jb29raWUuY29tXCJcbl0pO1xudmFyIGdldFlvdXR1YmVJZCA9ICh1cmwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGhvc3RuYW1lIH0gPSBuZXcgVVJMKHVybCk7XG4gICAgaWYgKCF5b3V0dWJlRG9tYWlucy5oYXMoaG9zdG5hbWUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVnRXhwID0gL14uKih5b3V0dVxcLmJlXFwvfHZcXC98dVxcL1xcd1xcL3xlbWJlZFxcL3x3YXRjaFxcP3Y9fCZ2PSkoW14jJj9dKikuKi9pO1xuICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKHJlZ0V4cCk7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdLmxlbmd0aCA9PSAxMSkge1xuICAgICAgcmV0dXJuIG1hdGNoWzJdO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvZW9pLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1naXRodWIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVHaXRIdWIocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAyNjAgMjYwXCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xMjguMDAxMDYsMCBDNTcuMzE3MjkyNiwwIDAsNTcuMzA2Njk0MiAwLDEyOC4wMDEwNiBDMCwxODQuNTU1MjgxIDM2LjY3NjE5OTcsMjMyLjUzNTU0MiA4Ny41MzQ5MzcsMjQ5LjQ2MDg5OSBDOTMuOTMyMDIyMywyNTAuNjQ1Nzc5IDk2LjI4MDU4OCwyNDYuNjg0MTY1IDk2LjI4MDU4OCwyNDMuMzAzMzMzIEM5Ni4yODA1ODgsMjQwLjI1MTA0NSA5Ni4xNjE4ODc4LDIzMC4xNjc4OTkgOTYuMTA2Nzc3LDIxOS40NzIxNzYgQzYwLjQ5Njc1ODUsMjI3LjIxNTIzNSA1Mi45ODI2MjA3LDIwNC4zNjk3MTIgNTIuOTgyNjIwNywyMDQuMzY5NzEyIEM0Ny4xNTk5NTg0LDE4OS41NzQ1OTggMzguNzcwNDA4LDE4NS42NDA1MzggMzguNzcwNDA4LDE4NS42NDA1MzggQzI3LjE1Njg3ODUsMTc3LjY5NjExMyAzOS42NDU4MjA2LDE3Ny44NTkzMjUgMzkuNjQ1ODIwNiwxNzcuODU5MzI1IEM1Mi40OTkzNDE5LDE3OC43NjIyOTMgNTkuMjY3MzY1LDE5MS4wNDk4NyA1OS4yNjczNjUsMTkxLjA0OTg3IEM3MC42ODM3Njc1LDIxMC42MTg0MjMgODkuMjExNTc1MywyMDQuOTYxMDkzIDk2LjUxNTg2ODUsMjAxLjY5MDQ4MiBDOTcuNjY0NzE1NSwxOTMuNDE3NTEyIDEwMC45ODE5NTksMTg3Ljc3MDc4IDEwNC42NDI1ODMsMTg0LjU3NDM1NyBDNzYuMjExNzk5LDE4MS4zMzc2NiA0Ni4zMjQ4MTksMTcwLjM2MjE0NCA0Ni4zMjQ4MTksMTIxLjMxNTcwMiBDNDYuMzI0ODE5LDEwNy4zNDA4ODkgNTEuMzI1MDU4OCw5NS45MjIzNjgyIDU5LjUxMzI0MzcsODYuOTU4MzkzNyBDNTguMTg0MjI2OCw4My43MzQ0MTUyIDUzLjgwMjkyMjksNzAuNzE1NTYyIDYwLjc1MzIzNTQsNTMuMDg0MzYzNiBDNjAuNzUzMjM1NCw1My4wODQzNjM2IDcxLjUwMTk1MDEsNDkuNjQ0MTgxMyA5NS45NjI2NDEyLDY2LjIwNDk1OTUgQzEwNi4xNzI5NjcsNjMuMzY4ODc2IDExNy4xMjMwNDcsNjEuOTQ2NTk0OSAxMjguMDAxMDYsNjEuODk3ODQzMiBDMTM4Ljg3OTA3Myw2MS45NDY1OTQ5IDE0OS44Mzc2MzIsNjMuMzY4ODc2IDE2MC4wNjcwMzMsNjYuMjA0OTU5NSBDMTg0LjQ5ODA1LDQ5LjY0NDE4MTMgMTk1LjIzMTkyNiw1My4wODQzNjM2IDE5NS4yMzE5MjYsNTMuMDg0MzYzNiBDMjAyLjE5OTE5Nyw3MC43MTU1NjIgMTk3LjgxNTc3Myw4My43MzQ0MTUyIDE5Ni40ODY3NTYsODYuOTU4MzkzNyBDMjA0LjY5NDAxOCw5NS45MjIzNjgyIDIwOS42NjAzNDMsMTA3LjM0MDg4OSAyMDkuNjYwMzQzLDEyMS4zMTU3MDIgQzIwOS42NjAzNDMsMTcwLjQ3ODcyNSAxNzkuNzE2MTMzLDE4MS4zMDM3NDcgMTUxLjIxMzI4MSwxODQuNDcyNjE0IEMxNTUuODA0NDMsMTg4LjQ0NDgyOCAxNTkuODk1MzQyLDE5Ni4yMzQ1MTggMTU5Ljg5NTM0MiwyMDguMTc2NTkzIEMxNTkuODk1MzQyLDIyNS4zMDMzMTcgMTU5Ljc0Njk2OCwyMzkuMDg3MzYxIDE1OS43NDY5NjgsMjQzLjMwMzMzMyBDMTU5Ljc0Njk2OCwyNDYuNzA5NjAxIDE2Mi4wNTEwMiwyNTAuNzAwODkgMTY4LjUzOTI1LDI0OS40NDM5NDEgQzIxOS4zNzA0MzIsMjMyLjQ5OTUwNyAyNTYsMTg0LjUzNjIwNCAyNTYsMTI4LjAwMTA2IEMyNTYsNTcuMzA2Njk0MiAxOTguNjkxMTg3LDAgMTI4LjAwMTA2LDAgWiBNNDcuOTQwNTU5MywxODIuMzQwMjEyIEM0Ny42NTg2NDY1LDE4Mi45NzYxMDUgNDYuNjU4MTc0NSwxODMuMTY2ODczIDQ1Ljc0NjcyNzcsMTgyLjczMDIyNyBDNDQuODE4MzIzNSwxODIuMzEyNjU2IDQ0LjI5Njg5MTQsMTgxLjQ0NTcyMiA0NC41OTc4ODA4LDE4MC44MDc3MSBDNDQuODczNDM0NCwxODAuMTUyNzM5IDQ1Ljg3NjAyNiwxNzkuOTcwNDUgNDYuODAyMzEwMywxODAuNDA5MjE2IEM0Ny43MzI4MzQyLDE4MC44MjY3ODYgNDguMjYyNzQ1MSwxODEuNzAyMTk5IDQ3Ljk0MDU1OTMsMTgyLjM0MDIxMiBaIE01NC4yMzY3ODkyLDE4Ny45NTgyNTQgQzUzLjYyNjMzMTgsMTg4LjUyNDE5OSA1Mi40MzI5NzIzLDE4OC4yNjEzNjMgNTEuNjIzMjY4MiwxODcuMzY2ODc0IEM1MC43ODYwMDg4LDE4Ni40NzQ1MDQgNTAuNjI5MTU1MywxODUuMjgxMTQ0IDUxLjI0ODA5MTIsMTg0LjcwNjcyIEM1MS44Nzc2MjU0LDE4NC4xNDA3NzUgNTMuMDM0OTUxMiwxODQuNDA1NzMxIDUzLjg3NDMzMDIsMTg1LjI5ODEwMSBDNTQuNzExNTg5MiwxODYuMjAxMDY5IDU0Ljg3NDgwMTksMTg3LjM4NTk1IDU0LjIzNjc4OTIsMTg3Ljk1ODI1NCBaIE01OC41NTYyNDEzLDE5NS4xNDYzNDcgQzU3Ljc3MTk3MzIsMTk1LjY5MTA5NiA1Ni40ODk1ODg2LDE5NS4xODAyNjEgNTUuNjk2ODQxNywxOTQuMDQyMDEzIEM1NC45MTI1NzMzLDE5Mi45MDM3NjQgNTQuOTEyNTczMywxOTEuNTM4NzEzIDU1LjcxMzc5OSwxOTAuOTkxODQ1IEM1Ni41MDg2NjUxLDE5MC40NDQ5NzcgNTcuNzcxOTczMiwxOTAuOTM2NzM1IDU4LjU3NTMxODEsMTkyLjA2NjUwNSBDNTkuMzU3NDY2OSwxOTMuMjIzODMgNTkuMzU3NDY2OSwxOTQuNTg4ODggNTguNTU2MjQxMywxOTUuMTQ2MzQ3IFogTTY1Ljg2MTM1OTIsMjAzLjQ3MTE3NCBDNjUuMTU5NzU3MSwyMDQuMjQ0ODQ2IDYzLjY2NTQwODMsMjA0LjAzNzEyIDYyLjU3MTY3MTcsMjAyLjk4MTUzOCBDNjEuNDUyNDk5OSwyMDEuOTQ5MjcgNjEuMTQwOTEyMiwyMDAuNDg0NTk2IDYxLjg0NDYzNDEsMTk5LjcxMDkyNiBDNjIuNTU0NzE0NiwxOTguOTM1MTM3IDY0LjA1NzU0MjIsMTk5LjE1MzQ2IDY1LjE1OTc1NzEsMjAwLjIwMDU2NCBDNjYuMjcwNDUwNiwyMDEuMjMwNzEyIDY2LjYwOTU5MzYsMjAyLjcwNTk4NCA2NS44NjEzNTkyLDIwMy40NzExNzQgWiBNNzUuMzAyNTE1MSwyMDYuMjgxNTQyIEM3NC45OTMwNDc0LDIwNy4yODQxMzQgNzMuNTUzODA5LDIwNy43Mzk4NTcgNzIuMTAzOTcyNCwyMDcuMzEzODA5IEM3MC42NTYyNTU2LDIwNi44NzUwNDMgNjkuNzA4Nzc0OCwyMDUuNzAwNzYxIDcwLjAwMTI4NTcsMjA0LjY4NzU3MSBDNzAuMzAyMjc1LDIwMy42Nzg2MjEgNzEuNzQ3ODcyMSwyMDMuMjAzODIgNzMuMjA4MzA2OSwyMDMuNjU5NTQzIEM3NC42NTM5MDQxLDIwNC4wOTYxOSA3NS42MDM1MDQ4LDIwNS4yNjE5OTQgNzUuMzAyNTE1MSwyMDYuMjgxNTQyIFogTTg2LjA0Njk0NywyMDcuNDczNjI3IEM4Ni4wODI5ODA2LDIwOC41MjkyMDkgODQuODUzNTg3MSwyMDkuNDA0NjIyIDgzLjMzMTY4MjksMjA5LjQyMzcgQzgxLjgwMTMsMjA5LjQ1NzYxNCA4MC41NjM0MjgsMjA4LjYwMzM5OCA4MC41NDY0NzA4LDIwNy41NjQ3NzIgQzgwLjU0NjQ3MDgsMjA2LjQ5ODU5MSA4MS43NDgzMDg4LDIwNS42MzE2NTcgODMuMjc4NjkxNywyMDUuNjA2MjIxIEM4NC44MDA1OTYyLDIwNS41NzY1NDYgODYuMDQ2OTQ3LDIwNi40MjQ0MDMgODYuMDQ2OTQ3LDIwNy40NzM2MjcgWiBNOTYuNjAyMTQ3MSwyMDcuMDY5MDIzIEM5Ni43ODQ0MzY2LDIwOC4wOTkxNzEgOTUuNzI2NzM0MSwyMDkuMTU2ODcyIDk0LjIxNTQyOCwyMDkuNDM4Nzg1IEM5Mi43Mjk1NTc3LDIwOS43MTAwOTkgOTEuMzUzOTA4NiwyMDkuMDc0MjA2IDkxLjE2NTI2MDMsMjA4LjA1MjUzOCBDOTAuOTgwODUxNSwyMDYuOTk2OTU1IDkyLjA1NzYzMDYsMjA1LjkzOTI1MyA5My41NDEzODEzLDIwNS42NjU4MiBDOTUuMDU0ODA3LDIwNS40MDI5ODQgOTYuNDA5MjU5NiwyMDYuMDIxOTE5IDk2LjYwMjE0NzEsMjA3LjA2OTAyMyBaXCIsXG4gICAgZmlsbDogXCIjMTYxNjE0XCJcbiAgfSkpKTtcbn1cbnZhciB0eXBlX2dpdGh1Yl9kZWZhdWx0ID0gU3ZnVHlwZUdpdEh1YjtcblxuLy8gc3JjL2NvbXBvbmVudHMvZW9pLnRzeFxudmFyIEVPSSA9ICh7IGJsb2NrLCBpbmxpbmUsIGNsYXNzTmFtZSB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCB7IGNvbXBvbmVudHMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgeyBvcmlnaW5hbF91cmwsIGF0dHJpYnV0ZXMsIGRvbWFpbiB9ID0gKGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5mb3JtYXQpIHx8IHt9O1xuICBpZiAoIW9yaWdpbmFsX3VybCB8fCAhYXR0cmlidXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHRpdGxlID0gKF9hID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcInRpdGxlXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWVzWzBdO1xuICBsZXQgb3duZXIgPSAoX2IgPSBhdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IFwib3duZXJcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZXNbMF07XG4gIGNvbnN0IGxhc3RVcGRhdGVkQXQgPSAoX2MgPSBhdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IFwidXBkYXRlZF9hdFwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnZhbHVlc1swXTtcbiAgY29uc3QgbGFzdFVwZGF0ZWQgPSBsYXN0VXBkYXRlZEF0ID8gZm9ybWF0Tm90aW9uRGF0ZVRpbWUobGFzdFVwZGF0ZWRBdCkgOiBudWxsO1xuICBsZXQgZXh0ZXJuYWxJbWFnZTtcbiAgc3dpdGNoIChkb21haW4pIHtcbiAgICBjYXNlIFwiZ2l0aHViLmNvbVwiOlxuICAgICAgZXh0ZXJuYWxJbWFnZSA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudCh0eXBlX2dpdGh1Yl9kZWZhdWx0LCBudWxsKTtcbiAgICAgIGlmIChvd25lcikge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IG93bmVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgb3duZXIgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgVW5zdXBwb3J0ZWQgZXh0ZXJuYWxfb2JqZWN0X2luc3RhbmNlIGRvbWFpbiBcIiR7ZG9tYWlufVwiYCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShibG9jaywgbnVsbCwgMilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5MaW5rLCB7XG4gICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgaHJlZjogb3JpZ2luYWxfdXJsLFxuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi1leHRlcm5hbFwiLFxuICAgICAgaW5saW5lID8gXCJub3Rpb24tZXh0ZXJuYWwtbWVudGlvblwiIDogXCJub3Rpb24tZXh0ZXJuYWwtYmxvY2sgbm90aW9uLXJvd1wiLFxuICAgICAgY2xhc3NOYW1lXG4gICAgKVxuICB9LCBleHRlcm5hbEltYWdlICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1pbWFnZVwiXG4gIH0sIGV4dGVybmFsSW1hZ2UpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtZGVzY3JpcHRpb25cIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtdGl0bGVcIlxuICB9LCB0aXRsZSksIChvd25lciB8fCBsYXN0VXBkYXRlZCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlXCJcbiAgfSwgb3duZXIgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCBvd25lciksIG93bmVyICYmIGxhc3RVcGRhdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgXCIgXFx1MjAyMiBcIiksIGxhc3RVcGRhdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgXCJVcGRhdGVkIFwiLCBsYXN0VXBkYXRlZCkpKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9ncmFjZWZ1bC1pbWFnZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEltZyB9IGZyb20gXCJyZWFjdC1pbWFnZVwiO1xudmFyIEdyYWNlZnVsSW1hZ2UgPSAocHJvcHMpID0+IHtcbiAgaWYgKGlzQnJvd3Nlcikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoSW1nLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9sYXp5LWltYWdlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbm9ybWFsaXplVXJsIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgSW1hZ2VTdGF0ZSwgTGF6eUltYWdlRnVsbCB9IGZyb20gXCJyZWFjdC1sYXp5LWltYWdlc1wiO1xudmFyIExhenlJbWFnZSA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHNyYyxcbiAgICBhbHQsXG4gICAgY2xhc3NOYW1lLFxuICAgIHN0eWxlLFxuICAgIHpvb21hYmxlID0gZmFsc2UsXG4gICAgcHJpb3JpdHkgPSBmYWxzZSxcbiAgICBoZWlnaHRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJzcmNcIixcbiAgICBcImFsdFwiLFxuICAgIFwiY2xhc3NOYW1lXCIsXG4gICAgXCJzdHlsZVwiLFxuICAgIFwiem9vbWFibGVcIixcbiAgICBcInByaW9yaXR5XCIsXG4gICAgXCJoZWlnaHRcIlxuICBdKTtcbiAgdmFyIF9hMiwgX2IyLCBfYztcbiAgY29uc3QgeyByZWNvcmRNYXAsIHpvb20sIHByZXZpZXdJbWFnZXMsIGZvcmNlQ3VzdG9tSW1hZ2VzLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHpvb21SZWYgPSBSZWFjdDQudXNlUmVmKHpvb20gPyB6b29tLmNsb25lKCkgOiBudWxsKTtcbiAgY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlcyA/IChfYyA9IChfYTIgPSByZWNvcmRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IHJlY29yZE1hcC5wcmV2aWV3X2ltYWdlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMltzcmNdKSAhPSBudWxsID8gX2MgOiAoX2IyID0gcmVjb3JkTWFwID09IG51bGwgPyB2b2lkIDAgOiByZWNvcmRNYXAucHJldmlld19pbWFnZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYjJbbm9ybWFsaXplVXJsKHNyYyldIDogbnVsbDtcbiAgY29uc3Qgb25Mb2FkID0gUmVhY3Q0LnVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoem9vbWFibGUgJiYgKGUudGFyZ2V0LnNyYyB8fCBlLnRhcmdldC5zcmNzZXQpKSB7XG4gICAgICAgIGlmICh6b29tUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICA7XG4gICAgICAgICAgem9vbVJlZi5jdXJyZW50LmF0dGFjaChlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFt6b29tUmVmLCB6b29tYWJsZV1cbiAgKTtcbiAgY29uc3QgYXR0YWNoWm9vbSA9IFJlYWN0NC51c2VDYWxsYmFjayhcbiAgICAoaW1hZ2UpID0+IHtcbiAgICAgIGlmICh6b29tUmVmLmN1cnJlbnQgJiYgaW1hZ2UpIHtcbiAgICAgICAgO1xuICAgICAgICB6b29tUmVmLmN1cnJlbnQuYXR0YWNoKGltYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFt6b29tUmVmXVxuICApO1xuICBjb25zdCBhdHRhY2hab29tUmVmID0gUmVhY3Q0LnVzZU1lbW8oXG4gICAgKCkgPT4gem9vbWFibGUgPyBhdHRhY2hab29tIDogdm9pZCAwLFxuICAgIFt6b29tYWJsZSwgYXR0YWNoWm9vbV1cbiAgKTtcbiAgaWYgKHByZXZpZXdJbWFnZSkge1xuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gcHJldmlld0ltYWdlLm9yaWdpbmFsSGVpZ2h0IC8gcHJldmlld0ltYWdlLm9yaWdpbmFsV2lkdGg7XG4gICAgaWYgKGNvbXBvbmVudHMuSW1hZ2UpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5JbWFnZSwge1xuICAgICAgICBzcmMsXG4gICAgICAgIGFsdCxcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgd2lkdGg6IHByZXZpZXdJbWFnZS5vcmlnaW5hbFdpZHRoLFxuICAgICAgICBoZWlnaHQ6IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgYmx1ckRhdGFVUkw6IHByZXZpZXdJbWFnZS5kYXRhVVJJQmFzZTY0LFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJibHVyXCIsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBvbkxvYWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KExhenlJbWFnZUZ1bGwsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgc3JjXG4gICAgfSwgcmVzdCksIHtcbiAgICAgIGV4cGVyaW1lbnRhbERlY29kZTogdHJ1ZVxuICAgIH0pLCAoeyBpbWFnZVN0YXRlLCByZWYgfSkgPT4ge1xuICAgICAgY29uc3QgaXNMb2FkZWQgPSBpbWFnZVN0YXRlID09PSBJbWFnZVN0YXRlLkxvYWRTdWNjZXNzO1xuICAgICAgY29uc3Qgd3JhcHBlclN0eWxlID0ge1xuICAgICAgICB3aWR0aDogXCIxMDAlXCJcbiAgICAgIH07XG4gICAgICBjb25zdCBpbWdTdHlsZSA9IHt9O1xuICAgICAgaWYgKGhlaWdodCkge1xuICAgICAgICB3cmFwcGVyU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW1nU3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIHdyYXBwZXJTdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7YXNwZWN0UmF0aW8gKiAxMDB9JWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICBcImxhenktaW1hZ2Utd3JhcHBlclwiLFxuICAgICAgICAgIGlzTG9hZGVkICYmIFwibGF6eS1pbWFnZS1sb2FkZWRcIixcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKSxcbiAgICAgICAgc3R5bGU6IHdyYXBwZXJTdHlsZVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxhenktaW1hZ2UtcHJldmlld1wiLFxuICAgICAgICBzcmM6IHByZXZpZXdJbWFnZS5kYXRhVVJJQmFzZTY0LFxuICAgICAgICBhbHQsXG4gICAgICAgIHJlZixcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCJcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibGF6eS1pbWFnZS1yZWFsXCIsXG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICByZWY6IGF0dGFjaFpvb21SZWYsXG4gICAgICAgIHN0eWxlOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3R5bGUpLCBpbWdTdHlsZSksXG4gICAgICAgIHdpZHRoOiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxIZWlnaHQsXG4gICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCIsXG4gICAgICAgIGxvYWRpbmc6IFwibGF6eVwiXG4gICAgICB9KSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGNvbXBvbmVudHMuSW1hZ2UgJiYgZm9yY2VDdXN0b21JbWFnZXMpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5JbWFnZSwge1xuICAgICAgICBzcmMsXG4gICAgICAgIGFsdCxcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZSxcbiAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBvbkxvYWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgcmVmOiBhdHRhY2hab29tUmVmLFxuICAgICAgbG9hZGluZzogXCJsYXp5XCIsXG4gICAgICBkZWNvZGluZzogXCJhc3luY1wiXG4gICAgfSwgcmVzdCkpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDYgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRCbG9ja0ljb24sIGdldEJsb2NrVGl0bGUgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9pY29ucy9kZWZhdWx0LXBhZ2UtaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NSBmcm9tIFwicmVhY3RcIjtcbnZhciBEZWZhdWx0UGFnZUljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgIGNsYXNzTmFtZVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDMwIDMwXCIsXG4gICAgd2lkdGg6IFwiMTZcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTYsMUg0djI4aDIyVjExTDE2LDF6IE0xNiwzLjgyOEwyMy4xNzIsMTFIMTZWMy44Mjh6IE0yNCwyN0g2VjNoOHYxMGgxMFYyN3ogTTgsMTdoMTR2LTJIOFYxN3ogTTgsMjFoMTR2LTJIOFYyMXogTTgsMjVoMTR2LTJIOFYyNXpcIlxuICB9KSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLWljb24udHN4XG52YXIgaXNJY29uQmxvY2sgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIHZhbHVlLnR5cGUgPT09IFwicGFnZVwiIHx8IHZhbHVlLnR5cGUgPT09IFwiY2FsbG91dFwiIHx8IHZhbHVlLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3XCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiO1xufTtcbnZhciBQYWdlSWNvbkltcGwgPSAoe1xuICBibG9jayxcbiAgY2xhc3NOYW1lLFxuICBpbmxpbmUgPSB0cnVlLFxuICBoaWRlRGVmYXVsdEljb24gPSBmYWxzZSxcbiAgZGVmYXVsdEljb25cbn0pID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCB7IG1hcEltYWdlVXJsLCByZWNvcmRNYXAsIGRhcmtNb2RlIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGxldCBpc0ltYWdlID0gZmFsc2U7XG4gIGxldCBjb250ZW50ID0gbnVsbDtcbiAgaWYgKGlzSWNvbkJsb2NrKGJsb2NrKSkge1xuICAgIGNvbnN0IGljb24gPSAoKF9hID0gZ2V0QmxvY2tJY29uKGJsb2NrLCByZWNvcmRNYXApKSA9PSBudWxsID8gdm9pZCAwIDogX2EudHJpbSgpKSB8fCBkZWZhdWx0SWNvbjtcbiAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKGljb24gJiYgaXNVcmwoaWNvbikpIHtcbiAgICAgIGNvbnN0IHVybCA9IG1hcEltYWdlVXJsKGljb24sIGJsb2NrKTtcbiAgICAgIGlzSW1hZ2UgPSB0cnVlO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgc3JjOiB1cmwsXG4gICAgICAgIGFsdDogdGl0bGUgfHwgXCJwYWdlIGljb25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpY29uICYmIGljb24uc3RhcnRzV2l0aChcIi9pY29ucy9cIikpIHtcbiAgICAgIGNvbnN0IHVybCA9IFwiaHR0cHM6Ly93d3cubm90aW9uLnNvXCIgKyBpY29uICsgXCI/bW9kZT1cIiArIChkYXJrTW9kZSA/IFwiZGFya1wiIDogXCJsaWdodFwiKTtcbiAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICAgIHNyYzogdXJsLFxuICAgICAgICBhbHQ6IHRpdGxlIHx8IFwicGFnZSBpY29uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIilcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIWljb24pIHtcbiAgICAgIGlmICghaGlkZURlZmF1bHRJY29uKSB7XG4gICAgICAgIGlzSW1hZ2UgPSB0cnVlO1xuICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KERlZmF1bHRQYWdlSWNvbiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIiksXG4gICAgICAgICAgYWx0OiB0aXRsZSA/IHRpdGxlIDogXCJwYWdlIGljb25cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXNJbWFnZSA9IGZhbHNlO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IGNzKGNsYXNzTmFtZSwgXCJub3Rpb24tcGFnZS1pY29uXCIpLFxuICAgICAgICByb2xlOiBcImltZ1wiLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogaWNvblxuICAgICAgfSwgaWNvbik7XG4gICAgfVxuICB9XG4gIGlmICghY29udGVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBpbmxpbmUgPyBcIm5vdGlvbi1wYWdlLWljb24taW5saW5lXCIgOiBcIm5vdGlvbi1wYWdlLWljb24taGVyb1wiLFxuICAgICAgaXNJbWFnZSA/IFwibm90aW9uLXBhZ2UtaWNvbi1pbWFnZVwiIDogXCJub3Rpb24tcGFnZS1pY29uLXNwYW5cIlxuICAgIClcbiAgfSwgY29udGVudCk7XG59O1xudmFyIFBhZ2VJY29uID0gUmVhY3Q2Lm1lbW8oUGFnZUljb25JbXBsKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFnZS10aXRsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldEJsb2NrVGl0bGUgYXMgZ2V0QmxvY2tUaXRsZTIgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG52YXIgUGFnZVRpdGxlSW1wbCA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwgeyBibG9jaywgY2xhc3NOYW1lLCBkZWZhdWx0SWNvbiB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcImJsb2NrXCIsIFwiY2xhc3NOYW1lXCIsIFwiZGVmYXVsdEljb25cIl0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2spXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZTIoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKCF0aXRsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRpdGxlRGVjb3JhdGlvbiA9IFtbdGl0bGVdXTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKVxuICAgIH0sIHJlc3QpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoUGFnZUljb24sIHtcbiAgICAgIGJsb2NrLFxuICAgICAgZGVmYXVsdEljb24sXG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLXBhZ2UtdGl0bGUtaWNvblwiXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIlxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICB2YWx1ZTogdGl0bGVEZWNvcmF0aW9uLFxuICAgICAgYmxvY2tcbiAgICB9KSkpO1xuICB9XG4gIGlmICghKChfYTIgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnRpdGxlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgYmxvY2ssXG4gICAgZGVmYXVsdEljb24sXG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLWljb25cIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgIHZhbHVlOiAoX2IyID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50aXRsZSxcbiAgICBibG9ja1xuICB9KSkpO1xufTtcbnZhciBQYWdlVGl0bGUgPSBSZWFjdDcubWVtbyhQYWdlVGl0bGVJbXBsKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvaGVhZGVyLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMiBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldFBhZ2VCcmVhZGNydW1icyB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCB7IHVzZUhvdGtleXMgfSBmcm9tIFwicmVhY3QtaG90a2V5cy1ob29rXCI7XG5cbi8vIHNyYy9pY29ucy9zZWFyY2gtaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0OCBmcm9tIFwicmVhY3RcIjtcbnZhciBTZWFyY2hJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSksXG4gICAgdmlld0JveDogXCIwIDAgMTcgMTdcIlxuICB9LCByZXN0KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNi43ODAyNyAxMy42NzI5QzguMjQ4MDUgMTMuNjcyOSA5LjYwMTU2IDEzLjE5ODIgMTAuNzA5IDEyLjQwNzJMMTQuODc1IDE2LjU3MzJDMTUuMDY4NCAxNi43NjY2IDE1LjMyMzIgMTYuODYzMyAxNS41OTU3IDE2Ljg2MzNDMTYuMTY3IDE2Ljg2MzMgMTYuNTcxMyAxNi40MjM4IDE2LjU3MTMgMTUuODYxM0MxNi41NzEzIDE1LjU5NzcgMTYuNDgzNCAxNS4zNTE2IDE2LjI5IDE1LjE1ODJMMTIuMTUwNCAxMS4wMDk4QzEzLjAyMDUgOS44NjcxOSAxMy41MzkxIDguNDUyMTUgMTMuNTM5MSA2LjkxNDA2QzEzLjUzOTEgMy4xOTYyOSAxMC40OTggMC4xNTUyNzMgNi43ODAyNyAwLjE1NTI3M0MzLjA2MjUgMC4xNTUyNzMgMC4wMjE0ODQ0IDMuMTk2MjkgMC4wMjE0ODQ0IDYuOTE0MDZDMC4wMjE0ODQ0IDEwLjYzMTggMy4wNjI1IDEzLjY3MjkgNi43ODAyNyAxMy42NzI5Wk02Ljc4MDI3IDEyLjIxMzlDMy44Nzk4OCAxMi4yMTM5IDEuNDgwNDcgOS44MTQ0NSAxLjQ4MDQ3IDYuOTE0MDZDMS40ODA0NyA0LjAxMzY3IDMuODc5ODggMS42MTQyNiA2Ljc4MDI3IDEuNjE0MjZDOS42ODA2NiAxLjYxNDI2IDEyLjA4MDEgNC4wMTM2NyAxMi4wODAxIDYuOTE0MDZDMTIuMDgwMSA5LjgxNDQ1IDkuNjgwNjYgMTIuMjEzOSA2Ljc4MDI3IDEyLjIxMzlaXCJcbiAgfSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvc2VhcmNoLWRpYWxvZy50c3hcbnZhciBpbXBvcnRfbG9kYXNoID0gX190b0VTTShyZXF1aXJlX2xvZGFzaCgpLCAxKTtcbmltcG9ydCAqIGFzIFJlYWN0MTEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRCbG9ja1BhcmVudFBhZ2UsIGdldEJsb2NrVGl0bGUgYXMgZ2V0QmxvY2tUaXRsZTMgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9pY29ucy9jbGVhci1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q5IGZyb20gXCJyZWFjdFwiO1xudmFyIENsZWFySWNvbiA9IChwcm9wcykgPT4ge1xuICBjb25zdCBfYSA9IHByb3BzLCB7IGNsYXNzTmFtZSB9ID0gX2EsIHJlc3QgPSBfX29ialJlc3QoX2EsIFtcImNsYXNzTmFtZVwiXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAzMCAzMFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNSwwQzYuNzE2LDAsMCw2LjcxNiwwLDE1czYuNzE2LDE1LDE1LDE1czE1LTYuNzE2LDE1LTE1UzIzLjI4NCwwLDE1LDB6IE0yMiwyMC42TDIwLjYsMjJMMTUsMTYuNEw5LjQsMjJMOCwyMC42bDUuNi01LjYgTDgsOS40TDkuNCw4bDUuNiw1LjZMMjAuNiw4TDIyLDkuNEwxNi40LDE1TDIyLDIwLjZ6XCJcbiAgfSkpO1xufTtcblxuLy8gc3JjL2ljb25zL2xvYWRpbmctaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG52YXIgTG9hZGluZ0ljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJkZWZzXCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJsaW5lYXJHcmFkaWVudFwiLCB7XG4gICAgeDE6IFwiMjguMTU0Mjk2OSVcIixcbiAgICB5MTogXCI2My43NDAyMzQ0JVwiLFxuICAgIHgyOiBcIjc0LjYyODkwNjIlXCIsXG4gICAgeTI6IFwiMTcuNzgzMjAzMSVcIixcbiAgICBpZDogXCJsaW5lYXJHcmFkaWVudC0xXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcInN0b3BcIiwge1xuICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgb2Zmc2V0OiBcIjAlXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJzdG9wXCIsIHtcbiAgICBzdG9wQ29sb3I6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAwKVwiLFxuICAgIHN0b3BPcGFjaXR5OiBcIjBcIixcbiAgICBvZmZzZXQ6IFwiMTAwJVwiXG4gIH0pKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBpZDogXCJQYWdlLTFcIixcbiAgICBzdHJva2U6IFwibm9uZVwiLFxuICAgIHN0cm9rZVdpZHRoOiBcIjFcIixcbiAgICBmaWxsOiBcIm5vbmVcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtMjM2LjAwMDAwMCwgLTI4Ni4wMDAwMDApXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMjM4LjAwMDAwMCwgMjg2LjAwMDAwMClcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiY2lyY2xlXCIsIHtcbiAgICBpZDogXCJPdmFsLTJcIixcbiAgICBzdHJva2U6IFwidXJsKCNsaW5lYXJHcmFkaWVudC0xKVwiLFxuICAgIHN0cm9rZVdpZHRoOiBcIjRcIixcbiAgICBjeDogXCIxMFwiLFxuICAgIGN5OiBcIjEyXCIsXG4gICAgcjogXCIxMFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTAsMiBDNC40NzcxNTI1LDIgMCw2LjQ3NzE1MjUgMCwxMlwiLFxuICAgIGlkOiBcIk92YWwtMlwiLFxuICAgIHN0cm9rZTogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgc3Ryb2tlV2lkdGg6IFwiNFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgaWQ6IFwiUmVjdGFuZ2xlLTFcIixcbiAgICBmaWxsOiBcInJnYmEoMTY0LCAxNjQsIDE2NCwgMSlcIixcbiAgICB4OiBcIjhcIixcbiAgICB5OiBcIjBcIixcbiAgICB3aWR0aDogXCI0XCIsXG4gICAgaGVpZ2h0OiBcIjRcIixcbiAgICByeDogXCI4XCJcbiAgfSkpKSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvc2VhcmNoLWRpYWxvZy50c3hcbnZhciBTZWFyY2hEaWFsb2cgPSBjbGFzcyBleHRlbmRzIFJlYWN0MTEuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBxdWVyeTogXCJcIixcbiAgICAgIHNlYXJjaFJlc3VsdDogbnVsbCxcbiAgICAgIHNlYXJjaEVycm9yOiBudWxsXG4gICAgfTtcbiAgICB0aGlzLl9vbkFmdGVyT3BlbiA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX29uQ2hhbmdlUXVlcnkgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBxdWVyeSB9KTtcbiAgICAgIGlmICghcXVlcnkudHJpbSgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IGZhbHNlLCBzZWFyY2hSZXN1bHQ6IG51bGwsIHNlYXJjaEVycm9yOiBudWxsIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZWFyY2goKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX29uQ2xlYXJRdWVyeSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX29uQ2hhbmdlUXVlcnkoeyB0YXJnZXQ6IHsgdmFsdWU6IFwiXCIgfSB9KTtcbiAgICB9O1xuICAgIHRoaXMuX3dhcm11cFNlYXJjaCA9ICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIHlpZWxkIHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5OiBcIlwiLFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2VhcmNoSW1wbCA9ICgpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHsgcXVlcnkgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0OiBudWxsLCBzZWFyY2hFcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcInNlYXJjaFwiLCBxdWVyeSwgcmVzdWx0KTtcbiAgICAgIGxldCBzZWFyY2hSZXN1bHQgPSBudWxsO1xuICAgICAgbGV0IHNlYXJjaEVycm9yID0gbnVsbDtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3IgfHwgcmVzdWx0LmVycm9ySWQpIHtcbiAgICAgICAgc2VhcmNoRXJyb3IgPSByZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWFyY2hSZXN1bHQgPSBfX3NwcmVhZFZhbHVlcyh7fSwgcmVzdWx0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHNlYXJjaFJlc3VsdC5yZXN1bHRzLm1hcCgocmVzdWx0MikgPT4ge1xuICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgY29uc3QgYmxvY2sgPSAoX2EgPSBzZWFyY2hSZXN1bHQucmVjb3JkTWFwLmJsb2NrW3Jlc3VsdDIuaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgICAgICAgaWYgKCFibG9jaylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUzKGJsb2NrLCBzZWFyY2hSZXN1bHQucmVjb3JkTWFwKTtcbiAgICAgICAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdDIudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICByZXN1bHQyLmJsb2NrID0gYmxvY2s7XG4gICAgICAgICAgcmVzdWx0Mi5yZWNvcmRNYXAgPSBzZWFyY2hSZXN1bHQucmVjb3JkTWFwO1xuICAgICAgICAgIHJlc3VsdDIucGFnZSA9IGdldEJsb2NrUGFyZW50UGFnZShibG9jaywgc2VhcmNoUmVzdWx0LnJlY29yZE1hcCwge1xuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlXG4gICAgICAgICAgfSkgfHwgYmxvY2s7XG4gICAgICAgICAgaWYgKCFyZXN1bHQyLnBhZ2UuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChfYiA9IHJlc3VsdDIuaGlnaGxpZ2h0KSA9PSBudWxsID8gdm9pZCAwIDogX2IudGV4dCkge1xuICAgICAgICAgICAgcmVzdWx0Mi5oaWdobGlnaHQuaHRtbCA9IHJlc3VsdDIuaGlnaGxpZ2h0LnRleHQucmVwbGFjZSgvPGd6a05mb1VVPi9naSwgXCI8Yj5cIikucmVwbGFjZSgvPFxcL2d6a05mb1VVPi9naSwgXCI8L2I+XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0MjtcbiAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzTWFwID0gcmVzdWx0cy5yZWR1Y2UoXG4gICAgICAgICAgKG1hcCwgcmVzdWx0MikgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWFwKSwge1xuICAgICAgICAgICAgW3Jlc3VsdDIucGFnZS5pZF06IHJlc3VsdDJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7fVxuICAgICAgICApO1xuICAgICAgICBzZWFyY2hSZXN1bHQucmVzdWx0cyA9IE9iamVjdC52YWx1ZXMoc2VhcmNoUmVzdWx0c01hcCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGF0ZS5xdWVyeSA9PT0gcXVlcnkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHNlYXJjaFJlc3VsdCwgc2VhcmNoRXJyb3IgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRSZWYgPSBSZWFjdDExLmNyZWF0ZVJlZigpO1xuICB9XG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuX3NlYXJjaCA9ICgwLCBpbXBvcnRfbG9kYXNoLmRlZmF1bHQpKHRoaXMuX3NlYXJjaEltcGwuYmluZCh0aGlzKSwgMWUzKTtcbiAgICB0aGlzLl93YXJtdXBTZWFyY2goKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBpc09wZW4sIG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBpc0xvYWRpbmcsIHF1ZXJ5LCBzZWFyY2hSZXN1bHQsIHNlYXJjaEVycm9yIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGhhc1F1ZXJ5ID0gISFxdWVyeS50cmltKCk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoTm90aW9uQ29udGV4dENvbnN1bWVyLCBudWxsLCAoY3R4MikgPT4ge1xuICAgICAgY29uc3QgeyBjb21wb25lbnRzLCBkZWZhdWx0UGFnZUljb24sIG1hcFBhZ2VVcmwgfSA9IGN0eDI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLk1vZGFsLCB7XG4gICAgICAgIGlzT3BlbixcbiAgICAgICAgY29udGVudExhYmVsOiBcIlNlYXJjaFwiLFxuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaFwiLFxuICAgICAgICBvdmVybGF5Q2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2gtb3ZlcmxheVwiLFxuICAgICAgICBvblJlcXVlc3RDbG9zZTogb25DbG9zZSxcbiAgICAgICAgb25BZnRlck9wZW46IHRoaXMuX29uQWZ0ZXJPcGVuXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInF1aWNrRmluZE1lbnVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJzZWFyY2hCYXJcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJpbmxpbmVJY29uXCJcbiAgICAgIH0sIGlzTG9hZGluZyA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoTG9hZGluZ0ljb24sIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxvYWRpbmdJY29uXCJcbiAgICAgIH0pIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChTZWFyY2hJY29uLCBudWxsKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJzZWFyY2hJbnB1dFwiLFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJTZWFyY2hcIixcbiAgICAgICAgdmFsdWU6IHF1ZXJ5LFxuICAgICAgICByZWY6IHRoaXMuX2lucHV0UmVmLFxuICAgICAgICBvbkNoYW5nZTogdGhpcy5fb25DaGFuZ2VRdWVyeVxuICAgICAgfSksIHF1ZXJ5ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzc05hbWU6IFwiY2xlYXJCdXR0b25cIixcbiAgICAgICAgb25DbGljazogdGhpcy5fb25DbGVhclF1ZXJ5XG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KENsZWFySWNvbiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiY2xlYXJJY29uXCJcbiAgICAgIH0pKSksIGhhc1F1ZXJ5ICYmIHNlYXJjaFJlc3VsdCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFJlYWN0MTEuRnJhZ21lbnQsIG51bGwsIHNlYXJjaFJlc3VsdC5yZXN1bHRzLmxlbmd0aCA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoTm90aW9uQ29udGV4dFByb3ZpZGVyLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjdHgyKSwge1xuICAgICAgICByZWNvcmRNYXA6IHNlYXJjaFJlc3VsdC5yZWNvcmRNYXBcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInJlc3VsdHNQYW5lXCJcbiAgICAgIH0sIHNlYXJjaFJlc3VsdC5yZXN1bHRzLm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgICAgIGtleTogcmVzdWx0LmlkLFxuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXCJyZXN1bHRcIiwgXCJub3Rpb24tcGFnZS1saW5rXCIpLFxuICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoXG4gICAgICAgICAgICByZXN1bHQucGFnZS5pZCxcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXBcbiAgICAgICAgICApXG4gICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgYmxvY2s6IHJlc3VsdC5wYWdlLFxuICAgICAgICAgIGRlZmF1bHRJY29uOiBkZWZhdWx0UGFnZUljb25cbiAgICAgICAgfSksICgoX2EgPSByZXN1bHQuaGlnaGxpZ2h0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuaHRtbCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2gtcmVzdWx0LWhpZ2hsaWdodFwiLFxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICAgICAgICBfX2h0bWw6IHJlc3VsdC5oaWdobGlnaHQuaHRtbFxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZm9vdGVyXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInJlc3VsdHNGb290ZXJcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyZXN1bHRzQ291bnRcIlxuICAgICAgfSwgc2VhcmNoUmVzdWx0LnRvdGFsKSwgc2VhcmNoUmVzdWx0LnRvdGFsID09PSAxID8gXCIgcmVzdWx0XCIgOiBcIiByZXN1bHRzXCIpKSkgOiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1BhbmVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNcIlxuICAgICAgfSwgXCJObyByZXN1bHRzXCIpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c0RldGFpbFwiXG4gICAgICB9LCBcIlRyeSBkaWZmZXJlbnQgc2VhcmNoIHRlcm1zXCIpKSksIGhhc1F1ZXJ5ICYmICFzZWFyY2hSZXN1bHQgJiYgc2VhcmNoRXJyb3IgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNQYW5lXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzXCJcbiAgICAgIH0sIFwiU2VhcmNoIGVycm9yXCIpKSkpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9oZWFkZXIudHN4XG52YXIgSGVhZGVyID0gKHsgYmxvY2sgfSkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImhlYWRlclwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1oZWFkZXJcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLW5hdi1oZWFkZXJcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KEJyZWFkY3J1bWJzLCB7XG4gICAgYmxvY2tcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoU2VhcmNoLCB7XG4gICAgYmxvY2tcbiAgfSkpKTtcbn07XG52YXIgQnJlYWRjcnVtYnMgPSAoeyBibG9jaywgcm9vdE9ubHkgPSBmYWxzZSB9KSA9PiB7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCBtYXBQYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gUmVhY3QxMi51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBicmVhZGNydW1iczIgPSBnZXRQYWdlQnJlYWRjcnVtYnMocmVjb3JkTWFwLCBibG9jay5pZCk7XG4gICAgaWYgKHJvb3RPbmx5KSB7XG4gICAgICByZXR1cm4gW2JyZWFkY3J1bWJzMlswXV0uZmlsdGVyKEJvb2xlYW4pO1xuICAgIH1cbiAgICByZXR1cm4gYnJlYWRjcnVtYnMyO1xuICB9LCBbcmVjb3JkTWFwLCBibG9jay5pZCwgcm9vdE9ubHldKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJicmVhZGNydW1ic1wiLFxuICAgIGtleTogXCJicmVhZGNydW1ic1wiXG4gIH0sIGJyZWFkY3J1bWJzLm1hcCgoYnJlYWRjcnVtYiwgaW5kZXgpID0+IHtcbiAgICBpZiAoIWJyZWFkY3J1bWIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBwYWdlTGlua1Byb3BzID0ge307XG4gICAgY29uc3QgY29tcG9uZW50TWFwID0ge1xuICAgICAgcGFnZUxpbms6IGNvbXBvbmVudHMuUGFnZUxpbmtcbiAgICB9O1xuICAgIGlmIChicmVhZGNydW1iLmFjdGl2ZSkge1xuICAgICAgY29tcG9uZW50TWFwLnBhZ2VMaW5rID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlTGlua1Byb3BzLmhyZWYgPSBtYXBQYWdlVXJsKGJyZWFkY3J1bWIucGFnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwge1xuICAgICAga2V5OiBicmVhZGNydW1iLnBhZ2VJZFxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TWFwLnBhZ2VMaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IGNzKFwiYnJlYWRjcnVtYlwiLCBicmVhZGNydW1iLmFjdGl2ZSAmJiBcImFjdGl2ZVwiKVxuICAgIH0sIHBhZ2VMaW5rUHJvcHMpLCBicmVhZGNydW1iLmljb24gJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChQYWdlSWNvbiwge1xuICAgICAgY2xhc3NOYW1lOiBcImljb25cIixcbiAgICAgIGJsb2NrOiBicmVhZGNydW1iLmJsb2NrXG4gICAgfSksIGJyZWFkY3J1bWIudGl0bGUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInRpdGxlXCJcbiAgICB9LCBicmVhZGNydW1iLnRpdGxlKSksIGluZGV4IDwgYnJlYWRjcnVtYnMubGVuZ3RoIC0gMSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3BhY2VyXCJcbiAgICB9LCBcIi9cIikpO1xuICB9KSk7XG59O1xudmFyIFNlYXJjaCA9ICh7IGJsb2NrLCBzZWFyY2gsIHRpdGxlID0gXCJTZWFyY2hcIiB9KSA9PiB7XG4gIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290UGFnZUlkLCBpc1Nob3dpbmdTZWFyY2gsIG9uSGlkZVNlYXJjaCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCBvblNlYXJjaE5vdGlvbiA9IHNlYXJjaCB8fCBzZWFyY2hOb3Rpb247XG4gIGNvbnN0IFtpc1NlYXJjaE9wZW4sIHNldElzU2VhcmNoT3Blbl0gPSBSZWFjdDEyLnVzZVN0YXRlKGlzU2hvd2luZ1NlYXJjaCk7XG4gIFJlYWN0MTIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4oaXNTaG93aW5nU2VhcmNoKTtcbiAgfSwgW2lzU2hvd2luZ1NlYXJjaF0pO1xuICBjb25zdCBvbk9wZW5TZWFyY2ggPSBSZWFjdDEyLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgb25DbG9zZVNlYXJjaCA9IFJlYWN0MTIudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzU2VhcmNoT3BlbihmYWxzZSk7XG4gICAgaWYgKG9uSGlkZVNlYXJjaCkge1xuICAgICAgb25IaWRlU2VhcmNoKCk7XG4gICAgfVxuICB9LCBbb25IaWRlU2VhcmNoXSk7XG4gIHVzZUhvdGtleXMoXCJjbWQrcFwiLCAoZXZlbnQpID0+IHtcbiAgICBvbk9wZW5TZWFyY2goKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcbiAgdXNlSG90a2V5cyhcImNtZCtrXCIsIChldmVudCkgPT4ge1xuICAgIG9uT3BlblNlYXJjaCgpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuICBjb25zdCBoYXNTZWFyY2ggPSAhIW9uU2VhcmNoTm90aW9uO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCBoYXNTZWFyY2ggJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcm9sZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IGNzKFwiYnJlYWRjcnVtYlwiLCBcImJ1dHRvblwiLCBcIm5vdGlvbi1zZWFyY2gtYnV0dG9uXCIpLFxuICAgIG9uQ2xpY2s6IG9uT3BlblNlYXJjaFxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFNlYXJjaEljb24sIHtcbiAgICBjbGFzc05hbWU6IFwic2VhcmNoSWNvblwiXG4gIH0pLCB0aXRsZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInRpdGxlXCJcbiAgfSwgdGl0bGUpKSwgaXNTZWFyY2hPcGVuICYmIGhhc1NlYXJjaCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFNlYXJjaERpYWxvZywge1xuICAgIGlzT3BlbjogaXNTZWFyY2hPcGVuLFxuICAgIHJvb3RCbG9ja0lkOiByb290UGFnZUlkIHx8IChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suaWQpLFxuICAgIG9uQ2xvc2U6IG9uQ2xvc2VTZWFyY2gsXG4gICAgc2VhcmNoTm90aW9uOiBvblNlYXJjaE5vdGlvblxuICB9KSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9hc3NldC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTQgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRUZXh0Q29udGVudCB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGl0ZS15b3V0dWJlLWVtYmVkLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMyBmcm9tIFwicmVhY3RcIjtcbnZhciBxcyA9IChwYXJhbXMpID0+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgIChrZXkpID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSl9YFxuICApLmpvaW4oXCImXCIpO1xufTtcbnZhciBMaXRlWW91VHViZUVtYmVkID0gKHtcbiAgaWQsXG4gIGRlZmF1bHRQbGF5ID0gZmFsc2UsXG4gIG11dGUgPSBmYWxzZSxcbiAgbGF6eUltYWdlID0gZmFsc2UsXG4gIGlmcmFtZVRpdGxlID0gXCJZb3VUdWJlIHZpZGVvXCIsXG4gIGFsdCA9IFwiVmlkZW8gcHJldmlld1wiLFxuICBwYXJhbXMgPSB7fSxcbiAgYWRMaW5rc1ByZWNvbm5lY3QgPSB0cnVlLFxuICBzdHlsZSxcbiAgY2xhc3NOYW1lXG59KSA9PiB7XG4gIGNvbnN0IG11dGVQYXJhbSA9IG11dGUgfHwgZGVmYXVsdFBsYXkgPyBcIjFcIiA6IFwiMFwiO1xuICBjb25zdCBxdWVyeVN0cmluZyA9IFJlYWN0MTMudXNlTWVtbyhcbiAgICAoKSA9PiBxcyhfX3NwcmVhZFZhbHVlcyh7IGF1dG9wbGF5OiBcIjFcIiwgbXV0ZTogbXV0ZVBhcmFtIH0sIHBhcmFtcykpLFxuICAgIFttdXRlUGFyYW0sIHBhcmFtc11cbiAgKTtcbiAgY29uc3QgcmVzb2x1dGlvbiA9IFwiaHFkZWZhdWx0XCI7XG4gIGNvbnN0IHBvc3RlclVybCA9IGBodHRwczovL2kueXRpbWcuY29tL3ZpLyR7aWR9LyR7cmVzb2x1dGlvbn0uanBnYDtcbiAgY29uc3QgeXRVcmwgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUtbm9jb29raWUuY29tXCI7XG4gIGNvbnN0IGlmcmFtZVNyYyA9IGAke3l0VXJsfS9lbWJlZC8ke2lkfT8ke3F1ZXJ5U3RyaW5nfWA7XG4gIGNvbnN0IFtpc1ByZWNvbm5lY3RlZCwgc2V0SXNQcmVjb25uZWN0ZWRdID0gUmVhY3QxMy51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpZnJhbWVJbml0aWFsaXplZCwgc2V0SWZyYW1lSW5pdGlhbGl6ZWRdID0gUmVhY3QxMy51c2VTdGF0ZShkZWZhdWx0UGxheSk7XG4gIGNvbnN0IFtpc0lmcmFtZUxvYWRlZCwgc2V0SXNJZnJhbWVMb2FkZWRdID0gUmVhY3QxMy51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHdhcm1Db25uZWN0aW9ucyA9IFJlYWN0MTMudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpc1ByZWNvbm5lY3RlZClcbiAgICAgIHJldHVybjtcbiAgICBzZXRJc1ByZWNvbm5lY3RlZCh0cnVlKTtcbiAgfSwgW2lzUHJlY29ubmVjdGVkXSk7XG4gIGNvbnN0IG9uTG9hZElmcmFtZSA9IFJlYWN0MTMudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpZnJhbWVJbml0aWFsaXplZClcbiAgICAgIHJldHVybjtcbiAgICBzZXRJZnJhbWVJbml0aWFsaXplZCh0cnVlKTtcbiAgfSwgW2lmcmFtZUluaXRpYWxpemVkXSk7XG4gIGNvbnN0IG9uSWZyYW1lTG9hZGVkID0gUmVhY3QxMy51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNJZnJhbWVMb2FkZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMy5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVsb2FkXCIsXG4gICAgaHJlZjogcG9zdGVyVXJsLFxuICAgIGFzOiBcImltYWdlXCJcbiAgfSksIGlzUHJlY29ubmVjdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMy5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVjb25uZWN0XCIsXG4gICAgaHJlZjogeXRVcmxcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlY29ubmVjdFwiLFxuICAgIGhyZWY6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbVwiXG4gIH0pKSwgaXNQcmVjb25uZWN0ZWQgJiYgYWRMaW5rc1ByZWNvbm5lY3QgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChSZWFjdDEzLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiBcImh0dHBzOi8vc3RhdGljLmRvdWJsZWNsaWNrLm5ldFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiBcImh0dHBzOi8vZ29vZ2xlYWRzLmcuZG91YmxlY2xpY2submV0XCJcbiAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBvbkNsaWNrOiBvbkxvYWRJZnJhbWUsXG4gICAgb25Qb2ludGVyT3Zlcjogd2FybUNvbm5lY3Rpb25zLFxuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi15dC1saXRlXCIsXG4gICAgICBpc0lmcmFtZUxvYWRlZCAmJiBcIm5vdGlvbi15dC1sb2FkZWRcIixcbiAgICAgIGlmcmFtZUluaXRpYWxpemVkICYmIFwibm90aW9uLXl0LWluaXRpYWxpemVkXCIsXG4gICAgICBjbGFzc05hbWVcbiAgICApLFxuICAgIHN0eWxlXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgIHNyYzogcG9zdGVyVXJsLFxuICAgIGNsYXNzTmFtZTogXCJub3Rpb24teXQtdGh1bWJuYWlsXCIsXG4gICAgbG9hZGluZzogbGF6eUltYWdlID8gXCJsYXp5XCIgOiB2b2lkIDAsXG4gICAgYWx0XG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXl0LXBsYXlidG5cIlxuICB9KSwgaWZyYW1lSW5pdGlhbGl6ZWQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiLCB7XG4gICAgd2lkdGg6IFwiNTYwXCIsXG4gICAgaGVpZ2h0OiBcIjMxNVwiLFxuICAgIGZyYW1lQm9yZGVyOiBcIjBcIixcbiAgICBhbGxvdzogXCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVwiLFxuICAgIGFsbG93RnVsbFNjcmVlbjogdHJ1ZSxcbiAgICB0aXRsZTogaWZyYW1lVGl0bGUsXG4gICAgc3JjOiBpZnJhbWVTcmMsXG4gICAgb25Mb2FkOiBvbklmcmFtZUxvYWRlZFxuICB9KSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXNzZXQudHN4XG52YXIgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xudmFyIHN1cHBvcnRlZEFzc2V0VHlwZXMgPSBbXG4gIFwidmlkZW9cIixcbiAgXCJpbWFnZVwiLFxuICBcImVtYmVkXCIsXG4gIFwiZmlnbWFcIixcbiAgXCJ0eXBlZm9ybVwiLFxuICBcImV4Y2FsaWRyYXdcIixcbiAgXCJtYXBzXCIsXG4gIFwidHdlZXRcIixcbiAgXCJwZGZcIixcbiAgXCJnaXN0XCIsXG4gIFwiY29kZXBlblwiLFxuICBcImRyaXZlXCJcbl07XG52YXIgQXNzZXQgPSAoeyBibG9jaywgem9vbWFibGUgPSB0cnVlLCBjaGlsZHJlbiB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfajtcbiAgY29uc3QgeyByZWNvcmRNYXAsIG1hcEltYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2sgfHwgIXN1cHBvcnRlZEFzc2V0VHlwZXMuaW5jbHVkZXMoYmxvY2sudHlwZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzdHlsZSA9IHtcbiAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgIGFsaWduU2VsZjogXCJjZW50ZXJcIixcbiAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgbWF4V2lkdGg6IFwiMTAwJVwiLFxuICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCJcbiAgfTtcbiAgY29uc3QgYXNzZXRTdHlsZSA9IHt9O1xuICBpZiAoYmxvY2suZm9ybWF0KSB7XG4gICAgY29uc3Qge1xuICAgICAgYmxvY2tfYXNwZWN0X3JhdGlvLFxuICAgICAgYmxvY2tfaGVpZ2h0LFxuICAgICAgYmxvY2tfd2lkdGgsXG4gICAgICBibG9ja19mdWxsX3dpZHRoLFxuICAgICAgYmxvY2tfcGFnZV93aWR0aCxcbiAgICAgIGJsb2NrX3ByZXNlcnZlX3NjYWxlXG4gICAgfSA9IGJsb2NrLmZvcm1hdDtcbiAgICBpZiAoYmxvY2tfZnVsbF93aWR0aCB8fCBibG9ja19wYWdlX3dpZHRoKSB7XG4gICAgICBpZiAoYmxvY2tfZnVsbF93aWR0aCkge1xuICAgICAgICBzdHlsZS53aWR0aCA9IFwiMTAwdndcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgIGlmIChibG9ja19oZWlnaHQpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBibG9ja19oZWlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tfYXNwZWN0X3JhdGlvKSB7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2Jsb2NrX2FzcGVjdF9yYXRpbyAqIDEwMH0lYDtcbiAgICAgICAgfSBlbHNlIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSkge1xuICAgICAgICAgIHN0eWxlLm9iamVjdEZpdCA9IFwiY29udGFpblwiO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX2FzcGVjdF9yYXRpbyAmJiBibG9jay50eXBlICE9PSBcImltYWdlXCIpIHtcbiAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2Jsb2NrX2FzcGVjdF9yYXRpbyAqIDEwMH0lYDtcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2tfaGVpZ2h0KSB7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9IGJsb2NrX2hlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgIHN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjc1JVwiO1xuICAgICAgICAgIHN0eWxlLm1pbkhlaWdodCA9IDEwMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKChfYSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmJsb2NrX2FsaWdubWVudCkge1xuICAgICAgICBjYXNlIFwiY2VudGVyXCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcImNlbnRlclwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJpZ2h0XCI6IHtcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcImVuZFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2tfd2lkdGgpIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSBibG9ja193aWR0aDtcbiAgICAgIH1cbiAgICAgIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSAmJiBibG9jay50eXBlICE9PSBcImltYWdlXCIpIHtcbiAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNTAlXCI7XG4gICAgICAgIHN0eWxlLm1pbkhlaWdodCA9IDEwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChibG9ja19oZWlnaHQgJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gYmxvY2tfaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgIGFzc2V0U3R5bGUub2JqZWN0Rml0ID0gXCJjb3ZlclwiO1xuICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgIGFzc2V0U3R5bGUub2JqZWN0Rml0ID0gXCJjb250YWluXCI7XG4gICAgfVxuICB9XG4gIGxldCBzb3VyY2UgPSAoKF9iID0gcmVjb3JkTWFwLnNpZ25lZF91cmxzKSA9PSBudWxsID8gdm9pZCAwIDogX2JbYmxvY2suaWRdKSB8fCAoKF9lID0gKF9kID0gKF9jID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2VbMF0pO1xuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGJsb2NrLnR5cGUgPT09IFwidHdlZXRcIikge1xuICAgIGNvbnN0IHNyYyA9IHNvdXJjZTtcbiAgICBpZiAoIXNyYylcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlkID0gc3JjLnNwbGl0KFwiP1wiKVswXS5zcGxpdChcIi9cIikucG9wKCk7XG4gICAgaWYgKCFpZClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIHN0eWxlOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhc3NldFN0eWxlKSwge1xuICAgICAgICBtYXhXaWR0aDogNDIwLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIG1hcmdpbkxlZnQ6IFwiYXV0b1wiLFxuICAgICAgICBtYXJnaW5SaWdodDogXCJhdXRvXCJcbiAgICAgIH0pXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlR3ZWV0LCB7XG4gICAgICBpZFxuICAgIH0pKTtcbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcInBkZlwiKSB7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICBzdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2IoMjI2LCAyMjYsIDIyNilcIjtcbiAgICBzdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIGlmICghc3R5bGUucGFkZGluZykge1xuICAgICAgc3R5bGUucGFkZGluZyA9IFwiOHB4IDE2cHhcIjtcbiAgICB9XG4gICAgaWYgKCFpc1NlcnZlcikge1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QZGYsIHtcbiAgICAgICAgZmlsZTogc291cmNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJlbWJlZFwiIHx8IGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIiB8fCBibG9jay50eXBlID09PSBcImZpZ21hXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJ0eXBlZm9ybVwiIHx8IGJsb2NrLnR5cGUgPT09IFwiZ2lzdFwiIHx8IGJsb2NrLnR5cGUgPT09IFwibWFwc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiZXhjYWxpZHJhd1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiY29kZXBlblwiIHx8IGJsb2NrLnR5cGUgPT09IFwiZHJpdmVcIikge1xuICAgIGlmIChibG9jay50eXBlID09PSBcInZpZGVvXCIgJiYgc291cmNlICYmIHNvdXJjZS5pbmRleE9mKFwieW91dHViZVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ5b3V0dS5iZVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ2aW1lb1wiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ3aXN0aWFcIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwibG9vbVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJ2aWRlb2Fza1wiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJnZXRjbG91ZGFwcFwiKSA8IDApIHtcbiAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSB2b2lkIDA7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIsIHtcbiAgICAgICAgcGxheXNJbmxpbmU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgICAgICBwcmVsb2FkOiBcIm1ldGFkYXRhXCIsXG4gICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICBzcmM6IHNvdXJjZSxcbiAgICAgICAgdGl0bGU6IGJsb2NrLnR5cGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3JjID0gKChfZiA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmRpc3BsYXlfc291cmNlKSB8fCBzb3VyY2U7XG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGNvbnN0IHlvdXR1YmVWaWRlb0lkID0gYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiID8gZ2V0WW91dHViZUlkKHNyYykgOiBudWxsO1xuICAgICAgICBpZiAoeW91dHViZVZpZGVvSWQpIHtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChMaXRlWW91VHViZUVtYmVkLCB7XG4gICAgICAgICAgICBpZDogeW91dHViZVZpZGVvSWQsXG4gICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtb2JqZWN0LWZpdFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJnaXN0XCIpIHtcbiAgICAgICAgICBpZiAoIXNyYy5lbmRzV2l0aChcIi5waWJiXCIpKSB7XG4gICAgICAgICAgICBzcmMgPSBgJHtzcmN9LnBpYmJgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3NldFN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNTAlXCI7XG4gICAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiwge1xuICAgICAgICAgICAgc3R5bGU6IGFzc2V0U3R5bGUsXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIixcbiAgICAgICAgICAgIHNyYyxcbiAgICAgICAgICAgIHRpdGxlOiBcIkdpdEh1YiBHaXN0XCIsXG4gICAgICAgICAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgICAgICAgIHNjcm9sbGluZzogXCJhdXRvXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIixcbiAgICAgICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICAgICAgc3JjLFxuICAgICAgICAgICAgdGl0bGU6IGBpZnJhbWUgJHtibG9jay50eXBlfWAsXG4gICAgICAgICAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IHRydWUsXG4gICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgICAgICAgIHNjcm9sbGluZzogXCJhdXRvXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICBpZiAoc291cmNlLmluY2x1ZGVzKFwiZmlsZS5ub3Rpb24uc29cIikpIHtcbiAgICAgIHNvdXJjZSA9IChfaSA9IChfaCA9IChfZyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZy5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfaFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pWzBdO1xuICAgIH1cbiAgICBjb25zdCBzcmMgPSBtYXBJbWFnZVVybChzb3VyY2UsIGJsb2NrKTtcbiAgICBjb25zdCBjYXB0aW9uID0gZ2V0VGV4dENvbnRlbnQoKF9qID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9qLmNhcHRpb24pO1xuICAgIGNvbnN0IGFsdCA9IGNhcHRpb24gfHwgXCJub3Rpb24gaW1hZ2VcIjtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgIHNyYyxcbiAgICAgIGFsdCxcbiAgICAgIHpvb21hYmxlLFxuICAgICAgaGVpZ2h0OiBzdHlsZS5oZWlnaHQsXG4gICAgICBzdHlsZTogYXNzZXRTdHlsZVxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFJlYWN0MTQuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlXG4gIH0sIGNvbnRlbnQsIGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIiAmJiBjaGlsZHJlbiksIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIiAmJiBjaGlsZHJlbik7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9hc3NldC13cmFwcGVyLnRzeFxudmFyIHVybFN0eWxlID0geyB3aWR0aDogXCIxMDAlXCIgfTtcbnZhciBBc3NldFdyYXBwZXIgPSAoeyBibG9ja0lkLCBibG9jayB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICBjb25zdCB2YWx1ZSA9IGJsb2NrO1xuICBjb25zdCB7IGNvbXBvbmVudHMsIG1hcFBhZ2VVcmwsIHJvb3REb21haW4sIHpvb20gfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgbGV0IGlzVVJMID0gZmFsc2U7XG4gIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICBjb25zdCBjYXB0aW9uID0gKF9jID0gKF9iID0gKF9hID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYXB0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2JbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXTtcbiAgICBpZiAoY2FwdGlvbikge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZVBhZ2VJZChjYXB0aW9uLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBpc1BhZ2UgPSBjYXB0aW9uLmNoYXJBdCgwKSA9PT0gXCIvXCIgJiYgaWQ7XG4gICAgICBpZiAoaXNQYWdlIHx8IGlzVmFsaWRVUkwoY2FwdGlvbikpIHtcbiAgICAgICAgaXNVUkwgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBmaWd1cmUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiZmlndXJlXCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgXCJub3Rpb24tYXNzZXQtd3JhcHBlclwiLFxuICAgICAgYG5vdGlvbi1hc3NldC13cmFwcGVyLSR7YmxvY2sudHlwZX1gLFxuICAgICAgKChfZCA9IHZhbHVlLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmJsb2NrX2Z1bGxfd2lkdGgpICYmIFwibm90aW9uLWFzc2V0LXdyYXBwZXItZnVsbFwiLFxuICAgICAgYmxvY2tJZFxuICAgIClcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChBc3NldCwge1xuICAgIGJsb2NrOiB2YWx1ZSxcbiAgICB6b29tYWJsZTogem9vbSAmJiAhaXNVUkxcbiAgfSwgKChfZSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FwdGlvbikgJiYgIWlzVVJMICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJmaWdjYXB0aW9uXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LWNhcHRpb25cIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICB2YWx1ZTogdmFsdWUucHJvcGVydGllcy5jYXB0aW9uLFxuICAgIGJsb2NrXG4gIH0pKSkpO1xuICBpZiAoaXNVUkwpIHtcbiAgICBjb25zdCBjYXB0aW9uID0gKF9mID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYXB0aW9uWzBdWzBdO1xuICAgIGNvbnN0IGlkID0gcGFyc2VQYWdlSWQoY2FwdGlvbiwgeyB1dWlkOiB0cnVlIH0pO1xuICAgIGNvbnN0IGlzUGFnZSA9IGNhcHRpb24uY2hhckF0KDApID09PSBcIi9cIiAmJiBpZDtcbiAgICBjb25zdCBjYXB0aW9uSG9zdG5hbWUgPSBleHRyYWN0SG9zdG5hbWUoY2FwdGlvbik7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgc3R5bGU6IHVybFN0eWxlLFxuICAgICAgaHJlZjogaXNQYWdlID8gbWFwUGFnZVVybChpZCkgOiBjYXB0aW9uLFxuICAgICAgdGFyZ2V0OiBjYXB0aW9uSG9zdG5hbWUgJiYgY2FwdGlvbkhvc3RuYW1lICE9PSByb290RG9tYWluICYmICFjYXB0aW9uLnN0YXJ0c1dpdGgoXCIvXCIpID8gXCJibGFua19cIiA6IG51bGxcbiAgICB9LCBmaWd1cmUpO1xuICB9XG4gIHJldHVybiBmaWd1cmU7XG59O1xuZnVuY3Rpb24gaXNWYWxpZFVSTChzdHIpIHtcbiAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgXCJeKGh0dHBzPzpcXFxcL1xcXFwvKT8oKChbYS16XFxcXGRdKFthLXpcXFxcZC1dKlthLXpcXFxcZF0pKilcXFxcLikrW2Etel17Mix9fCgoXFxcXGR7MSwzfVxcXFwuKXszfVxcXFxkezEsM30pKShcXFxcOlxcXFxkKyk/KFxcXFwvWy1hLXpcXFxcZCVfLn4rXSopKihcXFxcP1s7JmEtelxcXFxkJV8ufis9LV0qKT8oXFxcXCNbLWEtelxcXFxkX10qKT8kXCIsXG4gICAgXCJpXCJcbiAgKTtcbiAgcmV0dXJuICEhcGF0dGVybi50ZXN0KHN0cik7XG59XG5mdW5jdGlvbiBleHRyYWN0SG9zdG5hbWUodXJsKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaG9zdG5hbWUgPSBuZXcgVVJMKHVybCkuaG9zdG5hbWU7XG4gICAgcmV0dXJuIGhvc3RuYW1lO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jaGVja2JveC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy9jaGVjay50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTYgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdDaGVjayhwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk01LjUgMTJMMTQgMy41IDEyLjUgMmwtNyA3LTQtNC4wMDNMMCA2LjQ5OXpcIlxuICB9KSk7XG59XG52YXIgY2hlY2tfZGVmYXVsdCA9IFN2Z0NoZWNrO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jaGVja2JveC50c3hcbnZhciBDaGVja2JveCA9ICh7IGlzQ2hlY2tlZCB9KSA9PiB7XG4gIGxldCBjb250ZW50ID0gbnVsbDtcbiAgaWYgKGlzQ2hlY2tlZCkge1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtY2hlY2tlZFwiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTcuY3JlYXRlRWxlbWVudChjaGVja19kZWZhdWx0LCBudWxsKSk7XG4gIH0gZWxzZSB7XG4gICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eS1jaGVja2JveC11bmNoZWNrZWRcIlxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eSBub3Rpb24tcHJvcGVydHktY2hlY2tib3hcIlxuICB9LCBjb250ZW50KTtcbn07XG5cbi8vIHNyYy9uZXh0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxOCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJyZWFjdC1mYXN0LWNvbXBhcmVcIjtcbnZhciB3cmFwTmV4dEltYWdlID0gKE5leHRJbWFnZSkgPT4ge1xuICByZXR1cm4gUmVhY3QxOC5tZW1vKGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRJbWFnZShfYSkge1xuICAgIHZhciBfYiA9IF9hLCB7XG4gICAgICBzcmMsXG4gICAgICBhbHQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgbGF5b3V0XG4gICAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICBcInNyY1wiLFxuICAgICAgXCJhbHRcIixcbiAgICAgIFwid2lkdGhcIixcbiAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICBcImNsYXNzTmFtZVwiLFxuICAgICAgXCJzdHlsZVwiLFxuICAgICAgXCJsYXlvdXRcIlxuICAgIF0pO1xuICAgIGlmICghbGF5b3V0KSB7XG4gICAgICBsYXlvdXQgPSB3aWR0aCAmJiBoZWlnaHQgPyBcImludHJpbnNpY1wiIDogXCJmaWxsXCI7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KE5leHRJbWFnZSwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgd2lkdGg6IGxheW91dCA9PT0gXCJpbnRyaW5zaWNcIiAmJiB3aWR0aCxcbiAgICAgIGhlaWdodDogbGF5b3V0ID09PSBcImludHJpbnNpY1wiICYmIGhlaWdodCxcbiAgICAgIG9iamVjdEZpdDogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLm9iamVjdEZpdCxcbiAgICAgIG9iamVjdFBvc2l0aW9uOiBzdHlsZSA9PSBudWxsID8gdm9pZCAwIDogc3R5bGUub2JqZWN0UG9zaXRpb24sXG4gICAgICBsYXlvdXRcbiAgICB9LCByZXN0KSk7XG4gIH0sIGlzRXF1YWwpO1xufTtcbnZhciB3cmFwTmV4dExpbmsgPSAoTmV4dExpbmspID0+IGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRMaW5rKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgaHJlZixcbiAgICBhcyxcbiAgICBwYXNzSHJlZixcbiAgICBwcmVmZXRjaCxcbiAgICByZXBsYWNlLFxuICAgIHNjcm9sbCxcbiAgICBzaGFsbG93LFxuICAgIGxvY2FsZVxuICB9ID0gX2IsIGxpbmtQcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiaHJlZlwiLFxuICAgIFwiYXNcIixcbiAgICBcInBhc3NIcmVmXCIsXG4gICAgXCJwcmVmZXRjaFwiLFxuICAgIFwicmVwbGFjZVwiLFxuICAgIFwic2Nyb2xsXCIsXG4gICAgXCJzaGFsbG93XCIsXG4gICAgXCJsb2NhbGVcIlxuICBdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoTmV4dExpbmssIHtcbiAgICBocmVmLFxuICAgIGFzLFxuICAgIHBhc3NIcmVmLFxuICAgIHByZWZldGNoLFxuICAgIHJlcGxhY2UsXG4gICAgc2Nyb2xsLFxuICAgIHNoYWxsb3csXG4gICAgbG9jYWxlXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBsaW5rUHJvcHMpKSk7XG59O1xuXG4vLyBzcmMvY29udGV4dC50c3hcbnZhciBEZWZhdWx0TGluayA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChcImFcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCJcbn0sIHByb3BzKSk7XG52YXIgRGVmYXVsdExpbmtNZW1vID0gUmVhY3QxOS5tZW1vKERlZmF1bHRMaW5rKTtcbnZhciBEZWZhdWx0UGFnZUxpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xudmFyIERlZmF1bHRQYWdlTGlua01lbW8gPSBSZWFjdDE5Lm1lbW8oRGVmYXVsdFBhZ2VMaW5rKTtcbnZhciBEZWZhdWx0RW1iZWQgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoQXNzZXRXcmFwcGVyLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBEZWZhdWx0SGVhZGVyID0gSGVhZGVyO1xudmFyIGR1bW15Q29tcG9uZW50ID0gKG5hbWUpID0+ICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgIGBXYXJuaW5nOiB1c2luZyBlbXB0eSBjb21wb25lbnQgXCIke25hbWV9XCIgKHlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBpbiBOb3Rpb25SZW5kZXJlci5jb21wb25lbnRzKWBcbiAgKTtcbiAgcmV0dXJuIG51bGw7XG59O1xudmFyIGR1bW15T3ZlcnJpZGVGbiA9IChfLCBkZWZhdWx0VmFsdWVGbikgPT4gZGVmYXVsdFZhbHVlRm4oKTtcbnZhciBkZWZhdWx0Q29tcG9uZW50cyA9IHtcbiAgSW1hZ2U6IG51bGwsXG4gIExpbms6IERlZmF1bHRMaW5rTWVtbyxcbiAgUGFnZUxpbms6IERlZmF1bHRQYWdlTGlua01lbW8sXG4gIENoZWNrYm94LFxuICBDYWxsb3V0OiB2b2lkIDAsXG4gIENvZGU6IGR1bW15Q29tcG9uZW50KFwiQ29kZVwiKSxcbiAgRXF1YXRpb246IGR1bW15Q29tcG9uZW50KFwiRXF1YXRpb25cIiksXG4gIENvbGxlY3Rpb246IGR1bW15Q29tcG9uZW50KFwiQ29sbGVjdGlvblwiKSxcbiAgUHJvcGVydHk6IHZvaWQgMCxcbiAgcHJvcGVydHlUZXh0VmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlTZWxlY3RWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVJlbGF0aW9uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGb3JtdWxhVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlUaXRsZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGVyc29uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGaWxlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlDaGVja2JveFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5VXJsVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlFbWFpbFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGhvbmVOdW1iZXJWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eU51bWJlclZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5TGFzdEVkaXRlZFRpbWVWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eUNyZWF0ZWRUaW1lVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlEYXRlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgUGRmOiBkdW1teUNvbXBvbmVudChcIlBkZlwiKSxcbiAgVHdlZXQ6IGR1bW15Q29tcG9uZW50KFwiVHdlZXRcIiksXG4gIE1vZGFsOiBkdW1teUNvbXBvbmVudChcIk1vZGFsXCIpLFxuICBIZWFkZXI6IERlZmF1bHRIZWFkZXIsXG4gIEVtYmVkOiBEZWZhdWx0RW1iZWRcbn07XG52YXIgZGVmYXVsdE5vdGlvbkNvbnRleHQgPSB7XG4gIHJlY29yZE1hcDoge1xuICAgIGJsb2NrOiB7fSxcbiAgICBjb2xsZWN0aW9uOiB7fSxcbiAgICBjb2xsZWN0aW9uX3ZpZXc6IHt9LFxuICAgIGNvbGxlY3Rpb25fcXVlcnk6IHt9LFxuICAgIG5vdGlvbl91c2VyOiB7fSxcbiAgICBzaWduZWRfdXJsczoge31cbiAgfSxcbiAgY29tcG9uZW50czogZGVmYXVsdENvbXBvbmVudHMsXG4gIG1hcFBhZ2VVcmw6IGRlZmF1bHRNYXBQYWdlVXJsKCksXG4gIG1hcEltYWdlVXJsOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbjogbnVsbCxcbiAgaXNTaG93aW5nU2VhcmNoOiBmYWxzZSxcbiAgb25IaWRlU2VhcmNoOiBudWxsLFxuICBmdWxsUGFnZTogZmFsc2UsXG4gIGRhcmtNb2RlOiBmYWxzZSxcbiAgcHJldmlld0ltYWdlczogZmFsc2UsXG4gIGZvcmNlQ3VzdG9tSW1hZ2VzOiBmYWxzZSxcbiAgc2hvd0NvbGxlY3Rpb25WaWV3RHJvcGRvd246IHRydWUsXG4gIGxpbmtUYWJsZVRpdGxlUHJvcGVydGllczogdHJ1ZSxcbiAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHk6IGZhbHNlLFxuICBzaG93VGFibGVPZkNvbnRlbnRzOiBmYWxzZSxcbiAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXM6IDMsXG4gIGRlZmF1bHRQYWdlSWNvbjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlcjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uOiAwLjUsXG4gIHpvb206IG51bGxcbn07XG52YXIgY3R4ID0gUmVhY3QxOS5jcmVhdGVDb250ZXh0KGRlZmF1bHROb3Rpb25Db250ZXh0KTtcbnZhciBOb3Rpb25Db250ZXh0UHJvdmlkZXIgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjb21wb25lbnRzOiB0aGVtZUNvbXBvbmVudHMgPSB7fSxcbiAgICBjaGlsZHJlbixcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHJvb3RQYWdlSWRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb21wb25lbnRzXCIsXG4gICAgXCJjaGlsZHJlblwiLFxuICAgIFwibWFwUGFnZVVybFwiLFxuICAgIFwibWFwSW1hZ2VVcmxcIixcbiAgICBcInJvb3RQYWdlSWRcIlxuICBdKTtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVzdCkpIHtcbiAgICBpZiAocmVzdFtrZXldID09PSB2b2lkIDApIHtcbiAgICAgIGRlbGV0ZSByZXN0W2tleV07XG4gICAgfVxuICB9XG4gIGNvbnN0IHdyYXBwZWRUaGVtZUNvbXBvbmVudHMgPSBSZWFjdDE5LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe30sIHRoZW1lQ29tcG9uZW50cyksXG4gICAgW3RoZW1lQ29tcG9uZW50c11cbiAgKTtcbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dEltYWdlKSB7XG4gICAgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5JbWFnZSA9IHdyYXBOZXh0SW1hZ2UodGhlbWVDb21wb25lbnRzLm5leHRJbWFnZSk7XG4gIH1cbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dExpbmspIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMaW5rID0gd3JhcE5leHRMaW5rKHRoZW1lQ29tcG9uZW50cy5uZXh0TGluayk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMod3JhcHBlZFRoZW1lQ29tcG9uZW50cykpIHtcbiAgICBpZiAoIXdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XSkge1xuICAgICAgZGVsZXRlIHdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBSZWFjdDE5LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdE5vdGlvbkNvbnRleHQpLCByZXN0KSwge1xuICAgICAgcm9vdFBhZ2VJZCxcbiAgICAgIG1hcFBhZ2VVcmw6IG1hcFBhZ2VVcmwgIT0gbnVsbCA/IG1hcFBhZ2VVcmwgOiBkZWZhdWx0TWFwUGFnZVVybChyb290UGFnZUlkKSxcbiAgICAgIG1hcEltYWdlVXJsOiBtYXBJbWFnZVVybCAhPSBudWxsID8gbWFwSW1hZ2VVcmwgOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gICAgICBjb21wb25lbnRzOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdENvbXBvbmVudHMpLCB3cmFwcGVkVGhlbWVDb21wb25lbnRzKVxuICAgIH0pLFxuICAgIFttYXBJbWFnZVVybCwgbWFwUGFnZVVybCwgd3JhcHBlZFRoZW1lQ29tcG9uZW50cywgcm9vdFBhZ2VJZCwgcmVzdF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoY3R4LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufTtcbnZhciBOb3Rpb25Db250ZXh0Q29uc3VtZXIgPSBjdHguQ29uc3VtZXI7XG52YXIgdXNlTm90aW9uQ29udGV4dCA9ICgpID0+IHtcbiAgcmV0dXJuIFJlYWN0MTkudXNlQ29udGV4dChjdHgpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvdGV4dC50c3hcbnZhciBUZXh0ID0gKHsgdmFsdWUsIGJsb2NrLCBsaW5rUHJvcHMsIGxpbmtQcm90b2NvbCB9KSA9PiB7XG4gIGNvbnN0IHsgY29tcG9uZW50cywgcmVjb3JkTWFwLCBtYXBQYWdlVXJsLCBtYXBJbWFnZVVybCwgcm9vdERvbWFpbiB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChSZWFjdDIwLkZyYWdtZW50LCBudWxsLCB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUubWFwKChbdGV4dCwgZGVjb3JhdGlvbnNdLCBpbmRleCkgPT4ge1xuICAgIGlmICghZGVjb3JhdGlvbnMpIHtcbiAgICAgIGlmICh0ZXh0ID09PSBcIixcIikge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgc3R5bGU6IHsgcGFkZGluZzogXCIwLjVlbVwiIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChSZWFjdDIwLkZyYWdtZW50LCB7XG4gICAgICAgICAga2V5OiBpbmRleFxuICAgICAgICB9LCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZm9ybWF0dGVkID0gZGVjb3JhdGlvbnMucmVkdWNlKFxuICAgICAgKGVsZW1lbnQsIGRlY29yYXRvcikgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICBzd2l0Y2ggKGRlY29yYXRvclswXSkge1xuICAgICAgICAgIGNhc2UgXCJwXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrSWQgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCBsaW5rZWRCbG9jayA9IChfYSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCFsaW5rZWRCbG9jaykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXCJwXCIgbWlzc2luZyBibG9jaycsIGJsb2NrSWQpO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoYmxvY2tJZClcbiAgICAgICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgICAgIGJsb2NrOiBsaW5rZWRCbG9ja1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiXFx1MjAyM1wiOiB7XG4gICAgICAgICAgICBjb25zdCBsaW5rVHlwZSA9IGRlY29yYXRvclsxXVswXTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZGVjb3JhdG9yWzFdWzFdO1xuICAgICAgICAgICAgc3dpdGNoIChsaW5rVHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IChfYiA9IHJlY29yZE1hcC5ub3Rpb25fdXNlcltpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcIlxcdTIwMjNcIiBtaXNzaW5nIHVzZXInLCBpZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IFt1c2VyLmdpdmVuX25hbWUsIHVzZXIuZmFtaWx5X25hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChHcmFjZWZ1bEltYWdlLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXVzZXJcIixcbiAgICAgICAgICAgICAgICAgIHNyYzogbWFwSW1hZ2VVcmwodXNlci5wcm9maWxlX3Bob3RvLCBibG9jayksXG4gICAgICAgICAgICAgICAgICBhbHQ6IG5hbWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua2VkQmxvY2sgPSAoX2MgPSByZWNvcmRNYXAuYmxvY2tbaWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rZWRCbG9jaykge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1wiXFx1MjAyM1wiIG1pc3NpbmcgYmxvY2snLCBsaW5rVHlwZSwgaWQpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgICBocmVmOiBtYXBQYWdlVXJsKGlkKVxuICAgICAgICAgICAgICAgIH0sIGxpbmtQcm9wcyksIHtcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgICAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrOiBsaW5rZWRCbG9ja1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBgbm90aW9uLSR7ZGVjb3JhdG9yWzFdfWBcbiAgICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcImNvZGVcIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWlubGluZS1jb2RlXCJcbiAgICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJiXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcImJcIiwgbnVsbCwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KFwiZW1cIiwgbnVsbCwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KFwic1wiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiX1wiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1pbmxpbmUtdW5kZXJzY29yZVwiXG4gICAgICAgICAgICB9LCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiZVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5FcXVhdGlvbiwge1xuICAgICAgICAgICAgICBtYXRoOiBkZWNvcmF0b3JbMV0sXG4gICAgICAgICAgICAgIGlubGluZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgIGNhc2UgXCJhXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCBwYXRobmFtZSA9IHYuc3Vic3RyKDEpO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZVBhZ2VJZDIocGF0aG5hbWUsIHsgdXVpZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGlmICgodlswXSA9PT0gXCIvXCIgfHwgdi5pbmNsdWRlcyhyb290RG9tYWluKSkgJiYgaWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgaHJlZiA9IHYuaW5jbHVkZXMocm9vdERvbWFpbikgPyB2IDogYCR7bWFwUGFnZVVybChpZCl9JHtnZXRIYXNoRnJhZ21lbnRWYWx1ZSh2KX1gO1xuICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgaHJlZlxuICAgICAgICAgICAgICB9LCBsaW5rUHJvcHMpLCBlbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTGluaywgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlua1wiLFxuICAgICAgICAgICAgICAgIGhyZWY6IGxpbmtQcm90b2NvbCA/IGAke2xpbmtQcm90b2NvbH06JHtkZWNvcmF0b3JbMV19YCA6IGRlY29yYXRvclsxXVxuICAgICAgICAgICAgICB9LCBsaW5rUHJvcHMpLCBlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRcIjoge1xuICAgICAgICAgICAgY29uc3QgdiA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB2ID09IG51bGwgPyB2b2lkIDAgOiB2LnR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdi5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShzdGFydERhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImRhdGVyYW5nZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHYuc3RhcnRfZGF0ZTtcbiAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IHYuZW5kX2RhdGU7XG4gICAgICAgICAgICAgIHJldHVybiBgJHtmb3JtYXREYXRlKHN0YXJ0RGF0ZSl9IFxcdTIxOTIgJHtmb3JtYXREYXRlKGVuZERhdGUpfWA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInVcIjoge1xuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IChfZCA9IHJlY29yZE1hcC5ub3Rpb25fdXNlclt1c2VySWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2QudmFsdWU7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtaXNzaW5nIHVzZXJcIiwgdXNlcklkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gW3VzZXIuZ2l2ZW5fbmFtZSwgdXNlci5mYW1pbHlfbmFtZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoR3JhY2VmdWxJbWFnZSwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXVzZXJcIixcbiAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybCh1c2VyLnByb2ZpbGVfcGhvdG8sIGJsb2NrKSxcbiAgICAgICAgICAgICAgYWx0OiBuYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImVvaVwiOiB7XG4gICAgICAgICAgICBjb25zdCBibG9ja0lkID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxPYmplY3RJbnN0YW5jZSA9IChfZSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoRU9JLCB7XG4gICAgICAgICAgICAgIGJsb2NrOiBleHRlcm5hbE9iamVjdEluc3RhbmNlLFxuICAgICAgICAgICAgICBpbmxpbmU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1bnN1cHBvcnRlZCB0ZXh0IGZvcm1hdFwiLCBkZWNvcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KFJlYWN0MjAuRnJhZ21lbnQsIG51bGwsIHRleHQpXG4gICAgKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChSZWFjdDIwLkZyYWdtZW50LCB7XG4gICAgICBrZXk6IGluZGV4XG4gICAgfSwgZm9ybWF0dGVkKTtcbiAgfSkpO1xufTtcblxuLy8gc3JjL2ljb25zL2NvcHkudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDIxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnQ29weShwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICB2aWV3Qm94OiBcIjAgMCAxNiAxNlwiLFxuICAgIHdpZHRoOiBcIjFlbVwiLFxuICAgIHZlcnNpb246IFwiMS4xXCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyMS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTAgNi43NUMwIDUuNzg0Ljc4NCA1IDEuNzUgNWgxLjVhLjc1Ljc1IDAgMDEwIDEuNWgtMS41YS4yNS4yNSAwIDAwLS4yNS4yNXY3LjVjMCAuMTM4LjExMi4yNS4yNS4yNWg3LjVhLjI1LjI1IDAgMDAuMjUtLjI1di0xLjVhLjc1Ljc1IDAgMDExLjUgMHYxLjVBMS43NSAxLjc1IDAgMDE5LjI1IDE2aC03LjVBMS43NSAxLjc1IDAgMDEwIDE0LjI1di03LjV6XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIxLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNSAxLjc1QzUgLjc4NCA1Ljc4NCAwIDYuNzUgMGg3LjVDMTUuMjE2IDAgMTYgLjc4NCAxNiAxLjc1djcuNUExLjc1IDEuNzUgMCAwMTE0LjI1IDExaC03LjVBMS43NSAxLjc1IDAgMDE1IDkuMjV2LTcuNXptMS43NS0uMjVhLjI1LjI1IDAgMDAtLjI1LjI1djcuNWMwIC4xMzguMTEyLjI1LjI1LjI1aDcuNWEuMjUuMjUgMCAwMC4yNS0uMjV2LTcuNWEuMjUuMjUgMCAwMC0uMjUtLjI1aC03LjV6XCJcbiAgfSkpO1xufVxudmFyIGNvcHlfZGVmYXVsdCA9IFN2Z0NvcHk7XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2RlLnRzeFxudmFyIENvZGUgPSAoeyBibG9jaywgZGVmYXVsdExhbmd1YWdlID0gXCJ0eXBlc2NyaXB0XCIsIGNsYXNzTmFtZSB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCBbaXNDb3BpZWQsIHNldElzQ29waWVkXSA9IFJlYWN0MjIudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBjb3B5VGltZW91dCA9IFJlYWN0MjIudXNlUmVmKCk7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGNvbnRlbnQgPSBnZXRCbG9ja1RpdGxlNChibG9jaywgcmVjb3JkTWFwKTtcbiAgY29uc3QgbGFuZ3VhZ2UgPSAoKChfYyA9IChfYiA9IChfYSA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5sYW5ndWFnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF0pIHx8IGRlZmF1bHRMYW5ndWFnZSkudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgY2FwdGlvbiA9IGJsb2NrLnByb3BlcnRpZXMuY2FwdGlvbjtcbiAgY29uc3QgY29kZVJlZiA9IFJlYWN0MjIudXNlUmVmKCk7XG4gIFJlYWN0MjIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29kZVJlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBoaWdobGlnaHRFbGVtZW50KGNvZGVSZWYuY3VycmVudCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwicHJpc21qcyBoaWdobGlnaHQgZXJyb3JcIiwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb2RlUmVmXSk7XG4gIGNvbnN0IG9uQ2xpY2tDb3B5VG9DbGlwYm9hcmQgPSBSZWFjdDIyLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAoMCwgaW1wb3J0X2NsaXBib2FyZF9jb3B5LmRlZmF1bHQpKGNvbnRlbnQpO1xuICAgIHNldElzQ29waWVkKHRydWUpO1xuICAgIGlmIChjb3B5VGltZW91dC5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQoY29weVRpbWVvdXQuY3VycmVudCk7XG4gICAgICBjb3B5VGltZW91dC5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgY29weVRpbWVvdXQuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNDb3BpZWQoZmFsc2UpO1xuICAgIH0sIDEyMDApO1xuICB9LCBbY29udGVudCwgY29weVRpbWVvdXRdKTtcbiAgY29uc3QgY29weUJ1dHRvbiA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29kZS1jb3B5LWJ1dHRvblwiLFxuICAgIG9uQ2xpY2s6IG9uQ2xpY2tDb3B5VG9DbGlwYm9hcmRcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChjb3B5X2RlZmF1bHQsIG51bGwpKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoUmVhY3QyMi5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChcInByZVwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1jb2RlXCIsIGNsYXNzTmFtZSlcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2RlLWNvcHlcIlxuICB9LCBjb3B5QnV0dG9uLCBpc0NvcGllZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvZGUtY29weS10b29sdGlwXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBpc0NvcGllZCA/IFwiQ29waWVkXCIgOiBcIkNvcHlcIikpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjIuY3JlYXRlRWxlbWVudChcImNvZGVcIiwge1xuICAgIGNsYXNzTmFtZTogYGxhbmd1YWdlLSR7bGFuZ3VhZ2V9YCxcbiAgICByZWY6IGNvZGVSZWZcbiAgfSwgY29udGVudCkpLCBjYXB0aW9uICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoXCJmaWdjYXB0aW9uXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LWNhcHRpb25cIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QyMi5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICB2YWx1ZTogY2FwdGlvbixcbiAgICBibG9ja1xuICB9KSkpO1xufTtcbmV4cG9ydCB7XG4gIENvZGVcbn07XG4vKiEgY2xpcGJvYXJkLWNvcHkuIE1JVCBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi9cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/build/third-party/code.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/build/third-party/collection.js":
/*!*********************************************************************!*\
  !*** ./node_modules/react-notion-x/build/third-party/collection.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Collection: () => (/* binding */ Collection),\n/* harmony export */   Property: () => (/* binding */ PropertyImplMemo)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/notion-utils/build/index.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-use */ \"(ssr)/./node_modules/react-use/esm/useLocalStorage.js\");\n/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-use */ \"(ssr)/./node_modules/react-use/esm/useWindowSize.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/is-url-superb/index.js\");\n/* harmony import */ var react_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-image */ \"(ssr)/./node_modules/react-image/cjs/index.js\");\n/* harmony import */ var react_lazy_images__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-lazy-images */ \"(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js\");\n/* harmony import */ var react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-hotkeys-hook */ \"(ssr)/./node_modules/react-hotkeys-hook/dist/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-fast-compare */ \"(ssr)/./node_modules/react-fast-compare/index.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/lodash.throttle/index.js\nvar require_lodash = __commonJS({\n  \"../../node_modules/lodash.throttle/index.js\"(exports, module) {\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var NAN = 0 / 0;\n    var symbolTag = \"[object Symbol]\";\n    var reTrim = /^\\s+|\\s+$/g;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var objectProto = Object.prototype;\n    var objectToString = objectProto.toString;\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    var now = function() {\n      return root.Date.now();\n    };\n    function debounce(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, result2 = wait - timeSinceLastCall;\n        return maxing ? nativeMin(result2, maxWait - timeSinceLastInvoke) : result2;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    function throttle2(func, wait, options) {\n      var leading = true, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = \"leading\" in options ? !!options.leading : leading;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        \"leading\": leading,\n        \"maxWait\": wait,\n        \"trailing\": trailing\n      });\n    }\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == \"object\" || type == \"function\");\n    }\n    function isObjectLike(value) {\n      return !!value && typeof value == \"object\";\n    }\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && objectToString.call(value) == symbolTag;\n    }\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, \"\");\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module.exports = throttle2;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/requiredArgs/index.js\nvar require_requiredArgs = __commonJS({\n  \"../../node_modules/date-fns/_lib/requiredArgs/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = requiredArgs;\n    function requiredArgs(required, args) {\n      if (args.length < required) {\n        throw new TypeError(required + \" argument\" + (required > 1 ? \"s\" : \"\") + \" required, but only \" + args.length + \" present\");\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/isDate/index.js\nvar require_isDate = __commonJS({\n  \"../../node_modules/date-fns/isDate/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = isDate;\n    var _index = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function isDate(value) {\n      (0, _index.default)(1, arguments);\n      return value instanceof Date || typeof value === \"object\" && Object.prototype.toString.call(value) === \"[object Date]\";\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/toDate/index.js\nvar require_toDate = __commonJS({\n  \"../../node_modules/date-fns/toDate/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = toDate;\n    var _index = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function toDate(argument) {\n      (0, _index.default)(1, arguments);\n      var argStr = Object.prototype.toString.call(argument);\n      if (argument instanceof Date || typeof argument === \"object\" && argStr === \"[object Date]\") {\n        return new Date(argument.getTime());\n      } else if (typeof argument === \"number\" || argStr === \"[object Number]\") {\n        return new Date(argument);\n      } else {\n        if ((typeof argument === \"string\" || argStr === \"[object String]\") && typeof console !== \"undefined\") {\n          console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\");\n          console.warn(new Error().stack);\n        }\n        return new Date(NaN);\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/isValid/index.js\nvar require_isValid = __commonJS({\n  \"../../node_modules/date-fns/isValid/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = isValid;\n    var _index = _interopRequireDefault(require_isDate());\n    var _index2 = _interopRequireDefault(require_toDate());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function isValid(dirtyDate) {\n      (0, _index3.default)(1, arguments);\n      if (!(0, _index.default)(dirtyDate) && typeof dirtyDate !== \"number\") {\n        return false;\n      }\n      var date = (0, _index2.default)(dirtyDate);\n      return !isNaN(Number(date));\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/_lib/formatDistance/index.js\nvar require_formatDistance = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/_lib/formatDistance/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var formatDistanceLocale = {\n      lessThanXSeconds: {\n        one: \"less than a second\",\n        other: \"less than {{count}} seconds\"\n      },\n      xSeconds: {\n        one: \"1 second\",\n        other: \"{{count}} seconds\"\n      },\n      halfAMinute: \"half a minute\",\n      lessThanXMinutes: {\n        one: \"less than a minute\",\n        other: \"less than {{count}} minutes\"\n      },\n      xMinutes: {\n        one: \"1 minute\",\n        other: \"{{count}} minutes\"\n      },\n      aboutXHours: {\n        one: \"about 1 hour\",\n        other: \"about {{count}} hours\"\n      },\n      xHours: {\n        one: \"1 hour\",\n        other: \"{{count}} hours\"\n      },\n      xDays: {\n        one: \"1 day\",\n        other: \"{{count}} days\"\n      },\n      aboutXWeeks: {\n        one: \"about 1 week\",\n        other: \"about {{count}} weeks\"\n      },\n      xWeeks: {\n        one: \"1 week\",\n        other: \"{{count}} weeks\"\n      },\n      aboutXMonths: {\n        one: \"about 1 month\",\n        other: \"about {{count}} months\"\n      },\n      xMonths: {\n        one: \"1 month\",\n        other: \"{{count}} months\"\n      },\n      aboutXYears: {\n        one: \"about 1 year\",\n        other: \"about {{count}} years\"\n      },\n      xYears: {\n        one: \"1 year\",\n        other: \"{{count}} years\"\n      },\n      overXYears: {\n        one: \"over 1 year\",\n        other: \"over {{count}} years\"\n      },\n      almostXYears: {\n        one: \"almost 1 year\",\n        other: \"almost {{count}} years\"\n      }\n    };\n    var formatDistance = function(token, count, options) {\n      var result;\n      var tokenValue = formatDistanceLocale[token];\n      if (typeof tokenValue === \"string\") {\n        result = tokenValue;\n      } else if (count === 1) {\n        result = tokenValue.one;\n      } else {\n        result = tokenValue.other.replace(\"{{count}}\", count.toString());\n      }\n      if (options !== null && options !== void 0 && options.addSuffix) {\n        if (options.comparison && options.comparison > 0) {\n          return \"in \" + result;\n        } else {\n          return result + \" ago\";\n        }\n      }\n      return result;\n    };\n    var _default = formatDistance;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/_lib/buildFormatLongFn/index.js\nvar require_buildFormatLongFn = __commonJS({\n  \"../../node_modules/date-fns/locale/_lib/buildFormatLongFn/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = buildFormatLongFn;\n    function buildFormatLongFn(args) {\n      return function() {\n        var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n        var width = options.width ? String(options.width) : args.defaultWidth;\n        var format4 = args.formats[width] || args.formats[args.defaultWidth];\n        return format4;\n      };\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/_lib/formatLong/index.js\nvar require_formatLong = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/_lib/formatLong/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_buildFormatLongFn());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var dateFormats = {\n      full: \"EEEE, MMMM do, y\",\n      long: \"MMMM do, y\",\n      medium: \"MMM d, y\",\n      short: \"MM/dd/yyyy\"\n    };\n    var timeFormats = {\n      full: \"h:mm:ss a zzzz\",\n      long: \"h:mm:ss a z\",\n      medium: \"h:mm:ss a\",\n      short: \"h:mm a\"\n    };\n    var dateTimeFormats = {\n      full: \"{{date}} 'at' {{time}}\",\n      long: \"{{date}} 'at' {{time}}\",\n      medium: \"{{date}}, {{time}}\",\n      short: \"{{date}}, {{time}}\"\n    };\n    var formatLong = {\n      date: (0, _index.default)({\n        formats: dateFormats,\n        defaultWidth: \"full\"\n      }),\n      time: (0, _index.default)({\n        formats: timeFormats,\n        defaultWidth: \"full\"\n      }),\n      dateTime: (0, _index.default)({\n        formats: dateTimeFormats,\n        defaultWidth: \"full\"\n      })\n    };\n    var _default = formatLong;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/_lib/formatRelative/index.js\nvar require_formatRelative = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/_lib/formatRelative/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var formatRelativeLocale = {\n      lastWeek: \"'last' eeee 'at' p\",\n      yesterday: \"'yesterday at' p\",\n      today: \"'today at' p\",\n      tomorrow: \"'tomorrow at' p\",\n      nextWeek: \"eeee 'at' p\",\n      other: \"P\"\n    };\n    var formatRelative = function(token, _date, _baseDate, _options) {\n      return formatRelativeLocale[token];\n    };\n    var _default = formatRelative;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/_lib/buildLocalizeFn/index.js\nvar require_buildLocalizeFn = __commonJS({\n  \"../../node_modules/date-fns/locale/_lib/buildLocalizeFn/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = buildLocalizeFn;\n    function buildLocalizeFn(args) {\n      return function(dirtyIndex, dirtyOptions) {\n        var options = dirtyOptions || {};\n        var context = options.context ? String(options.context) : \"standalone\";\n        var valuesArray;\n        if (context === \"formatting\" && args.formattingValues) {\n          var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n          var width = options.width ? String(options.width) : defaultWidth;\n          valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n        } else {\n          var _defaultWidth = args.defaultWidth;\n          var _width = options.width ? String(options.width) : args.defaultWidth;\n          valuesArray = args.values[_width] || args.values[_defaultWidth];\n        }\n        var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;\n        return valuesArray[index];\n      };\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/_lib/localize/index.js\nvar require_localize = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/_lib/localize/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_buildLocalizeFn());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var eraValues = {\n      narrow: [\"B\", \"A\"],\n      abbreviated: [\"BC\", \"AD\"],\n      wide: [\"Before Christ\", \"Anno Domini\"]\n    };\n    var quarterValues = {\n      narrow: [\"1\", \"2\", \"3\", \"4\"],\n      abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n      wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"]\n    };\n    var monthValues = {\n      narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n      abbreviated: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      wide: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n    };\n    var dayValues = {\n      narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n      short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n      abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n      wide: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n    };\n    var dayPeriodValues = {\n      narrow: {\n        am: \"a\",\n        pm: \"p\",\n        midnight: \"mi\",\n        noon: \"n\",\n        morning: \"morning\",\n        afternoon: \"afternoon\",\n        evening: \"evening\",\n        night: \"night\"\n      },\n      abbreviated: {\n        am: \"AM\",\n        pm: \"PM\",\n        midnight: \"midnight\",\n        noon: \"noon\",\n        morning: \"morning\",\n        afternoon: \"afternoon\",\n        evening: \"evening\",\n        night: \"night\"\n      },\n      wide: {\n        am: \"a.m.\",\n        pm: \"p.m.\",\n        midnight: \"midnight\",\n        noon: \"noon\",\n        morning: \"morning\",\n        afternoon: \"afternoon\",\n        evening: \"evening\",\n        night: \"night\"\n      }\n    };\n    var formattingDayPeriodValues = {\n      narrow: {\n        am: \"a\",\n        pm: \"p\",\n        midnight: \"mi\",\n        noon: \"n\",\n        morning: \"in the morning\",\n        afternoon: \"in the afternoon\",\n        evening: \"in the evening\",\n        night: \"at night\"\n      },\n      abbreviated: {\n        am: \"AM\",\n        pm: \"PM\",\n        midnight: \"midnight\",\n        noon: \"noon\",\n        morning: \"in the morning\",\n        afternoon: \"in the afternoon\",\n        evening: \"in the evening\",\n        night: \"at night\"\n      },\n      wide: {\n        am: \"a.m.\",\n        pm: \"p.m.\",\n        midnight: \"midnight\",\n        noon: \"noon\",\n        morning: \"in the morning\",\n        afternoon: \"in the afternoon\",\n        evening: \"in the evening\",\n        night: \"at night\"\n      }\n    };\n    var ordinalNumber = function(dirtyNumber, _options) {\n      var number = Number(dirtyNumber);\n      var rem100 = number % 100;\n      if (rem100 > 20 || rem100 < 10) {\n        switch (rem100 % 10) {\n          case 1:\n            return number + \"st\";\n          case 2:\n            return number + \"nd\";\n          case 3:\n            return number + \"rd\";\n        }\n      }\n      return number + \"th\";\n    };\n    var localize = {\n      ordinalNumber,\n      era: (0, _index.default)({\n        values: eraValues,\n        defaultWidth: \"wide\"\n      }),\n      quarter: (0, _index.default)({\n        values: quarterValues,\n        defaultWidth: \"wide\",\n        argumentCallback: function(quarter) {\n          return quarter - 1;\n        }\n      }),\n      month: (0, _index.default)({\n        values: monthValues,\n        defaultWidth: \"wide\"\n      }),\n      day: (0, _index.default)({\n        values: dayValues,\n        defaultWidth: \"wide\"\n      }),\n      dayPeriod: (0, _index.default)({\n        values: dayPeriodValues,\n        defaultWidth: \"wide\",\n        formattingValues: formattingDayPeriodValues,\n        defaultFormattingWidth: \"wide\"\n      })\n    };\n    var _default = localize;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/_lib/buildMatchFn/index.js\nvar require_buildMatchFn = __commonJS({\n  \"../../node_modules/date-fns/locale/_lib/buildMatchFn/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = buildMatchFn;\n    function buildMatchFn(args) {\n      return function(string) {\n        var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        var width = options.width;\n        var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n        var matchResult = string.match(matchPattern);\n        if (!matchResult) {\n          return null;\n        }\n        var matchedString = matchResult[0];\n        var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n        var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function(pattern) {\n          return pattern.test(matchedString);\n        }) : findKey(parsePatterns, function(pattern) {\n          return pattern.test(matchedString);\n        });\n        var value;\n        value = args.valueCallback ? args.valueCallback(key) : key;\n        value = options.valueCallback ? options.valueCallback(value) : value;\n        var rest = string.slice(matchedString.length);\n        return {\n          value,\n          rest\n        };\n      };\n    }\n    function findKey(object, predicate) {\n      for (var key in object) {\n        if (object.hasOwnProperty(key) && predicate(object[key])) {\n          return key;\n        }\n      }\n      return void 0;\n    }\n    function findIndex(array, predicate) {\n      for (var key = 0; key < array.length; key++) {\n        if (predicate(array[key])) {\n          return key;\n        }\n      }\n      return void 0;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/_lib/buildMatchPatternFn/index.js\nvar require_buildMatchPatternFn = __commonJS({\n  \"../../node_modules/date-fns/locale/_lib/buildMatchPatternFn/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = buildMatchPatternFn;\n    function buildMatchPatternFn(args) {\n      return function(string) {\n        var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        var matchResult = string.match(args.matchPattern);\n        if (!matchResult)\n          return null;\n        var matchedString = matchResult[0];\n        var parseResult = string.match(args.parsePattern);\n        if (!parseResult)\n          return null;\n        var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n        value = options.valueCallback ? options.valueCallback(value) : value;\n        var rest = string.slice(matchedString.length);\n        return {\n          value,\n          rest\n        };\n      };\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/_lib/match/index.js\nvar require_match = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/_lib/match/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_buildMatchFn());\n    var _index2 = _interopRequireDefault(require_buildMatchPatternFn());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\n    var parseOrdinalNumberPattern = /\\d+/i;\n    var matchEraPatterns = {\n      narrow: /^(b|a)/i,\n      abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n      wide: /^(before christ|before common era|anno domini|common era)/i\n    };\n    var parseEraPatterns = {\n      any: [/^b/i, /^(a|c)/i]\n    };\n    var matchQuarterPatterns = {\n      narrow: /^[1234]/i,\n      abbreviated: /^q[1234]/i,\n      wide: /^[1234](th|st|nd|rd)? quarter/i\n    };\n    var parseQuarterPatterns = {\n      any: [/1/i, /2/i, /3/i, /4/i]\n    };\n    var matchMonthPatterns = {\n      narrow: /^[jfmasond]/i,\n      abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n      wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n    };\n    var parseMonthPatterns = {\n      narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n      any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n    };\n    var matchDayPatterns = {\n      narrow: /^[smtwf]/i,\n      short: /^(su|mo|tu|we|th|fr|sa)/i,\n      abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n      wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n    };\n    var parseDayPatterns = {\n      narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n      any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n    };\n    var matchDayPeriodPatterns = {\n      narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n      any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n    };\n    var parseDayPeriodPatterns = {\n      any: {\n        am: /^a/i,\n        pm: /^p/i,\n        midnight: /^mi/i,\n        noon: /^no/i,\n        morning: /morning/i,\n        afternoon: /afternoon/i,\n        evening: /evening/i,\n        night: /night/i\n      }\n    };\n    var match = {\n      ordinalNumber: (0, _index2.default)({\n        matchPattern: matchOrdinalNumberPattern,\n        parsePattern: parseOrdinalNumberPattern,\n        valueCallback: function(value) {\n          return parseInt(value, 10);\n        }\n      }),\n      era: (0, _index.default)({\n        matchPatterns: matchEraPatterns,\n        defaultMatchWidth: \"wide\",\n        parsePatterns: parseEraPatterns,\n        defaultParseWidth: \"any\"\n      }),\n      quarter: (0, _index.default)({\n        matchPatterns: matchQuarterPatterns,\n        defaultMatchWidth: \"wide\",\n        parsePatterns: parseQuarterPatterns,\n        defaultParseWidth: \"any\",\n        valueCallback: function(index) {\n          return index + 1;\n        }\n      }),\n      month: (0, _index.default)({\n        matchPatterns: matchMonthPatterns,\n        defaultMatchWidth: \"wide\",\n        parsePatterns: parseMonthPatterns,\n        defaultParseWidth: \"any\"\n      }),\n      day: (0, _index.default)({\n        matchPatterns: matchDayPatterns,\n        defaultMatchWidth: \"wide\",\n        parsePatterns: parseDayPatterns,\n        defaultParseWidth: \"any\"\n      }),\n      dayPeriod: (0, _index.default)({\n        matchPatterns: matchDayPeriodPatterns,\n        defaultMatchWidth: \"any\",\n        parsePatterns: parseDayPeriodPatterns,\n        defaultParseWidth: \"any\"\n      })\n    };\n    var _default = match;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/locale/en-US/index.js\nvar require_en_US = __commonJS({\n  \"../../node_modules/date-fns/locale/en-US/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_formatDistance());\n    var _index2 = _interopRequireDefault(require_formatLong());\n    var _index3 = _interopRequireDefault(require_formatRelative());\n    var _index4 = _interopRequireDefault(require_localize());\n    var _index5 = _interopRequireDefault(require_match());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var locale = {\n      code: \"en-US\",\n      formatDistance: _index.default,\n      formatLong: _index2.default,\n      formatRelative: _index3.default,\n      localize: _index4.default,\n      match: _index5.default,\n      options: {\n        weekStartsOn: 0,\n        firstWeekContainsDate: 1\n      }\n    };\n    var _default = locale;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/toInteger/index.js\nvar require_toInteger = __commonJS({\n  \"../../node_modules/date-fns/_lib/toInteger/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = toInteger;\n    function toInteger(dirtyNumber) {\n      if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n        return NaN;\n      }\n      var number = Number(dirtyNumber);\n      if (isNaN(number)) {\n        return number;\n      }\n      return number < 0 ? Math.ceil(number) : Math.floor(number);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/addMilliseconds/index.js\nvar require_addMilliseconds = __commonJS({\n  \"../../node_modules/date-fns/addMilliseconds/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = addMilliseconds;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_toDate());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function addMilliseconds(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var timestamp = (0, _index2.default)(dirtyDate).getTime();\n      var amount = (0, _index.default)(dirtyAmount);\n      return new Date(timestamp + amount);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/subMilliseconds/index.js\nvar require_subMilliseconds = __commonJS({\n  \"../../node_modules/date-fns/subMilliseconds/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = subMilliseconds;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_addMilliseconds());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function subMilliseconds(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var amount = (0, _index.default)(dirtyAmount);\n      return (0, _index2.default)(dirtyDate, -amount);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getUTCDayOfYear/index.js\nvar require_getUTCDayOfYear = __commonJS({\n  \"../../node_modules/date-fns/_lib/getUTCDayOfYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getUTCDayOfYear;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var MILLISECONDS_IN_DAY = 864e5;\n    function getUTCDayOfYear(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var timestamp = date.getTime();\n      date.setUTCMonth(0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      var startOfYearTimestamp = date.getTime();\n      var difference = timestamp - startOfYearTimestamp;\n      return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/startOfUTCISOWeek/index.js\nvar require_startOfUTCISOWeek = __commonJS({\n  \"../../node_modules/date-fns/_lib/startOfUTCISOWeek/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = startOfUTCISOWeek;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function startOfUTCISOWeek(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var weekStartsOn = 1;\n      var date = (0, _index.default)(dirtyDate);\n      var day = date.getUTCDay();\n      var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n      date.setUTCDate(date.getUTCDate() - diff);\n      date.setUTCHours(0, 0, 0, 0);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getUTCISOWeekYear/index.js\nvar require_getUTCISOWeekYear = __commonJS({\n  \"../../node_modules/date-fns/_lib/getUTCISOWeekYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getUTCISOWeekYear;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    var _index3 = _interopRequireDefault(require_startOfUTCISOWeek());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getUTCISOWeekYear(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var year = date.getUTCFullYear();\n      var fourthOfJanuaryOfNextYear = new Date(0);\n      fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);\n      fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);\n      var startOfNextYear = (0, _index3.default)(fourthOfJanuaryOfNextYear);\n      var fourthOfJanuaryOfThisYear = new Date(0);\n      fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);\n      fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);\n      var startOfThisYear = (0, _index3.default)(fourthOfJanuaryOfThisYear);\n      if (date.getTime() >= startOfNextYear.getTime()) {\n        return year + 1;\n      } else if (date.getTime() >= startOfThisYear.getTime()) {\n        return year;\n      } else {\n        return year - 1;\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/startOfUTCISOWeekYear/index.js\nvar require_startOfUTCISOWeekYear = __commonJS({\n  \"../../node_modules/date-fns/_lib/startOfUTCISOWeekYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = startOfUTCISOWeekYear;\n    var _index = _interopRequireDefault(require_getUTCISOWeekYear());\n    var _index2 = _interopRequireDefault(require_startOfUTCISOWeek());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function startOfUTCISOWeekYear(dirtyDate) {\n      (0, _index3.default)(1, arguments);\n      var year = (0, _index.default)(dirtyDate);\n      var fourthOfJanuary = new Date(0);\n      fourthOfJanuary.setUTCFullYear(year, 0, 4);\n      fourthOfJanuary.setUTCHours(0, 0, 0, 0);\n      var date = (0, _index2.default)(fourthOfJanuary);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getUTCISOWeek/index.js\nvar require_getUTCISOWeek = __commonJS({\n  \"../../node_modules/date-fns/_lib/getUTCISOWeek/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getUTCISOWeek;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_startOfUTCISOWeek());\n    var _index3 = _interopRequireDefault(require_startOfUTCISOWeekYear());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var MILLISECONDS_IN_WEEK = 6048e5;\n    function getUTCISOWeek(dirtyDate) {\n      (0, _index4.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var diff = (0, _index2.default)(date).getTime() - (0, _index3.default)(date).getTime();\n      return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/startOfUTCWeek/index.js\nvar require_startOfUTCWeek = __commonJS({\n  \"../../node_modules/date-fns/_lib/startOfUTCWeek/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = startOfUTCWeek;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    var _index3 = _interopRequireDefault(require_toInteger());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function startOfUTCWeek(dirtyDate, dirtyOptions) {\n      (0, _index2.default)(1, arguments);\n      var options = dirtyOptions || {};\n      var locale = options.locale;\n      var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n      var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : (0, _index3.default)(localeWeekStartsOn);\n      var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : (0, _index3.default)(options.weekStartsOn);\n      if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n        throw new RangeError(\"weekStartsOn must be between 0 and 6 inclusively\");\n      }\n      var date = (0, _index.default)(dirtyDate);\n      var day = date.getUTCDay();\n      var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n      date.setUTCDate(date.getUTCDate() - diff);\n      date.setUTCHours(0, 0, 0, 0);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getUTCWeekYear/index.js\nvar require_getUTCWeekYear = __commonJS({\n  \"../../node_modules/date-fns/_lib/getUTCWeekYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getUTCWeekYear;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    var _index3 = _interopRequireDefault(require_startOfUTCWeek());\n    var _index4 = _interopRequireDefault(require_toInteger());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getUTCWeekYear(dirtyDate, dirtyOptions) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var year = date.getUTCFullYear();\n      var options = dirtyOptions || {};\n      var locale = options.locale;\n      var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;\n      var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : (0, _index4.default)(localeFirstWeekContainsDate);\n      var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : (0, _index4.default)(options.firstWeekContainsDate);\n      if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n        throw new RangeError(\"firstWeekContainsDate must be between 1 and 7 inclusively\");\n      }\n      var firstWeekOfNextYear = new Date(0);\n      firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);\n      firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);\n      var startOfNextYear = (0, _index3.default)(firstWeekOfNextYear, dirtyOptions);\n      var firstWeekOfThisYear = new Date(0);\n      firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);\n      firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);\n      var startOfThisYear = (0, _index3.default)(firstWeekOfThisYear, dirtyOptions);\n      if (date.getTime() >= startOfNextYear.getTime()) {\n        return year + 1;\n      } else if (date.getTime() >= startOfThisYear.getTime()) {\n        return year;\n      } else {\n        return year - 1;\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/startOfUTCWeekYear/index.js\nvar require_startOfUTCWeekYear = __commonJS({\n  \"../../node_modules/date-fns/_lib/startOfUTCWeekYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = startOfUTCWeekYear;\n    var _index = _interopRequireDefault(require_getUTCWeekYear());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    var _index3 = _interopRequireDefault(require_startOfUTCWeek());\n    var _index4 = _interopRequireDefault(require_toInteger());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function startOfUTCWeekYear(dirtyDate, dirtyOptions) {\n      (0, _index2.default)(1, arguments);\n      var options = dirtyOptions || {};\n      var locale = options.locale;\n      var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;\n      var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : (0, _index4.default)(localeFirstWeekContainsDate);\n      var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : (0, _index4.default)(options.firstWeekContainsDate);\n      var year = (0, _index.default)(dirtyDate, dirtyOptions);\n      var firstWeek = new Date(0);\n      firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);\n      firstWeek.setUTCHours(0, 0, 0, 0);\n      var date = (0, _index3.default)(firstWeek, dirtyOptions);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getUTCWeek/index.js\nvar require_getUTCWeek = __commonJS({\n  \"../../node_modules/date-fns/_lib/getUTCWeek/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getUTCWeek;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_startOfUTCWeek());\n    var _index3 = _interopRequireDefault(require_startOfUTCWeekYear());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var MILLISECONDS_IN_WEEK = 6048e5;\n    function getUTCWeek(dirtyDate, options) {\n      (0, _index4.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var diff = (0, _index2.default)(date, options).getTime() - (0, _index3.default)(date, options).getTime();\n      return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/addLeadingZeros/index.js\nvar require_addLeadingZeros = __commonJS({\n  \"../../node_modules/date-fns/_lib/addLeadingZeros/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = addLeadingZeros;\n    function addLeadingZeros(number, targetLength) {\n      var sign = number < 0 ? \"-\" : \"\";\n      var output = Math.abs(number).toString();\n      while (output.length < targetLength) {\n        output = \"0\" + output;\n      }\n      return sign + output;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/format/lightFormatters/index.js\nvar require_lightFormatters = __commonJS({\n  \"../../node_modules/date-fns/_lib/format/lightFormatters/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_addLeadingZeros());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var formatters = {\n      y: function(date, token) {\n        var signedYear = date.getUTCFullYear();\n        var year = signedYear > 0 ? signedYear : 1 - signedYear;\n        return (0, _index.default)(token === \"yy\" ? year % 100 : year, token.length);\n      },\n      M: function(date, token) {\n        var month = date.getUTCMonth();\n        return token === \"M\" ? String(month + 1) : (0, _index.default)(month + 1, 2);\n      },\n      d: function(date, token) {\n        return (0, _index.default)(date.getUTCDate(), token.length);\n      },\n      a: function(date, token) {\n        var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? \"pm\" : \"am\";\n        switch (token) {\n          case \"a\":\n          case \"aa\":\n            return dayPeriodEnumValue.toUpperCase();\n          case \"aaa\":\n            return dayPeriodEnumValue;\n          case \"aaaaa\":\n            return dayPeriodEnumValue[0];\n          case \"aaaa\":\n          default:\n            return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n        }\n      },\n      h: function(date, token) {\n        return (0, _index.default)(date.getUTCHours() % 12 || 12, token.length);\n      },\n      H: function(date, token) {\n        return (0, _index.default)(date.getUTCHours(), token.length);\n      },\n      m: function(date, token) {\n        return (0, _index.default)(date.getUTCMinutes(), token.length);\n      },\n      s: function(date, token) {\n        return (0, _index.default)(date.getUTCSeconds(), token.length);\n      },\n      S: function(date, token) {\n        var numberOfDigits = token.length;\n        var milliseconds = date.getUTCMilliseconds();\n        var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));\n        return (0, _index.default)(fractionalSeconds, token.length);\n      }\n    };\n    var _default = formatters;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/format/formatters/index.js\nvar require_formatters = __commonJS({\n  \"../../node_modules/date-fns/_lib/format/formatters/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    var _index = _interopRequireDefault(require_getUTCDayOfYear());\n    var _index2 = _interopRequireDefault(require_getUTCISOWeek());\n    var _index3 = _interopRequireDefault(require_getUTCISOWeekYear());\n    var _index4 = _interopRequireDefault(require_getUTCWeek());\n    var _index5 = _interopRequireDefault(require_getUTCWeekYear());\n    var _index6 = _interopRequireDefault(require_addLeadingZeros());\n    var _index7 = _interopRequireDefault(require_lightFormatters());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var dayPeriodEnum = {\n      am: \"am\",\n      pm: \"pm\",\n      midnight: \"midnight\",\n      noon: \"noon\",\n      morning: \"morning\",\n      afternoon: \"afternoon\",\n      evening: \"evening\",\n      night: \"night\"\n    };\n    var formatters = {\n      G: function(date, token, localize) {\n        var era = date.getUTCFullYear() > 0 ? 1 : 0;\n        switch (token) {\n          case \"G\":\n          case \"GG\":\n          case \"GGG\":\n            return localize.era(era, {\n              width: \"abbreviated\"\n            });\n          case \"GGGGG\":\n            return localize.era(era, {\n              width: \"narrow\"\n            });\n          case \"GGGG\":\n          default:\n            return localize.era(era, {\n              width: \"wide\"\n            });\n        }\n      },\n      y: function(date, token, localize) {\n        if (token === \"yo\") {\n          var signedYear = date.getUTCFullYear();\n          var year = signedYear > 0 ? signedYear : 1 - signedYear;\n          return localize.ordinalNumber(year, {\n            unit: \"year\"\n          });\n        }\n        return _index7.default.y(date, token);\n      },\n      Y: function(date, token, localize, options) {\n        var signedWeekYear = (0, _index5.default)(date, options);\n        var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n        if (token === \"YY\") {\n          var twoDigitYear = weekYear % 100;\n          return (0, _index6.default)(twoDigitYear, 2);\n        }\n        if (token === \"Yo\") {\n          return localize.ordinalNumber(weekYear, {\n            unit: \"year\"\n          });\n        }\n        return (0, _index6.default)(weekYear, token.length);\n      },\n      R: function(date, token) {\n        var isoWeekYear = (0, _index3.default)(date);\n        return (0, _index6.default)(isoWeekYear, token.length);\n      },\n      u: function(date, token) {\n        var year = date.getUTCFullYear();\n        return (0, _index6.default)(year, token.length);\n      },\n      Q: function(date, token, localize) {\n        var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n        switch (token) {\n          case \"Q\":\n            return String(quarter);\n          case \"QQ\":\n            return (0, _index6.default)(quarter, 2);\n          case \"Qo\":\n            return localize.ordinalNumber(quarter, {\n              unit: \"quarter\"\n            });\n          case \"QQQ\":\n            return localize.quarter(quarter, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"QQQQQ\":\n            return localize.quarter(quarter, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"QQQQ\":\n          default:\n            return localize.quarter(quarter, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      q: function(date, token, localize) {\n        var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n        switch (token) {\n          case \"q\":\n            return String(quarter);\n          case \"qq\":\n            return (0, _index6.default)(quarter, 2);\n          case \"qo\":\n            return localize.ordinalNumber(quarter, {\n              unit: \"quarter\"\n            });\n          case \"qqq\":\n            return localize.quarter(quarter, {\n              width: \"abbreviated\",\n              context: \"standalone\"\n            });\n          case \"qqqqq\":\n            return localize.quarter(quarter, {\n              width: \"narrow\",\n              context: \"standalone\"\n            });\n          case \"qqqq\":\n          default:\n            return localize.quarter(quarter, {\n              width: \"wide\",\n              context: \"standalone\"\n            });\n        }\n      },\n      M: function(date, token, localize) {\n        var month = date.getUTCMonth();\n        switch (token) {\n          case \"M\":\n          case \"MM\":\n            return _index7.default.M(date, token);\n          case \"Mo\":\n            return localize.ordinalNumber(month + 1, {\n              unit: \"month\"\n            });\n          case \"MMM\":\n            return localize.month(month, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"MMMMM\":\n            return localize.month(month, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"MMMM\":\n          default:\n            return localize.month(month, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      L: function(date, token, localize) {\n        var month = date.getUTCMonth();\n        switch (token) {\n          case \"L\":\n            return String(month + 1);\n          case \"LL\":\n            return (0, _index6.default)(month + 1, 2);\n          case \"Lo\":\n            return localize.ordinalNumber(month + 1, {\n              unit: \"month\"\n            });\n          case \"LLL\":\n            return localize.month(month, {\n              width: \"abbreviated\",\n              context: \"standalone\"\n            });\n          case \"LLLLL\":\n            return localize.month(month, {\n              width: \"narrow\",\n              context: \"standalone\"\n            });\n          case \"LLLL\":\n          default:\n            return localize.month(month, {\n              width: \"wide\",\n              context: \"standalone\"\n            });\n        }\n      },\n      w: function(date, token, localize, options) {\n        var week = (0, _index4.default)(date, options);\n        if (token === \"wo\") {\n          return localize.ordinalNumber(week, {\n            unit: \"week\"\n          });\n        }\n        return (0, _index6.default)(week, token.length);\n      },\n      I: function(date, token, localize) {\n        var isoWeek = (0, _index2.default)(date);\n        if (token === \"Io\") {\n          return localize.ordinalNumber(isoWeek, {\n            unit: \"week\"\n          });\n        }\n        return (0, _index6.default)(isoWeek, token.length);\n      },\n      d: function(date, token, localize) {\n        if (token === \"do\") {\n          return localize.ordinalNumber(date.getUTCDate(), {\n            unit: \"date\"\n          });\n        }\n        return _index7.default.d(date, token);\n      },\n      D: function(date, token, localize) {\n        var dayOfYear = (0, _index.default)(date);\n        if (token === \"Do\") {\n          return localize.ordinalNumber(dayOfYear, {\n            unit: \"dayOfYear\"\n          });\n        }\n        return (0, _index6.default)(dayOfYear, token.length);\n      },\n      E: function(date, token, localize) {\n        var dayOfWeek = date.getUTCDay();\n        switch (token) {\n          case \"E\":\n          case \"EE\":\n          case \"EEE\":\n            return localize.day(dayOfWeek, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"EEEEE\":\n            return localize.day(dayOfWeek, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"EEEEEE\":\n            return localize.day(dayOfWeek, {\n              width: \"short\",\n              context: \"formatting\"\n            });\n          case \"EEEE\":\n          default:\n            return localize.day(dayOfWeek, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      e: function(date, token, localize, options) {\n        var dayOfWeek = date.getUTCDay();\n        var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n        switch (token) {\n          case \"e\":\n            return String(localDayOfWeek);\n          case \"ee\":\n            return (0, _index6.default)(localDayOfWeek, 2);\n          case \"eo\":\n            return localize.ordinalNumber(localDayOfWeek, {\n              unit: \"day\"\n            });\n          case \"eee\":\n            return localize.day(dayOfWeek, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"eeeee\":\n            return localize.day(dayOfWeek, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"eeeeee\":\n            return localize.day(dayOfWeek, {\n              width: \"short\",\n              context: \"formatting\"\n            });\n          case \"eeee\":\n          default:\n            return localize.day(dayOfWeek, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      c: function(date, token, localize, options) {\n        var dayOfWeek = date.getUTCDay();\n        var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n        switch (token) {\n          case \"c\":\n            return String(localDayOfWeek);\n          case \"cc\":\n            return (0, _index6.default)(localDayOfWeek, token.length);\n          case \"co\":\n            return localize.ordinalNumber(localDayOfWeek, {\n              unit: \"day\"\n            });\n          case \"ccc\":\n            return localize.day(dayOfWeek, {\n              width: \"abbreviated\",\n              context: \"standalone\"\n            });\n          case \"ccccc\":\n            return localize.day(dayOfWeek, {\n              width: \"narrow\",\n              context: \"standalone\"\n            });\n          case \"cccccc\":\n            return localize.day(dayOfWeek, {\n              width: \"short\",\n              context: \"standalone\"\n            });\n          case \"cccc\":\n          default:\n            return localize.day(dayOfWeek, {\n              width: \"wide\",\n              context: \"standalone\"\n            });\n        }\n      },\n      i: function(date, token, localize) {\n        var dayOfWeek = date.getUTCDay();\n        var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n        switch (token) {\n          case \"i\":\n            return String(isoDayOfWeek);\n          case \"ii\":\n            return (0, _index6.default)(isoDayOfWeek, token.length);\n          case \"io\":\n            return localize.ordinalNumber(isoDayOfWeek, {\n              unit: \"day\"\n            });\n          case \"iii\":\n            return localize.day(dayOfWeek, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"iiiii\":\n            return localize.day(dayOfWeek, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"iiiiii\":\n            return localize.day(dayOfWeek, {\n              width: \"short\",\n              context: \"formatting\"\n            });\n          case \"iiii\":\n          default:\n            return localize.day(dayOfWeek, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      a: function(date, token, localize) {\n        var hours = date.getUTCHours();\n        var dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n        switch (token) {\n          case \"a\":\n          case \"aa\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"aaa\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            }).toLowerCase();\n          case \"aaaaa\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"aaaa\":\n          default:\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      b: function(date, token, localize) {\n        var hours = date.getUTCHours();\n        var dayPeriodEnumValue;\n        if (hours === 12) {\n          dayPeriodEnumValue = dayPeriodEnum.noon;\n        } else if (hours === 0) {\n          dayPeriodEnumValue = dayPeriodEnum.midnight;\n        } else {\n          dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n        }\n        switch (token) {\n          case \"b\":\n          case \"bb\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"bbb\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            }).toLowerCase();\n          case \"bbbbb\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"bbbb\":\n          default:\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      B: function(date, token, localize) {\n        var hours = date.getUTCHours();\n        var dayPeriodEnumValue;\n        if (hours >= 17) {\n          dayPeriodEnumValue = dayPeriodEnum.evening;\n        } else if (hours >= 12) {\n          dayPeriodEnumValue = dayPeriodEnum.afternoon;\n        } else if (hours >= 4) {\n          dayPeriodEnumValue = dayPeriodEnum.morning;\n        } else {\n          dayPeriodEnumValue = dayPeriodEnum.night;\n        }\n        switch (token) {\n          case \"B\":\n          case \"BB\":\n          case \"BBB\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"abbreviated\",\n              context: \"formatting\"\n            });\n          case \"BBBBB\":\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"narrow\",\n              context: \"formatting\"\n            });\n          case \"BBBB\":\n          default:\n            return localize.dayPeriod(dayPeriodEnumValue, {\n              width: \"wide\",\n              context: \"formatting\"\n            });\n        }\n      },\n      h: function(date, token, localize) {\n        if (token === \"ho\") {\n          var hours = date.getUTCHours() % 12;\n          if (hours === 0)\n            hours = 12;\n          return localize.ordinalNumber(hours, {\n            unit: \"hour\"\n          });\n        }\n        return _index7.default.h(date, token);\n      },\n      H: function(date, token, localize) {\n        if (token === \"Ho\") {\n          return localize.ordinalNumber(date.getUTCHours(), {\n            unit: \"hour\"\n          });\n        }\n        return _index7.default.H(date, token);\n      },\n      K: function(date, token, localize) {\n        var hours = date.getUTCHours() % 12;\n        if (token === \"Ko\") {\n          return localize.ordinalNumber(hours, {\n            unit: \"hour\"\n          });\n        }\n        return (0, _index6.default)(hours, token.length);\n      },\n      k: function(date, token, localize) {\n        var hours = date.getUTCHours();\n        if (hours === 0)\n          hours = 24;\n        if (token === \"ko\") {\n          return localize.ordinalNumber(hours, {\n            unit: \"hour\"\n          });\n        }\n        return (0, _index6.default)(hours, token.length);\n      },\n      m: function(date, token, localize) {\n        if (token === \"mo\") {\n          return localize.ordinalNumber(date.getUTCMinutes(), {\n            unit: \"minute\"\n          });\n        }\n        return _index7.default.m(date, token);\n      },\n      s: function(date, token, localize) {\n        if (token === \"so\") {\n          return localize.ordinalNumber(date.getUTCSeconds(), {\n            unit: \"second\"\n          });\n        }\n        return _index7.default.s(date, token);\n      },\n      S: function(date, token) {\n        return _index7.default.S(date, token);\n      },\n      X: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timezoneOffset = originalDate.getTimezoneOffset();\n        if (timezoneOffset === 0) {\n          return \"Z\";\n        }\n        switch (token) {\n          case \"X\":\n            return formatTimezoneWithOptionalMinutes(timezoneOffset);\n          case \"XXXX\":\n          case \"XX\":\n            return formatTimezone(timezoneOffset);\n          case \"XXXXX\":\n          case \"XXX\":\n          default:\n            return formatTimezone(timezoneOffset, \":\");\n        }\n      },\n      x: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timezoneOffset = originalDate.getTimezoneOffset();\n        switch (token) {\n          case \"x\":\n            return formatTimezoneWithOptionalMinutes(timezoneOffset);\n          case \"xxxx\":\n          case \"xx\":\n            return formatTimezone(timezoneOffset);\n          case \"xxxxx\":\n          case \"xxx\":\n          default:\n            return formatTimezone(timezoneOffset, \":\");\n        }\n      },\n      O: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timezoneOffset = originalDate.getTimezoneOffset();\n        switch (token) {\n          case \"O\":\n          case \"OO\":\n          case \"OOO\":\n            return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n          case \"OOOO\":\n          default:\n            return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n        }\n      },\n      z: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timezoneOffset = originalDate.getTimezoneOffset();\n        switch (token) {\n          case \"z\":\n          case \"zz\":\n          case \"zzz\":\n            return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n          case \"zzzz\":\n          default:\n            return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n        }\n      },\n      t: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timestamp = Math.floor(originalDate.getTime() / 1e3);\n        return (0, _index6.default)(timestamp, token.length);\n      },\n      T: function(date, token, _localize, options) {\n        var originalDate = options._originalDate || date;\n        var timestamp = originalDate.getTime();\n        return (0, _index6.default)(timestamp, token.length);\n      }\n    };\n    function formatTimezoneShort(offset, dirtyDelimiter) {\n      var sign = offset > 0 ? \"-\" : \"+\";\n      var absOffset = Math.abs(offset);\n      var hours = Math.floor(absOffset / 60);\n      var minutes = absOffset % 60;\n      if (minutes === 0) {\n        return sign + String(hours);\n      }\n      var delimiter = dirtyDelimiter || \"\";\n      return sign + String(hours) + delimiter + (0, _index6.default)(minutes, 2);\n    }\n    function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {\n      if (offset % 60 === 0) {\n        var sign = offset > 0 ? \"-\" : \"+\";\n        return sign + (0, _index6.default)(Math.abs(offset) / 60, 2);\n      }\n      return formatTimezone(offset, dirtyDelimiter);\n    }\n    function formatTimezone(offset, dirtyDelimiter) {\n      var delimiter = dirtyDelimiter || \"\";\n      var sign = offset > 0 ? \"-\" : \"+\";\n      var absOffset = Math.abs(offset);\n      var hours = (0, _index6.default)(Math.floor(absOffset / 60), 2);\n      var minutes = (0, _index6.default)(absOffset % 60, 2);\n      return sign + hours + delimiter + minutes;\n    }\n    var _default = formatters;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/format/longFormatters/index.js\nvar require_longFormatters = __commonJS({\n  \"../../node_modules/date-fns/_lib/format/longFormatters/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = void 0;\n    function dateLongFormatter(pattern, formatLong) {\n      switch (pattern) {\n        case \"P\":\n          return formatLong.date({\n            width: \"short\"\n          });\n        case \"PP\":\n          return formatLong.date({\n            width: \"medium\"\n          });\n        case \"PPP\":\n          return formatLong.date({\n            width: \"long\"\n          });\n        case \"PPPP\":\n        default:\n          return formatLong.date({\n            width: \"full\"\n          });\n      }\n    }\n    function timeLongFormatter(pattern, formatLong) {\n      switch (pattern) {\n        case \"p\":\n          return formatLong.time({\n            width: \"short\"\n          });\n        case \"pp\":\n          return formatLong.time({\n            width: \"medium\"\n          });\n        case \"ppp\":\n          return formatLong.time({\n            width: \"long\"\n          });\n        case \"pppp\":\n        default:\n          return formatLong.time({\n            width: \"full\"\n          });\n      }\n    }\n    function dateTimeLongFormatter(pattern, formatLong) {\n      var matchResult = pattern.match(/(P+)(p+)?/) || [];\n      var datePattern = matchResult[1];\n      var timePattern = matchResult[2];\n      if (!timePattern) {\n        return dateLongFormatter(pattern, formatLong);\n      }\n      var dateTimeFormat;\n      switch (datePattern) {\n        case \"P\":\n          dateTimeFormat = formatLong.dateTime({\n            width: \"short\"\n          });\n          break;\n        case \"PP\":\n          dateTimeFormat = formatLong.dateTime({\n            width: \"medium\"\n          });\n          break;\n        case \"PPP\":\n          dateTimeFormat = formatLong.dateTime({\n            width: \"long\"\n          });\n          break;\n        case \"PPPP\":\n        default:\n          dateTimeFormat = formatLong.dateTime({\n            width: \"full\"\n          });\n          break;\n      }\n      return dateTimeFormat.replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong)).replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n    }\n    var longFormatters = {\n      p: timeLongFormatter,\n      P: dateTimeLongFormatter\n    };\n    var _default = longFormatters;\n    exports.default = _default;\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds/index.js\nvar require_getTimezoneOffsetInMilliseconds = __commonJS({\n  \"../../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getTimezoneOffsetInMilliseconds;\n    function getTimezoneOffsetInMilliseconds(date) {\n      var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n      utcDate.setUTCFullYear(date.getFullYear());\n      return date.getTime() - utcDate.getTime();\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/protectedTokens/index.js\nvar require_protectedTokens = __commonJS({\n  \"../../node_modules/date-fns/_lib/protectedTokens/index.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.isProtectedDayOfYearToken = isProtectedDayOfYearToken;\n    exports.isProtectedWeekYearToken = isProtectedWeekYearToken;\n    exports.throwProtectedError = throwProtectedError;\n    var protectedDayOfYearTokens = [\"D\", \"DD\"];\n    var protectedWeekYearTokens = [\"YY\", \"YYYY\"];\n    function isProtectedDayOfYearToken(token) {\n      return protectedDayOfYearTokens.indexOf(token) !== -1;\n    }\n    function isProtectedWeekYearToken(token) {\n      return protectedWeekYearTokens.indexOf(token) !== -1;\n    }\n    function throwProtectedError(token, format4, input) {\n      if (token === \"YYYY\") {\n        throw new RangeError(\"Use `yyyy` instead of `YYYY` (in `\".concat(format4, \"`) for formatting years to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n      } else if (token === \"YY\") {\n        throw new RangeError(\"Use `yy` instead of `YY` (in `\".concat(format4, \"`) for formatting years to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n      } else if (token === \"D\") {\n        throw new RangeError(\"Use `d` instead of `D` (in `\".concat(format4, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n      } else if (token === \"DD\") {\n        throw new RangeError(\"Use `dd` instead of `DD` (in `\".concat(format4, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://git.io/fxCyr\"));\n      }\n    }\n  }\n});\n\n// ../../node_modules/date-fns/format/index.js\nvar require_format = __commonJS({\n  \"../../node_modules/date-fns/format/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = format4;\n    var _index = _interopRequireDefault(require_isValid());\n    var _index2 = _interopRequireDefault(require_en_US());\n    var _index3 = _interopRequireDefault(require_subMilliseconds());\n    var _index4 = _interopRequireDefault(require_toDate());\n    var _index5 = _interopRequireDefault(require_formatters());\n    var _index6 = _interopRequireDefault(require_longFormatters());\n    var _index7 = _interopRequireDefault(require_getTimezoneOffsetInMilliseconds());\n    var _index8 = require_protectedTokens();\n    var _index9 = _interopRequireDefault(require_toInteger());\n    var _index10 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n    var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n    var escapedStringRegExp = /^'([^]*?)'?$/;\n    var doubleQuoteRegExp = /''/g;\n    var unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n    function format4(dirtyDate, dirtyFormatStr, dirtyOptions) {\n      (0, _index10.default)(2, arguments);\n      var formatStr = String(dirtyFormatStr);\n      var options = dirtyOptions || {};\n      var locale = options.locale || _index2.default;\n      var localeFirstWeekContainsDate = locale.options && locale.options.firstWeekContainsDate;\n      var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : (0, _index9.default)(localeFirstWeekContainsDate);\n      var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : (0, _index9.default)(options.firstWeekContainsDate);\n      if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n        throw new RangeError(\"firstWeekContainsDate must be between 1 and 7 inclusively\");\n      }\n      var localeWeekStartsOn = locale.options && locale.options.weekStartsOn;\n      var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : (0, _index9.default)(localeWeekStartsOn);\n      var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : (0, _index9.default)(options.weekStartsOn);\n      if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n        throw new RangeError(\"weekStartsOn must be between 0 and 6 inclusively\");\n      }\n      if (!locale.localize) {\n        throw new RangeError(\"locale must contain localize property\");\n      }\n      if (!locale.formatLong) {\n        throw new RangeError(\"locale must contain formatLong property\");\n      }\n      var originalDate = (0, _index4.default)(dirtyDate);\n      if (!(0, _index.default)(originalDate)) {\n        throw new RangeError(\"Invalid time value\");\n      }\n      var timezoneOffset = (0, _index7.default)(originalDate);\n      var utcDate = (0, _index3.default)(originalDate, timezoneOffset);\n      var formatterOptions = {\n        firstWeekContainsDate,\n        weekStartsOn,\n        locale,\n        _originalDate: originalDate\n      };\n      var result = formatStr.match(longFormattingTokensRegExp).map(function(substring) {\n        var firstCharacter = substring[0];\n        if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n          var longFormatter = _index6.default[firstCharacter];\n          return longFormatter(substring, locale.formatLong, formatterOptions);\n        }\n        return substring;\n      }).join(\"\").match(formattingTokensRegExp).map(function(substring) {\n        if (substring === \"''\") {\n          return \"'\";\n        }\n        var firstCharacter = substring[0];\n        if (firstCharacter === \"'\") {\n          return cleanEscapedString(substring);\n        }\n        var formatter = _index5.default[firstCharacter];\n        if (formatter) {\n          if (!options.useAdditionalWeekYearTokens && (0, _index8.isProtectedWeekYearToken)(substring)) {\n            (0, _index8.throwProtectedError)(substring, dirtyFormatStr, dirtyDate);\n          }\n          if (!options.useAdditionalDayOfYearTokens && (0, _index8.isProtectedDayOfYearToken)(substring)) {\n            (0, _index8.throwProtectedError)(substring, dirtyFormatStr, dirtyDate);\n          }\n          return formatter(utcDate, substring, locale.localize, formatterOptions);\n        }\n        if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n          throw new RangeError(\"Format string contains an unescaped latin alphabet character `\" + firstCharacter + \"`\");\n        }\n        return substring;\n      }).join(\"\");\n      return result;\n    }\n    function cleanEscapedString(input) {\n      return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, \"'\");\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/format-number/index.js\nvar require_format_number = __commonJS({\n  \"../../node_modules/format-number/index.js\"(exports, module) {\n    module.exports = formatter;\n    module.exports.default = formatter;\n    function formatter(options) {\n      options = options || {};\n      options.negativeType = options.negativeType || (options.negative === \"R\" ? \"right\" : \"left\");\n      if (typeof options.negativeLeftSymbol !== \"string\") {\n        switch (options.negativeType) {\n          case \"left\":\n            options.negativeLeftSymbol = \"-\";\n            break;\n          case \"brackets\":\n            options.negativeLeftSymbol = \"(\";\n            break;\n          default:\n            options.negativeLeftSymbol = \"\";\n        }\n      }\n      if (typeof options.negativeRightSymbol !== \"string\") {\n        switch (options.negativeType) {\n          case \"right\":\n            options.negativeRightSymbol = \"-\";\n            break;\n          case \"brackets\":\n            options.negativeRightSymbol = \")\";\n            break;\n          default:\n            options.negativeRightSymbol = \"\";\n        }\n      }\n      if (typeof options.negativeLeftOut !== \"boolean\") {\n        options.negativeLeftOut = options.negativeOut === false ? false : true;\n      }\n      if (typeof options.negativeRightOut !== \"boolean\") {\n        options.negativeRightOut = options.negativeOut === false ? false : true;\n      }\n      options.prefix = options.prefix || \"\";\n      options.suffix = options.suffix || \"\";\n      if (typeof options.integerSeparator !== \"string\") {\n        options.integerSeparator = typeof options.separator === \"string\" ? options.separator : \",\";\n      }\n      options.decimalsSeparator = typeof options.decimalsSeparator === \"string\" ? options.decimalsSeparator : \"\";\n      options.decimal = options.decimal || \".\";\n      options.padLeft = options.padLeft || -1;\n      options.padRight = options.padRight || -1;\n      function format4(number, overrideOptions) {\n        overrideOptions = overrideOptions || {};\n        if (number || number === 0) {\n          number = \"\" + number;\n        } else {\n          return \"\";\n        }\n        var output = [];\n        var negative = number.charAt(0) === \"-\";\n        number = number.replace(/^\\-/g, \"\");\n        if (!options.negativeLeftOut && !overrideOptions.noUnits) {\n          output.push(options.prefix);\n        }\n        if (negative) {\n          output.push(options.negativeLeftSymbol);\n        }\n        if (options.negativeLeftOut && !overrideOptions.noUnits) {\n          output.push(options.prefix);\n        }\n        number = number.split(\".\");\n        if (options.round != null)\n          round(number, options.round);\n        if (options.truncate != null)\n          number[1] = truncate(number[1], options.truncate);\n        if (options.padLeft > 0)\n          number[0] = padLeft(number[0], options.padLeft);\n        if (options.padRight > 0)\n          number[1] = padRight(number[1], options.padRight);\n        if (!overrideOptions.noSeparator && number[1])\n          number[1] = addDecimalSeparators(number[1], options.decimalsSeparator);\n        if (!overrideOptions.noSeparator && number[0])\n          number[0] = addIntegerSeparators(number[0], options.integerSeparator);\n        output.push(number[0]);\n        if (number[1]) {\n          output.push(options.decimal);\n          output.push(number[1]);\n        }\n        if (options.negativeRightOut && !overrideOptions.noUnits) {\n          output.push(options.suffix);\n        }\n        if (negative) {\n          output.push(options.negativeRightSymbol);\n        }\n        if (!options.negativeRightOut && !overrideOptions.noUnits) {\n          output.push(options.suffix);\n        }\n        return output.join(\"\");\n      }\n      format4.negative = options.negative;\n      format4.negativeOut = options.negativeOut;\n      format4.negativeType = options.negativeType;\n      format4.negativeLeftOut = options.negativeLeftOut;\n      format4.negativeLeftSymbol = options.negativeLeftSymbol;\n      format4.negativeRightOut = options.negativeRightOut;\n      format4.negativeRightSymbol = options.negativeRightSymbol;\n      format4.prefix = options.prefix;\n      format4.suffix = options.suffix;\n      format4.separate = options.separate;\n      format4.integerSeparator = options.integerSeparator;\n      format4.decimalsSeparator = options.decimalsSeparator;\n      format4.decimal = options.decimal;\n      format4.padLeft = options.padLeft;\n      format4.padRight = options.padRight;\n      format4.truncate = options.truncate;\n      format4.round = options.round;\n      function unformat(number, allowedSeparators) {\n        allowedSeparators = allowedSeparators || [];\n        if (options.allowedSeparators) {\n          options.allowedSeparators.forEach(function(s) {\n            allowedSeparators.push(s);\n          });\n        }\n        allowedSeparators.push(options.integerSeparator);\n        allowedSeparators.push(options.decimalsSeparator);\n        number = number.replace(options.prefix, \"\");\n        number = number.replace(options.suffix, \"\");\n        var newNumber = number;\n        do {\n          number = newNumber;\n          for (var i = 0; i < allowedSeparators.length; i++) {\n            newNumber = newNumber.replace(allowedSeparators[i], \"\");\n          }\n        } while (newNumber != number);\n        return number;\n      }\n      format4.unformat = unformat;\n      function validate(number, allowedSeparators) {\n        number = unformat(number, allowedSeparators);\n        number = number.split(options.decimal);\n        if (number.length > 2) {\n          return false;\n        } else if (options.truncate != null && number[1] && number[1].length > options.truncate) {\n          return false;\n        } else if (options.round != null && number[1] && number[1].length > options.round) {\n          return false;\n        } else {\n          return /^-?\\d+\\.?\\d*$/.test(number);\n        }\n      }\n      return format4;\n    }\n    function addIntegerSeparators(x, separator) {\n      x += \"\";\n      if (!separator)\n        return x;\n      var rgx = /(\\d+)(\\d{3})/;\n      while (rgx.test(x)) {\n        x = x.replace(rgx, \"$1\" + separator + \"$2\");\n      }\n      return x;\n    }\n    function addDecimalSeparators(x, separator) {\n      x += \"\";\n      if (!separator)\n        return x;\n      var rgx = /(\\d{3})(\\d+)/;\n      while (rgx.test(x)) {\n        x = x.replace(rgx, \"$1\" + separator + \"$2\");\n      }\n      return x;\n    }\n    function padLeft(x, padding) {\n      x = x + \"\";\n      var buf = [];\n      while (buf.length + x.length < padding) {\n        buf.push(\"0\");\n      }\n      return buf.join(\"\") + x;\n    }\n    function padRight(x, padding) {\n      if (x) {\n        x += \"\";\n      } else {\n        x = \"\";\n      }\n      var buf = [];\n      while (buf.length + x.length < padding) {\n        buf.push(\"0\");\n      }\n      return x + buf.join(\"\");\n    }\n    function truncate(x, length) {\n      if (x) {\n        x += \"\";\n      }\n      if (x && x.length > length) {\n        return x.substr(0, length);\n      } else {\n        return x;\n      }\n    }\n    function round(number, places) {\n      if (number[1] && places >= 0 && number[1].length > places) {\n        var decim = number[1].slice(0, places);\n        if (+number[1].substr(places, 1) >= 5) {\n          var leadingzeros = \"\";\n          while (decim.charAt(0) === \"0\") {\n            leadingzeros = leadingzeros + \"0\";\n            decim = decim.substr(1);\n          }\n          decim = +decim + 1 + \"\";\n          decim = leadingzeros + decim;\n          if (decim.length > places) {\n            number[0] = +number[0] + +decim.charAt(0) + \"\";\n            decim = decim.substring(1);\n          }\n        }\n        number[1] = decim;\n      }\n      return number;\n    }\n  }\n});\n\n// ../../node_modules/date-fns/addDays/index.js\nvar require_addDays = __commonJS({\n  \"../../node_modules/date-fns/addDays/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = addDays;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_toDate());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function addDays(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var date = (0, _index2.default)(dirtyDate);\n      var amount = (0, _index.default)(dirtyAmount);\n      if (isNaN(amount)) {\n        return new Date(NaN);\n      }\n      if (!amount) {\n        return date;\n      }\n      date.setDate(date.getDate() + amount);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/addMonths/index.js\nvar require_addMonths = __commonJS({\n  \"../../node_modules/date-fns/addMonths/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = addMonths;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_toDate());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function addMonths(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var date = (0, _index2.default)(dirtyDate);\n      var amount = (0, _index.default)(dirtyAmount);\n      if (isNaN(amount)) {\n        return new Date(NaN);\n      }\n      if (!amount) {\n        return date;\n      }\n      var dayOfMonth = date.getDate();\n      var endOfDesiredMonth = new Date(date.getTime());\n      endOfDesiredMonth.setMonth(date.getMonth() + amount + 1, 0);\n      var daysInMonth = endOfDesiredMonth.getDate();\n      if (dayOfMonth >= daysInMonth) {\n        return endOfDesiredMonth;\n      } else {\n        date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n        return date;\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/add/index.js\nvar require_add = __commonJS({\n  \"../../node_modules/date-fns/add/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = add2;\n    var _index = _interopRequireDefault(require_addDays());\n    var _index2 = _interopRequireDefault(require_addMonths());\n    var _index3 = _interopRequireDefault(require_toDate());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    var _index5 = _interopRequireDefault(require_toInteger());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function add2(dirtyDate, duration) {\n      (0, _index4.default)(2, arguments);\n      if (!duration || typeof duration !== \"object\")\n        return new Date(NaN);\n      var years = duration.years ? (0, _index5.default)(duration.years) : 0;\n      var months = duration.months ? (0, _index5.default)(duration.months) : 0;\n      var weeks = duration.weeks ? (0, _index5.default)(duration.weeks) : 0;\n      var days = duration.days ? (0, _index5.default)(duration.days) : 0;\n      var hours = duration.hours ? (0, _index5.default)(duration.hours) : 0;\n      var minutes = duration.minutes ? (0, _index5.default)(duration.minutes) : 0;\n      var seconds = duration.seconds ? (0, _index5.default)(duration.seconds) : 0;\n      var date = (0, _index3.default)(dirtyDate);\n      var dateWithMonths = months || years ? (0, _index2.default)(date, months + years * 12) : date;\n      var dateWithDays = days || weeks ? (0, _index.default)(dateWithMonths, days + weeks * 7) : dateWithMonths;\n      var minutesToAdd = minutes + hours * 60;\n      var secondsToAdd = seconds + minutesToAdd * 60;\n      var msToAdd = secondsToAdd * 1e3;\n      var finalDate = new Date(dateWithDays.getTime() + msToAdd);\n      return finalDate;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getDate/index.js\nvar require_getDate = __commonJS({\n  \"../../node_modules/date-fns/getDate/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getDate2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getDate2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var dayOfMonth = date.getDate();\n      return dayOfMonth;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getDay/index.js\nvar require_getDay = __commonJS({\n  \"../../node_modules/date-fns/getDay/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getDay2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getDay2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var day = date.getDay();\n      return day;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getHours/index.js\nvar require_getHours = __commonJS({\n  \"../../node_modules/date-fns/getHours/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getHours2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getHours2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var hours = date.getHours();\n      return hours;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getMinutes/index.js\nvar require_getMinutes = __commonJS({\n  \"../../node_modules/date-fns/getMinutes/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getMinutes2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getMinutes2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var minutes = date.getMinutes();\n      return minutes;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getMonth/index.js\nvar require_getMonth = __commonJS({\n  \"../../node_modules/date-fns/getMonth/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getMonth2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getMonth2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var month = date.getMonth();\n      return month;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/getYear/index.js\nvar require_getYear = __commonJS({\n  \"../../node_modules/date-fns/getYear/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = getYear2;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function getYear2(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      return (0, _index.default)(dirtyDate).getFullYear();\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/compareAsc/index.js\nvar require_compareAsc = __commonJS({\n  \"../../node_modules/date-fns/compareAsc/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = compareAsc;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function compareAsc(dirtyDateLeft, dirtyDateRight) {\n      (0, _index2.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      var diff = dateLeft.getTime() - dateRight.getTime();\n      if (diff < 0) {\n        return -1;\n      } else if (diff > 0) {\n        return 1;\n      } else {\n        return diff;\n      }\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInCalendarYears/index.js\nvar require_differenceInCalendarYears = __commonJS({\n  \"../../node_modules/date-fns/differenceInCalendarYears/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInCalendarYears;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInCalendarYears(dirtyDateLeft, dirtyDateRight) {\n      (0, _index2.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      return dateLeft.getFullYear() - dateRight.getFullYear();\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInYears/index.js\nvar require_differenceInYears = __commonJS({\n  \"../../node_modules/date-fns/differenceInYears/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInYears;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_differenceInCalendarYears());\n    var _index3 = _interopRequireDefault(require_compareAsc());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInYears(dirtyDateLeft, dirtyDateRight) {\n      (0, _index4.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      var sign = (0, _index3.default)(dateLeft, dateRight);\n      var difference = Math.abs((0, _index2.default)(dateLeft, dateRight));\n      dateLeft.setFullYear(1584);\n      dateRight.setFullYear(1584);\n      var isLastYearNotFull = (0, _index3.default)(dateLeft, dateRight) === -sign;\n      var result = sign * (difference - Number(isLastYearNotFull));\n      return result === 0 ? 0 : result;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInCalendarMonths/index.js\nvar require_differenceInCalendarMonths = __commonJS({\n  \"../../node_modules/date-fns/differenceInCalendarMonths/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInCalendarMonths;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInCalendarMonths(dirtyDateLeft, dirtyDateRight) {\n      (0, _index2.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear();\n      var monthDiff = dateLeft.getMonth() - dateRight.getMonth();\n      return yearDiff * 12 + monthDiff;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/endOfDay/index.js\nvar require_endOfDay = __commonJS({\n  \"../../node_modules/date-fns/endOfDay/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = endOfDay;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function endOfDay(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      date.setHours(23, 59, 59, 999);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/endOfMonth/index.js\nvar require_endOfMonth = __commonJS({\n  \"../../node_modules/date-fns/endOfMonth/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = endOfMonth;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function endOfMonth(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      var month = date.getMonth();\n      date.setFullYear(date.getFullYear(), month + 1, 0);\n      date.setHours(23, 59, 59, 999);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/isLastDayOfMonth/index.js\nvar require_isLastDayOfMonth = __commonJS({\n  \"../../node_modules/date-fns/isLastDayOfMonth/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = isLastDayOfMonth;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_endOfDay());\n    var _index3 = _interopRequireDefault(require_endOfMonth());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function isLastDayOfMonth(dirtyDate) {\n      (0, _index4.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      return (0, _index2.default)(date).getTime() === (0, _index3.default)(date).getTime();\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInMonths/index.js\nvar require_differenceInMonths = __commonJS({\n  \"../../node_modules/date-fns/differenceInMonths/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInMonths;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_differenceInCalendarMonths());\n    var _index3 = _interopRequireDefault(require_compareAsc());\n    var _index4 = _interopRequireDefault(require_requiredArgs());\n    var _index5 = _interopRequireDefault(require_isLastDayOfMonth());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInMonths(dirtyDateLeft, dirtyDateRight) {\n      (0, _index4.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      var sign = (0, _index3.default)(dateLeft, dateRight);\n      var difference = Math.abs((0, _index2.default)(dateLeft, dateRight));\n      var result;\n      if (difference < 1) {\n        result = 0;\n      } else {\n        if (dateLeft.getMonth() === 1 && dateLeft.getDate() > 27) {\n          dateLeft.setDate(30);\n        }\n        dateLeft.setMonth(dateLeft.getMonth() - sign * difference);\n        var isLastMonthNotFull = (0, _index3.default)(dateLeft, dateRight) === -sign;\n        if ((0, _index5.default)((0, _index.default)(dirtyDateLeft)) && difference === 1 && (0, _index3.default)(dirtyDateLeft, dateRight) === 1) {\n          isLastMonthNotFull = false;\n        }\n        result = sign * (difference - Number(isLastMonthNotFull));\n      }\n      return result === 0 ? 0 : result;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/startOfDay/index.js\nvar require_startOfDay = __commonJS({\n  \"../../node_modules/date-fns/startOfDay/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = startOfDay;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function startOfDay(dirtyDate) {\n      (0, _index2.default)(1, arguments);\n      var date = (0, _index.default)(dirtyDate);\n      date.setHours(0, 0, 0, 0);\n      return date;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInCalendarDays/index.js\nvar require_differenceInCalendarDays = __commonJS({\n  \"../../node_modules/date-fns/differenceInCalendarDays/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInCalendarDays;\n    var _index = _interopRequireDefault(require_getTimezoneOffsetInMilliseconds());\n    var _index2 = _interopRequireDefault(require_startOfDay());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    var MILLISECONDS_IN_DAY = 864e5;\n    function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {\n      (0, _index3.default)(2, arguments);\n      var startOfDayLeft = (0, _index2.default)(dirtyDateLeft);\n      var startOfDayRight = (0, _index2.default)(dirtyDateRight);\n      var timestampLeft = startOfDayLeft.getTime() - (0, _index.default)(startOfDayLeft);\n      var timestampRight = startOfDayRight.getTime() - (0, _index.default)(startOfDayRight);\n      return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInDays/index.js\nvar require_differenceInDays = __commonJS({\n  \"../../node_modules/date-fns/differenceInDays/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInDays;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_differenceInCalendarDays());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function compareLocalAsc(dateLeft, dateRight) {\n      var diff = dateLeft.getFullYear() - dateRight.getFullYear() || dateLeft.getMonth() - dateRight.getMonth() || dateLeft.getDate() - dateRight.getDate() || dateLeft.getHours() - dateRight.getHours() || dateLeft.getMinutes() - dateRight.getMinutes() || dateLeft.getSeconds() - dateRight.getSeconds() || dateLeft.getMilliseconds() - dateRight.getMilliseconds();\n      if (diff < 0) {\n        return -1;\n      } else if (diff > 0) {\n        return 1;\n      } else {\n        return diff;\n      }\n    }\n    function differenceInDays(dirtyDateLeft, dirtyDateRight) {\n      (0, _index3.default)(2, arguments);\n      var dateLeft = (0, _index.default)(dirtyDateLeft);\n      var dateRight = (0, _index.default)(dirtyDateRight);\n      var sign = compareLocalAsc(dateLeft, dateRight);\n      var difference = Math.abs((0, _index2.default)(dateLeft, dateRight));\n      dateLeft.setDate(dateLeft.getDate() - sign * difference);\n      var isLastDayNotFull = Number(compareLocalAsc(dateLeft, dateRight) === -sign);\n      var result = sign * (difference - isLastDayNotFull);\n      return result === 0 ? 0 : result;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/constants/index.js\nvar require_constants = __commonJS({\n  \"../../node_modules/date-fns/constants/index.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.secondsInMinute = exports.secondsInHour = exports.quartersInYear = exports.monthsInYear = exports.monthsInQuarter = exports.minutesInHour = exports.minTime = exports.millisecondsInSecond = exports.millisecondsInHour = exports.millisecondsInMinute = exports.maxTime = exports.daysInWeek = void 0;\n    var daysInWeek = 7;\n    exports.daysInWeek = daysInWeek;\n    var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1e3;\n    exports.maxTime = maxTime;\n    var millisecondsInMinute = 6e4;\n    exports.millisecondsInMinute = millisecondsInMinute;\n    var millisecondsInHour = 36e5;\n    exports.millisecondsInHour = millisecondsInHour;\n    var millisecondsInSecond = 1e3;\n    exports.millisecondsInSecond = millisecondsInSecond;\n    var minTime = -maxTime;\n    exports.minTime = minTime;\n    var minutesInHour = 60;\n    exports.minutesInHour = minutesInHour;\n    var monthsInQuarter = 3;\n    exports.monthsInQuarter = monthsInQuarter;\n    var monthsInYear = 12;\n    exports.monthsInYear = monthsInYear;\n    var quartersInYear = 4;\n    exports.quartersInYear = quartersInYear;\n    var secondsInHour = 3600;\n    exports.secondsInHour = secondsInHour;\n    var secondsInMinute = 60;\n    exports.secondsInMinute = secondsInMinute;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInMilliseconds/index.js\nvar require_differenceInMilliseconds = __commonJS({\n  \"../../node_modules/date-fns/differenceInMilliseconds/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInMilliseconds;\n    var _index = _interopRequireDefault(require_toDate());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInMilliseconds(dateLeft, dateRight) {\n      (0, _index2.default)(2, arguments);\n      return (0, _index.default)(dateLeft).getTime() - (0, _index.default)(dateRight).getTime();\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/_lib/roundingMethods/index.js\nvar require_roundingMethods = __commonJS({\n  \"../../node_modules/date-fns/_lib/roundingMethods/index.js\"(exports) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.getRoundingMethod = getRoundingMethod;\n    var roundingMap = {\n      ceil: Math.ceil,\n      round: Math.round,\n      floor: Math.floor,\n      trunc: function(value) {\n        return value < 0 ? Math.ceil(value) : Math.floor(value);\n      }\n    };\n    var defaultRoundingMethod = \"trunc\";\n    function getRoundingMethod(method) {\n      return method ? roundingMap[method] : roundingMap[defaultRoundingMethod];\n    }\n  }\n});\n\n// ../../node_modules/date-fns/differenceInHours/index.js\nvar require_differenceInHours = __commonJS({\n  \"../../node_modules/date-fns/differenceInHours/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInHours;\n    var _index = require_constants();\n    var _index2 = _interopRequireDefault(require_differenceInMilliseconds());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    var _index4 = require_roundingMethods();\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInHours(dateLeft, dateRight, options) {\n      (0, _index3.default)(2, arguments);\n      var diff = (0, _index2.default)(dateLeft, dateRight) / _index.millisecondsInHour;\n      return (0, _index4.getRoundingMethod)(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInMinutes/index.js\nvar require_differenceInMinutes = __commonJS({\n  \"../../node_modules/date-fns/differenceInMinutes/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInMinutes;\n    var _index = require_constants();\n    var _index2 = _interopRequireDefault(require_differenceInMilliseconds());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    var _index4 = require_roundingMethods();\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInMinutes(dateLeft, dateRight, options) {\n      (0, _index3.default)(2, arguments);\n      var diff = (0, _index2.default)(dateLeft, dateRight) / _index.millisecondsInMinute;\n      return (0, _index4.getRoundingMethod)(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/differenceInSeconds/index.js\nvar require_differenceInSeconds = __commonJS({\n  \"../../node_modules/date-fns/differenceInSeconds/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = differenceInSeconds;\n    var _index = _interopRequireDefault(require_differenceInMilliseconds());\n    var _index2 = _interopRequireDefault(require_requiredArgs());\n    var _index3 = require_roundingMethods();\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function differenceInSeconds(dateLeft, dateRight, options) {\n      (0, _index2.default)(2, arguments);\n      var diff = (0, _index.default)(dateLeft, dateRight) / 1e3;\n      return (0, _index3.getRoundingMethod)(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/subDays/index.js\nvar require_subDays = __commonJS({\n  \"../../node_modules/date-fns/subDays/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = subDays;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_addDays());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function subDays(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var amount = (0, _index.default)(dirtyAmount);\n      return (0, _index2.default)(dirtyDate, -amount);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/subMonths/index.js\nvar require_subMonths = __commonJS({\n  \"../../node_modules/date-fns/subMonths/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = subMonths;\n    var _index = _interopRequireDefault(require_toInteger());\n    var _index2 = _interopRequireDefault(require_addMonths());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function subMonths(dirtyDate, dirtyAmount) {\n      (0, _index3.default)(2, arguments);\n      var amount = (0, _index.default)(dirtyAmount);\n      return (0, _index2.default)(dirtyDate, -amount);\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/sub/index.js\nvar require_sub = __commonJS({\n  \"../../node_modules/date-fns/sub/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = sub2;\n    var _index = _interopRequireDefault(require_subDays());\n    var _index2 = _interopRequireDefault(require_subMonths());\n    var _index3 = _interopRequireDefault(require_requiredArgs());\n    var _index4 = _interopRequireDefault(require_toInteger());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function sub2(date, duration) {\n      (0, _index3.default)(2, arguments);\n      if (!duration || typeof duration !== \"object\")\n        return new Date(NaN);\n      var years = duration.years ? (0, _index4.default)(duration.years) : 0;\n      var months = duration.months ? (0, _index4.default)(duration.months) : 0;\n      var weeks = duration.weeks ? (0, _index4.default)(duration.weeks) : 0;\n      var days = duration.days ? (0, _index4.default)(duration.days) : 0;\n      var hours = duration.hours ? (0, _index4.default)(duration.hours) : 0;\n      var minutes = duration.minutes ? (0, _index4.default)(duration.minutes) : 0;\n      var seconds = duration.seconds ? (0, _index4.default)(duration.seconds) : 0;\n      var dateWithoutMonths = (0, _index2.default)(date, months + years * 12);\n      var dateWithoutDays = (0, _index.default)(dateWithoutMonths, days + weeks * 7);\n      var minutestoSub = minutes + hours * 60;\n      var secondstoSub = seconds + minutestoSub * 60;\n      var mstoSub = secondstoSub * 1e3;\n      var finalDate = new Date(dateWithoutDays.getTime() - mstoSub);\n      return finalDate;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// ../../node_modules/date-fns/intervalToDuration/index.js\nvar require_intervalToDuration = __commonJS({\n  \"../../node_modules/date-fns/intervalToDuration/index.js\"(exports, module) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.default = intervalToDuration2;\n    var _index = _interopRequireDefault(require_compareAsc());\n    var _index2 = _interopRequireDefault(require_differenceInYears());\n    var _index3 = _interopRequireDefault(require_differenceInMonths());\n    var _index4 = _interopRequireDefault(require_differenceInDays());\n    var _index5 = _interopRequireDefault(require_differenceInHours());\n    var _index6 = _interopRequireDefault(require_differenceInMinutes());\n    var _index7 = _interopRequireDefault(require_differenceInSeconds());\n    var _index8 = _interopRequireDefault(require_isValid());\n    var _index9 = _interopRequireDefault(require_requiredArgs());\n    var _index10 = _interopRequireDefault(require_toDate());\n    var _index11 = _interopRequireDefault(require_sub());\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : { default: obj };\n    }\n    function intervalToDuration2(_ref) {\n      var start = _ref.start, end = _ref.end;\n      (0, _index9.default)(1, arguments);\n      var dateLeft = (0, _index10.default)(start);\n      var dateRight = (0, _index10.default)(end);\n      if (!(0, _index8.default)(dateLeft)) {\n        throw new RangeError(\"Start Date is invalid\");\n      }\n      if (!(0, _index8.default)(dateRight)) {\n        throw new RangeError(\"End Date is invalid\");\n      }\n      var duration = {\n        years: 0,\n        months: 0,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0\n      };\n      var sign = (0, _index.default)(dateLeft, dateRight);\n      duration.years = Math.abs((0, _index2.default)(dateLeft, dateRight));\n      var remainingMonths = (0, _index11.default)(dateLeft, {\n        years: sign * duration.years\n      });\n      duration.months = Math.abs((0, _index3.default)(remainingMonths, dateRight));\n      var remainingDays = (0, _index11.default)(remainingMonths, {\n        months: sign * duration.months\n      });\n      duration.days = Math.abs((0, _index4.default)(remainingDays, dateRight));\n      var remainingHours = (0, _index11.default)(remainingDays, {\n        days: sign * duration.days\n      });\n      duration.hours = Math.abs((0, _index5.default)(remainingHours, dateRight));\n      var remainingMinutes = (0, _index11.default)(remainingHours, {\n        hours: sign * duration.hours\n      });\n      duration.minutes = Math.abs((0, _index6.default)(remainingMinutes, dateRight));\n      var remainingSeconds = (0, _index11.default)(remainingMinutes, {\n        minutes: sign * duration.minutes\n      });\n      duration.seconds = Math.abs((0, _index7.default)(remainingSeconds, dateRight));\n      return duration;\n    }\n    module.exports = exports.default;\n  }\n});\n\n// src/third-party/collection.tsx\n\n\n\n\n// src/components/page-icon.tsx\n\n\n\n// src/context.tsx\n\n\n// src/components/asset-wrapper.tsx\n\n\n\n// src/utils.ts\n\n\n// src/map-image-url.ts\nvar defaultMapImageUrl = (url, block) => {\n  if (!url) {\n    return null;\n  }\n  if (url.startsWith(\"data:\")) {\n    return url;\n  }\n  if (url.startsWith(\"https://images.unsplash.com\")) {\n    return url;\n  }\n  try {\n    const u = new URL(url);\n    if (u.pathname.startsWith(\"/secure.notion-static.com\") && u.hostname.endsWith(\".amazonaws.com\")) {\n      if (u.searchParams.has(\"X-Amz-Credential\") && u.searchParams.has(\"X-Amz-Signature\") && u.searchParams.has(\"X-Amz-Algorithm\")) {\n        return url;\n      }\n    }\n  } catch (e) {\n  }\n  if (url.startsWith(\"/images\")) {\n    url = `https://www.notion.so${url}`;\n  }\n  url = `https://www.notion.so${url.startsWith(\"/image\") ? url : `/image/${encodeURIComponent(url)}`}`;\n  const notionImageUrlV2 = new URL(url);\n  let table = block.parent_table === \"space\" ? \"block\" : block.parent_table;\n  if (table === \"collection\" || table === \"team\") {\n    table = \"block\";\n  }\n  notionImageUrlV2.searchParams.set(\"table\", table);\n  notionImageUrlV2.searchParams.set(\"id\", block.id);\n  notionImageUrlV2.searchParams.set(\"cache\", \"v2\");\n  url = notionImageUrlV2.toString();\n  return url;\n};\n\n// src/map-page-url.ts\nvar defaultMapPageUrl = (rootPageId) => (pageId) => {\n  pageId = (pageId || \"\").replace(/-/g, \"\");\n  if (rootPageId && pageId === rootPageId) {\n    return \"/\";\n  } else {\n    return `/${pageId}`;\n  }\n};\n\n// src/utils.ts\nvar cs = (...classes) => classes.filter((a) => !!a).join(\" \");\nvar getHashFragmentValue = (url) => {\n  return url.includes(\"#\") ? url.replace(/^.+(#.+)$/, \"$1\") : \"\";\n};\nvar isBrowser = typeof window !== \"undefined\";\nvar youtubeDomains = /* @__PURE__ */ new Set([\n  \"youtu.be\",\n  \"youtube.com\",\n  \"www.youtube.com\",\n  \"youtube-nocookie.com\",\n  \"www.youtube-nocookie.com\"\n]);\nvar getYoutubeId = (url) => {\n  try {\n    const { hostname } = new URL(url);\n    if (!youtubeDomains.has(hostname)) {\n      return null;\n    }\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/i;\n    const match = url.match(regExp);\n    if (match && match[2].length == 11) {\n      return match[2];\n    }\n  } catch (e) {\n  }\n  return null;\n};\n\n// src/components/eoi.tsx\n\n\n// src/icons/type-github.tsx\n\nfunction SvgTypeGitHub(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 260 260\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n    fill: \"#161614\"\n  })));\n}\nvar type_github_default = SvgTypeGitHub;\n\n// src/components/eoi.tsx\nvar EOI = ({ block, inline, className }) => {\n  var _a, _b, _c;\n  const { components } = useNotionContext();\n  const { original_url, attributes, domain } = (block == null ? void 0 : block.format) || {};\n  if (!original_url || !attributes) {\n    return null;\n  }\n  const title = (_a = attributes.find((attr) => attr.id === \"title\")) == null ? void 0 : _a.values[0];\n  let owner = (_b = attributes.find((attr) => attr.id === \"owner\")) == null ? void 0 : _b.values[0];\n  const lastUpdatedAt = (_c = attributes.find((attr) => attr.id === \"updated_at\")) == null ? void 0 : _c.values[0];\n  const lastUpdated = lastUpdatedAt ? (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.formatNotionDateTime)(lastUpdatedAt) : null;\n  let externalImage;\n  switch (domain) {\n    case \"github.com\":\n      externalImage = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(type_github_default, null);\n      if (owner) {\n        const parts = owner.split(\"/\");\n        owner = parts[parts.length - 1];\n      }\n      break;\n    default:\n      if (true) {\n        console.log(\n          `Unsupported external_object_instance domain \"${domain}\"`,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: original_url,\n    className: cs(\n      \"notion-external\",\n      inline ? \"notion-external-mention\" : \"notion-external-block notion-row\",\n      className\n    )\n  }, externalImage && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-image\"\n  }, externalImage), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-description\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-title\"\n  }, title), (owner || lastUpdated) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-subtitle\"\n  }, owner && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, owner), owner && lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \" \\u2022 \"), lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \"Updated \", lastUpdated))));\n};\n\n// src/components/text.tsx\n\n\n\n// src/components/graceful-image.tsx\n\n\nvar GracefulImage = (props) => {\n  if (isBrowser) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_image__WEBPACK_IMPORTED_MODULE_2__.Img, __spreadValues({}, props));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({}, props));\n  }\n};\n\n// src/components/page-title.tsx\n\n\nvar PageTitleImpl = (_a) => {\n  var _b = _a, { block, className, defaultIcon } = _b, rest = __objRest(_b, [\"block\", \"className\", \"defaultIcon\"]);\n  var _a2, _b2;\n  const { recordMap } = useNotionContext();\n  if (!block)\n    return null;\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockTitle)(block, recordMap);\n    if (!title) {\n      return null;\n    }\n    const titleDecoration = [[title]];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n      className: cs(\"notion-page-title\", className)\n    }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      block,\n      defaultIcon,\n      className: \"notion-page-title-icon\"\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-page-title-text\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n      value: titleDecoration,\n      block\n    })));\n  }\n  if (!((_a2 = block.properties) == null ? void 0 : _a2.title)) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n    className: cs(\"notion-page-title\", className)\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n    block,\n    defaultIcon,\n    className: \"notion-page-title-icon\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-page-title-text\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: (_b2 = block.properties) == null ? void 0 : _b2.title,\n    block\n  })));\n};\nvar PageTitle = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageTitleImpl);\n\n// src/components/text.tsx\nvar Text = ({ value, block, linkProps, linkProtocol }) => {\n  const { components, recordMap, mapPageUrl, mapImageUrl, rootDomain } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, value == null ? void 0 : value.map(([text, decorations], index) => {\n    if (!decorations) {\n      if (text === \",\") {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n          key: index,\n          style: { padding: \"0.5em\" }\n        });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          key: index\n        }, text);\n      }\n    }\n    const formatted = decorations.reduce(\n      (element, decorator) => {\n        var _a, _b, _c, _d, _e;\n        switch (decorator[0]) {\n          case \"p\": {\n            const blockId = decorator[1];\n            const linkedBlock = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n            if (!linkedBlock) {\n              console.log('\"p\" missing block', blockId);\n              return null;\n            }\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n              className: \"notion-link\",\n              href: mapPageUrl(blockId)\n            }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n              block: linkedBlock\n            }));\n          }\n          case \"\\u2023\": {\n            const linkType = decorator[1][0];\n            const id = decorator[1][1];\n            switch (linkType) {\n              case \"u\": {\n                const user = (_b = recordMap.notion_user[id]) == null ? void 0 : _b.value;\n                if (!user) {\n                  console.log('\"\\u2023\" missing user', id);\n                  return null;\n                }\n                const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n                  className: \"notion-user\",\n                  src: mapImageUrl(user.profile_photo, block),\n                  alt: name\n                });\n              }\n              default: {\n                const linkedBlock = (_c = recordMap.block[id]) == null ? void 0 : _c.value;\n                if (!linkedBlock) {\n                  console.log('\"\\u2023\" missing block', linkType, id);\n                  return null;\n                }\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadProps(__spreadValues({\n                  className: \"notion-link\",\n                  href: mapPageUrl(id)\n                }, linkProps), {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n                  block: linkedBlock\n                }));\n              }\n            }\n          }\n          case \"h\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: `notion-${decorator[1]}`\n            }, element);\n          case \"c\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"code\", {\n              className: \"notion-inline-code\"\n            }, element);\n          case \"b\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"b\", null, element);\n          case \"i\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"em\", null, element);\n          case \"s\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"s\", null, element);\n          case \"_\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: \"notion-inline-underscore\"\n            }, element);\n          case \"e\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Equation, {\n              math: decorator[1],\n              inline: true\n            });\n          case \"m\":\n            return element;\n          case \"a\": {\n            const v = decorator[1];\n            const pathname = v.substr(1);\n            const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.parsePageId)(pathname, { uuid: true });\n            if ((v[0] === \"/\" || v.includes(rootDomain)) && id) {\n              const href = v.includes(rootDomain) ? v : `${mapPageUrl(id)}${getHashFragmentValue(v)}`;\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadValues({\n                className: \"notion-link\",\n                href\n              }, linkProps), element);\n            } else {\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, __spreadValues({\n                className: \"notion-link\",\n                href: linkProtocol ? `${linkProtocol}:${decorator[1]}` : decorator[1]\n              }, linkProps), element);\n            }\n          }\n          case \"d\": {\n            const v = decorator[1];\n            const type = v == null ? void 0 : v.type;\n            if (type === \"date\") {\n              const startDate = v.start_date;\n              return (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.formatDate)(startDate);\n            } else if (type === \"daterange\") {\n              const startDate = v.start_date;\n              const endDate = v.end_date;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.formatDate)(startDate)} \\u2192 ${(0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.formatDate)(endDate)}`;\n            } else {\n              return element;\n            }\n          }\n          case \"u\": {\n            const userId = decorator[1];\n            const user = (_d = recordMap.notion_user[userId]) == null ? void 0 : _d.value;\n            if (!user) {\n              console.log(\"missing user\", userId);\n              return null;\n            }\n            const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n              className: \"notion-user\",\n              src: mapImageUrl(user.profile_photo, block),\n              alt: name\n            });\n          }\n          case \"eoi\": {\n            const blockId = decorator[1];\n            const externalObjectInstance = (_e = recordMap.block[blockId]) == null ? void 0 : _e.value;\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EOI, {\n              block: externalObjectInstance,\n              inline: true\n            });\n          }\n          default:\n            if (true) {\n              console.log(\"unsupported text format\", decorator);\n            }\n            return element;\n        }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, text)\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: index\n    }, formatted);\n  }));\n};\n\n// src/components/lazy-image.tsx\n\n\n\nvar LazyImage = (_a) => {\n  var _b = _a, {\n    src,\n    alt,\n    className,\n    style,\n    zoomable = false,\n    priority = false,\n    height\n  } = _b, rest = __objRest(_b, [\n    \"src\",\n    \"alt\",\n    \"className\",\n    \"style\",\n    \"zoomable\",\n    \"priority\",\n    \"height\"\n  ]);\n  var _a2, _b2, _c;\n  const { recordMap, zoom, previewImages, forceCustomImages, components } = useNotionContext();\n  const zoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(zoom ? zoom.clone() : null);\n  const previewImage = previewImages ? (_c = (_a2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _a2[src]) != null ? _c : (_b2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _b2[(0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.normalizeUrl)(src)] : null;\n  const onLoad = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (zoomable && (e.target.src || e.target.srcset)) {\n        if (zoomRef.current) {\n          ;\n          zoomRef.current.attach(e.target);\n        }\n      }\n    },\n    [zoomRef, zoomable]\n  );\n  const attachZoom = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (image) => {\n      if (zoomRef.current && image) {\n        ;\n        zoomRef.current.attach(image);\n      }\n    },\n    [zoomRef]\n  );\n  const attachZoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => zoomable ? attachZoom : void 0,\n    [zoomable, attachZoom]\n  );\n  if (previewImage) {\n    const aspectRatio = previewImage.originalHeight / previewImage.originalWidth;\n    if (components.Image) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        style,\n        className,\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        blurDataURL: previewImage.dataURIBase64,\n        placeholder: \"blur\",\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_lazy_images__WEBPACK_IMPORTED_MODULE_3__.LazyImageFull, __spreadProps(__spreadValues({\n      src\n    }, rest), {\n      experimentalDecode: true\n    }), ({ imageState, ref }) => {\n      const isLoaded = imageState === react_lazy_images__WEBPACK_IMPORTED_MODULE_3__.ImageState.LoadSuccess;\n      const wrapperStyle = {\n        width: \"100%\"\n      };\n      const imgStyle = {};\n      if (height) {\n        wrapperStyle.height = height;\n      } else {\n        imgStyle.position = \"absolute\";\n        wrapperStyle.paddingBottom = `${aspectRatio * 100}%`;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"lazy-image-wrapper\",\n          isLoaded && \"lazy-image-loaded\",\n          className\n        ),\n        style: wrapperStyle\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-preview\",\n        src: previewImage.dataURIBase64,\n        alt,\n        ref,\n        style,\n        decoding: \"async\"\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-real\",\n        src,\n        alt,\n        ref: attachZoomRef,\n        style: __spreadValues(__spreadValues({}, style), imgStyle),\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        decoding: \"async\",\n        loading: \"lazy\"\n      }));\n    });\n  } else {\n    if (components.Image && forceCustomImages) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        className,\n        style,\n        width: null,\n        height: height || null,\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({\n      className,\n      style,\n      src,\n      alt,\n      ref: attachZoomRef,\n      loading: \"lazy\",\n      decoding: \"async\"\n    }, rest));\n  }\n};\n\n// src/components/header.tsx\n\n\n\n\n// src/icons/search-icon.tsx\n\nvar SearchIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    className: cs(\"notion-icon\", className),\n    viewBox: \"0 0 17 17\"\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M6.78027 13.6729C8.24805 13.6729 9.60156 13.1982 10.709 12.4072L14.875 16.5732C15.0684 16.7666 15.3232 16.8633 15.5957 16.8633C16.167 16.8633 16.5713 16.4238 16.5713 15.8613C16.5713 15.5977 16.4834 15.3516 16.29 15.1582L12.1504 11.0098C13.0205 9.86719 13.5391 8.45215 13.5391 6.91406C13.5391 3.19629 10.498 0.155273 6.78027 0.155273C3.0625 0.155273 0.0214844 3.19629 0.0214844 6.91406C0.0214844 10.6318 3.0625 13.6729 6.78027 13.6729ZM6.78027 12.2139C3.87988 12.2139 1.48047 9.81445 1.48047 6.91406C1.48047 4.01367 3.87988 1.61426 6.78027 1.61426C9.68066 1.61426 12.0801 4.01367 12.0801 6.91406C12.0801 9.81445 9.68066 12.2139 6.78027 12.2139Z\"\n  }));\n};\n\n// src/components/search-dialog.tsx\nvar import_lodash = __toESM(require_lodash(), 1);\n\n\n\n// src/icons/clear-icon.tsx\n\nvar ClearIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 30 30\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M15,0C6.716,0,0,6.716,0,15s6.716,15,15,15s15-6.716,15-15S23.284,0,15,0z M22,20.6L20.6,22L15,16.4L9.4,22L8,20.6l5.6-5.6 L8,9.4L9.4,8l5.6,5.6L20.6,8L22,9.4L16.4,15L22,20.6z\"\n  }));\n};\n\n// src/icons/loading-icon.tsx\n\nvar LoadingIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 24 24\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"defs\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"linearGradient\", {\n    x1: \"28.1542969%\",\n    y1: \"63.7402344%\",\n    x2: \"74.6289062%\",\n    y2: \"17.7832031%\",\n    id: \"linearGradient-1\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 1)\",\n    offset: \"0%\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 0)\",\n    stopOpacity: \"0\",\n    offset: \"100%\"\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(-236.000000, -286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(238.000000, 286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"circle\", {\n    id: \"Oval-2\",\n    stroke: \"url(#linearGradient-1)\",\n    strokeWidth: \"4\",\n    cx: \"10\",\n    cy: \"12\",\n    r: \"10\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M10,2 C4.4771525,2 0,6.4771525 0,12\",\n    id: \"Oval-2\",\n    stroke: \"rgba(164, 164, 164, 1)\",\n    strokeWidth: \"4\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", {\n    id: \"Rectangle-1\",\n    fill: \"rgba(164, 164, 164, 1)\",\n    x: \"8\",\n    y: \"0\",\n    width: \"4\",\n    height: \"4\",\n    rx: \"8\"\n  })))));\n};\n\n// src/components/search-dialog.tsx\nvar SearchDialog = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      query: \"\",\n      searchResult: null,\n      searchError: null\n    };\n    this._onAfterOpen = () => {\n      if (this._inputRef.current) {\n        this._inputRef.current.focus();\n      }\n    };\n    this._onChangeQuery = (e) => {\n      const query = e.target.value;\n      this.setState({ query });\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      } else {\n        this._search();\n      }\n    };\n    this._onClearQuery = () => {\n      this._onChangeQuery({ target: { value: \"\" } });\n    };\n    this._warmupSearch = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      yield searchNotion({\n        query: \"\",\n        ancestorId: rootBlockId\n      });\n    });\n    this._searchImpl = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      const { query } = this.state;\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      }\n      this.setState({ isLoading: true });\n      const result = yield searchNotion({\n        query,\n        ancestorId: rootBlockId\n      });\n      console.log(\"search\", query, result);\n      let searchResult = null;\n      let searchError = null;\n      if (result.error || result.errorId) {\n        searchError = result;\n      } else {\n        searchResult = __spreadValues({}, result);\n        const results = searchResult.results.map((result2) => {\n          var _a, _b;\n          const block = (_a = searchResult.recordMap.block[result2.id]) == null ? void 0 : _a.value;\n          if (!block)\n            return;\n          const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockTitle)(block, searchResult.recordMap);\n          if (!title) {\n            return;\n          }\n          result2.title = title;\n          result2.block = block;\n          result2.recordMap = searchResult.recordMap;\n          result2.page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockParentPage)(block, searchResult.recordMap, {\n            inclusive: true\n          }) || block;\n          if (!result2.page.id) {\n            return;\n          }\n          if ((_b = result2.highlight) == null ? void 0 : _b.text) {\n            result2.highlight.html = result2.highlight.text.replace(/<gzkNfoUU>/gi, \"<b>\").replace(/<\\/gzkNfoUU>/gi, \"</b>\");\n          }\n          return result2;\n        }).filter(Boolean);\n        const searchResultsMap = results.reduce(\n          (map, result2) => __spreadProps(__spreadValues({}, map), {\n            [result2.page.id]: result2\n          }),\n          {}\n        );\n        searchResult.results = Object.values(searchResultsMap);\n      }\n      if (this.state.query === query) {\n        this.setState({ isLoading: false, searchResult, searchError });\n      }\n    });\n    this._inputRef = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  }\n  componentDidMount() {\n    this._search = (0, import_lodash.default)(this._searchImpl.bind(this), 1e3);\n    this._warmupSearch();\n  }\n  render() {\n    const { isOpen, onClose } = this.props;\n    const { isLoading, query, searchResult, searchError } = this.state;\n    const hasQuery = !!query.trim();\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextConsumer, null, (ctx2) => {\n      const { components, defaultPageIcon, mapPageUrl } = ctx2;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Modal, {\n        isOpen,\n        contentLabel: \"Search\",\n        className: \"notion-search\",\n        overlayClassName: \"notion-search-overlay\",\n        onRequestClose: onClose,\n        onAfterOpen: this._onAfterOpen\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"quickFindMenu\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"searchBar\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"inlineIcon\"\n      }, isLoading ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingIcon, {\n        className: \"loadingIcon\"\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n        className: \"searchInput\",\n        placeholder: \"Search\",\n        value: query,\n        ref: this._inputRef,\n        onChange: this._onChangeQuery\n      }), query && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        role: \"button\",\n        className: \"clearButton\",\n        onClick: this._onClearQuery\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClearIcon, {\n        className: \"clearIcon\"\n      }))), hasQuery && searchResult && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, searchResult.results.length ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadProps(__spreadValues({}, ctx2), {\n        recordMap: searchResult.recordMap\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"resultsPane\"\n      }, searchResult.results.map((result) => {\n        var _a;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          key: result.id,\n          className: cs(\"result\", \"notion-page-link\"),\n          href: mapPageUrl(\n            result.page.id,\n            searchResult.recordMap\n          )\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block: result.page,\n          defaultIcon: defaultPageIcon\n        }), ((_a = result.highlight) == null ? void 0 : _a.html) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-search-result-highlight\",\n          dangerouslySetInnerHTML: {\n            __html: result.highlight.html\n          }\n        }));\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"footer\", {\n        className: \"resultsFooter\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"resultsCount\"\n      }, searchResult.total), searchResult.total === 1 ? \" result\" : \" results\"))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"No results\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsDetail\"\n      }, \"Try different search terms\"))), hasQuery && !searchResult && searchError && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"Search error\"))));\n    });\n  }\n};\n\n// src/components/header.tsx\nvar Header = ({ block }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"header\", {\n    className: \"notion-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-nav-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumbs, {\n    block\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Search, {\n    block\n  })));\n};\nvar Breadcrumbs = ({ block, rootOnly = false }) => {\n  const { recordMap, mapPageUrl, components } = useNotionContext();\n  const breadcrumbs = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const breadcrumbs2 = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getPageBreadcrumbs)(recordMap, block.id);\n    if (rootOnly) {\n      return [breadcrumbs2[0]].filter(Boolean);\n    }\n    return breadcrumbs2;\n  }, [recordMap, block.id, rootOnly]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"breadcrumbs\",\n    key: \"breadcrumbs\"\n  }, breadcrumbs.map((breadcrumb, index) => {\n    if (!breadcrumb) {\n      return null;\n    }\n    const pageLinkProps = {};\n    const componentMap = {\n      pageLink: components.PageLink\n    };\n    if (breadcrumb.active) {\n      componentMap.pageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, props));\n    } else {\n      pageLinkProps.href = mapPageUrl(breadcrumb.pageId);\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: breadcrumb.pageId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(componentMap.pageLink, __spreadValues({\n      className: cs(\"breadcrumb\", breadcrumb.active && \"active\")\n    }, pageLinkProps), breadcrumb.icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      className: \"icon\",\n      block: breadcrumb.block\n    }), breadcrumb.title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"title\"\n    }, breadcrumb.title)), index < breadcrumbs.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"spacer\"\n    }, \"/\"));\n  }));\n};\nvar Search = ({ block, search, title = \"Search\" }) => {\n  const { searchNotion, rootPageId, isShowingSearch, onHideSearch } = useNotionContext();\n  const onSearchNotion = search || searchNotion;\n  const [isSearchOpen, setIsSearchOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(isShowingSearch);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsSearchOpen(isShowingSearch);\n  }, [isShowingSearch]);\n  const onOpenSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(true);\n  }, []);\n  const onCloseSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(false);\n    if (onHideSearch) {\n      onHideSearch();\n    }\n  }, [onHideSearch]);\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_4__.useHotkeys)(\"cmd+p\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_4__.useHotkeys)(\"cmd+k\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  const hasSearch = !!onSearchNotion;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    role: \"button\",\n    className: cs(\"breadcrumb\", \"button\", \"notion-search-button\"),\n    onClick: onOpenSearch\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, {\n    className: \"searchIcon\"\n  }), title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"title\"\n  }, title)), isSearchOpen && hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchDialog, {\n    isOpen: isSearchOpen,\n    rootBlockId: rootPageId || (block == null ? void 0 : block.id),\n    onClose: onCloseSearch,\n    searchNotion: onSearchNotion\n  }));\n};\n\n// src/components/asset.tsx\n\n\n\n// src/components/lite-youtube-embed.tsx\n\nvar qs = (params) => {\n  return Object.keys(params).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n  ).join(\"&\");\n};\nvar LiteYouTubeEmbed = ({\n  id,\n  defaultPlay = false,\n  mute = false,\n  lazyImage = false,\n  iframeTitle = \"YouTube video\",\n  alt = \"Video preview\",\n  params = {},\n  adLinksPreconnect = true,\n  style,\n  className\n}) => {\n  const muteParam = mute || defaultPlay ? \"1\" : \"0\";\n  const queryString = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => qs(__spreadValues({ autoplay: \"1\", mute: muteParam }, params)),\n    [muteParam, params]\n  );\n  const resolution = \"hqdefault\";\n  const posterUrl = `https://i.ytimg.com/vi/${id}/${resolution}.jpg`;\n  const ytUrl = \"https://www.youtube-nocookie.com\";\n  const iframeSrc = `${ytUrl}/embed/${id}?${queryString}`;\n  const [isPreconnected, setIsPreconnected] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [iframeInitialized, setIframeInitialized] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultPlay);\n  const [isIframeLoaded, setIsIframeLoaded] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const warmConnections = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (isPreconnected)\n      return;\n    setIsPreconnected(true);\n  }, [isPreconnected]);\n  const onLoadIframe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (iframeInitialized)\n      return;\n    setIframeInitialized(true);\n  }, [iframeInitialized]);\n  const onIframeLoaded = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsIframeLoaded(true);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preload\",\n    href: posterUrl,\n    as: \"image\"\n  }), isPreconnected && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: ytUrl\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://www.google.com\"\n  })), isPreconnected && adLinksPreconnect && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://static.doubleclick.net\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://googleads.g.doubleclick.net\"\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    onClick: onLoadIframe,\n    onPointerOver: warmConnections,\n    className: cs(\n      \"notion-yt-lite\",\n      isIframeLoaded && \"notion-yt-loaded\",\n      iframeInitialized && \"notion-yt-initialized\",\n      className\n    ),\n    style\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n    src: posterUrl,\n    className: \"notion-yt-thumbnail\",\n    loading: lazyImage ? \"lazy\" : void 0,\n    alt\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-yt-playbtn\"\n  }), iframeInitialized && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n    width: \"560\",\n    height: \"315\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true,\n    title: iframeTitle,\n    src: iframeSrc,\n    onLoad: onIframeLoaded\n  })));\n};\n\n// src/components/asset.tsx\nvar isServer = typeof window === \"undefined\";\nvar supportedAssetTypes = [\n  \"video\",\n  \"image\",\n  \"embed\",\n  \"figma\",\n  \"typeform\",\n  \"excalidraw\",\n  \"maps\",\n  \"tweet\",\n  \"pdf\",\n  \"gist\",\n  \"codepen\",\n  \"drive\"\n];\nvar Asset = ({ block, zoomable = true, children }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  const { recordMap, mapImageUrl, components } = useNotionContext();\n  if (!block || !supportedAssetTypes.includes(block.type)) {\n    return null;\n  }\n  const style = {\n    position: \"relative\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    flexDirection: \"column\"\n  };\n  const assetStyle = {};\n  if (block.format) {\n    const {\n      block_aspect_ratio,\n      block_height,\n      block_width,\n      block_full_width,\n      block_page_width,\n      block_preserve_scale\n    } = block.format;\n    if (block_full_width || block_page_width) {\n      if (block_full_width) {\n        style.width = \"100vw\";\n      } else {\n        style.width = \"100%\";\n      }\n      if (block.type === \"video\") {\n        if (block_height) {\n          style.height = block_height;\n        } else if (block_aspect_ratio) {\n          style.paddingBottom = `${block_aspect_ratio * 100}%`;\n        } else if (block_preserve_scale) {\n          style.objectFit = \"contain\";\n        }\n      } else if (block_aspect_ratio && block.type !== \"image\") {\n        style.paddingBottom = `${block_aspect_ratio * 100}%`;\n      } else if (block_height) {\n        style.height = block_height;\n      } else if (block_preserve_scale) {\n        if (block.type === \"image\") {\n          style.height = \"100%\";\n        } else {\n          style.paddingBottom = \"75%\";\n          style.minHeight = 100;\n        }\n      }\n    } else {\n      switch ((_a = block.format) == null ? void 0 : _a.block_alignment) {\n        case \"center\": {\n          style.alignSelf = \"center\";\n          break;\n        }\n        case \"left\": {\n          style.alignSelf = \"start\";\n          break;\n        }\n        case \"right\": {\n          style.alignSelf = \"end\";\n          break;\n        }\n      }\n      if (block_width) {\n        style.width = block_width;\n      }\n      if (block_preserve_scale && block.type !== \"image\") {\n        style.paddingBottom = \"50%\";\n        style.minHeight = 100;\n      } else {\n        if (block_height && block.type !== \"image\") {\n          style.height = block_height;\n        }\n      }\n    }\n    if (block.type === \"image\") {\n      assetStyle.objectFit = \"cover\";\n    } else if (block_preserve_scale) {\n      assetStyle.objectFit = \"contain\";\n    }\n  }\n  let source = ((_b = recordMap.signed_urls) == null ? void 0 : _b[block.id]) || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n  let content = null;\n  if (!source) {\n    return null;\n  }\n  if (block.type === \"tweet\") {\n    const src = source;\n    if (!src)\n      return null;\n    const id = src.split(\"?\")[0].split(\"/\").pop();\n    if (!id)\n      return null;\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      style: __spreadProps(__spreadValues({}, assetStyle), {\n        maxWidth: 420,\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      })\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Tweet, {\n      id\n    }));\n  } else if (block.type === \"pdf\") {\n    style.overflow = \"auto\";\n    style.background = \"rgb(226, 226, 226)\";\n    style.display = \"block\";\n    if (!style.padding) {\n      style.padding = \"8px 16px\";\n    }\n    if (!isServer) {\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Pdf, {\n        file: source\n      });\n    }\n  } else if (block.type === \"embed\" || block.type === \"video\" || block.type === \"figma\" || block.type === \"typeform\" || block.type === \"gist\" || block.type === \"maps\" || block.type === \"excalidraw\" || block.type === \"codepen\" || block.type === \"drive\") {\n    if (block.type === \"video\" && source && source.indexOf(\"youtube\") < 0 && source.indexOf(\"youtu.be\") < 0 && source.indexOf(\"vimeo\") < 0 && source.indexOf(\"wistia\") < 0 && source.indexOf(\"loom\") < 0 && source.indexOf(\"videoask\") < 0 && source.indexOf(\"getcloudapp\") < 0) {\n      style.paddingBottom = void 0;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", {\n        playsInline: true,\n        controls: true,\n        preload: \"metadata\",\n        style: assetStyle,\n        src: source,\n        title: block.type\n      });\n    } else {\n      let src = ((_f = block.format) == null ? void 0 : _f.display_source) || source;\n      if (src) {\n        const youtubeVideoId = block.type === \"video\" ? getYoutubeId(src) : null;\n        if (youtubeVideoId) {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LiteYouTubeEmbed, {\n            id: youtubeVideoId,\n            style: assetStyle,\n            className: \"notion-asset-object-fit\"\n          });\n        } else if (block.type === \"gist\") {\n          if (!src.endsWith(\".pibb\")) {\n            src = `${src}.pibb`;\n          }\n          assetStyle.width = \"100%\";\n          style.paddingBottom = \"50%\";\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            style: assetStyle,\n            className: \"notion-asset-object-fit\",\n            src,\n            title: \"GitHub Gist\",\n            frameBorder: \"0\",\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        } else {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            className: \"notion-asset-object-fit\",\n            style: assetStyle,\n            src,\n            title: `iframe ${block.type}`,\n            frameBorder: \"0\",\n            allowFullScreen: true,\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        }\n      }\n    }\n  } else if (block.type === \"image\") {\n    if (source.includes(\"file.notion.so\")) {\n      source = (_i = (_h = (_g = block.properties) == null ? void 0 : _g.source) == null ? void 0 : _h[0]) == null ? void 0 : _i[0];\n    }\n    const src = mapImageUrl(source, block);\n    const caption = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getTextContent)((_j = block.properties) == null ? void 0 : _j.caption);\n    const alt = caption || \"notion image\";\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n      src,\n      alt,\n      zoomable,\n      height: style.height,\n      style: assetStyle\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    style\n  }, content, block.type === \"image\" && children), block.type !== \"image\" && children);\n};\n\n// src/components/asset-wrapper.tsx\nvar urlStyle = { width: \"100%\" };\nvar AssetWrapper = ({ blockId, block }) => {\n  var _a, _b, _c, _d, _e, _f;\n  const value = block;\n  const { components, mapPageUrl, rootDomain, zoom } = useNotionContext();\n  let isURL = false;\n  if (block.type === \"image\") {\n    const caption = (_c = (_b = (_a = value == null ? void 0 : value.properties) == null ? void 0 : _a.caption) == null ? void 0 : _b[0]) == null ? void 0 : _c[0];\n    if (caption) {\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.parsePageId)(caption, { uuid: true });\n      const isPage = caption.charAt(0) === \"/\" && id;\n      if (isPage || isValidURL(caption)) {\n        isURL = true;\n      }\n    }\n  }\n  const figure = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figure\", {\n    className: cs(\n      \"notion-asset-wrapper\",\n      `notion-asset-wrapper-${block.type}`,\n      ((_d = value.format) == null ? void 0 : _d.block_full_width) && \"notion-asset-wrapper-full\",\n      blockId\n    )\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Asset, {\n    block: value,\n    zoomable: zoom && !isURL\n  }, ((_e = value == null ? void 0 : value.properties) == null ? void 0 : _e.caption) && !isURL && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figcaption\", {\n    className: \"notion-asset-caption\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: value.properties.caption,\n    block\n  }))));\n  if (isURL) {\n    const caption = (_f = value == null ? void 0 : value.properties) == null ? void 0 : _f.caption[0][0];\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.parsePageId)(caption, { uuid: true });\n    const isPage = caption.charAt(0) === \"/\" && id;\n    const captionHostname = extractHostname(caption);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n      style: urlStyle,\n      href: isPage ? mapPageUrl(id) : caption,\n      target: captionHostname && captionHostname !== rootDomain && !caption.startsWith(\"/\") ? \"blank_\" : null\n    }, figure);\n  }\n  return figure;\n};\nfunction isValidURL(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  );\n  return !!pattern.test(str);\n}\nfunction extractHostname(url) {\n  try {\n    const hostname = new URL(url).hostname;\n    return hostname;\n  } catch (err) {\n    return \"\";\n  }\n}\n\n// src/components/checkbox.tsx\n\n\n// src/icons/check.tsx\n\nfunction SvgCheck(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M5.5 12L14 3.5 12.5 2l-7 7-4-4.003L0 6.499z\"\n  }));\n}\nvar check_default = SvgCheck;\n\n// src/components/checkbox.tsx\nvar Checkbox = ({ isChecked }) => {\n  let content = null;\n  if (isChecked) {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-checked\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(check_default, null));\n  } else {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-unchecked\"\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-property notion-property-checkbox\"\n  }, content);\n};\n\n// src/next.tsx\n\n\nvar wrapNextImage = (NextImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextImage(_a) {\n    var _b = _a, {\n      src,\n      alt,\n      width,\n      height,\n      className,\n      style,\n      layout\n    } = _b, rest = __objRest(_b, [\n      \"src\",\n      \"alt\",\n      \"width\",\n      \"height\",\n      \"className\",\n      \"style\",\n      \"layout\"\n    ]);\n    if (!layout) {\n      layout = width && height ? \"intrinsic\" : \"fill\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextImage, __spreadValues({\n      className,\n      src,\n      alt,\n      width: layout === \"intrinsic\" && width,\n      height: layout === \"intrinsic\" && height,\n      objectFit: style == null ? void 0 : style.objectFit,\n      objectPosition: style == null ? void 0 : style.objectPosition,\n      layout\n    }, rest));\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_5__);\n};\nvar wrapNextLink = (NextLink) => function ReactNotionXNextLink(_a) {\n  var _b = _a, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  } = _b, linkProps = __objRest(_b, [\n    \"href\",\n    \"as\",\n    \"passHref\",\n    \"prefetch\",\n    \"replace\",\n    \"scroll\",\n    \"shallow\",\n    \"locale\"\n  ]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextLink, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, linkProps)));\n};\n\n// src/context.tsx\nvar DefaultLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\"\n}, props));\nvar DefaultLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultLink);\nvar DefaultPageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, props));\nvar DefaultPageLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultPageLink);\nvar DefaultEmbed = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, __spreadValues({}, props));\nvar DefaultHeader = Header;\nvar dummyLink = (_a) => {\n  var _b = _a, { href, rel, target, title } = _b, rest = __objRest(_b, [\"href\", \"rel\", \"target\", \"title\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({}, rest));\n};\nvar dummyComponent = (name) => () => {\n  console.warn(\n    `Warning: using empty component \"${name}\" (you should override this in NotionRenderer.components)`\n  );\n  return null;\n};\nvar dummyOverrideFn = (_, defaultValueFn) => defaultValueFn();\nvar defaultComponents = {\n  Image: null,\n  Link: DefaultLinkMemo,\n  PageLink: DefaultPageLinkMemo,\n  Checkbox,\n  Callout: void 0,\n  Code: dummyComponent(\"Code\"),\n  Equation: dummyComponent(\"Equation\"),\n  Collection: dummyComponent(\"Collection\"),\n  Property: void 0,\n  propertyTextValue: dummyOverrideFn,\n  propertySelectValue: dummyOverrideFn,\n  propertyRelationValue: dummyOverrideFn,\n  propertyFormulaValue: dummyOverrideFn,\n  propertyTitleValue: dummyOverrideFn,\n  propertyPersonValue: dummyOverrideFn,\n  propertyFileValue: dummyOverrideFn,\n  propertyCheckboxValue: dummyOverrideFn,\n  propertyUrlValue: dummyOverrideFn,\n  propertyEmailValue: dummyOverrideFn,\n  propertyPhoneNumberValue: dummyOverrideFn,\n  propertyNumberValue: dummyOverrideFn,\n  propertyLastEditedTimeValue: dummyOverrideFn,\n  propertyCreatedTimeValue: dummyOverrideFn,\n  propertyDateValue: dummyOverrideFn,\n  Pdf: dummyComponent(\"Pdf\"),\n  Tweet: dummyComponent(\"Tweet\"),\n  Modal: dummyComponent(\"Modal\"),\n  Header: DefaultHeader,\n  Embed: DefaultEmbed\n};\nvar defaultNotionContext = {\n  recordMap: {\n    block: {},\n    collection: {},\n    collection_view: {},\n    collection_query: {},\n    notion_user: {},\n    signed_urls: {}\n  },\n  components: defaultComponents,\n  mapPageUrl: defaultMapPageUrl(),\n  mapImageUrl: defaultMapImageUrl,\n  searchNotion: null,\n  isShowingSearch: false,\n  onHideSearch: null,\n  fullPage: false,\n  darkMode: false,\n  previewImages: false,\n  forceCustomImages: false,\n  showCollectionViewDropdown: true,\n  linkTableTitleProperties: true,\n  isLinkCollectionToUrlProperty: false,\n  showTableOfContents: false,\n  minTableOfContentsItems: 3,\n  defaultPageIcon: null,\n  defaultPageCover: null,\n  defaultPageCoverPosition: 0.5,\n  zoom: null\n};\nvar ctx = react__WEBPACK_IMPORTED_MODULE_0__.createContext(defaultNotionContext);\nvar NotionContextProvider = (_a) => {\n  var _b = _a, {\n    components: themeComponents = {},\n    children,\n    mapPageUrl,\n    mapImageUrl,\n    rootPageId\n  } = _b, rest = __objRest(_b, [\n    \"components\",\n    \"children\",\n    \"mapPageUrl\",\n    \"mapImageUrl\",\n    \"rootPageId\"\n  ]);\n  for (const key of Object.keys(rest)) {\n    if (rest[key] === void 0) {\n      delete rest[key];\n    }\n  }\n  const wrappedThemeComponents = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadValues({}, themeComponents),\n    [themeComponents]\n  );\n  if (wrappedThemeComponents.nextImage) {\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  }\n  if (wrappedThemeComponents.nextLink) {\n    wrappedThemeComponents.nextLink = wrapNextLink(themeComponents.nextLink);\n  }\n  for (const key of Object.keys(wrappedThemeComponents)) {\n    if (!wrappedThemeComponents[key]) {\n      delete wrappedThemeComponents[key];\n    }\n  }\n  const value = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadProps(__spreadValues(__spreadValues({}, defaultNotionContext), rest), {\n      rootPageId,\n      mapPageUrl: mapPageUrl != null ? mapPageUrl : defaultMapPageUrl(rootPageId),\n      mapImageUrl: mapImageUrl != null ? mapImageUrl : defaultMapImageUrl,\n      components: __spreadValues(__spreadValues({}, defaultComponents), wrappedThemeComponents)\n    }),\n    [mapImageUrl, mapPageUrl, wrappedThemeComponents, rootPageId, rest]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ctx.Provider, {\n    value\n  }, children);\n};\nvar NotionContextConsumer = ctx.Consumer;\nvar useNotionContext = () => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ctx);\n};\n\n// src/icons/default-page-icon.tsx\n\nvar DefaultPageIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 30 30\",\n    width: \"16\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\"\n  }));\n};\n\n// src/components/page-icon.tsx\nvar isIconBlock = (value) => {\n  return value.type === \"page\" || value.type === \"callout\" || value.type === \"collection_view\" || value.type === \"collection_view_page\";\n};\nvar PageIconImpl = ({\n  block,\n  className,\n  inline = true,\n  hideDefaultIcon = false,\n  defaultIcon\n}) => {\n  var _a;\n  const { mapImageUrl, recordMap, darkMode } = useNotionContext();\n  let isImage = false;\n  let content = null;\n  if (isIconBlock(block)) {\n    const icon = ((_a = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockIcon)(block, recordMap)) == null ? void 0 : _a.trim()) || defaultIcon;\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockTitle)(block, recordMap);\n    if (icon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(icon)) {\n      const url = mapImageUrl(icon, block);\n      isImage = true;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (icon && icon.startsWith(\"/icons/\")) {\n      const url = \"https://www.notion.so\" + icon + \"?mode=\" + (darkMode ? \"dark\" : \"light\");\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (!icon) {\n      if (!hideDefaultIcon) {\n        isImage = true;\n        content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultPageIcon, {\n          className: cs(className, \"notion-page-icon\"),\n          alt: title ? title : \"page icon\"\n        });\n      }\n    } else {\n      isImage = false;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: cs(className, \"notion-page-icon\"),\n        role: \"img\",\n        \"aria-label\": icon\n      }, icon);\n    }\n  }\n  if (!content) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      inline ? \"notion-page-icon-inline\" : \"notion-page-icon-hero\",\n      isImage ? \"notion-page-icon-image\" : \"notion-page-icon-span\"\n    )\n  }, content);\n};\nvar PageIcon = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageIconImpl);\n\n// src/icons/collection-view-board.tsx\n\nfunction SvgCollectionViewBoard(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M12 1.5H2a.5.5 0 00-.5.5v10a.5.5 0 00.5.5h10a.5.5 0 00.5-.5V2a.5.5 0 00-.5-.5zM2 0h10a2 2 0 012 2v10a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm1 3h2v6H3V3zm3 0h2v8H6V3zm3 0h2v4H9V3z\"\n  }));\n}\nvar collection_view_board_default = SvgCollectionViewBoard;\n\n// src/icons/collection-view-calendar.tsx\n\nfunction SvgCollectionViewCalendar(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M2.564 4.004c-.586 0-.71.024-.833.09a.319.319 0 00-.141.14c-.066.124-.09.247-.09.834v6.368c0 .586.024.71.09.833a.319.319 0 00.14.141c.124.066.248.09.834.09h8.872c.586 0 .71-.024.833-.09a.319.319 0 00.141-.14c.066-.124.09-.248.09-.834V5.068c0-.587-.024-.71-.09-.834a.319.319 0 00-.14-.14c-.124-.066-.248-.09-.834-.09H2.564zm0-4.004h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v8.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267H2.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 01-.757-.756C.093 12.65 0 12.327 0 11.437V2.563c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757C1.35.093 1.673 0 2.563 0zm4.044 7.88c.179.11.318.256.418.436.1.18.148.394.148.64 0 .304-.08.597-.238.876-.16.28-.392.498-.692.65-.299.15-.685.224-1.16.224-.46 0-.827-.055-1.1-.166a1.687 1.687 0 01-.68-.492 2.227 2.227 0 01-.404-.802l.083-.127 1.37-.182.112.08c.05.258.126.431.221.52a.507.507 0 00.364.133.495.495 0 00.386-.169c.105-.115.158-.27.158-.472 0-.205-.051-.358-.15-.463a.527.527 0 00-.407-.157 1.65 1.65 0 00-.417.077l-.127-.104.07-.98.115-.091c.072.01.127.015.164.015.154 0 .28-.047.38-.144.1-.096.15-.205.15-.335a.388.388 0 00-.106-.29c-.07-.07-.168-.105-.3-.105a.444.444 0 00-.324.118c-.083.08-.143.232-.176.457l-.117.084-1.297-.233-.079-.123c.114-.435.334-.772.66-1.006.326-.234.78-.349 1.36-.349.666 0 1.153.126 1.462.384.31.259.467.589.467.982 0 .233-.064.446-.192.636a1.43 1.43 0 01-.37.365c.1.034.182.072.248.113zm1.747-.145a5.186 5.186 0 01-.806.31l-.129-.097V6.824l.07-.096c.455-.147.807-.322 1.055-.524.246-.202.439-.45.579-.747l.09-.057h1.135l.1.1v5.021l-.1.1H8.961l-.1-.1V7.428a4.053 4.053 0 01-.506.307z\"\n  }));\n}\nvar collection_view_calendar_default = SvgCollectionViewCalendar;\n\n// src/icons/collection-view-gallery.tsx\n\nfunction SvgCollectionViewGallery(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M12 1.5H2a.5.5 0 00-.5.5v10a.5.5 0 00.5.5h10a.5.5 0 00.5-.5V2a.5.5 0 00-.5-.5zM2 0h10a2 2 0 012 2v10a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm1 3h3.5v3.5H3V3zm4.5 0H11v3.5H7.5V3zM3 7.5h3.5V11H3V7.5zm4.5 0H11V11H7.5V7.5z\"\n  }));\n}\nvar collection_view_gallery_default = SvgCollectionViewGallery;\n\n// src/icons/collection-view-list.tsx\n\nfunction SvgCollectionViewList(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M12 1.5H2a.5.5 0 00-.5.5v10a.5.5 0 00.5.5h10a.5.5 0 00.5-.5V2a.5.5 0 00-.5-.5zM2 0h10a2 2 0 012 2v10a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm1 3h6v1.5H3V3zm0 2.5h8V7H3V5.5zM3 8h4v1.5H3V8z\"\n  }));\n}\nvar collection_view_list_default = SvgCollectionViewList;\n\n// src/icons/collection-view-table.tsx\n\nfunction SvgCollectionViewTable(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M2 0h10a2 2 0 012 2v10a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm3.75 5.67v2.66h6.75V5.67H5.75zm0 4.17v2.66h5.75a1 1 0 001-1V9.84H5.75zM1.5 5.67v2.66h2.75V5.67H1.5zm0 4.17v1.66a1 1 0 001 1h1.75V9.84H1.5zm1-8.34a1 1 0 00-1 1v1.66h2.75V1.5H2.5zm3.25 0v2.66h6.75V2.5a1 1 0 00-1-1H5.75z\"\n  }));\n}\nvar collection_view_table_default = SvgCollectionViewTable;\n\n// src/icons/collection-view-icon.tsx\nvar iconMap = {\n  table: collection_view_table_default,\n  board: collection_view_board_default,\n  gallery: collection_view_gallery_default,\n  list: collection_view_list_default,\n  calendar: collection_view_calendar_default\n};\nvar CollectionViewIcon = (_a) => {\n  var _b = _a, {\n    type\n  } = _b, rest = __objRest(_b, [\n    \"type\"\n  ]);\n  const icon = iconMap[type];\n  if (!icon) {\n    return null;\n  }\n  return icon(rest);\n};\n\n// src/third-party/collection-row.tsx\n\n\n// src/third-party/collection-column-title.tsx\n\n\n// src/icons/type-checkbox.tsx\n\nfunction SvgTypeCheckbox(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M0 3a3 3 0 013-3h8a3 3 0 013 3v8a3 3 0 01-3 3H3a3 3 0 01-3-3V3zm3-1.5A1.5 1.5 0 001.5 3v8A1.5 1.5 0 003 12.5h8a1.5 1.5 0 001.5-1.5V3A1.5 1.5 0 0011 1.5H3zm-.167 5.316l.566-.542.177-.17.347-.332.346.334.176.17 1.139 1.098 3.699-3.563.177-.17.347-.335.347.334.177.17.563.543.177.171.372.36-.372.36-.177.17-4.786 4.615-.177.171-.347.334-.347-.334-.177-.17-2.23-2.15-.177-.172-.375-.361.376-.36.179-.17z\"\n  }));\n}\nvar type_checkbox_default = SvgTypeCheckbox;\n\n// src/icons/type-date.tsx\n\nfunction SvgTypeDate(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z\"\n  }));\n}\nvar type_date_default = SvgTypeDate;\n\n// src/icons/type-email.tsx\n\nfunction SvgTypeEmail(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M14 6.225c0 .822-.133 1.574-.4 2.256-.267.683-.644 1.218-1.13 1.606-.488.388-.946.6-1.494.6-.429 0-.808-.102-1.139-.305a1.753 1.753 0 01-.713-.8c-.613.736-1.563 1.104-2.531 1.104-1.027 0-1.835-.304-2.427-.912-.591-.608-.887-1.44-.887-2.496 0-1.204.389-2.175 1.166-2.911.776-.736 1.791-1.105 3.044-1.105.498 0 2.032.212 2.252.268.51.13.86.593.835 1.112l-.156 3.287c0 .794.22 1.19.66 1.19.372 0 .668-.267.888-.8.22-.534.33-1.232.33-2.094 0-.919-.194-1.731-.582-2.436a3.924 3.924 0 00-1.64-1.614c-.704-.371-1.509-.557-2.413-.557-1.172 0-2.19.237-3.053.711a4.785 4.785 0 00-1.988 2.05c-.46.894-.691 1.926-.691 3.096 0 1.576.428 2.784 1.283 3.627.855.841 2.094 1.262 3.718 1.262.615 0 1.29-.067 2.027-.2.225-.042.518-.108.877-.2a.863.863 0 011.025.527.76.76 0 01-.502.993c-1.052.316-2.17.488-3.357.516-2.204 0-3.922-.57-5.154-1.713C.616 11.146 0 9.56 0 7.527c0-1.41.315-2.69.944-3.84A6.792 6.792 0 013.63.98C4.794.327 6.131 0 7.645 0c1.276 0 2.514.29 3.418.77.905.481 1.574 1.228 2.12 2.176.544.947.817 2.04.817 3.28zm-8.615 1.01c0 1.208.488 1.811 1.466 1.811.511 0 .9-.181 1.168-.545.267-.363.429-.954.486-1.772l.11-1.896a4.638 4.638 0 00-.98-.095c-.71 0-1.263.224-1.658.67-.395.446-.592 1.055-.592 1.828z\"\n  }));\n}\nvar type_email_default = SvgTypeEmail;\n\n// src/icons/type-file.tsx\n\nfunction SvgTypeFile(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M5.946 14a4.975 4.975 0 01-3.497-1.415A4.731 4.731 0 011 9.174c0-1.288.515-2.5 1.449-3.41L7.456.986c1.345-1.313 3.722-1.318 5.08.007a3.453 3.453 0 010 4.961L8.03 10.241c-.867.847-2.293.848-3.17-.006a2.158 2.158 0 010-3.102l1.744-1.701 1.272 1.24-1.744 1.701a.43.43 0 000 .621c.23.223.405.223.636 0l4.503-4.288a1.723 1.723 0 00-.007-2.473c-.68-.663-1.864-.663-2.543 0L3.713 7.011a3.006 3.006 0 00-.915 2.163c0 .82.328 1.591.922 2.17 1.19 1.162 3.262 1.162 4.451 0l2.248-2.192 1.272 1.24-2.248 2.193A4.978 4.978 0 015.946 14z\"\n  }));\n}\nvar type_file_default = SvgTypeFile;\n\n// src/icons/type-formula.tsx\n\nfunction SvgTypeFormula(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M7.779 7.063l-3.157 4.224a.49.49 0 00-.072.218.35.35 0 00.346.357h6.242c.476 0 .862.398.862.889v.36c0 .491-.386.889-.862.889H1.862A.876.876 0 011 13.111v-.425a.82.82 0 01.177-.54L4.393 7.8a1.367 1.367 0 00-.006-1.625L1.4 2.194a.822.822 0 01-.18-.544V.89C1.22.398 1.604 0 2.08 0h8.838c.476 0 .861.398.861.889v.36c0 .491-.385.89-.86.89H5.135c-.19 0-.345.159-.345.356a.489.489 0 00.07.216l2.92 3.975c.049.062.063.107.06.188a.246.246 0 01-.062.189z\"\n  }));\n}\nvar type_formula_default = SvgTypeFormula;\n\n// src/icons/type-multi-select.tsx\n\nfunction SvgTypeMultiSelect(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z\"\n  }));\n}\nvar type_multi_select_default = SvgTypeMultiSelect;\n\n// src/icons/type-number.tsx\n\nfunction SvgTypeNumber(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M4.462 0c-.595 0-1.078.482-1.078 1.078v2.306H1.078a1.078 1.078 0 100 2.155h2.306v2.922H1.078a1.078 1.078 0 100 2.155h2.306v2.306a1.078 1.078 0 002.155 0v-2.306H8.46v2.306a1.078 1.078 0 002.156 0v-2.306h2.306a1.078 1.078 0 100-2.155h-2.306V5.539h2.306a1.078 1.078 0 100-2.155h-2.306V1.078a1.078 1.078 0 00-2.156 0v2.306H5.54V1.078C5.54.482 5.056 0 4.461 0zm1.077 8.46V5.54H8.46v2.92H5.54z\"\n  }));\n}\nvar type_number_default = SvgTypeNumber;\n\n// src/icons/type-person.tsx\n\nfunction SvgTypePerson(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M9.625 10.847C8.912 10.289 8.121 9.926 7 9.26v-.54a3.33 3.33 0 00.538-.888c.408-.1.774-.498.774-.832 0-.482-.202-.673-.44-.829 0-.015.003-.03.003-.046 0-.711-.438-2.625-2.625-2.625-2.188 0-2.625 1.915-2.625 2.625 0 .017.003.03.003.046-.238.156-.44.347-.44.829 0 .334.366.731.774.833.146.343.326.643.538.886v.541c-1.12.665-1.912 1.028-2.625 1.587C.041 11.498 0 12.469 0 14h10.5c0-1.531-.041-2.502-.875-3.153zm3.5-3.5c-.713-.558-1.504-.921-2.625-1.587v-.54c.212-.244.392-.544.538-.888.408-.1.774-.498.774-.832 0-.482-.202-.673-.44-.829 0-.015.003-.03.003-.046C11.375 1.914 10.937 0 8.75 0 6.562 0 6.125 1.915 6.125 2.625c0 .017.003.03.003.046-.016.012-.03.025-.047.036 1.751.359 2.516 1.841 2.647 3.04.248.262.46.65.46 1.253 0 .603-.417 1.203-1.004 1.515-.057.109-.117.214-.181.315l.437.245c.64.357 1.194.666 1.724 1.081.138.108.256.224.365.343H14c0-1.53-.041-2.5-.875-3.153z\"\n  }));\n}\nvar type_person_default = SvgTypePerson;\n\n// src/icons/type-person-2.tsx\n\nfunction SvgTypePerson2(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M13.125 10.035c-.571-.55-2.324-1.504-3.5-2.16v-.834c.224-.322.42-.671.566-1.055.394-.242.746-.702.746-1.173 0-.458-.005-.87-.47-1.208C10.305 1.558 9.436 0 7 0S3.695 1.558 3.533 3.605c-.465.338-.47.75-.47 1.208 0 .471.352.93.746 1.173.146.384.342.733.566 1.055v.834c-1.176.656-2.929 1.61-3.5 2.16C.165 10.72 0 11.812 0 14h14c0-2.188-.164-3.281-.875-3.965z\"\n  }));\n}\nvar type_person_2_default = SvgTypePerson2;\n\n// src/icons/type-phone-number.tsx\n\nfunction SvgTypePhoneNumber(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M2.207.013a.487.487 0 00-.29.02C.87.438.213 1.93.058 2.955c-.484 3.33 2.15 6.215 4.57 8.113 2.149 1.684 6.273 4.453 8.713 1.781.31-.329.678-.813.658-1.297-.058-.813-.813-1.394-1.394-1.84-.445-.329-1.375-1.239-1.956-1.22-.522.02-.851.562-1.18.891l-.582.581c-.096.097-1.336-.716-1.471-.813a9.881 9.881 0 01-1.414-1.104A9.13 9.13 0 014.86 6.732c-.097-.136-.89-1.317-.813-1.414 0 0 .677-.736.871-1.026.407-.62.717-1.104.252-1.84-.174-.27-.387-.484-.62-.716-.406-.387-.813-.794-1.278-1.123-.251-.194-.677-.542-1.065-.6z\"\n  }));\n}\nvar type_phone_number_default = SvgTypePhoneNumber;\n\n// src/icons/type-relation.tsx\n\nfunction SvgTypeRelation(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M4.5 1v2h5.086L1 11.586 2.414 13 11 4.414V9.5h2V1z\"\n  }));\n}\nvar type_relation_default = SvgTypeRelation;\n\n// src/icons/type-select.tsx\n\nfunction SvgTypeSelect(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z\"\n  }));\n}\nvar type_select_default = SvgTypeSelect;\n\n// src/icons/type-text.tsx\n\nfunction SvgTypeText(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z\"\n  }));\n}\nvar type_text_default = SvgTypeText;\n\n// src/icons/type-timestamp.tsx\n\nfunction SvgTypeTimestamp(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M6.986 14c-1.79 0-3.582-.69-4.944-2.068-2.723-2.72-2.723-7.172 0-9.892 2.725-2.72 7.182-2.72 9.906 0A6.972 6.972 0 0114 6.996c0 1.88-.728 3.633-2.052 4.955A7.058 7.058 0 016.986 14zm3.285-6.99v1.645H5.526v-5.47h1.841v3.63h2.904v.194zm1.89-.014c0-1.379-.542-2.67-1.522-3.648-2.006-2.005-5.287-2.007-7.297-.009l-.009.009a5.168 5.168 0 000 7.295c2.01 2.007 5.297 2.007 7.306 0a5.119 5.119 0 001.521-3.647z\"\n  }));\n}\nvar type_timestamp_default = SvgTypeTimestamp;\n\n// src/icons/type-title.tsx\n\nfunction SvgTypeTitle(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M7.74 8.697a.81.81 0 01.073.308.894.894 0 01-.9.888.867.867 0 01-.825-.592l-.333-.961H2.058l-.333.961a.882.882 0 01-.838.592A.884.884 0 010 9.005c0-.11.025-.222.062-.308l2.403-6.211c.222-.58.776-.986 1.442-.986.653 0 1.22.407 1.442.986l2.39 6.211zM2.6 6.824h2.613L3.907 3.102 2.6 6.824zm8.8-3.118c1.355 0 2.6.542 2.6 2.255V9.08a.8.8 0 01-.789.814.797.797 0 01-.788-.703c-.395.468-1.097.764-1.874.764-.949 0-2.07-.64-2.07-1.972 0-1.392 1.121-1.897 2.07-1.897.789 0 1.491.246 1.886.727v-.826c0-.604-.518-.998-1.306-.998-.469 0-.888.123-1.32.394a.64.64 0 01-.307.086.602.602 0 01-.592-.604c0-.221.123-.419.284-.517a3.963 3.963 0 012.206-.641zm-.222 5.188c.505 0 .998-.172 1.257-.517v-.74c-.259-.345-.752-.517-1.257-.517-.616 0-1.122.332-1.122.9 0 .554.506.874 1.122.874zM.656 11.125h12.688a.656.656 0 110 1.313H.656a.656.656 0 110-1.313z\"\n  }));\n}\nvar type_title_default = SvgTypeTitle;\n\n// src/icons/type-url.tsx\n\nfunction SvgTypeUrl(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M3.733 3.867h3.734c1.03 0 1.866.837 1.866 1.866 0 1.03-.837 1.867-1.866 1.867h-.934a.934.934 0 000 1.867h.934a3.734 3.734 0 000-7.467H3.733A3.73 3.73 0 001.89 8.977a4.637 4.637 0 01.314-2.18 1.854 1.854 0 01-.336-1.064c0-1.03.837-1.866 1.866-1.866zm8.377 1.422a4.6 4.6 0 01-.316 2.176c.212.303.34.67.34 1.068 0 1.03-.838 1.867-1.867 1.867H6.533a1.869 1.869 0 01-1.866-1.867c0-1.03.837-1.866 1.866-1.866h.934a.934.934 0 000-1.867h-.934a3.733 3.733 0 000 7.467h3.734a3.73 3.73 0 001.843-6.978z\"\n  }));\n}\nvar type_url_default = SvgTypeUrl;\n\n// src/icons/property-icon.tsx\nvar iconMap2 = {\n  title: type_title_default,\n  text: type_text_default,\n  number: type_number_default,\n  select: type_select_default,\n  multi_select: type_multi_select_default,\n  date: type_date_default,\n  person: type_person_default,\n  file: type_file_default,\n  checkbox: type_checkbox_default,\n  url: type_url_default,\n  email: type_email_default,\n  phone_number: type_phone_number_default,\n  formula: type_formula_default,\n  relation: type_relation_default,\n  created_time: type_timestamp_default,\n  last_edited_time: type_timestamp_default,\n  created_by: type_person_2_default,\n  last_edited_by: type_person_2_default\n};\nvar PropertyIcon = (_a) => {\n  var _b = _a, {\n    type\n  } = _b, rest = __objRest(_b, [\n    \"type\"\n  ]);\n  const icon = iconMap2[type];\n  if (!icon)\n    return null;\n  return icon(rest);\n};\n\n// src/third-party/collection-column-title.tsx\nvar CollectionColumnTitle = ({ schema }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-column-title\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropertyIcon, {\n    className: \"notion-collection-column-title-icon\",\n    type: schema.type\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-column-title-body\"\n  }, schema.name));\n};\n\n// src/third-party/property.tsx\nvar import_format2 = __toESM(require_format(), 1);\nvar import_format_number = __toESM(require_format_number(), 1);\n\n\n// src/third-party/eval-formula.ts\nvar import_add = __toESM(require_add(), 1);\nvar import_format = __toESM(require_format(), 1);\nvar import_getDate = __toESM(require_getDate(), 1);\nvar import_getDay = __toESM(require_getDay(), 1);\nvar import_getHours = __toESM(require_getHours(), 1);\nvar import_getMinutes = __toESM(require_getMinutes(), 1);\nvar import_getMonth = __toESM(require_getMonth(), 1);\nvar import_getYear = __toESM(require_getYear(), 1);\nvar import_intervalToDuration = __toESM(require_intervalToDuration(), 1);\nvar import_sub = __toESM(require_sub(), 1);\n\nfunction evalFormula(formula, context) {\n  const _a = context, { endDate } = _a, ctx2 = __objRest(_a, [\"endDate\"]);\n  switch (formula == null ? void 0 : formula.type) {\n    case \"symbol\":\n      return formula.name === \"true\";\n    case \"constant\": {\n      const value = formula.value;\n      switch (formula.result_type) {\n        case \"text\":\n          return value;\n        case \"number\":\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n    case \"property\": {\n      const value = ctx2.properties[formula.id];\n      const text = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getTextContent)(value);\n      switch (formula.result_type) {\n        case \"text\":\n          return text;\n        case \"number\":\n          return parseFloat(text);\n        case \"boolean\":\n          if (typeof text === \"string\") {\n            return text === \"true\";\n          } else {\n            return !!text;\n          }\n        case \"date\": {\n          const v = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getDateValue)(value);\n          if (v) {\n            if (endDate && v.end_date) {\n              const date = new Date(v.end_date);\n              return new Date(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate()\n              );\n            } else {\n              const date = new Date(v.start_date);\n              return new Date(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate()\n              );\n            }\n          } else {\n            return new Date(text);\n          }\n        }\n        default:\n          return text;\n      }\n    }\n    case \"operator\":\n    case \"function\":\n      return evalFunctionFormula(formula, ctx2);\n    default:\n      throw new Error(\n        `invalid or unsupported formula \"${formula == null ? void 0 : formula.type}`\n      );\n  }\n}\nfunction evalFunctionFormula(formula, ctx2) {\n  const args = formula == null ? void 0 : formula.args;\n  switch (formula.name) {\n    case \"and\":\n      return evalFormula(args[0], ctx2) && evalFormula(args[1], ctx2);\n    case \"empty\":\n      return !evalFormula(args[0], ctx2);\n    case \"equal\":\n      return evalFormula(args[0], ctx2) == evalFormula(args[1], ctx2);\n    case \"if\":\n      return evalFormula(args[0], ctx2) ? evalFormula(args[1], ctx2) : evalFormula(args[2], ctx2);\n    case \"larger\":\n      return evalFormula(args[0], ctx2) > evalFormula(args[1], ctx2);\n    case \"largerEq\":\n      return evalFormula(args[0], ctx2) >= evalFormula(args[1], ctx2);\n    case \"not\":\n      return !evalFormula(args[0], ctx2);\n    case \"or\":\n      return evalFormula(args[0], ctx2) || evalFormula(args[1], ctx2);\n    case \"smaller\":\n      return evalFormula(args[0], ctx2) < evalFormula(args[1], ctx2);\n    case \"smallerEq\":\n      return evalFormula(args[0], ctx2) <= evalFormula(args[1], ctx2);\n    case \"unequal\":\n      return evalFormula(args[0], ctx2) != evalFormula(args[1], ctx2);\n    case \"abs\":\n      return Math.abs(evalFormula(args[0], ctx2));\n    case \"add\": {\n      const v0 = evalFormula(args[0], ctx2);\n      const v1 = evalFormula(args[1], ctx2);\n      if (typeof v0 === \"number\") {\n        return v0 + +v1;\n      } else if (typeof v0 === \"string\") {\n        return v0 + `${v1}`;\n      } else {\n        return v0;\n      }\n    }\n    case \"cbrt\":\n      return Math.cbrt(evalFormula(args[0], ctx2));\n    case \"ceil\":\n      return Math.ceil(evalFormula(args[0], ctx2));\n    case \"divide\":\n      return evalFormula(args[0], ctx2) / evalFormula(args[1], ctx2);\n    case \"exp\":\n      return Math.exp(evalFormula(args[0], ctx2));\n    case \"floor\":\n      return Math.floor(evalFormula(args[0], ctx2));\n    case \"ln\":\n      return Math.log(evalFormula(args[0], ctx2));\n    case \"log10\":\n      return Math.log10(evalFormula(args[0], ctx2));\n    case \"log2\":\n      return Math.log2(evalFormula(args[0], ctx2));\n    case \"max\": {\n      const values = args.map((arg) => evalFormula(arg, ctx2));\n      return values.reduce(\n        (acc, value) => Math.max(acc, value),\n        Number.NEGATIVE_INFINITY\n      );\n    }\n    case \"min\": {\n      const values = args.map((arg) => evalFormula(arg, ctx2));\n      return values.reduce(\n        (acc, value) => Math.min(acc, value),\n        Number.POSITIVE_INFINITY\n      );\n    }\n    case \"mod\":\n      return evalFormula(args[0], ctx2) % evalFormula(args[1], ctx2);\n    case \"multiply\":\n      return evalFormula(args[0], ctx2) * evalFormula(args[1], ctx2);\n    case \"pow\":\n      return Math.pow(\n        evalFormula(args[0], ctx2),\n        evalFormula(args[1], ctx2)\n      );\n    case \"round\":\n      return Math.round(evalFormula(args[0], ctx2));\n    case \"sign\":\n      return Math.sign(evalFormula(args[0], ctx2));\n    case \"sqrt\":\n      return Math.sqrt(evalFormula(args[0], ctx2));\n    case \"subtract\":\n      return evalFormula(args[0], ctx2) - evalFormula(args[1], ctx2);\n    case \"toNumber\":\n      return parseFloat(evalFormula(args[0], ctx2));\n    case \"unaryMinus\":\n      return evalFormula(args[0], ctx2) * -1;\n    case \"unaryPlus\":\n      return parseFloat(evalFormula(args[0], ctx2));\n    case \"concat\": {\n      const values = args.map((arg) => evalFormula(arg, ctx2));\n      return values.join(\"\");\n    }\n    case \"contains\":\n      return evalFormula(args[0], ctx2).includes(\n        evalFormula(args[1], ctx2)\n      );\n    case \"format\": {\n      const value = evalFormula(args[0], ctx2);\n      switch (typeof value) {\n        case \"string\":\n          return value;\n        case \"object\":\n          if (value instanceof Date) {\n            return (0, import_format.default)(value, \"MMM d, YYY\");\n          } else {\n            return `${value}`;\n          }\n        case \"number\":\n        default:\n          return `${value}`;\n      }\n    }\n    case \"join\": {\n      const [delimiterArg, ...restArgs] = args;\n      const delimiter = evalFormula(delimiterArg, ctx2);\n      const values = restArgs.map((arg) => evalFormula(arg, ctx2));\n      return values.join(delimiter);\n    }\n    case \"length\":\n      return evalFormula(args[0], ctx2).length;\n    case \"replace\": {\n      const value = evalFormula(args[0], ctx2);\n      const regex = evalFormula(args[1], ctx2);\n      const replacement = evalFormula(args[2], ctx2);\n      return value.replace(new RegExp(regex), replacement);\n    }\n    case \"replaceAll\": {\n      const value = evalFormula(args[0], ctx2);\n      const regex = evalFormula(args[1], ctx2);\n      const replacement = evalFormula(args[2], ctx2);\n      return value.replace(new RegExp(regex, \"g\"), replacement);\n    }\n    case \"slice\": {\n      const value = evalFormula(args[0], ctx2);\n      const beginIndex = evalFormula(args[1], ctx2);\n      const endIndex = args[2] ? evalFormula(args[2], ctx2) : value.length;\n      return value.slice(beginIndex, endIndex);\n    }\n    case \"test\": {\n      const value = evalFormula(args[0], ctx2);\n      const regex = evalFormula(args[1], ctx2);\n      return new RegExp(regex).test(value);\n    }\n    case \"date\":\n      return (0, import_getDate.default)(evalFormula(args[0], ctx2));\n    case \"dateAdd\": {\n      const date = evalFormula(args[0], ctx2);\n      const number = evalFormula(args[1], ctx2);\n      const unit = evalFormula(args[1], ctx2);\n      return (0, import_add.default)(date, { [unit]: number });\n    }\n    case \"dateBetween\": {\n      const date1 = evalFormula(args[0], ctx2);\n      const date2 = evalFormula(args[1], ctx2);\n      const unit = evalFormula(args[1], ctx2);\n      return (0, import_intervalToDuration.default)({\n        start: date2,\n        end: date1\n      })[unit];\n    }\n    case \"dateSubtract\": {\n      const date = evalFormula(args[0], ctx2);\n      const number = evalFormula(args[1], ctx2);\n      const unit = evalFormula(args[1], ctx2);\n      return (0, import_sub.default)(date, { [unit]: number });\n    }\n    case \"day\":\n      return (0, import_getDay.default)(evalFormula(args[0], ctx2));\n    case \"end\":\n      return evalFormula(args[0], __spreadProps(__spreadValues({}, ctx2), { endDate: true }));\n    case \"formatDate\": {\n      const date = evalFormula(args[0], ctx2);\n      const formatValue = evalFormula(args[1], ctx2).replace(\n        \"dddd\",\n        \"eeee\"\n      );\n      return (0, import_format.default)(date, formatValue);\n    }\n    case \"fromTimestamp\":\n      return new Date(evalFormula(args[0], ctx2));\n    case \"hour\":\n      return (0, import_getHours.default)(evalFormula(args[0], ctx2));\n    case \"minute\":\n      return (0, import_getMinutes.default)(evalFormula(args[0], ctx2));\n    case \"month\":\n      return (0, import_getMonth.default)(evalFormula(args[0], ctx2));\n    case \"now\":\n      return new Date();\n    case \"start\":\n      return evalFormula(args[0], __spreadProps(__spreadValues({}, ctx2), { endDate: false }));\n    case \"timestamp\":\n      return evalFormula(args[0], ctx2).getTime();\n    case \"year\":\n      return (0, import_getYear.default)(evalFormula(args[0], ctx2));\n    default:\n      throw new Error(\n        `invalid or unsupported function formula \"${formula == null ? void 0 : formula.type}`\n      );\n  }\n}\n\n// src/third-party/property.tsx\nvar Property = (props) => {\n  const { components } = useNotionContext();\n  if (components.Property) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Property, __spreadValues({}, props));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropertyImplMemo, __spreadValues({}, props));\n  }\n};\nvar PropertyImpl = (props) => {\n  const { components, mapImageUrl, mapPageUrl } = useNotionContext();\n  const {\n    schema,\n    data,\n    block,\n    collection,\n    inline = false,\n    linkToTitlePage = true\n  } = props;\n  const renderTextValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function TextProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderDateValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function DateProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderRelationValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function RelationProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderFormulaValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function FormulaProperty() {\n      let content2;\n      try {\n        content2 = evalFormula(schema.formula, {\n          schema: collection == null ? void 0 : collection.schema,\n          properties: block == null ? void 0 : block.properties\n        });\n        if (isNaN(content2)) {\n        }\n        if (content2 instanceof Date) {\n          content2 = (0, import_format2.default)(content2, \"MMM d, YYY hh:mm aa\");\n        }\n      } catch (err) {\n        content2 = null;\n      }\n      return content2;\n    },\n    [block == null ? void 0 : block.properties, collection == null ? void 0 : collection.schema, schema]\n  );\n  const renderTitleValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function FormulaTitle() {\n      if (block && linkToTitlePage) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          className: cs(\"notion-page-link\"),\n          href: mapPageUrl(block.id)\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block\n        }));\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: data,\n          block\n        });\n      }\n    },\n    [block, components, data, linkToTitlePage, mapPageUrl]\n  );\n  const renderPersonValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function PersonProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderFileValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function FileProperty() {\n      const files = data.filter((v) => v.length === 2).map((f) => f.flat().flat());\n      return files.map((file, i) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n        key: i,\n        className: \"notion-property-file\",\n        href: mapImageUrl(file[2], block),\n        target: \"_blank\",\n        rel: \"noreferrer noopener\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n        alt: file[0],\n        src: mapImageUrl(file[2], block),\n        loading: \"lazy\"\n      })));\n    },\n    [block, components, data, mapImageUrl]\n  );\n  const renderCheckboxValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function CheckboxProperty() {\n      const isChecked = data && data[0][0] === \"Yes\";\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-property-checkbox-container\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Checkbox, {\n        isChecked,\n        blockId: void 0\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"notion-property-checkbox-text\"\n      }, schema.name));\n    },\n    [data, schema]\n  );\n  const renderUrlValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function UrlProperty() {\n      const d = JSON.parse(JSON.stringify(data));\n      if (inline) {\n        try {\n          const url = new URL(d[0][0]);\n          d[0][0] = url.hostname.replace(/^www\\./, \"\");\n        } catch (err) {\n        }\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: d,\n        block,\n        inline,\n        linkProps: {\n          target: \"_blank\",\n          rel: \"noreferrer noopener\"\n        }\n      });\n    },\n    [block, data, inline]\n  );\n  const renderEmailValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function EmailProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        linkProtocol: \"mailto\",\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderPhoneNumberValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function PhoneNumberProperty() {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n        value: data,\n        linkProtocol: \"tel\",\n        block\n      });\n    },\n    [block, data]\n  );\n  const renderNumberValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function NumberProperty() {\n      const value = parseFloat(data[0][0] || \"0\");\n      let output = \"\";\n      if (isNaN(value)) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: data,\n          block\n        });\n      } else {\n        switch (schema.number_format) {\n          case \"number_with_commas\":\n            output = (0, import_format_number.default)()(value);\n            break;\n          case \"percent\":\n            output = (0, import_format_number.default)({ suffix: \"%\" })(value * 100);\n            break;\n          case \"dollar\":\n            output = (0, import_format_number.default)({ prefix: \"$\", round: 2, padRight: 2 })(\n              value\n            );\n            break;\n          case \"euro\":\n            output = (0, import_format_number.default)({ prefix: \"\\u20AC\", round: 2, padRight: 2 })(\n              value\n            );\n            break;\n          case \"pound\":\n            output = (0, import_format_number.default)({ prefix: \"\\xA3\", round: 2, padRight: 2 })(\n              value\n            );\n            break;\n          case \"yen\":\n            output = (0, import_format_number.default)({ prefix: \"\\xA5\", round: 0 })(value);\n            break;\n          case \"rupee\":\n            output = (0, import_format_number.default)({ prefix: \"\\u20B9\", round: 2, padRight: 2 })(\n              value\n            );\n            break;\n          case \"won\":\n            output = (0, import_format_number.default)({ prefix: \"\\u20A9\", round: 0 })(value);\n            break;\n          case \"yuan\":\n            output = (0, import_format_number.default)({ prefix: \"CN\\xA5\", round: 2, padRight: 2 })(\n              value\n            );\n            break;\n          default:\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n              value: data,\n              block\n            });\n        }\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: [[output]],\n          block\n        });\n      }\n    },\n    [block, data, schema]\n  );\n  const renderCreatedTimeValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function CreatedTimeProperty() {\n      return (0, import_format2.default)(new Date(block == null ? void 0 : block.created_time), \"MMM d, YYY hh:mm aa\");\n    },\n    [block == null ? void 0 : block.created_time]\n  );\n  const renderLastEditedTimeValue = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => function LastEditedTimeProperty() {\n      return (0, import_format2.default)(new Date(block == null ? void 0 : block.last_edited_time), \"MMM d, YYY hh:mm aa\");\n    },\n    [block == null ? void 0 : block.last_edited_time]\n  );\n  if (!schema) {\n    return null;\n  }\n  let content = null;\n  if (data || schema.type === \"checkbox\" || schema.type === \"title\" || schema.type === \"formula\" || schema.type === \"created_by\" || schema.type === \"last_edited_by\" || schema.type === \"created_time\" || schema.type === \"last_edited_time\") {\n    switch (schema.type) {\n      case \"relation\":\n        content = components.propertyRelationValue(props, renderRelationValue);\n        break;\n      case \"formula\":\n        content = components.propertyFormulaValue(props, renderFormulaValue);\n        break;\n      case \"title\":\n        content = components.propertyTitleValue(props, renderTitleValue);\n        break;\n      case \"select\":\n      case \"multi_select\": {\n        const values = (data[0][0] || \"\").split(\",\");\n        content = values.map((value, index) => {\n          var _a;\n          const option = (_a = schema.options) == null ? void 0 : _a.find(\n            (option2) => value === option2.value\n          );\n          const color = option == null ? void 0 : option.color;\n          return components.propertySelectValue(\n            __spreadProps(__spreadValues({}, props), {\n              key: index,\n              value,\n              option,\n              color\n            }),\n            () => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n              key: index,\n              className: cs(\n                `notion-property-${schema.type}-item`,\n                color && `notion-item-${color}`\n              )\n            }, value)\n          );\n        });\n        break;\n      }\n      case \"person\":\n        content = components.propertyPersonValue(props, renderPersonValue);\n        break;\n      case \"file\":\n        content = components.propertyFileValue(props, renderFileValue);\n        break;\n      case \"checkbox\":\n        content = components.propertyCheckboxValue(props, renderCheckboxValue);\n        break;\n      case \"url\":\n        content = components.propertyUrlValue(props, renderUrlValue);\n        break;\n      case \"email\":\n        content = components.propertyEmailValue(props, renderEmailValue);\n        break;\n      case \"phone_number\":\n        content = components.propertyPhoneNumberValue(\n          props,\n          renderPhoneNumberValue\n        );\n        break;\n      case \"number\":\n        content = components.propertyNumberValue(props, renderNumberValue);\n        break;\n      case \"created_time\":\n        content = components.propertyCreatedTimeValue(\n          props,\n          renderCreatedTimeValue\n        );\n        break;\n      case \"last_edited_time\":\n        content = components.propertyLastEditedTimeValue(\n          props,\n          renderLastEditedTimeValue\n        );\n        break;\n      case \"created_by\":\n        break;\n      case \"last_edited_by\":\n        break;\n      case \"text\":\n        content = components.propertyTextValue(props, renderTextValue);\n        break;\n      case \"date\":\n        content = components.propertyDateValue(props, renderDateValue);\n        break;\n      default:\n        content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n          value: data,\n          block\n        });\n        break;\n    }\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: `notion-property notion-property-${schema.type}`\n  }, content);\n};\nvar PropertyImplMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(PropertyImpl);\n\n// src/third-party/collection-row.tsx\nvar CollectionRow = ({ block, pageHeader = false, className }) => {\n  var _a, _b, _c, _d;\n  const { recordMap } = useNotionContext();\n  const collectionId = block.parent_id;\n  const collection = (_a = recordMap.collection[collectionId]) == null ? void 0 : _a.value;\n  const schemas = collection == null ? void 0 : collection.schema;\n  if (!collection || !schemas) {\n    return null;\n  }\n  let propertyIds = Object.keys(schemas).filter((id) => id !== \"title\");\n  if ((_b = collection.format) == null ? void 0 : _b.property_visibility) {\n    propertyIds = propertyIds.filter(\n      (id) => {\n        var _a2;\n        return ((_a2 = collection.format.property_visibility.find(\n          ({ property }) => property === id\n        )) == null ? void 0 : _a2.visibility) !== \"hide\";\n      }\n    );\n  }\n  if ((_c = collection.format) == null ? void 0 : _c.collection_page_properties) {\n    const idToIndex = (_d = collection.format) == null ? void 0 : _d.collection_page_properties.reduce(\n      (acc, p, i) => __spreadProps(__spreadValues({}, acc), {\n        [p.property]: i\n      }),\n      {}\n    );\n    propertyIds.sort((a, b) => idToIndex[a] - idToIndex[b]);\n  } else {\n    propertyIds.sort((a, b) => schemas[a].name.localeCompare(schemas[b].name));\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\"notion-collection-row\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-row-body\"\n  }, propertyIds.map((propertyId) => {\n    var _a2;\n    const schema = schemas[propertyId];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-collection-row-property\",\n      key: propertyId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionColumnTitle, {\n      schema\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-collection-row-value\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n      schema,\n      data: (_a2 = block.properties) == null ? void 0 : _a2[propertyId],\n      propertyId,\n      block,\n      collection,\n      pageHeader\n    })));\n  })));\n};\n\n// src/third-party/collection-view.tsx\n\n\n// src/third-party/collection-view-board.tsx\n\n\n// src/icons/empty-icon.tsx\n\nvar EmptyIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 14 14\",\n    width: \"14\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z\"\n  }));\n};\n\n// src/third-party/collection-card.tsx\n\n\nvar CollectionCard = (_a) => {\n  var _b = _a, {\n    collection,\n    block,\n    cover,\n    coverSize,\n    coverAspect,\n    properties,\n    className\n  } = _b, rest = __objRest(_b, [\n    \"collection\",\n    \"block\",\n    \"cover\",\n    \"coverSize\",\n    \"coverAspect\",\n    \"properties\",\n    \"className\"\n  ]);\n  var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n  const ctx2 = useNotionContext();\n  const {\n    components,\n    recordMap,\n    mapPageUrl,\n    mapImageUrl,\n    isLinkCollectionToUrlProperty\n  } = ctx2;\n  let coverContent = null;\n  const { page_cover_position = 0.5 } = block.format || {};\n  const coverPosition = (1 - page_cover_position) * 100;\n  if ((cover == null ? void 0 : cover.type) === \"page_content\") {\n    const contentBlockId = (_a2 = block.content) == null ? void 0 : _a2.find((blockId) => {\n      var _a3;\n      const block2 = (_a3 = recordMap.block[blockId]) == null ? void 0 : _a3.value;\n      if ((block2 == null ? void 0 : block2.type) === \"image\") {\n        return true;\n      }\n    });\n    if (contentBlockId) {\n      const contentBlock = (_b2 = recordMap.block[contentBlockId]) == null ? void 0 : _b2.value;\n      const source = (_g = (_e = (_d = (_c = contentBlock.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]) != null ? _g : (_f = contentBlock.format) == null ? void 0 : _f.display_source;\n      if (source) {\n        const src = mapImageUrl(source, contentBlock);\n        const caption = (_j = (_i = (_h = contentBlock.properties) == null ? void 0 : _h.caption) == null ? void 0 : _i[0]) == null ? void 0 : _j[0];\n        coverContent = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n          src,\n          alt: caption || \"notion image\",\n          style: {\n            objectFit: coverAspect\n          }\n        });\n      }\n    }\n    if (!coverContent) {\n      coverContent = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-collection-card-cover-empty\"\n      });\n    }\n  } else if ((cover == null ? void 0 : cover.type) === \"page_cover\") {\n    const { page_cover } = block.format || {};\n    if (page_cover) {\n      const coverPosition2 = (1 - page_cover_position) * 100;\n      coverContent = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: mapImageUrl(page_cover, block),\n        alt: (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getTextContent)((_k = block.properties) == null ? void 0 : _k.title),\n        style: {\n          objectFit: coverAspect,\n          objectPosition: `center ${coverPosition2}%`\n        }\n      });\n    }\n  } else if ((cover == null ? void 0 : cover.type) === \"property\") {\n    const { property } = cover;\n    const schema = collection.schema[property];\n    const data = (_l = block.properties) == null ? void 0 : _l[property];\n    if (schema && data) {\n      if (schema.type === \"file\") {\n        const files = data.filter((v) => v.length === 2).map((f) => f.flat().flat());\n        const file = files[0];\n        if (file) {\n          coverContent = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n            className: `notion-property-${schema.type}`\n          }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n            alt: file[0],\n            src: mapImageUrl(file[2], block),\n            style: {\n              objectFit: coverAspect,\n              objectPosition: `center ${coverPosition}%`\n            }\n          }));\n        }\n      } else {\n        coverContent = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n          propertyId: property,\n          schema,\n          data\n        });\n      }\n    }\n  }\n  let linkProperties = [];\n  if (isLinkCollectionToUrlProperty) {\n    linkProperties = (_m = properties == null ? void 0 : properties.filter(\n      (p) => p.visible && p.property !== \"title\" && collection.schema[p.property]\n    ).filter((p) => {\n      if (!block.properties)\n        return false;\n      const schema = collection.schema[p.property];\n      return schema.type == \"url\";\n    }).map((p) => {\n      return block.properties[p.property];\n    })) == null ? void 0 : _m.filter((p) => p && p.length > 0 && p[0] != void 0);\n  }\n  let url = null;\n  if (linkProperties && linkProperties.length > 0 && linkProperties[0].length > 0 && linkProperties[0][0].length > 0) {\n    url = linkProperties[0][0][0];\n  }\n  const innerCard = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (coverContent || (cover == null ? void 0 : cover.type) !== \"none\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-card-cover\"\n  }, coverContent), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-card-body\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-card-property\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n    schema: collection.schema.title,\n    data: (_n = block == null ? void 0 : block.properties) == null ? void 0 : _n.title,\n    block,\n    collection\n  })), properties == null ? void 0 : properties.filter(\n    (p) => p.visible && p.property !== \"title\" && collection.schema[p.property]\n  ).map((p) => {\n    if (!block.properties)\n      return null;\n    const schema = collection.schema[p.property];\n    const data = block.properties[p.property];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-collection-card-property\",\n      key: p.property\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n      schema,\n      data,\n      block,\n      collection,\n      inline: true\n    }));\n  })));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadProps(__spreadValues({}, ctx2), {\n    components: __spreadProps(__spreadValues({}, ctx2.components), {\n      Link: (props) => {\n        var _a3, _b3, _c2;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", {\n          action: props.href,\n          target: \"_blank\"\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n          type: \"submit\",\n          value: (_c2 = (_b3 = (_a3 = props == null ? void 0 : props.children) == null ? void 0 : _a3.props) == null ? void 0 : _b3.children) != null ? _c2 : props.href,\n          className: \"nested-form-link notion-link\"\n        }));\n      },\n      PageLink: dummyLink\n    })\n  }), isLinkCollectionToUrlProperty && url ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, __spreadValues({\n    className: cs(\n      \"notion-collection-card\",\n      `notion-collection-card-size-${coverSize}`,\n      className\n    ),\n    href: url\n  }, rest), innerCard) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadValues({\n    className: cs(\n      \"notion-collection-card\",\n      `notion-collection-card-size-${coverSize}`,\n      className\n    ),\n    href: mapPageUrl(block.id)\n  }, rest), innerCard));\n};\n\n// src/third-party/collection-group.tsx\n\nvar CollectionGroup = (_a) => {\n  var _b = _a, {\n    collectionViewComponent: CollectionViewComponent,\n    collection,\n    collectionGroup,\n    schema,\n    value,\n    hidden,\n    summaryProps,\n    detailsProps\n  } = _b, rest = __objRest(_b, [\n    \"collectionViewComponent\",\n    \"collection\",\n    \"collectionGroup\",\n    \"schema\",\n    \"value\",\n    \"hidden\",\n    \"summaryProps\",\n    \"detailsProps\"\n  ]);\n  if (hidden)\n    return null;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"details\", __spreadValues({\n    open: true,\n    className: \"notion-collection-group\"\n  }, detailsProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"summary\", __spreadValues({\n    className: \"notion-collection-group-title\"\n  }, summaryProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n    schema,\n    data: [[value]],\n    collection\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-board-th-count\"\n  }, collectionGroup == null ? void 0 : collectionGroup.total))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewComponent, __spreadValues({\n    collection,\n    collectionGroup\n  }, rest)));\n};\n\n// src/third-party/collection-utils.ts\nvar import_format3 = __toESM(require_format(), 1);\nfunction getCollectionGroups(collection, collectionView, collectionData, ...rest) {\n  var _a;\n  const elems = ((_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.collection_groups) || [];\n  return elems == null ? void 0 : elems.map(({ property, hidden, value: { value, type } }) => {\n    var _a2, _b;\n    const isUncategorizedValue = typeof value === \"undefined\";\n    const isDateValue = value == null ? void 0 : value.range;\n    const queryLabel = isUncategorizedValue ? \"uncategorized\" : isDateValue ? ((_a2 = value.range) == null ? void 0 : _a2.start_date) || ((_b = value.range) == null ? void 0 : _b.end_date) : (value == null ? void 0 : value.value) || value;\n    const collectionGroup = collectionData[`results:${type}:${queryLabel}`];\n    let queryValue = !isUncategorizedValue && (isDateValue || (value == null ? void 0 : value.value) || value);\n    let schema = collection.schema[property];\n    if (type === \"checkbox\" && value) {\n      queryValue = \"Yes\";\n    }\n    if (isDateValue) {\n      schema = {\n        type: \"text\",\n        name: \"text\"\n      };\n      queryValue = (0, import_format3.default)(new Date(queryLabel), \"MMM d, YYY hh:mm aa\");\n    }\n    return __spreadValues({\n      collectionGroup,\n      schema,\n      value: queryValue || \"No description\",\n      hidden,\n      collection,\n      collectionView,\n      collectionData,\n      blockIds: collectionGroup == null ? void 0 : collectionGroup.blockIds\n    }, rest);\n  });\n}\n\n// src/third-party/collection-view-board.tsx\nvar CollectionViewBoard = ({\n  collection,\n  collectionView,\n  collectionData,\n  padding\n}) => {\n  var _a;\n  const isGroupedCollection = (_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.collection_group_by;\n  if (isGroupedCollection) {\n    const collectionGroups = getCollectionGroups(\n      collection,\n      collectionView,\n      collectionData,\n      padding\n    );\n    return collectionGroups.map((group, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionGroup, __spreadProps(__spreadValues({\n      key: index\n    }, group), {\n      summaryProps: {\n        style: {\n          paddingLeft: padding\n        }\n      },\n      collectionViewComponent: (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Board, __spreadValues({\n        padding\n      }, props))\n    })));\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Board, {\n    padding,\n    collectionView,\n    collection,\n    collectionData\n  });\n};\nfunction Board({ collectionView, collectionData, collection, padding }) {\n  var _a, _b;\n  const { recordMap } = useNotionContext();\n  const {\n    board_cover = { type: \"none\" },\n    board_cover_size = \"medium\",\n    board_cover_aspect = \"cover\"\n  } = (collectionView == null ? void 0 : collectionView.format) || {};\n  const boardGroups = ((_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.board_columns) || ((_b = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _b.board_groups2) || [];\n  const boardStyle = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      paddingLeft: padding\n    }),\n    [padding]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-board\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      \"notion-board-view\",\n      `notion-board-view-size-${board_cover_size}`\n    ),\n    style: boardStyle\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-board-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-board-header-inner\"\n  }, boardGroups.map((p, index) => {\n    var _a2, _b2, _c;\n    if (!((_a2 = collectionData.board_columns) == null ? void 0 : _a2.results)) {\n      return null;\n    }\n    const group = collectionData.board_columns.results[index];\n    const schema = collection.schema[p.property];\n    if (!group || !schema || p.hidden) {\n      return null;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-board-th\",\n      key: index\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-board-th-body\"\n    }, ((_b2 = group.value) == null ? void 0 : _b2.value) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n      schema,\n      data: [[(_c = group.value) == null ? void 0 : _c.value]],\n      collection\n    }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EmptyIcon, {\n      className: \"notion-board-th-empty\"\n    }), \" No Select\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-board-th-count\"\n    }, group.total)));\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-board-header-placeholder\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-board-body\"\n  }, boardGroups.map((p, index) => {\n    var _a2, _b2, _c, _d, _e;\n    const boardResults = (_a2 = collectionData.board_columns) == null ? void 0 : _a2.results;\n    if (!boardResults)\n      return null;\n    if (!((_b2 = p == null ? void 0 : p.value) == null ? void 0 : _b2.type))\n      return null;\n    const schema = collection.schema[p.property];\n    const group = collectionData[`results:${(_c = p == null ? void 0 : p.value) == null ? void 0 : _c.type}:${((_d = p == null ? void 0 : p.value) == null ? void 0 : _d.value) || \"uncategorized\"}`];\n    if (!group || !schema || p.hidden) {\n      return null;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-board-group\",\n      key: index\n    }, (_e = group.blockIds) == null ? void 0 : _e.map((blockId) => {\n      var _a3, _b3;\n      const block = (_a3 = recordMap.block[blockId]) == null ? void 0 : _a3.value;\n      if (!block)\n        return null;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionCard, {\n        className: \"notion-board-group-card\",\n        collection,\n        block,\n        cover: board_cover,\n        coverSize: board_cover_size,\n        coverAspect: board_cover_aspect,\n        properties: (_b3 = collectionView.format) == null ? void 0 : _b3.board_properties,\n        key: blockId\n      });\n    }));\n  }))));\n}\n\n// src/third-party/collection-view-gallery.tsx\n\nvar defaultBlockIds = [];\nvar CollectionViewGallery = ({\n  collection,\n  collectionView,\n  collectionData\n}) => {\n  var _a, _b, _c, _d, _e;\n  const isGroupedCollection = (_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.collection_group_by;\n  if (isGroupedCollection) {\n    const collectionGroups = getCollectionGroups(\n      collection,\n      collectionView,\n      collectionData\n    );\n    return collectionGroups.map((group, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionGroup, __spreadProps(__spreadValues({\n      key: index\n    }, group), {\n      collectionViewComponent: Gallery\n    })));\n  }\n  const blockIds = ((_e = (_d = (_b = collectionData[\"collection_group_results\"]) == null ? void 0 : _b.blockIds) != null ? _d : (_c = collectionData[\"results:relation:uncategorized\"]) == null ? void 0 : _c.blockIds) != null ? _e : collectionData.blockIds) || defaultBlockIds;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Gallery, {\n    collectionView,\n    collection,\n    blockIds\n  });\n};\nfunction Gallery({ blockIds, collectionView, collection }) {\n  const { recordMap } = useNotionContext();\n  const {\n    gallery_cover = { type: \"none\" },\n    gallery_cover_size = \"medium\",\n    gallery_cover_aspect = \"cover\"\n  } = collectionView.format || {};\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-gallery\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-gallery-view\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      \"notion-gallery-grid\",\n      `notion-gallery-grid-size-${gallery_cover_size}`\n    )\n  }, blockIds == null ? void 0 : blockIds.map((blockId) => {\n    var _a, _b;\n    const block = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n    if (!block)\n      return null;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionCard, {\n      collection,\n      block,\n      cover: gallery_cover,\n      coverSize: gallery_cover_size,\n      coverAspect: gallery_cover_aspect,\n      properties: (_b = collectionView.format) == null ? void 0 : _b.gallery_properties,\n      key: blockId\n    });\n  }))));\n}\n\n// src/third-party/collection-view-list.tsx\n\nvar defaultBlockIds2 = [];\nvar CollectionViewList = ({\n  collection,\n  collectionView,\n  collectionData\n}) => {\n  var _a, _b, _c;\n  const isGroupedCollection = (_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.collection_group_by;\n  if (isGroupedCollection) {\n    const collectionGroups = getCollectionGroups(\n      collection,\n      collectionView,\n      collectionData\n    );\n    return collectionGroups.map((group, key) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionGroup, __spreadProps(__spreadValues({\n      key\n    }, group), {\n      collectionViewComponent: List\n    })));\n  }\n  const blockIds = ((_c = (_b = collectionData[\"collection_group_results\"]) == null ? void 0 : _b.blockIds) != null ? _c : collectionData.blockIds) || defaultBlockIds2;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(List, {\n    blockIds,\n    collection,\n    collectionView\n  });\n};\nfunction List({ blockIds, collection, collectionView }) {\n  const { components, recordMap, mapPageUrl } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-list-collection\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-list-view\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-list-body\"\n  }, blockIds == null ? void 0 : blockIds.map((blockId) => {\n    var _a, _b, _c, _d;\n    const block = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n    if (!block)\n      return null;\n    const titleSchema = collection.schema.title;\n    const titleData = (_b = block == null ? void 0 : block.properties) == null ? void 0 : _b.title;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n      className: \"notion-list-item notion-page-link\",\n      href: mapPageUrl(block.id),\n      key: blockId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-list-item-title\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n      schema: titleSchema,\n      data: titleData,\n      block,\n      collection\n    })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-list-item-body\"\n    }, (_d = (_c = collectionView.format) == null ? void 0 : _c.list_properties) == null ? void 0 : _d.filter((p) => p.visible).map((p) => {\n      var _a2;\n      const schema = collection.schema[p.property];\n      const data = block && ((_a2 = block.properties) == null ? void 0 : _a2[p.property]);\n      if (!schema) {\n        return null;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"notion-list-item-property\",\n        key: p.property\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n        schema,\n        data,\n        block,\n        collection\n      }));\n    })));\n  }))));\n}\n\n// src/third-party/collection-view-table.tsx\n\nvar defaultBlockIds3 = [];\nvar CollectionViewTable = ({\n  collection,\n  collectionView,\n  collectionData,\n  padding,\n  width\n}) => {\n  var _a, _b, _c;\n  const isGroupedCollection = (_a = collectionView == null ? void 0 : collectionView.format) == null ? void 0 : _a.collection_group_by;\n  if (isGroupedCollection) {\n    const collectionGroups = getCollectionGroups(\n      collection,\n      collectionView,\n      collectionData,\n      padding,\n      width\n    );\n    return collectionGroups.map((group, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionGroup, __spreadProps(__spreadValues({\n      key: index\n    }, group), {\n      collectionViewComponent: (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Table, __spreadProps(__spreadValues({}, props), {\n        padding,\n        width\n      })),\n      summaryProps: {\n        style: {\n          paddingLeft: padding,\n          paddingRight: padding\n        }\n      }\n    })));\n  }\n  const blockIds = ((_c = (_b = collectionData[\"collection_group_results\"]) == null ? void 0 : _b.blockIds) != null ? _c : collectionData.blockIds) || defaultBlockIds3;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Table, {\n    blockIds,\n    collection,\n    collectionView,\n    padding,\n    width\n  });\n};\nfunction Table({ blockIds = [], collection, collectionView, width, padding }) {\n  var _a;\n  const { recordMap, linkTableTitleProperties } = useNotionContext();\n  const tableStyle = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      width,\n      maxWidth: width\n    }),\n    [width]\n  );\n  const tableViewStyle = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      paddingLeft: padding,\n      paddingRight: padding\n    }),\n    [padding]\n  );\n  let properties = [];\n  if ((_a = collectionView.format) == null ? void 0 : _a.table_properties) {\n    properties = collectionView.format.table_properties.filter(\n      (p) => p.visible && collection.schema[p.property]\n    );\n  } else {\n    properties = [{ property: \"title\" }].concat(\n      Object.keys(collection.schema).filter((p) => p !== \"title\").map((property) => ({ property }))\n    );\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table\",\n    style: tableStyle\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-view\",\n    style: tableViewStyle\n  }, !!properties.length && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-header-inner\"\n  }, properties.map((p) => {\n    var _a2;\n    const schema = (_a2 = collection.schema) == null ? void 0 : _a2[p.property];\n    const isTitle = p.property === \"title\";\n    const style = {};\n    if (p.width) {\n      style.width = p.width;\n    } else if (isTitle) {\n      style.width = 280;\n    } else {\n      style.width = 200;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-table-th\",\n      key: p.property\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-table-view-header-cell\",\n      style\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-table-view-header-cell-inner\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionColumnTitle, {\n      schema\n    }))));\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-header-placeholder\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-body\"\n  }, blockIds == null ? void 0 : blockIds.map((blockId) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-table-row\",\n    key: blockId\n  }, properties.map((p) => {\n    var _a2, _b, _c;\n    const schema = (_a2 = collection.schema) == null ? void 0 : _a2[p.property];\n    const block = (_b = recordMap.block[blockId]) == null ? void 0 : _b.value;\n    const data = (_c = block == null ? void 0 : block.properties) == null ? void 0 : _c[p.property];\n    const isTitle = p.property === \"title\";\n    const style = {};\n    if (p.width) {\n      style.width = p.width;\n    } else if (isTitle) {\n      style.width = 280;\n    } else {\n      style.width = 200;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      key: p.property,\n      className: cs(\n        \"notion-table-cell\",\n        `notion-table-cell-${schema.type}`\n      ),\n      style\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Property, {\n      schema,\n      data,\n      block,\n      collection,\n      linkToTitlePage: linkTableTitleProperties\n    }));\n  })))))));\n}\n\n// src/third-party/collection-view.tsx\nvar CollectionViewImpl = (props) => {\n  const { collectionView } = props;\n  switch (collectionView.type) {\n    case \"table\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewTable, __spreadValues({}, props));\n    case \"gallery\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewGallery, __spreadValues({}, props));\n    case \"list\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewList, __spreadValues({}, props));\n    case \"board\":\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewBoard, __spreadValues({}, props));\n    default:\n      console.warn(\"unsupported collection view\", collectionView);\n      return null;\n  }\n};\nvar CollectionView = react__WEBPACK_IMPORTED_MODULE_0__.memo(CollectionViewImpl);\n\n// src/third-party/collection.tsx\nvar isServer2 = typeof window === \"undefined\";\nvar Collection = ({ block, className, ctx: ctx2 }) => {\n  const context = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadValues({}, ctx2),\n    [ctx2]\n  );\n  if (block.type === \"page\") {\n    if (block.parent_table !== \"collection\") {\n      return null;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadValues({}, context), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-collection-page-properties\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionRow, {\n      block,\n      pageHeader: true,\n      className\n    })));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadValues({}, context), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewBlock, {\n      block,\n      className\n    }));\n  }\n};\nvar CollectionViewBlock = ({ block, className }) => {\n  var _a, _b, _c, _d;\n  const { recordMap, showCollectionViewDropdown } = useNotionContext();\n  const { view_ids: viewIds } = block;\n  const collectionId = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockCollectionId)(block, recordMap);\n  const [isMounted, setIsMounted] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsMounted(true);\n  }, []);\n  const defaultCollectionViewId = viewIds[0];\n  const [collectionState, setCollectionState] = (0,react_use__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(block.id, {\n    collectionViewId: defaultCollectionViewId\n  });\n  const collectionViewId = isMounted && viewIds.find((id) => id === collectionState.collectionViewId) || defaultCollectionViewId;\n  const onChangeView = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (collectionViewId2) => {\n      console.log(\"change collection view\", collectionViewId2);\n      setCollectionState(__spreadProps(__spreadValues({}, collectionState), {\n        collectionViewId: collectionViewId2\n      }));\n    },\n    [collectionState, setCollectionState]\n  );\n  let { width: windowWidth } = (0,react_use__WEBPACK_IMPORTED_MODULE_8__[\"default\"])();\n  if (isServer2) {\n    windowWidth = 1024;\n  }\n  const collection = (_a = recordMap.collection[collectionId]) == null ? void 0 : _a.value;\n  const collectionView = (_b = recordMap.collection_view[collectionViewId]) == null ? void 0 : _b.value;\n  const collectionData = (_c = recordMap.collection_query[collectionId]) == null ? void 0 : _c[collectionViewId];\n  const parentPage = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getBlockParentPage)(block, recordMap);\n  const { width, padding } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    var _a2;\n    const style = {};\n    if ((collectionView == null ? void 0 : collectionView.type) !== \"table\" && (collectionView == null ? void 0 : collectionView.type) !== \"board\") {\n      return {\n        style,\n        width: 0,\n        padding: 0\n      };\n    }\n    const width2 = windowWidth;\n    const maxNotionBodyWidth = 708;\n    let notionBodyWidth = maxNotionBodyWidth;\n    if ((_a2 = parentPage == null ? void 0 : parentPage.format) == null ? void 0 : _a2.page_full_width) {\n      notionBodyWidth = width2 - 2 * Math.min(96, width2 * 0.08) | 0;\n    } else {\n      notionBodyWidth = width2 < maxNotionBodyWidth ? width2 - width2 * 0.02 | 0 : maxNotionBodyWidth;\n    }\n    const padding2 = isServer2 && !isMounted ? 96 : (width2 - notionBodyWidth) / 2 | 0;\n    style.paddingLeft = padding2;\n    style.paddingRight = padding2;\n    return {\n      style,\n      width: width2,\n      padding: padding2\n    };\n  }, [windowWidth, parentPage, collectionView == null ? void 0 : collectionView.type, isMounted]);\n  if (!(collection && collectionView && collectionData)) {\n    console.warn(\"skipping missing collection view for block\", block.id, {\n      collectionId,\n      collectionViewId,\n      collectionView,\n      collectionData,\n      recordMap\n    });\n    return null;\n  }\n  const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_1__.getTextContent)(collection.name).trim();\n  const showTitle = ((_d = collectionView.format) == null ? void 0 : _d.hide_linked_collection_name) !== true && title;\n  if (collection.icon) {\n    block.format = __spreadProps(__spreadValues({}, block.format), {\n      page_icon: collection.icon\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, viewIds.length > 1 && showCollectionViewDropdown && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewTabs, {\n    collectionViewId,\n    viewIds,\n    onChangeView\n  })), showTitle && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-header-title\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n    block,\n    className: \"notion-page-title-icon\",\n    hideDefaultIcon: true\n  }), title))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\"notion-collection\", className)\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionView, {\n    collection,\n    collectionView,\n    collectionData,\n    padding,\n    width\n  })));\n};\nvar CollectionViewTabs = ({ collectionViewId, viewIds, onChangeView }) => {\n  const { recordMap } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-collection-view-tabs-row\"\n  }, viewIds.map((viewId) => {\n    var _a;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", {\n      onClick: () => onChangeView(viewId),\n      key: viewId,\n      className: cs(\n        \"notion-collection-view-tabs-content-item\",\n        collectionViewId === viewId && \"notion-collection-view-tabs-content-item-active\"\n      )\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewColumnDesc, {\n      collectionView: (_a = recordMap.collection_view[viewId]) == null ? void 0 : _a.value\n    }));\n  }));\n};\nvar CollectionViewColumnDesc = (_a) => {\n  var _b = _a, { collectionView, className, children } = _b, rest = __objRest(_b, [\"collectionView\", \"className\", \"children\"]);\n  const { type } = collectionView;\n  const name = collectionView.name || `${type[0].toUpperCase()}${type.slice(1)} view`;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({\n    className: cs(\"notion-collection-view-type\", className)\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionViewIcon, {\n    className: \"notion-collection-view-type-icon\",\n    type\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-collection-view-type-title\"\n  }, name), children);\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvdGhpcmQtcGFydHkvY29sbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGFBQWE7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLHVDQUF1QyxNQUFNLDBEQUEwRCxNQUFNO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhJQUE4STtBQUM5SSxRQUFRO0FBQ1IsMElBQTBJO0FBQzFJLFFBQVE7QUFDUixvSkFBb0o7QUFDcEosUUFBUTtBQUNSLHNKQUFzSjtBQUN0SjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw4QkFBOEI7QUFDeEQ7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixFQUFFO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixFQUFFO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNpQztBQUtYO0FBQ3FDOztBQUUzRDtBQUNpQztBQUM0Qzs7QUFFN0U7QUFDaUM7O0FBRWpDO0FBQ2lDO0FBQzBCOztBQUUzRDtBQUN1RTs7QUFFdkU7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QyxnREFBcUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZUFBZSx1Q0FBWTs7QUFFM0I7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lDOztBQUVqQztBQUNpQzs7QUFFakM7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0EsR0FBRywwQkFBMEIsZ0RBQXFCO0FBQ2xEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakM7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0Es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QUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssa0JBQWtCLGdEQUFxQjtBQUM1QztBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLGlCQUFpQixzQ0FBc0M7QUFDdkQsVUFBVSxPQUFPO0FBQ2pCLHlDQUF5QyxzQkFBc0IsRUFBRSxlQUFlO0FBQ2hGLHlCQUF5QixnREFBcUI7QUFDOUM7QUFDQSxHQUFHLHlCQUF5QixnREFBcUI7QUFDakQ7QUFDQTtBQUNBLEdBQUcsbUJBQW1CLGdEQUFxQjtBQUMzQztBQUNBLEdBQUc7QUFDSDtBQUlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90aW9uLXgtZXhhbXBsZS1mdWxsLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW5vdGlvbi14L2J1aWxkL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24uanM/MDk5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBfX2NvbW1vbkpTID0gKGNiLCBtb2QpID0+IGZ1bmN0aW9uIF9fcmVxdWlyZSgpIHtcbiAgcmV0dXJuIG1vZCB8fCAoMCwgY2JbX19nZXRPd25Qcm9wTmFtZXMoY2IpWzBdXSkoKG1vZCA9IHsgZXhwb3J0czoge30gfSkuZXhwb3J0cywgbW9kKSwgbW9kLmV4cG9ydHM7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQsIFwiZGVmYXVsdFwiLCB7IHZhbHVlOiBtb2QsIGVudW1lcmFibGU6IHRydWUgfSkgOiB0YXJnZXQsXG4gIG1vZFxuKSk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoLnRocm90dGxlL2luZGV4LmpzXG52YXIgcmVxdWlyZV9sb2Rhc2ggPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoLnRocm90dGxlL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgdmFyIEZVTkNfRVJST1JfVEVYVCA9IFwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiO1xuICAgIHZhciBOQU4gPSAwIC8gMDtcbiAgICB2YXIgc3ltYm9sVGFnID0gXCJbb2JqZWN0IFN5bWJvbF1cIjtcbiAgICB2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG4gICAgdmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcbiAgICB2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcbiAgICB2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcbiAgICB2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG4gICAgdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG4gICAgdmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gXCJvYmplY3RcIiAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcbiAgICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG4gICAgdmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG4gICAgdmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuICAgIHZhciBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcbiAgICB2YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGxhc3RBcmdzLCBsYXN0VGhpcywgbWF4V2FpdCwgcmVzdWx0LCB0aW1lcklkLCBsYXN0Q2FsbFRpbWUsIGxhc3RJbnZva2VUaW1lID0gMCwgbGVhZGluZyA9IGZhbHNlLCBtYXhpbmcgPSBmYWxzZSwgdHJhaWxpbmcgPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgICAgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgICAgIG1heGluZyA9IFwibWF4V2FpdFwiIGluIG9wdGlvbnM7XG4gICAgICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgICAgIHRyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgICAgICB2YXIgYXJncyA9IGxhc3RBcmdzLCB0aGlzQXJnID0gbGFzdFRoaXM7XG4gICAgICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB2b2lkIDA7XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICAgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSwgcmVzdWx0MiA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcbiAgICAgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQyLCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQyO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICAgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcbiAgICAgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdm9pZCAwIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgICAgICB0aW1lcklkID0gdm9pZCAwO1xuICAgICAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICBpZiAodGltZXJJZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRpbWVySWQgPT09IHZvaWQgMCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgICAgIHZhciB0aW1lID0gbm93KCksIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG4gICAgICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG4gICAgICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICAgICAgaWYgKHRpbWVySWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZXJJZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICAgICAgcmV0dXJuIGRlYm91bmNlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGhyb3R0bGUyKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZSwgdHJhaWxpbmcgPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9IFwibGVhZGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgICAgIHRyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7XG4gICAgICAgIFwibGVhZGluZ1wiOiBsZWFkaW5nLFxuICAgICAgICBcIm1heFdhaXRcIjogd2FpdCxcbiAgICAgICAgXCJ0cmFpbGluZ1wiOiB0cmFpbGluZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09IFwib2JqZWN0XCIgfHwgdHlwZSA9PSBcImZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcInN5bWJvbFwiIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIE5BTjtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gXCJmdW5jdGlvblwiID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyBcIlwiIDogb3RoZXI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCBcIlwiKTtcbiAgICAgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gICAgICByZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KSA6IHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGUyO1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9yZXF1aXJlZEFyZ3MgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gcmVxdWlyZWRBcmdzO1xuICAgIGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArIFwiIGFyZ3VtZW50XCIgKyAocmVxdWlyZWQgPiAxID8gXCJzXCIgOiBcIlwiKSArIFwiIHJlcXVpcmVkLCBidXQgb25seSBcIiArIGFyZ3MubGVuZ3RoICsgXCIgcHJlc2VudFwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlL2luZGV4LmpzXG52YXIgcmVxdWlyZV9pc0RhdGUgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGlzRGF0ZTtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICAgICAgKDAsIF9pbmRleC5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IERhdGVdXCI7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS9pbmRleC5qc1xudmFyIHJlcXVpcmVfdG9EYXRlID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSB0b0RhdGU7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgICAgICgwLCBfaW5kZXguZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpO1xuICAgICAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwib2JqZWN0XCIgJiYgYXJnU3RyID09PSBcIltvYmplY3QgRGF0ZV1cIikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSBcIm51bWJlclwiIHx8IGFyZ1N0ciA9PT0gXCJbb2JqZWN0IE51bWJlcl1cIikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09IFwic3RyaW5nXCIgfHwgYXJnU3RyID09PSBcIltvYmplY3QgU3RyaW5nXVwiKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdC5pby9manVsZVwiKTtcbiAgICAgICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgICAgfVxuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1ZhbGlkL2luZGV4LmpzXG52YXIgcmVxdWlyZV9pc1ZhbGlkID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2lzVmFsaWQvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gaXNWYWxpZDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2lzRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNWYWxpZChkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoISgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKSAmJiB0eXBlb2YgZGlydHlEYXRlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRlID0gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKGRhdGUpKTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UvaW5kZXguanNcbnZhciByZXF1aXJlX2Zvcm1hdERpc3RhbmNlID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdERpc3RhbmNlL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbiAgICB2YXIgZm9ybWF0RGlzdGFuY2VMb2NhbGUgPSB7XG4gICAgICBsZXNzVGhhblhTZWNvbmRzOiB7XG4gICAgICAgIG9uZTogXCJsZXNzIHRoYW4gYSBzZWNvbmRcIixcbiAgICAgICAgb3RoZXI6IFwibGVzcyB0aGFuIHt7Y291bnR9fSBzZWNvbmRzXCJcbiAgICAgIH0sXG4gICAgICB4U2Vjb25kczoge1xuICAgICAgICBvbmU6IFwiMSBzZWNvbmRcIixcbiAgICAgICAgb3RoZXI6IFwie3tjb3VudH19IHNlY29uZHNcIlxuICAgICAgfSxcbiAgICAgIGhhbGZBTWludXRlOiBcImhhbGYgYSBtaW51dGVcIixcbiAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHtcbiAgICAgICAgb25lOiBcImxlc3MgdGhhbiBhIG1pbnV0ZVwiLFxuICAgICAgICBvdGhlcjogXCJsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXNcIlxuICAgICAgfSxcbiAgICAgIHhNaW51dGVzOiB7XG4gICAgICAgIG9uZTogXCIxIG1pbnV0ZVwiLFxuICAgICAgICBvdGhlcjogXCJ7e2NvdW50fX0gbWludXRlc1wiXG4gICAgICB9LFxuICAgICAgYWJvdXRYSG91cnM6IHtcbiAgICAgICAgb25lOiBcImFib3V0IDEgaG91clwiLFxuICAgICAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gaG91cnNcIlxuICAgICAgfSxcbiAgICAgIHhIb3Vyczoge1xuICAgICAgICBvbmU6IFwiMSBob3VyXCIsXG4gICAgICAgIG90aGVyOiBcInt7Y291bnR9fSBob3Vyc1wiXG4gICAgICB9LFxuICAgICAgeERheXM6IHtcbiAgICAgICAgb25lOiBcIjEgZGF5XCIsXG4gICAgICAgIG90aGVyOiBcInt7Y291bnR9fSBkYXlzXCJcbiAgICAgIH0sXG4gICAgICBhYm91dFhXZWVrczoge1xuICAgICAgICBvbmU6IFwiYWJvdXQgMSB3ZWVrXCIsXG4gICAgICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB3ZWVrc1wiXG4gICAgICB9LFxuICAgICAgeFdlZWtzOiB7XG4gICAgICAgIG9uZTogXCIxIHdlZWtcIixcbiAgICAgICAgb3RoZXI6IFwie3tjb3VudH19IHdlZWtzXCJcbiAgICAgIH0sXG4gICAgICBhYm91dFhNb250aHM6IHtcbiAgICAgICAgb25lOiBcImFib3V0IDEgbW9udGhcIixcbiAgICAgICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IG1vbnRoc1wiXG4gICAgICB9LFxuICAgICAgeE1vbnRoczoge1xuICAgICAgICBvbmU6IFwiMSBtb250aFwiLFxuICAgICAgICBvdGhlcjogXCJ7e2NvdW50fX0gbW9udGhzXCJcbiAgICAgIH0sXG4gICAgICBhYm91dFhZZWFyczoge1xuICAgICAgICBvbmU6IFwiYWJvdXQgMSB5ZWFyXCIsXG4gICAgICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB5ZWFyc1wiXG4gICAgICB9LFxuICAgICAgeFllYXJzOiB7XG4gICAgICAgIG9uZTogXCIxIHllYXJcIixcbiAgICAgICAgb3RoZXI6IFwie3tjb3VudH19IHllYXJzXCJcbiAgICAgIH0sXG4gICAgICBvdmVyWFllYXJzOiB7XG4gICAgICAgIG9uZTogXCJvdmVyIDEgeWVhclwiLFxuICAgICAgICBvdGhlcjogXCJvdmVyIHt7Y291bnR9fSB5ZWFyc1wiXG4gICAgICB9LFxuICAgICAgYWxtb3N0WFllYXJzOiB7XG4gICAgICAgIG9uZTogXCJhbG1vc3QgMSB5ZWFyXCIsXG4gICAgICAgIG90aGVyOiBcImFsbW9zdCB7e2NvdW50fX0geWVhcnNcIlxuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGZvcm1hdERpc3RhbmNlID0gZnVuY3Rpb24odG9rZW4sIGNvdW50LCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgdmFyIHRva2VuVmFsdWUgPSBmb3JtYXREaXN0YW5jZUxvY2FsZVt0b2tlbl07XG4gICAgICBpZiAodHlwZW9mIHRva2VuVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzdWx0ID0gdG9rZW5WYWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSB0b2tlblZhbHVlLm90aGVyLnJlcGxhY2UoXCJ7e2NvdW50fX1cIiwgY291bnQudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy5hZGRTdWZmaXgpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiAmJiBvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIFwiaW4gXCIgKyByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCArIFwiIGFnb1wiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgdmFyIF9kZWZhdWx0ID0gZm9ybWF0RGlzdGFuY2U7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRGb3JtYXRMb25nRm4vaW5kZXguanNcbnZhciByZXF1aXJlX2J1aWxkRm9ybWF0TG9uZ0ZuID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGJ1aWxkRm9ybWF0TG9uZ0ZuO1xuICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0TG9uZ0ZuKGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgICAgICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgICAgIHZhciBmb3JtYXQ0ID0gYXJncy5mb3JtYXRzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHNbYXJncy5kZWZhdWx0V2lkdGhdO1xuICAgICAgICByZXR1cm4gZm9ybWF0NDtcbiAgICAgIH07XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdExvbmcvaW5kZXguanNcbnZhciByZXF1aXJlX2Zvcm1hdExvbmcgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0TG9uZy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9idWlsZEZvcm1hdExvbmdGbigpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIHZhciBkYXRlRm9ybWF0cyA9IHtcbiAgICAgIGZ1bGw6IFwiRUVFRSwgTU1NTSBkbywgeVwiLFxuICAgICAgbG9uZzogXCJNTU1NIGRvLCB5XCIsXG4gICAgICBtZWRpdW06IFwiTU1NIGQsIHlcIixcbiAgICAgIHNob3J0OiBcIk1NL2RkL3l5eXlcIlxuICAgIH07XG4gICAgdmFyIHRpbWVGb3JtYXRzID0ge1xuICAgICAgZnVsbDogXCJoOm1tOnNzIGEgenp6elwiLFxuICAgICAgbG9uZzogXCJoOm1tOnNzIGEgelwiLFxuICAgICAgbWVkaXVtOiBcImg6bW06c3MgYVwiLFxuICAgICAgc2hvcnQ6IFwiaDptbSBhXCJcbiAgICB9O1xuICAgIHZhciBkYXRlVGltZUZvcm1hdHMgPSB7XG4gICAgICBmdWxsOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgICAgIGxvbmc6IFwie3tkYXRlfX0gJ2F0JyB7e3RpbWV9fVwiLFxuICAgICAgbWVkaXVtOiBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiLFxuICAgICAgc2hvcnQ6IFwie3tkYXRlfX0sIHt7dGltZX19XCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXRMb25nID0ge1xuICAgICAgZGF0ZTogKDAsIF9pbmRleC5kZWZhdWx0KSh7XG4gICAgICAgIGZvcm1hdHM6IGRhdGVGb3JtYXRzLFxuICAgICAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiXG4gICAgICB9KSxcbiAgICAgIHRpbWU6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIlxuICAgICAgfSksXG4gICAgICBkYXRlVGltZTogKDAsIF9pbmRleC5kZWZhdWx0KSh7XG4gICAgICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIlxuICAgICAgfSlcbiAgICB9O1xuICAgIHZhciBfZGVmYXVsdCA9IGZvcm1hdExvbmc7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0UmVsYXRpdmUvaW5kZXguanNcbnZhciByZXF1aXJlX2Zvcm1hdFJlbGF0aXZlID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdFJlbGF0aXZlL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbiAgICB2YXIgZm9ybWF0UmVsYXRpdmVMb2NhbGUgPSB7XG4gICAgICBsYXN0V2VlazogXCInbGFzdCcgZWVlZSAnYXQnIHBcIixcbiAgICAgIHllc3RlcmRheTogXCIneWVzdGVyZGF5IGF0JyBwXCIsXG4gICAgICB0b2RheTogXCIndG9kYXkgYXQnIHBcIixcbiAgICAgIHRvbW9ycm93OiBcIid0b21vcnJvdyBhdCcgcFwiLFxuICAgICAgbmV4dFdlZWs6IFwiZWVlZSAnYXQnIHBcIixcbiAgICAgIG90aGVyOiBcIlBcIlxuICAgIH07XG4gICAgdmFyIGZvcm1hdFJlbGF0aXZlID0gZnVuY3Rpb24odG9rZW4sIF9kYXRlLCBfYmFzZURhdGUsIF9vcHRpb25zKSB7XG4gICAgICByZXR1cm4gZm9ybWF0UmVsYXRpdmVMb2NhbGVbdG9rZW5dO1xuICAgIH07XG4gICAgdmFyIF9kZWZhdWx0ID0gZm9ybWF0UmVsYXRpdmU7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuL2luZGV4LmpzXG52YXIgcmVxdWlyZV9idWlsZExvY2FsaXplRm4gPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGJ1aWxkTG9jYWxpemVGbjtcbiAgICBmdW5jdGlvbiBidWlsZExvY2FsaXplRm4oYXJncykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRpcnR5SW5kZXgsIGRpcnR5T3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQgPyBTdHJpbmcob3B0aW9ucy5jb250ZXh0KSA6IFwic3RhbmRhbG9uZVwiO1xuICAgICAgICB2YXIgdmFsdWVzQXJyYXk7XG4gICAgICAgIGlmIChjb250ZXh0ID09PSBcImZvcm1hdHRpbmdcIiAmJiBhcmdzLmZvcm1hdHRpbmdWYWx1ZXMpIHtcbiAgICAgICAgICB2YXIgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIHx8IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgICAgICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBkZWZhdWx0V2lkdGg7XG4gICAgICAgICAgdmFsdWVzQXJyYXkgPSBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbd2lkdGhdIHx8IGFyZ3MuZm9ybWF0dGluZ1ZhbHVlc1tkZWZhdWx0V2lkdGhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgICAgICAgdmFyIF93aWR0aCA9IG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgICAgICB2YWx1ZXNBcnJheSA9IGFyZ3MudmFsdWVzW193aWR0aF0gfHwgYXJncy52YWx1ZXNbX2RlZmF1bHRXaWR0aF07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gYXJncy5hcmd1bWVudENhbGxiYWNrID8gYXJncy5hcmd1bWVudENhbGxiYWNrKGRpcnR5SW5kZXgpIDogZGlydHlJbmRleDtcbiAgICAgICAgcmV0dXJuIHZhbHVlc0FycmF5W2luZGV4XTtcbiAgICAgIH07XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2xvY2FsaXplL2luZGV4LmpzXG52YXIgcmVxdWlyZV9sb2NhbGl6ZSA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9sb2NhbGl6ZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9idWlsZExvY2FsaXplRm4oKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICB2YXIgZXJhVmFsdWVzID0ge1xuICAgICAgbmFycm93OiBbXCJCXCIsIFwiQVwiXSxcbiAgICAgIGFiYnJldmlhdGVkOiBbXCJCQ1wiLCBcIkFEXCJdLFxuICAgICAgd2lkZTogW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdXG4gICAgfTtcbiAgICB2YXIgcXVhcnRlclZhbHVlcyA9IHtcbiAgICAgIG5hcnJvdzogW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiXSxcbiAgICAgIGFiYnJldmlhdGVkOiBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgICAgIHdpZGU6IFtcIjFzdCBxdWFydGVyXCIsIFwiMm5kIHF1YXJ0ZXJcIiwgXCIzcmQgcXVhcnRlclwiLCBcIjR0aCBxdWFydGVyXCJdXG4gICAgfTtcbiAgICB2YXIgbW9udGhWYWx1ZXMgPSB7XG4gICAgICBuYXJyb3c6IFtcIkpcIiwgXCJGXCIsIFwiTVwiLCBcIkFcIiwgXCJNXCIsIFwiSlwiLCBcIkpcIiwgXCJBXCIsIFwiU1wiLCBcIk9cIiwgXCJOXCIsIFwiRFwiXSxcbiAgICAgIGFiYnJldmlhdGVkOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICB3aWRlOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgIH07XG4gICAgdmFyIGRheVZhbHVlcyA9IHtcbiAgICAgIG5hcnJvdzogW1wiU1wiLCBcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiXSxcbiAgICAgIHNob3J0OiBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXSxcbiAgICAgIGFiYnJldmlhdGVkOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICB3aWRlOiBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXVxuICAgIH07XG4gICAgdmFyIGRheVBlcmlvZFZhbHVlcyA9IHtcbiAgICAgIG5hcnJvdzoge1xuICAgICAgICBhbTogXCJhXCIsXG4gICAgICAgIHBtOiBcInBcIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlcIixcbiAgICAgICAgbm9vbjogXCJuXCIsXG4gICAgICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgICAgICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gICAgICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJuaWdodFwiXG4gICAgICB9LFxuICAgICAgYWJicmV2aWF0ZWQ6IHtcbiAgICAgICAgYW06IFwiQU1cIixcbiAgICAgICAgcG06IFwiUE1cIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgICAgICAgbm9vbjogXCJub29uXCIsXG4gICAgICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgICAgICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gICAgICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJuaWdodFwiXG4gICAgICB9LFxuICAgICAgd2lkZToge1xuICAgICAgICBhbTogXCJhLm0uXCIsXG4gICAgICAgIHBtOiBcInAubS5cIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgICAgICAgbm9vbjogXCJub29uXCIsXG4gICAgICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgICAgICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gICAgICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJuaWdodFwiXG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHtcbiAgICAgIG5hcnJvdzoge1xuICAgICAgICBhbTogXCJhXCIsXG4gICAgICAgIHBtOiBcInBcIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlcIixcbiAgICAgICAgbm9vbjogXCJuXCIsXG4gICAgICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICAgICAgYWZ0ZXJub29uOiBcImluIHRoZSBhZnRlcm5vb25cIixcbiAgICAgICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJhdCBuaWdodFwiXG4gICAgICB9LFxuICAgICAgYWJicmV2aWF0ZWQ6IHtcbiAgICAgICAgYW06IFwiQU1cIixcbiAgICAgICAgcG06IFwiUE1cIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgICAgICAgbm9vbjogXCJub29uXCIsXG4gICAgICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICAgICAgYWZ0ZXJub29uOiBcImluIHRoZSBhZnRlcm5vb25cIixcbiAgICAgICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJhdCBuaWdodFwiXG4gICAgICB9LFxuICAgICAgd2lkZToge1xuICAgICAgICBhbTogXCJhLm0uXCIsXG4gICAgICAgIHBtOiBcInAubS5cIixcbiAgICAgICAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgICAgICAgbm9vbjogXCJub29uXCIsXG4gICAgICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICAgICAgYWZ0ZXJub29uOiBcImluIHRoZSBhZnRlcm5vb25cIixcbiAgICAgICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgICAgICBuaWdodDogXCJhdCBuaWdodFwiXG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgb3JkaW5hbE51bWJlciA9IGZ1bmN0aW9uKGRpcnR5TnVtYmVyLCBfb3B0aW9ucykge1xuICAgICAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG4gICAgICB2YXIgcmVtMTAwID0gbnVtYmVyICUgMTAwO1xuICAgICAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgICAgIHN3aXRjaCAocmVtMTAwICUgMTApIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJzdFwiO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyBcIm5kXCI7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIG51bWJlciArIFwicmRcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bWJlciArIFwidGhcIjtcbiAgICB9O1xuICAgIHZhciBsb2NhbGl6ZSA9IHtcbiAgICAgIG9yZGluYWxOdW1iZXIsXG4gICAgICBlcmE6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICB2YWx1ZXM6IGVyYVZhbHVlcyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIlxuICAgICAgfSksXG4gICAgICBxdWFydGVyOiAoMCwgX2luZGV4LmRlZmF1bHQpKHtcbiAgICAgICAgdmFsdWVzOiBxdWFydGVyVmFsdWVzLFxuICAgICAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICAgICAgICBhcmd1bWVudENhbGxiYWNrOiBmdW5jdGlvbihxdWFydGVyKSB7XG4gICAgICAgICAgcmV0dXJuIHF1YXJ0ZXIgLSAxO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIG1vbnRoOiAoMCwgX2luZGV4LmRlZmF1bHQpKHtcbiAgICAgICAgdmFsdWVzOiBtb250aFZhbHVlcyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIlxuICAgICAgfSksXG4gICAgICBkYXk6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICB2YWx1ZXM6IGRheVZhbHVlcyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIlxuICAgICAgfSksXG4gICAgICBkYXlQZXJpb2Q6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICB2YWx1ZXM6IGRheVBlcmlvZFZhbHVlcyxcbiAgICAgICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgZm9ybWF0dGluZ1ZhbHVlczogZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyxcbiAgICAgICAgZGVmYXVsdEZvcm1hdHRpbmdXaWR0aDogXCJ3aWRlXCJcbiAgICAgIH0pXG4gICAgfTtcbiAgICB2YXIgX2RlZmF1bHQgPSBsb2NhbGl6ZTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoRm4vaW5kZXguanNcbnZhciByZXF1aXJlX2J1aWxkTWF0Y2hGbiA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoRm4vaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gYnVpbGRNYXRjaEZuO1xuICAgIGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICAgICAgdmFyIHdpZHRoID0gb3B0aW9ucy53aWR0aDtcbiAgICAgICAgdmFyIG1hdGNoUGF0dGVybiA9IHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdO1xuICAgICAgICB2YXIgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2gobWF0Y2hQYXR0ZXJuKTtcbiAgICAgICAgaWYgKCFtYXRjaFJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07XG4gICAgICAgIHZhciBwYXJzZVBhdHRlcm5zID0gd2lkdGggJiYgYXJncy5wYXJzZVBhdHRlcm5zW3dpZHRoXSB8fCBhcmdzLnBhcnNlUGF0dGVybnNbYXJncy5kZWZhdWx0UGFyc2VXaWR0aF07XG4gICAgICAgIHZhciBrZXkgPSBBcnJheS5pc0FycmF5KHBhcnNlUGF0dGVybnMpID8gZmluZEluZGV4KHBhcnNlUGF0dGVybnMsIGZ1bmN0aW9uKHBhdHRlcm4pIHtcbiAgICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KG1hdGNoZWRTdHJpbmcpO1xuICAgICAgICB9KSA6IGZpbmRLZXkocGFyc2VQYXR0ZXJucywgZnVuY3Rpb24ocGF0dGVybikge1xuICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobWF0Y2hlZFN0cmluZyk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhbHVlID0gYXJncy52YWx1ZUNhbGxiYWNrID8gYXJncy52YWx1ZUNhbGxiYWNrKGtleSkgOiBrZXk7XG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy52YWx1ZUNhbGxiYWNrID8gb3B0aW9ucy52YWx1ZUNhbGxiYWNrKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgcmVzdFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluZEtleShvYmplY3QsIHByZWRpY2F0ZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkgJiYgcHJlZGljYXRlKG9iamVjdFtrZXldKSkge1xuICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgICBmb3IgKHZhciBrZXkgPSAwOyBrZXkgPCBhcnJheS5sZW5ndGg7IGtleSsrKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlba2V5XSkpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuL2luZGV4LmpzXG52YXIgcmVxdWlyZV9idWlsZE1hdGNoUGF0dGVybkZuID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkTWF0Y2hQYXR0ZXJuRm4vaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gYnVpbGRNYXRjaFBhdHRlcm5GbjtcbiAgICBmdW5jdGlvbiBidWlsZE1hdGNoUGF0dGVybkZuKGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgICAgICB2YXIgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5tYXRjaFBhdHRlcm4pO1xuICAgICAgICBpZiAoIW1hdGNoUmVzdWx0KVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdO1xuICAgICAgICB2YXIgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pO1xuICAgICAgICBpZiAoIXBhcnNlUmVzdWx0KVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2sgPyBhcmdzLnZhbHVlQ2FsbGJhY2socGFyc2VSZXN1bHRbMF0pIDogcGFyc2VSZXN1bHRbMF07XG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy52YWx1ZUNhbGxiYWNrID8gb3B0aW9ucy52YWx1ZUNhbGxiYWNrKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgcmVzdFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvbWF0Y2gvaW5kZXguanNcbnZhciByZXF1aXJlX21hdGNoID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL21hdGNoL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2J1aWxkTWF0Y2hGbigpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9idWlsZE1hdGNoUGF0dGVybkZuKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgdmFyIG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXihcXGQrKSh0aHxzdHxuZHxyZCk/L2k7XG4gICAgdmFyIHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXFxkKy9pO1xuICAgIHZhciBtYXRjaEVyYVBhdHRlcm5zID0ge1xuICAgICAgbmFycm93OiAvXihifGEpL2ksXG4gICAgICBhYmJyZXZpYXRlZDogL14oYlxcLj9cXHM/Y1xcLj98YlxcLj9cXHM/Y1xcLj9cXHM/ZVxcLj98YVxcLj9cXHM/ZFxcLj98Y1xcLj9cXHM/ZVxcLj8pL2ksXG4gICAgICB3aWRlOiAvXihiZWZvcmUgY2hyaXN0fGJlZm9yZSBjb21tb24gZXJhfGFubm8gZG9taW5pfGNvbW1vbiBlcmEpL2lcbiAgICB9O1xuICAgIHZhciBwYXJzZUVyYVBhdHRlcm5zID0ge1xuICAgICAgYW55OiBbL15iL2ksIC9eKGF8YykvaV1cbiAgICB9O1xuICAgIHZhciBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgICAgIG5hcnJvdzogL15bMTIzNF0vaSxcbiAgICAgIGFiYnJldmlhdGVkOiAvXnFbMTIzNF0vaSxcbiAgICAgIHdpZGU6IC9eWzEyMzRdKHRofHN0fG5kfHJkKT8gcXVhcnRlci9pXG4gICAgfTtcbiAgICB2YXIgcGFyc2VRdWFydGVyUGF0dGVybnMgPSB7XG4gICAgICBhbnk6IFsvMS9pLCAvMi9pLCAvMy9pLCAvNC9pXVxuICAgIH07XG4gICAgdmFyIG1hdGNoTW9udGhQYXR0ZXJucyA9IHtcbiAgICAgIG5hcnJvdzogL15bamZtYXNvbmRdL2ksXG4gICAgICBhYmJyZXZpYXRlZDogL14oamFufGZlYnxtYXJ8YXByfG1heXxqdW58anVsfGF1Z3xzZXB8b2N0fG5vdnxkZWMpL2ksXG4gICAgICB3aWRlOiAvXihqYW51YXJ5fGZlYnJ1YXJ5fG1hcmNofGFwcmlsfG1heXxqdW5lfGp1bHl8YXVndXN0fHNlcHRlbWJlcnxvY3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyKS9pXG4gICAgfTtcbiAgICB2YXIgcGFyc2VNb250aFBhdHRlcm5zID0ge1xuICAgICAgbmFycm93OiBbL15qL2ksIC9eZi9pLCAvXm0vaSwgL15hL2ksIC9ebS9pLCAvXmovaSwgL15qL2ksIC9eYS9pLCAvXnMvaSwgL15vL2ksIC9ebi9pLCAvXmQvaV0sXG4gICAgICBhbnk6IFsvXmphL2ksIC9eZi9pLCAvXm1hci9pLCAvXmFwL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYXUvaSwgL15zL2ksIC9eby9pLCAvXm4vaSwgL15kL2ldXG4gICAgfTtcbiAgICB2YXIgbWF0Y2hEYXlQYXR0ZXJucyA9IHtcbiAgICAgIG5hcnJvdzogL15bc210d2ZdL2ksXG4gICAgICBzaG9ydDogL14oc3V8bW98dHV8d2V8dGh8ZnJ8c2EpL2ksXG4gICAgICBhYmJyZXZpYXRlZDogL14oc3VufG1vbnx0dWV8d2VkfHRodXxmcml8c2F0KS9pLFxuICAgICAgd2lkZTogL14oc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpL2lcbiAgICB9O1xuICAgIHZhciBwYXJzZURheVBhdHRlcm5zID0ge1xuICAgICAgbmFycm93OiBbL15zL2ksIC9ebS9pLCAvXnQvaSwgL153L2ksIC9edC9pLCAvXmYvaSwgL15zL2ldLFxuICAgICAgYW55OiBbL15zdS9pLCAvXm0vaSwgL150dS9pLCAvXncvaSwgL150aC9pLCAvXmYvaSwgL15zYS9pXVxuICAgIH07XG4gICAgdmFyIG1hdGNoRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gICAgICBuYXJyb3c6IC9eKGF8cHxtaXxufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbiAgICAgIGFueTogL14oW2FwXVxcLj9cXHM/bVxcLj98bWlkbmlnaHR8bm9vbnwoaW4gdGhlfGF0KSAobW9ybmluZ3xhZnRlcm5vb258ZXZlbmluZ3xuaWdodCkpL2lcbiAgICB9O1xuICAgIHZhciBwYXJzZURheVBlcmlvZFBhdHRlcm5zID0ge1xuICAgICAgYW55OiB7XG4gICAgICAgIGFtOiAvXmEvaSxcbiAgICAgICAgcG06IC9ecC9pLFxuICAgICAgICBtaWRuaWdodDogL15taS9pLFxuICAgICAgICBub29uOiAvXm5vL2ksXG4gICAgICAgIG1vcm5pbmc6IC9tb3JuaW5nL2ksXG4gICAgICAgIGFmdGVybm9vbjogL2FmdGVybm9vbi9pLFxuICAgICAgICBldmVuaW5nOiAvZXZlbmluZy9pLFxuICAgICAgICBuaWdodDogL25pZ2h0L2lcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBtYXRjaCA9IHtcbiAgICAgIG9yZGluYWxOdW1iZXI6ICgwLCBfaW5kZXgyLmRlZmF1bHQpKHtcbiAgICAgICAgbWF0Y2hQYXR0ZXJuOiBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgICAgICBwYXJzZVBhdHRlcm46IHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4sXG4gICAgICAgIHZhbHVlQ2FsbGJhY2s6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgZXJhOiAoMCwgX2luZGV4LmRlZmF1bHQpKHtcbiAgICAgICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hFcmFQYXR0ZXJucyxcbiAgICAgICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwid2lkZVwiLFxuICAgICAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZUVyYVBhdHRlcm5zLFxuICAgICAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIlxuICAgICAgfSksXG4gICAgICBxdWFydGVyOiAoMCwgX2luZGV4LmRlZmF1bHQpKHtcbiAgICAgICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hRdWFydGVyUGF0dGVybnMsXG4gICAgICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgcGFyc2VQYXR0ZXJuczogcGFyc2VRdWFydGVyUGF0dGVybnMsXG4gICAgICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICAgICAgICB2YWx1ZUNhbGxiYWNrOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgbW9udGg6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaE1vbnRoUGF0dGVybnMsXG4gICAgICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgcGFyc2VQYXR0ZXJuczogcGFyc2VNb250aFBhdHRlcm5zLFxuICAgICAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIlxuICAgICAgfSksXG4gICAgICBkYXk6ICgwLCBfaW5kZXguZGVmYXVsdCkoe1xuICAgICAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaERheVBhdHRlcm5zLFxuICAgICAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRGF5UGF0dGVybnMsXG4gICAgICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiXG4gICAgICB9KSxcbiAgICAgIGRheVBlcmlvZDogKDAsIF9pbmRleC5kZWZhdWx0KSh7XG4gICAgICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcImFueVwiLFxuICAgICAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBlcmlvZFBhdHRlcm5zLFxuICAgICAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIlxuICAgICAgfSlcbiAgICB9O1xuICAgIHZhciBfZGVmYXVsdCA9IG1hdGNoO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9pbmRleC5qc1xudmFyIHJlcXVpcmVfZW5fVVMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2Zvcm1hdERpc3RhbmNlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2Zvcm1hdExvbmcoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZm9ybWF0UmVsYXRpdmUoKSk7XG4gICAgdmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfbG9jYWxpemUoKSk7XG4gICAgdmFyIF9pbmRleDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfbWF0Y2goKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICB2YXIgbG9jYWxlID0ge1xuICAgICAgY29kZTogXCJlbi1VU1wiLFxuICAgICAgZm9ybWF0RGlzdGFuY2U6IF9pbmRleC5kZWZhdWx0LFxuICAgICAgZm9ybWF0TG9uZzogX2luZGV4Mi5kZWZhdWx0LFxuICAgICAgZm9ybWF0UmVsYXRpdmU6IF9pbmRleDMuZGVmYXVsdCxcbiAgICAgIGxvY2FsaXplOiBfaW5kZXg0LmRlZmF1bHQsXG4gICAgICBtYXRjaDogX2luZGV4NS5kZWZhdWx0LFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICB3ZWVrU3RhcnRzT246IDAsXG4gICAgICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogMVxuICAgICAgfVxuICAgIH07XG4gICAgdmFyIF9kZWZhdWx0ID0gbG9jYWxlO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXG52YXIgcmVxdWlyZV90b0ludGVnZXIgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi90b0ludGVnZXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gdG9JbnRlZ2VyO1xuICAgIGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICAgICAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgfVxuICAgICAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG4gICAgICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvYWRkTWlsbGlzZWNvbmRzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9hZGRNaWxsaXNlY29uZHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvYWRkTWlsbGlzZWNvbmRzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGFkZE1pbGxpc2Vjb25kcztcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgdGltZXN0YW1wID0gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGlydHlEYXRlKS5nZXRUaW1lKCk7XG4gICAgICB2YXIgYW1vdW50ID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eUFtb3VudCk7XG4gICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgYW1vdW50KTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3ViTWlsbGlzZWNvbmRzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9zdWJNaWxsaXNlY29uZHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3ViTWlsbGlzZWNvbmRzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHN1Yk1pbGxpc2Vjb25kcztcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9hZGRNaWxsaXNlY29uZHMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3ViTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgYW1vdW50ID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eUFtb3VudCk7XG4gICAgICByZXR1cm4gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGlydHlEYXRlLCAtYW1vdW50KTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRVVENEYXlPZlllYXIvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFVUQ0RheU9mWWVhciA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2dldFVUQ0RheU9mWWVhci9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBnZXRVVENEYXlPZlllYXI7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgdmFyIE1JTExJU0VDT05EU19JTl9EQVkgPSA4NjRlNTtcbiAgICBmdW5jdGlvbiBnZXRVVENEYXlPZlllYXIoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICBkYXRlLnNldFVUQ01vbnRoKDAsIDEpO1xuICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIHZhciBzdGFydE9mWWVhclRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgdmFyIGRpZmZlcmVuY2UgPSB0aW1lc3RhbXAgLSBzdGFydE9mWWVhclRpbWVzdGFtcDtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGRpZmZlcmVuY2UgLyBNSUxMSVNFQ09ORFNfSU5fREFZKSArIDE7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvc3RhcnRPZlVUQ0lTT1dlZWsvaW5kZXguanNcbnZhciByZXF1aXJlX3N0YXJ0T2ZVVENJU09XZWVrID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvc3RhcnRPZlVUQ0lTT1dlZWsvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZlVUQ0lTT1dlZWs7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RhcnRPZlVUQ0lTT1dlZWsoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIHdlZWtTdGFydHNPbiA9IDE7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RheSgpO1xuICAgICAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICAgICAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZik7XG4gICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZ2V0VVRDSVNPV2Vla1llYXIvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFVUQ0lTT1dlZWtZZWFyID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZ2V0VVRDSVNPV2Vla1llYXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZ2V0VVRDSVNPV2Vla1llYXI7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3N0YXJ0T2ZVVENJU09XZWVrKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VVRDSVNPV2Vla1llYXIoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgIHZhciBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyID0gbmV3IERhdGUoMCk7XG4gICAgICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIgKyAxLCAwLCA0KTtcbiAgICAgIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB2YXIgc3RhcnRPZk5leHRZZWFyID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhcik7XG4gICAgICB2YXIgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhciA9IG5ldyBEYXRlKDApO1xuICAgICAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgICAgIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB2YXIgc3RhcnRPZlRoaXNZZWFyID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhcik7XG4gICAgICBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgICAgICByZXR1cm4geWVhciArIDE7XG4gICAgICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZUaGlzWWVhci5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geWVhciAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvc3RhcnRPZlVUQ0lTT1dlZWtZZWFyL2luZGV4LmpzXG52YXIgcmVxdWlyZV9zdGFydE9mVVRDSVNPV2Vla1llYXIgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9zdGFydE9mVVRDSVNPV2Vla1llYXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZlVUQ0lTT1dlZWtZZWFyO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZ2V0VVRDSVNPV2Vla1llYXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfc3RhcnRPZlVUQ0lTT1dlZWsoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RhcnRPZlVUQ0lTT1dlZWtZZWFyKGRpcnR5RGF0ZSkge1xuICAgICAgKDAsIF9pbmRleDMuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciB5ZWFyID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgdmFyIGZvdXJ0aE9mSmFudWFyeSA9IG5ldyBEYXRlKDApO1xuICAgICAgZm91cnRoT2ZKYW51YXJ5LnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIDQpO1xuICAgICAgZm91cnRoT2ZKYW51YXJ5LnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShmb3VydGhPZkphbnVhcnkpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZ2V0VVRDSVNPV2Vlay9pbmRleC5qc1xudmFyIHJlcXVpcmVfZ2V0VVRDSVNPV2VlayA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2dldFVUQ0lTT1dlZWsvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZ2V0VVRDSVNPV2VlaztcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9zdGFydE9mVVRDSVNPV2VlaygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9zdGFydE9mVVRDSVNPV2Vla1llYXIoKSk7XG4gICAgdmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgdmFyIE1JTExJU0VDT05EU19JTl9XRUVLID0gNjA0OGU1O1xuICAgIGZ1bmN0aW9uIGdldFVUQ0lTT1dlZWsoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4NC5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgZGlmZiA9ICgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGUpLmdldFRpbWUoKSAtICgwLCBfaW5kZXgzLmRlZmF1bHQpKGRhdGUpLmdldFRpbWUoKTtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGRpZmYgLyBNSUxMSVNFQ09ORFNfSU5fV0VFSykgKyAxO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3N0YXJ0T2ZVVENXZWVrL2luZGV4LmpzXG52YXIgcmVxdWlyZV9zdGFydE9mVVRDV2VlayA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3N0YXJ0T2ZVVENXZWVrL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHN0YXJ0T2ZVVENXZWVrO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0ludGVnZXIoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdGFydE9mVVRDV2VlayhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICAgICAgdmFyIGxvY2FsZVdlZWtTdGFydHNPbiA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy53ZWVrU3RhcnRzT247XG4gICAgICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6ICgwLCBfaW5kZXgzLmRlZmF1bHQpKGxvY2FsZVdlZWtTdGFydHNPbik7XG4gICAgICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiAoMCwgX2luZGV4My5kZWZhdWx0KShvcHRpb25zLndlZWtTdGFydHNPbik7XG4gICAgICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHlcIik7XG4gICAgICB9XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RheSgpO1xuICAgICAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICAgICAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZik7XG4gICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZ2V0VVRDV2Vla1llYXIvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFVUQ1dlZWtZZWFyID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZ2V0VVRDV2Vla1llYXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZ2V0VVRDV2Vla1llYXI7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3N0YXJ0T2ZVVENXZWVrKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICAgICAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGU7XG4gICAgICB2YXIgZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gMSA6ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICB2YXIgZmlyc3RXZWVrQ29udGFpbnNEYXRlID0gb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgOiAoMCwgX2luZGV4NC5kZWZhdWx0KShvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICBpZiAoIShmaXJzdFdlZWtDb250YWluc0RhdGUgPj0gMSAmJiBmaXJzdFdlZWtDb250YWluc0RhdGUgPD0gNykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJmaXJzdFdlZWtDb250YWluc0RhdGUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDcgaW5jbHVzaXZlbHlcIik7XG4gICAgICB9XG4gICAgICB2YXIgZmlyc3RXZWVrT2ZOZXh0WWVhciA9IG5ldyBEYXRlKDApO1xuICAgICAgZmlyc3RXZWVrT2ZOZXh0WWVhci5zZXRVVENGdWxsWWVhcih5ZWFyICsgMSwgMCwgZmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgICAgIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB2YXIgc3RhcnRPZk5leHRZZWFyID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZmlyc3RXZWVrT2ZOZXh0WWVhciwgZGlydHlPcHRpb25zKTtcbiAgICAgIHZhciBmaXJzdFdlZWtPZlRoaXNZZWFyID0gbmV3IERhdGUoMCk7XG4gICAgICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgdmFyIHN0YXJ0T2ZUaGlzWWVhciA9ICgwLCBfaW5kZXgzLmRlZmF1bHQpKGZpcnN0V2Vla09mVGhpc1llYXIsIGRpcnR5T3B0aW9ucyk7XG4gICAgICBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgICAgICByZXR1cm4geWVhciArIDE7XG4gICAgICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZUaGlzWWVhci5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geWVhciAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvc3RhcnRPZlVUQ1dlZWtZZWFyL2luZGV4LmpzXG52YXIgcmVxdWlyZV9zdGFydE9mVVRDV2Vla1llYXIgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9zdGFydE9mVVRDV2Vla1llYXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZlVUQ1dlZWtZZWFyO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZ2V0VVRDV2Vla1llYXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3N0YXJ0T2ZVVENXZWVrKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0YXJ0T2ZVVENXZWVrWWVhcihkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICAgICAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGU7XG4gICAgICB2YXIgZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gMSA6ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICB2YXIgZmlyc3RXZWVrQ29udGFpbnNEYXRlID0gb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgOiAoMCwgX2luZGV4NC5kZWZhdWx0KShvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICB2YXIgeWVhciA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpO1xuICAgICAgdmFyIGZpcnN0V2VlayA9IG5ldyBEYXRlKDApO1xuICAgICAgZmlyc3RXZWVrLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gICAgICBmaXJzdFdlZWsuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXgzLmRlZmF1bHQpKGZpcnN0V2VlaywgZGlydHlPcHRpb25zKTtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2dldFVUQ1dlZWsvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFVUQ1dlZWsgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRVVENXZWVrL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGdldFVUQ1dlZWs7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfc3RhcnRPZlVUQ1dlZWsoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfc3RhcnRPZlVUQ1dlZWtZZWFyKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIHZhciBNSUxMSVNFQ09ORFNfSU5fV0VFSyA9IDYwNDhlNTtcbiAgICBmdW5jdGlvbiBnZXRVVENXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICAgICAgKDAsIF9pbmRleDQuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgdmFyIGRpZmYgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShkYXRlLCBvcHRpb25zKS5nZXRUaW1lKCkgLSAoMCwgX2luZGV4My5kZWZhdWx0KShkYXRlLCBvcHRpb25zKS5nZXRUaW1lKCk7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gTUlMTElTRUNPTkRTX0lOX1dFRUspICsgMTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9hZGRMZWFkaW5nWmVyb3MvaW5kZXguanNcbnZhciByZXF1aXJlX2FkZExlYWRpbmdaZXJvcyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2FkZExlYWRpbmdaZXJvcy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBhZGRMZWFkaW5nWmVyb3M7XG4gICAgZnVuY3Rpb24gYWRkTGVhZGluZ1plcm9zKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XG4gICAgICB2YXIgc2lnbiA9IG51bWJlciA8IDAgPyBcIi1cIiA6IFwiXCI7XG4gICAgICB2YXIgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpO1xuICAgICAgd2hpbGUgKG91dHB1dC5sZW5ndGggPCB0YXJnZXRMZW5ndGgpIHtcbiAgICAgICAgb3V0cHV0ID0gXCIwXCIgKyBvdXRwdXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2lnbiArIG91dHB1dDtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9mb3JtYXQvbGlnaHRGb3JtYXR0ZXJzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9saWdodEZvcm1hdHRlcnMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9mb3JtYXQvbGlnaHRGb3JtYXR0ZXJzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2FkZExlYWRpbmdaZXJvcygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIHZhciBmb3JtYXR0ZXJzID0ge1xuICAgICAgeTogZnVuY3Rpb24oZGF0ZSwgdG9rZW4pIHtcbiAgICAgICAgdmFyIHNpZ25lZFllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICAgIHZhciB5ZWFyID0gc2lnbmVkWWVhciA+IDAgPyBzaWduZWRZZWFyIDogMSAtIHNpZ25lZFllYXI7XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4LmRlZmF1bHQpKHRva2VuID09PSBcInl5XCIgPyB5ZWFyICUgMTAwIDogeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBNOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCk7XG4gICAgICAgIHJldHVybiB0b2tlbiA9PT0gXCJNXCIgPyBTdHJpbmcobW9udGggKyAxKSA6ICgwLCBfaW5kZXguZGVmYXVsdCkobW9udGggKyAxLCAyKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICByZXR1cm4gKDAsIF9pbmRleC5kZWZhdWx0KShkYXRlLmdldFVUQ0RhdGUoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBhOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICB2YXIgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF0ZS5nZXRVVENIb3VycygpIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgY2FzZSBcImFhXCI6XG4gICAgICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICAgICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWVbMF07XG4gICAgICAgICAgY2FzZSBcImFhYWFcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZSA9PT0gXCJhbVwiID8gXCJhLm0uXCIgOiBcInAubS5cIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uKGRhdGUsIHRva2VuKSB7XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyIHx8IDEyLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIEg6IGZ1bmN0aW9uKGRhdGUsIHRva2VuKSB7XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGUuZ2V0VVRDSG91cnMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICByZXR1cm4gKDAsIF9pbmRleC5kZWZhdWx0KShkYXRlLmdldFVUQ01pbnV0ZXMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBzOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICByZXR1cm4gKDAsIF9pbmRleC5kZWZhdWx0KShkYXRlLmdldFVUQ1NlY29uZHMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICB2YXIgbnVtYmVyT2ZEaWdpdHMgPSB0b2tlbi5sZW5ndGg7XG4gICAgICAgIHZhciBtaWxsaXNlY29uZHMgPSBkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgICAgICB2YXIgZnJhY3Rpb25hbFNlY29uZHMgPSBNYXRoLmZsb29yKG1pbGxpc2Vjb25kcyAqIE1hdGgucG93KDEwLCBudW1iZXJPZkRpZ2l0cyAtIDMpKTtcbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXguZGVmYXVsdCkoZnJhY3Rpb25hbFNlY29uZHMsIHRva2VuLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgX2RlZmF1bHQgPSBmb3JtYXR0ZXJzO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMvaW5kZXguanNcbnZhciByZXF1aXJlX2Zvcm1hdHRlcnMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9mb3JtYXQvZm9ybWF0dGVycy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9nZXRVVENEYXlPZlllYXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZ2V0VVRDSVNPV2VlaygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9nZXRVVENJU09XZWVrWWVhcigpKTtcbiAgICB2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9nZXRVVENXZWVrKCkpO1xuICAgIHZhciBfaW5kZXg1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2dldFVUQ1dlZWtZZWFyKCkpO1xuICAgIHZhciBfaW5kZXg2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2FkZExlYWRpbmdaZXJvcygpKTtcbiAgICB2YXIgX2luZGV4NyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9saWdodEZvcm1hdHRlcnMoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICB2YXIgZGF5UGVyaW9kRW51bSA9IHtcbiAgICAgIGFtOiBcImFtXCIsXG4gICAgICBwbTogXCJwbVwiLFxuICAgICAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgICAgIG5vb246IFwibm9vblwiLFxuICAgICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gICAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICAgIG5pZ2h0OiBcIm5pZ2h0XCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXR0ZXJzID0ge1xuICAgICAgRzogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgICAgIHZhciBlcmEgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCkgPiAwID8gMSA6IDA7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiR1wiOlxuICAgICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgIGNhc2UgXCJHR0dcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJHR0dHR1wiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwibmFycm93XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJHR0dHXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIndpZGVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB5OiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgaWYgKHRva2VuID09PSBcInlvXCIpIHtcbiAgICAgICAgICB2YXIgc2lnbmVkWWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgICB2YXIgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHllYXIsIHtcbiAgICAgICAgICAgIHVuaXQ6IFwieWVhclwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9pbmRleDcuZGVmYXVsdC55KGRhdGUsIHRva2VuKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHNpZ25lZFdlZWtZZWFyID0gKDAsIF9pbmRleDUuZGVmYXVsdCkoZGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgIHZhciB3ZWVrWWVhciA9IHNpZ25lZFdlZWtZZWFyID4gMCA/IHNpZ25lZFdlZWtZZWFyIDogMSAtIHNpZ25lZFdlZWtZZWFyO1xuICAgICAgICBpZiAodG9rZW4gPT09IFwiWVlcIikge1xuICAgICAgICAgIHZhciB0d29EaWdpdFllYXIgPSB3ZWVrWWVhciAlIDEwMDtcbiAgICAgICAgICByZXR1cm4gKDAsIF9pbmRleDYuZGVmYXVsdCkodHdvRGlnaXRZZWFyLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW4gPT09IFwiWW9cIikge1xuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWtZZWFyLCB7XG4gICAgICAgICAgICB1bml0OiBcInllYXJcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KSh3ZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBSOiBmdW5jdGlvbihkYXRlLCB0b2tlbikge1xuICAgICAgICB2YXIgaXNvV2Vla1llYXIgPSAoMCwgX2luZGV4My5kZWZhdWx0KShkYXRlKTtcbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIHU6IGZ1bmN0aW9uKGRhdGUsIHRva2VuKSB7XG4gICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICAgICAgICByZXR1cm4gKDAsIF9pbmRleDYuZGVmYXVsdCkoeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBROiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpIC8gMyk7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiUVwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgICAgICBjYXNlIFwiUVFcIjpcbiAgICAgICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KShxdWFydGVyLCAyKTtcbiAgICAgICAgICBjYXNlIFwiUW9cIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgdW5pdDogXCJxdWFydGVyXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJRUVFcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJRUVFRUVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJRUVFRXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBxOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpIC8gMyk7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwicVwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KShxdWFydGVyLCAyKTtcbiAgICAgICAgICBjYXNlIFwicW9cIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgdW5pdDogXCJxdWFydGVyXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJxcXFcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJxcXFxcVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJxcXFxXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBNOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpO1xuICAgICAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgICAgIHJldHVybiBfaW5kZXg3LmRlZmF1bHQuTShkYXRlLCB0b2tlbik7XG4gICAgICAgICAgY2FzZSBcIk1vXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHtcbiAgICAgICAgICAgICAgdW5pdDogXCJtb250aFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgTDogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKG1vbnRoICsgMSk7XG4gICAgICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgICAgICByZXR1cm4gKDAsIF9pbmRleDYuZGVmYXVsdCkobW9udGggKyAxLCAyKTtcbiAgICAgICAgICBjYXNlIFwiTG9cIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwge1xuICAgICAgICAgICAgICB1bml0OiBcIm1vbnRoXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcIkxMTExMXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiTExMTFwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB3OiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHdlZWsgPSAoMCwgX2luZGV4NC5kZWZhdWx0KShkYXRlLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHRva2VuID09PSBcIndvXCIpIHtcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcih3ZWVrLCB7XG4gICAgICAgICAgICB1bml0OiBcIndlZWtcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KSh3ZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIEk6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICB2YXIgaXNvV2VlayA9ICgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGUpO1xuICAgICAgICBpZiAodG9rZW4gPT09IFwiSW9cIikge1xuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb1dlZWssIHtcbiAgICAgICAgICAgIHVuaXQ6IFwid2Vla1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKGlzb1dlZWssIHRva2VuLmxlbmd0aCk7XG4gICAgICB9LFxuICAgICAgZDogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJkb1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRVVENEYXRlKCksIHtcbiAgICAgICAgICAgIHVuaXQ6IFwiZGF0ZVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9pbmRleDcuZGVmYXVsdC5kKGRhdGUsIHRva2VuKTtcbiAgICAgIH0sXG4gICAgICBEOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIGRheU9mWWVhciA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGF0ZSk7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJEb1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF5T2ZZZWFyLCB7XG4gICAgICAgICAgICB1bml0OiBcImRheU9mWWVhclwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKGRheU9mWWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBFOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIGRheU9mV2VlayA9IGRhdGUuZ2V0VVRDRGF5KCk7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICAgIGNhc2UgXCJFRVwiOlxuICAgICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcIkVFRUVFRVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZTogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpO1xuICAgICAgICB2YXIgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgICAgICBjYXNlIFwiZWVcIjpcbiAgICAgICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KShsb2NhbERheU9mV2VlaywgMik7XG4gICAgICAgICAgY2FzZSBcImVvXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihsb2NhbERheU9mV2Vlaywge1xuICAgICAgICAgICAgICB1bml0OiBcImRheVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiZWVlXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcImVlZWVlXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJlZWVlZWVcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiZWVlZVwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGM6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICAgICAgdmFyIGxvY2FsRGF5T2ZXZWVrID0gKGRheU9mV2VlayAtIG9wdGlvbnMud2Vla1N0YXJ0c09uICsgOCkgJSA3IHx8IDc7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAgICAgY2FzZSBcImNjXCI6XG4gICAgICAgICAgICByZXR1cm4gKDAsIF9pbmRleDYuZGVmYXVsdCkobG9jYWxEYXlPZldlZWssIHRva2VuLmxlbmd0aCk7XG4gICAgICAgICAgY2FzZSBcImNvXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihsb2NhbERheU9mV2Vlaywge1xuICAgICAgICAgICAgICB1bml0OiBcImRheVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcImNjY2NjXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJjY2NjY2NcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICAgICAgdmFyIGlzb0RheU9mV2VlayA9IGRheU9mV2VlayA9PT0gMCA/IDcgOiBkYXlPZldlZWs7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiaVwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhpc29EYXlPZldlZWspO1xuICAgICAgICAgIGNhc2UgXCJpaVwiOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKGlzb0RheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb0RheU9mV2Vlaywge1xuICAgICAgICAgICAgICB1bml0OiBcImRheVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiaWlpXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcImlpaWlpXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJpaWlpaWlcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiaWlpaVwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGE6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyBcInBtXCIgOiBcImFtXCI7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJhYWFcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNhc2UgXCJhYWFhYVwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGI6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWU7XG4gICAgICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5vb247XG4gICAgICAgIH0gZWxzZSBpZiAoaG91cnMgPT09IDApIHtcbiAgICAgICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGhvdXJzIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAgICAgY2FzZSBcImJcIjpcbiAgICAgICAgICBjYXNlIFwiYmJcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiYmJiXCI6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBjYXNlIFwiYmJiYmJcIjpcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSBcImJiYmJcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBCOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgICAgICB2YXIgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgICAgICBpZiAoaG91cnMgPj0gMTcpIHtcbiAgICAgICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLmV2ZW5pbmc7XG4gICAgICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHtcbiAgICAgICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLmFmdGVybm9vbjtcbiAgICAgICAgfSBlbHNlIGlmIChob3VycyA+PSA0KSB7XG4gICAgICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJCXCI6XG4gICAgICAgICAgY2FzZSBcIkJCXCI6XG4gICAgICAgICAgY2FzZSBcIkJCQlwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJCQkJCQlwiOlxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwiQkJCQlwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICBpZiAodG9rZW4gPT09IFwiaG9cIikge1xuICAgICAgICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyO1xuICAgICAgICAgIGlmIChob3VycyA9PT0gMClcbiAgICAgICAgICAgIGhvdXJzID0gMTI7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHtcbiAgICAgICAgICAgIHVuaXQ6IFwiaG91clwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9pbmRleDcuZGVmYXVsdC5oKGRhdGUsIHRva2VuKTtcbiAgICAgIH0sXG4gICAgICBIOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgaWYgKHRva2VuID09PSBcIkhvXCIpIHtcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ0hvdXJzKCksIHtcbiAgICAgICAgICAgIHVuaXQ6IFwiaG91clwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9pbmRleDcuZGVmYXVsdC5IKGRhdGUsIHRva2VuKTtcbiAgICAgIH0sXG4gICAgICBLOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpICUgMTI7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJLb1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHtcbiAgICAgICAgICAgIHVuaXQ6IFwiaG91clwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKGhvdXJzLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIGs6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgIGlmIChob3VycyA9PT0gMClcbiAgICAgICAgICBob3VycyA9IDI0O1xuICAgICAgICBpZiAodG9rZW4gPT09IFwia29cIikge1xuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7XG4gICAgICAgICAgICB1bml0OiBcImhvdXJcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgX2luZGV4Ni5kZWZhdWx0KShob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAgICAgaWYgKHRva2VuID09PSBcIm1vXCIpIHtcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ01pbnV0ZXMoKSwge1xuICAgICAgICAgICAgdW5pdDogXCJtaW51dGVcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfaW5kZXg3LmRlZmF1bHQubShkYXRlLCB0b2tlbik7XG4gICAgICB9LFxuICAgICAgczogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gXCJzb1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRVVENTZWNvbmRzKCksIHtcbiAgICAgICAgICAgIHVuaXQ6IFwic2Vjb25kXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2luZGV4Ny5kZWZhdWx0LnMoZGF0ZSwgdG9rZW4pO1xuICAgICAgfSxcbiAgICAgIFM6IGZ1bmN0aW9uKGRhdGUsIHRva2VuKSB7XG4gICAgICAgIHJldHVybiBfaW5kZXg3LmRlZmF1bHQuUyhkYXRlLCB0b2tlbik7XG4gICAgICB9LFxuICAgICAgWDogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9IG9yaWdpbmFsRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gXCJaXCI7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgICAgICBjYXNlIFwiWFhYWFwiOlxuICAgICAgICAgIGNhc2UgXCJYWFwiOlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgICAgICBjYXNlIFwiWFhYWFhcIjpcbiAgICAgICAgICBjYXNlIFwiWFhYXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeDogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9IG9yaWdpbmFsRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXModGltZXpvbmVPZmZzZXQpO1xuICAgICAgICAgIGNhc2UgXCJ4eHh4XCI6XG4gICAgICAgICAgY2FzZSBcInh4XCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuICAgICAgICAgIGNhc2UgXCJ4eHh4eFwiOlxuICAgICAgICAgIGNhc2UgXCJ4eHhcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBPOiBmdW5jdGlvbihkYXRlLCB0b2tlbiwgX2xvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbERhdGUgPSBvcHRpb25zLl9vcmlnaW5hbERhdGUgfHwgZGF0ZTtcbiAgICAgICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICBjYXNlIFwiT1wiOlxuICAgICAgICAgIGNhc2UgXCJPT1wiOlxuICAgICAgICAgIGNhc2UgXCJPT09cIjpcbiAgICAgICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgICAgIGNhc2UgXCJPT09PXCI6XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHo6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsRGF0ZSA9IG9wdGlvbnMuX29yaWdpbmFsRGF0ZSB8fCBkYXRlO1xuICAgICAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgY2FzZSBcInp6XCI6XG4gICAgICAgICAgY2FzZSBcInp6elwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiR01UXCIgKyBmb3JtYXRUaW1lem9uZVNob3J0KHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgICAgICAgY2FzZSBcInp6enpcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiR01UXCIgKyBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdDogZnVuY3Rpb24oZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBNYXRoLmZsb29yKG9yaWdpbmFsRGF0ZS5nZXRUaW1lKCkgLyAxZTMpO1xuICAgICAgICByZXR1cm4gKDAsIF9pbmRleDYuZGVmYXVsdCkodGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgfSxcbiAgICAgIFQ6IGZ1bmN0aW9uKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsRGF0ZSA9IG9wdGlvbnMuX29yaWdpbmFsRGF0ZSB8fCBkYXRlO1xuICAgICAgICB2YXIgdGltZXN0YW1wID0gb3JpZ2luYWxEYXRlLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuICgwLCBfaW5kZXg2LmRlZmF1bHQpKHRpbWVzdGFtcCwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lU2hvcnQob2Zmc2V0LCBkaXJ0eURlbGltaXRlcikge1xuICAgICAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgICAgIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICAgICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihhYnNPZmZzZXQgLyA2MCk7XG4gICAgICB2YXIgbWludXRlcyA9IGFic09mZnNldCAlIDYwO1xuICAgICAgaWYgKG1pbnV0ZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpO1xuICAgICAgfVxuICAgICAgdmFyIGRlbGltaXRlciA9IGRpcnR5RGVsaW1pdGVyIHx8IFwiXCI7XG4gICAgICByZXR1cm4gc2lnbiArIFN0cmluZyhob3VycykgKyBkZWxpbWl0ZXIgKyAoMCwgX2luZGV4Ni5kZWZhdWx0KShtaW51dGVzLCAyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKG9mZnNldCwgZGlydHlEZWxpbWl0ZXIpIHtcbiAgICAgIGlmIChvZmZzZXQgJSA2MCA9PT0gMCkge1xuICAgICAgICB2YXIgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICAgICAgICByZXR1cm4gc2lnbiArICgwLCBfaW5kZXg2LmRlZmF1bHQpKE1hdGguYWJzKG9mZnNldCkgLyA2MCwgMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUob2Zmc2V0LCBkaXJ0eURlbGltaXRlcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGlydHlEZWxpbWl0ZXIpIHtcbiAgICAgIHZhciBkZWxpbWl0ZXIgPSBkaXJ0eURlbGltaXRlciB8fCBcIlwiO1xuICAgICAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgICAgIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICAgICAgdmFyIGhvdXJzID0gKDAsIF9pbmRleDYuZGVmYXVsdCkoTWF0aC5mbG9vcihhYnNPZmZzZXQgLyA2MCksIDIpO1xuICAgICAgdmFyIG1pbnV0ZXMgPSAoMCwgX2luZGV4Ni5kZWZhdWx0KShhYnNPZmZzZXQgJSA2MCwgMik7XG4gICAgICByZXR1cm4gc2lnbiArIGhvdXJzICsgZGVsaW1pdGVyICsgbWludXRlcztcbiAgICB9XG4gICAgdmFyIF9kZWZhdWx0ID0gZm9ybWF0dGVycztcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9sb25nRm9ybWF0dGVycy9pbmRleC5qc1xudmFyIHJlcXVpcmVfbG9uZ0Zvcm1hdHRlcnMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9mb3JtYXQvbG9uZ0Zvcm1hdHRlcnMvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuICAgIGZ1bmN0aW9uIGRhdGVMb25nRm9ybWF0dGVyKHBhdHRlcm4sIGZvcm1hdExvbmcpIHtcbiAgICAgIHN3aXRjaCAocGF0dGVybikge1xuICAgICAgICBjYXNlIFwiUFwiOlxuICAgICAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoe1xuICAgICAgICAgICAgd2lkdGg6IFwic2hvcnRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIFwiUFBcIjpcbiAgICAgICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHtcbiAgICAgICAgICAgIHdpZHRoOiBcIm1lZGl1bVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJQUFBcIjpcbiAgICAgICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHtcbiAgICAgICAgICAgIHdpZHRoOiBcImxvbmdcIlxuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIFwiUFBQUFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoe1xuICAgICAgICAgICAgd2lkdGg6IFwiZnVsbFwiXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVMb25nRm9ybWF0dGVyKHBhdHRlcm4sIGZvcm1hdExvbmcpIHtcbiAgICAgIHN3aXRjaCAocGF0dGVybikge1xuICAgICAgICBjYXNlIFwicFwiOlxuICAgICAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICAgICAgd2lkdGg6IFwic2hvcnRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIFwicHBcIjpcbiAgICAgICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHtcbiAgICAgICAgICAgIHdpZHRoOiBcIm1lZGl1bVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJwcHBcIjpcbiAgICAgICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHtcbiAgICAgICAgICAgIHdpZHRoOiBcImxvbmdcIlxuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIFwicHBwcFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICAgICAgd2lkdGg6IFwiZnVsbFwiXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRhdGVUaW1lTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKSB7XG4gICAgICB2YXIgbWF0Y2hSZXN1bHQgPSBwYXR0ZXJuLm1hdGNoKC8oUCspKHArKT8vKSB8fCBbXTtcbiAgICAgIHZhciBkYXRlUGF0dGVybiA9IG1hdGNoUmVzdWx0WzFdO1xuICAgICAgdmFyIHRpbWVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMl07XG4gICAgICBpZiAoIXRpbWVQYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiBkYXRlTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRlVGltZUZvcm1hdDtcbiAgICAgIHN3aXRjaCAoZGF0ZVBhdHRlcm4pIHtcbiAgICAgICAgY2FzZSBcIlBcIjpcbiAgICAgICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoe1xuICAgICAgICAgICAgd2lkdGg6IFwic2hvcnRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiUFBcIjpcbiAgICAgICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoe1xuICAgICAgICAgICAgd2lkdGg6IFwibWVkaXVtXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlBQUFwiOlxuICAgICAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7XG4gICAgICAgICAgICB3aWR0aDogXCJsb25nXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlBQUFBcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoe1xuICAgICAgICAgICAgd2lkdGg6IFwiZnVsbFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0ZVRpbWVGb3JtYXQucmVwbGFjZShcInt7ZGF0ZX19XCIsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nKSkucmVwbGFjZShcInt7dGltZX19XCIsIHRpbWVMb25nRm9ybWF0dGVyKHRpbWVQYXR0ZXJuLCBmb3JtYXRMb25nKSk7XG4gICAgfVxuICAgIHZhciBsb25nRm9ybWF0dGVycyA9IHtcbiAgICAgIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICAgICAgUDogZGF0ZVRpbWVMb25nRm9ybWF0dGVyXG4gICAgfTtcbiAgICB2YXIgX2RlZmF1bHQgPSBsb25nRm9ybWF0dGVycztcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHM7XG4gICAgZnVuY3Rpb24gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhkYXRlKSB7XG4gICAgICB2YXIgdXRjRGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCksIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpKTtcbiAgICAgIHV0Y0RhdGUuc2V0VVRDRnVsbFllYXIoZGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAtIHV0Y0RhdGUuZ2V0VGltZSgpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3Byb3RlY3RlZFRva2Vucy9pbmRleC5qc1xudmFyIHJlcXVpcmVfcHJvdGVjdGVkVG9rZW5zID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcHJvdGVjdGVkVG9rZW5zL2luZGV4LmpzXCIoZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4gPSBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuO1xuICAgIGV4cG9ydHMuaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuID0gaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuO1xuICAgIGV4cG9ydHMudGhyb3dQcm90ZWN0ZWRFcnJvciA9IHRocm93UHJvdGVjdGVkRXJyb3I7XG4gICAgdmFyIHByb3RlY3RlZERheU9mWWVhclRva2VucyA9IFtcIkRcIiwgXCJERFwiXTtcbiAgICB2YXIgcHJvdGVjdGVkV2Vla1llYXJUb2tlbnMgPSBbXCJZWVwiLCBcIllZWVlcIl07XG4gICAgZnVuY3Rpb24gaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikge1xuICAgICAgcmV0dXJuIHByb3RlY3RlZERheU9mWWVhclRva2Vucy5pbmRleE9mKHRva2VuKSAhPT0gLTE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbih0b2tlbikge1xuICAgICAgcmV0dXJuIHByb3RlY3RlZFdlZWtZZWFyVG9rZW5zLmluZGV4T2YodG9rZW4pICE9PSAtMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0NCwgaW5wdXQpIHtcbiAgICAgIGlmICh0b2tlbiA9PT0gXCJZWVlZXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVc2UgYHl5eXlgIGluc3RlYWQgb2YgYFlZWVlgIChpbiBgXCIuY29uY2F0KGZvcm1hdDQsIFwiYCkgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdG8gdGhlIGlucHV0IGBcIikuY29uY2F0KGlucHV0LCBcImA7IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcIikpO1xuICAgICAgfSBlbHNlIGlmICh0b2tlbiA9PT0gXCJZWVwiKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVXNlIGB5eWAgaW5zdGVhZCBvZiBgWVlgIChpbiBgXCIuY29uY2F0KGZvcm1hdDQsIFwiYCkgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdG8gdGhlIGlucHV0IGBcIikuY29uY2F0KGlucHV0LCBcImA7IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcIikpO1xuICAgICAgfSBlbHNlIGlmICh0b2tlbiA9PT0gXCJEXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVc2UgYGRgIGluc3RlYWQgb2YgYERgIChpbiBgXCIuY29uY2F0KGZvcm1hdDQsIFwiYCkgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdG8gdGhlIGlucHV0IGBcIikuY29uY2F0KGlucHV0LCBcImA7IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcIikpO1xuICAgICAgfSBlbHNlIGlmICh0b2tlbiA9PT0gXCJERFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVXNlIGBkZGAgaW5zdGVhZCBvZiBgRERgIChpbiBgXCIuY29uY2F0KGZvcm1hdDQsIFwiYCkgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdG8gdGhlIGlucHV0IGBcIikuY29uY2F0KGlucHV0LCBcImA7IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9mb3JtYXQvaW5kZXguanNcbnZhciByZXF1aXJlX2Zvcm1hdCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9mb3JtYXQvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZm9ybWF0NDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2lzVmFsaWQoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZW5fVVMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfc3ViTWlsbGlzZWNvbmRzKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4NSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9mb3JtYXR0ZXJzKCkpO1xuICAgIHZhciBfaW5kZXg2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2xvbmdGb3JtYXR0ZXJzKCkpO1xuICAgIHZhciBfaW5kZXg3ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoKSk7XG4gICAgdmFyIF9pbmRleDggPSByZXF1aXJlX3Byb3RlY3RlZFRva2VucygpO1xuICAgIHZhciBfaW5kZXg5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICB2YXIgX2luZGV4MTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgdmFyIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvW3lZUXFNTHdJZERlY2loSEtrbXNdb3woXFx3KVxcMSp8Jyd8JygnJ3xbXiddKSsoJ3wkKXwuL2c7XG4gICAgdmFyIGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwID0gL1ArcCt8UCt8cCt8Jyd8JygnJ3xbXiddKSsoJ3wkKXwuL2c7XG4gICAgdmFyIGVzY2FwZWRTdHJpbmdSZWdFeHAgPSAvXicoW15dKj8pJz8kLztcbiAgICB2YXIgZG91YmxlUXVvdGVSZWdFeHAgPSAvJycvZztcbiAgICB2YXIgdW5lc2NhcGVkTGF0aW5DaGFyYWN0ZXJSZWdFeHAgPSAvW2EtekEtWl0vO1xuICAgIGZ1bmN0aW9uIGZvcm1hdDQoZGlydHlEYXRlLCBkaXJ0eUZvcm1hdFN0ciwgZGlydHlPcHRpb25zKSB7XG4gICAgICAoMCwgX2luZGV4MTAuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBmb3JtYXRTdHIgPSBTdHJpbmcoZGlydHlGb3JtYXRTdHIpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gICAgICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgX2luZGV4Mi5kZWZhdWx0O1xuICAgICAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZTtcbiAgICAgIHZhciBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlID0gbG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyAxIDogKDAsIF9pbmRleDkuZGVmYXVsdCkobG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgICAgIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA6ICgwLCBfaW5kZXg5LmRlZmF1bHQpKG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgICAgIGlmICghKGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA+PSAxICYmIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA8PSA3KSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImZpcnN0V2Vla0NvbnRhaW5zRGF0ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNyBpbmNsdXNpdmVseVwiKTtcbiAgICAgIH1cbiAgICAgIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy53ZWVrU3RhcnRzT247XG4gICAgICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6ICgwLCBfaW5kZXg5LmRlZmF1bHQpKGxvY2FsZVdlZWtTdGFydHNPbik7XG4gICAgICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiAoMCwgX2luZGV4OS5kZWZhdWx0KShvcHRpb25zLndlZWtTdGFydHNPbik7XG4gICAgICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHlcIik7XG4gICAgICB9XG4gICAgICBpZiAoIWxvY2FsZS5sb2NhbGl6ZSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImxvY2FsZSBtdXN0IGNvbnRhaW4gbG9jYWxpemUgcHJvcGVydHlcIik7XG4gICAgICB9XG4gICAgICBpZiAoIWxvY2FsZS5mb3JtYXRMb25nKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwibG9jYWxlIG11c3QgY29udGFpbiBmb3JtYXRMb25nIHByb3BlcnR5XCIpO1xuICAgICAgfVxuICAgICAgdmFyIG9yaWdpbmFsRGF0ZSA9ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICBpZiAoISgwLCBfaW5kZXguZGVmYXVsdCkob3JpZ2luYWxEYXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgdGltZSB2YWx1ZVwiKTtcbiAgICAgIH1cbiAgICAgIHZhciB0aW1lem9uZU9mZnNldCA9ICgwLCBfaW5kZXg3LmRlZmF1bHQpKG9yaWdpbmFsRGF0ZSk7XG4gICAgICB2YXIgdXRjRGF0ZSA9ICgwLCBfaW5kZXgzLmRlZmF1bHQpKG9yaWdpbmFsRGF0ZSwgdGltZXpvbmVPZmZzZXQpO1xuICAgICAgdmFyIGZvcm1hdHRlck9wdGlvbnMgPSB7XG4gICAgICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSxcbiAgICAgICAgd2Vla1N0YXJ0c09uLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIF9vcmlnaW5hbERhdGU6IG9yaWdpbmFsRGF0ZVxuICAgICAgfTtcbiAgICAgIHZhciByZXN1bHQgPSBmb3JtYXRTdHIubWF0Y2gobG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHApLm1hcChmdW5jdGlvbihzdWJzdHJpbmcpIHtcbiAgICAgICAgdmFyIGZpcnN0Q2hhcmFjdGVyID0gc3Vic3RyaW5nWzBdO1xuICAgICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwicFwiIHx8IGZpcnN0Q2hhcmFjdGVyID09PSBcIlBcIikge1xuICAgICAgICAgIHZhciBsb25nRm9ybWF0dGVyID0gX2luZGV4Ni5kZWZhdWx0W2ZpcnN0Q2hhcmFjdGVyXTtcbiAgICAgICAgICByZXR1cm4gbG9uZ0Zvcm1hdHRlcihzdWJzdHJpbmcsIGxvY2FsZS5mb3JtYXRMb25nLCBmb3JtYXR0ZXJPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic3RyaW5nO1xuICAgICAgfSkuam9pbihcIlwiKS5tYXRjaChmb3JtYXR0aW5nVG9rZW5zUmVnRXhwKS5tYXAoZnVuY3Rpb24oc3Vic3RyaW5nKSB7XG4gICAgICAgIGlmIChzdWJzdHJpbmcgPT09IFwiJydcIikge1xuICAgICAgICAgIHJldHVybiBcIidcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gXCInXCIpIHtcbiAgICAgICAgICByZXR1cm4gY2xlYW5Fc2NhcGVkU3RyaW5nKHN1YnN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZvcm1hdHRlciA9IF9pbmRleDUuZGVmYXVsdFtmaXJzdENoYXJhY3Rlcl07XG4gICAgICAgIGlmIChmb3JtYXR0ZXIpIHtcbiAgICAgICAgICBpZiAoIW9wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zICYmICgwLCBfaW5kZXg4LmlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbikoc3Vic3RyaW5nKSkge1xuICAgICAgICAgICAgKDAsIF9pbmRleDgudGhyb3dQcm90ZWN0ZWRFcnJvcikoc3Vic3RyaW5nLCBkaXJ0eUZvcm1hdFN0ciwgZGlydHlEYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnMgJiYgKDAsIF9pbmRleDguaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbikoc3Vic3RyaW5nKSkge1xuICAgICAgICAgICAgKDAsIF9pbmRleDgudGhyb3dQcm90ZWN0ZWRFcnJvcikoc3Vic3RyaW5nLCBkaXJ0eUZvcm1hdFN0ciwgZGlydHlEYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdHRlcih1dGNEYXRlLCBzdWJzdHJpbmcsIGxvY2FsZS5sb2NhbGl6ZSwgZm9ybWF0dGVyT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0Q2hhcmFjdGVyLm1hdGNoKHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwKSkge1xuICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRm9ybWF0IHN0cmluZyBjb250YWlucyBhbiB1bmVzY2FwZWQgbGF0aW4gYWxwaGFiZXQgY2hhcmFjdGVyIGBcIiArIGZpcnN0Q2hhcmFjdGVyICsgXCJgXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzdHJpbmc7XG4gICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYW5Fc2NhcGVkU3RyaW5nKGlucHV0KSB7XG4gICAgICByZXR1cm4gaW5wdXQubWF0Y2goZXNjYXBlZFN0cmluZ1JlZ0V4cClbMV0ucmVwbGFjZShkb3VibGVRdW90ZVJlZ0V4cCwgXCInXCIpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9mb3JtYXQtbnVtYmVyL2luZGV4LmpzXG52YXIgcmVxdWlyZV9mb3JtYXRfbnVtYmVyID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Zvcm1hdC1udW1iZXIvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZvcm1hdHRlcjtcbiAgICBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gZm9ybWF0dGVyO1xuICAgIGZ1bmN0aW9uIGZvcm1hdHRlcihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIG9wdGlvbnMubmVnYXRpdmVUeXBlID0gb3B0aW9ucy5uZWdhdGl2ZVR5cGUgfHwgKG9wdGlvbnMubmVnYXRpdmUgPT09IFwiUlwiID8gXCJyaWdodFwiIDogXCJsZWZ0XCIpO1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm5lZ2F0aXZlTGVmdFN5bWJvbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMubmVnYXRpdmVUeXBlKSB7XG4gICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgIG9wdGlvbnMubmVnYXRpdmVMZWZ0U3ltYm9sID0gXCItXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiYnJhY2tldHNcIjpcbiAgICAgICAgICAgIG9wdGlvbnMubmVnYXRpdmVMZWZ0U3ltYm9sID0gXCIoXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgb3B0aW9ucy5uZWdhdGl2ZUxlZnRTeW1ib2wgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMubmVnYXRpdmVSaWdodFN5bWJvbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMubmVnYXRpdmVUeXBlKSB7XG4gICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgICAgICBvcHRpb25zLm5lZ2F0aXZlUmlnaHRTeW1ib2wgPSBcIi1cIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJicmFja2V0c1wiOlxuICAgICAgICAgICAgb3B0aW9ucy5uZWdhdGl2ZVJpZ2h0U3ltYm9sID0gXCIpXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgb3B0aW9ucy5uZWdhdGl2ZVJpZ2h0U3ltYm9sID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm5lZ2F0aXZlTGVmdE91dCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgb3B0aW9ucy5uZWdhdGl2ZUxlZnRPdXQgPSBvcHRpb25zLm5lZ2F0aXZlT3V0ID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5uZWdhdGl2ZVJpZ2h0T3V0ICE9PSBcImJvb2xlYW5cIikge1xuICAgICAgICBvcHRpb25zLm5lZ2F0aXZlUmlnaHRPdXQgPSBvcHRpb25zLm5lZ2F0aXZlT3V0ID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgXCJcIjtcbiAgICAgIG9wdGlvbnMuc3VmZml4ID0gb3B0aW9ucy5zdWZmaXggfHwgXCJcIjtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnRlZ2VyU2VwYXJhdG9yICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG9wdGlvbnMuaW50ZWdlclNlcGFyYXRvciA9IHR5cGVvZiBvcHRpb25zLnNlcGFyYXRvciA9PT0gXCJzdHJpbmdcIiA/IG9wdGlvbnMuc2VwYXJhdG9yIDogXCIsXCI7XG4gICAgICB9XG4gICAgICBvcHRpb25zLmRlY2ltYWxzU2VwYXJhdG9yID0gdHlwZW9mIG9wdGlvbnMuZGVjaW1hbHNTZXBhcmF0b3IgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zLmRlY2ltYWxzU2VwYXJhdG9yIDogXCJcIjtcbiAgICAgIG9wdGlvbnMuZGVjaW1hbCA9IG9wdGlvbnMuZGVjaW1hbCB8fCBcIi5cIjtcbiAgICAgIG9wdGlvbnMucGFkTGVmdCA9IG9wdGlvbnMucGFkTGVmdCB8fCAtMTtcbiAgICAgIG9wdGlvbnMucGFkUmlnaHQgPSBvcHRpb25zLnBhZFJpZ2h0IHx8IC0xO1xuICAgICAgZnVuY3Rpb24gZm9ybWF0NChudW1iZXIsIG92ZXJyaWRlT3B0aW9ucykge1xuICAgICAgICBvdmVycmlkZU9wdGlvbnMgPSBvdmVycmlkZU9wdGlvbnMgfHwge307XG4gICAgICAgIGlmIChudW1iZXIgfHwgbnVtYmVyID09PSAwKSB7XG4gICAgICAgICAgbnVtYmVyID0gXCJcIiArIG51bWJlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgICAgIHZhciBuZWdhdGl2ZSA9IG51bWJlci5jaGFyQXQoMCkgPT09IFwiLVwiO1xuICAgICAgICBudW1iZXIgPSBudW1iZXIucmVwbGFjZSgvXlxcLS9nLCBcIlwiKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLm5lZ2F0aXZlTGVmdE91dCAmJiAhb3ZlcnJpZGVPcHRpb25zLm5vVW5pdHMpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChvcHRpb25zLnByZWZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZ2F0aXZlKSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2gob3B0aW9ucy5uZWdhdGl2ZUxlZnRTeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm5lZ2F0aXZlTGVmdE91dCAmJiAhb3ZlcnJpZGVPcHRpb25zLm5vVW5pdHMpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChvcHRpb25zLnByZWZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgbnVtYmVyID0gbnVtYmVyLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucm91bmQgIT0gbnVsbClcbiAgICAgICAgICByb3VuZChudW1iZXIsIG9wdGlvbnMucm91bmQpO1xuICAgICAgICBpZiAob3B0aW9ucy50cnVuY2F0ZSAhPSBudWxsKVxuICAgICAgICAgIG51bWJlclsxXSA9IHRydW5jYXRlKG51bWJlclsxXSwgb3B0aW9ucy50cnVuY2F0ZSk7XG4gICAgICAgIGlmIChvcHRpb25zLnBhZExlZnQgPiAwKVxuICAgICAgICAgIG51bWJlclswXSA9IHBhZExlZnQobnVtYmVyWzBdLCBvcHRpb25zLnBhZExlZnQpO1xuICAgICAgICBpZiAob3B0aW9ucy5wYWRSaWdodCA+IDApXG4gICAgICAgICAgbnVtYmVyWzFdID0gcGFkUmlnaHQobnVtYmVyWzFdLCBvcHRpb25zLnBhZFJpZ2h0KTtcbiAgICAgICAgaWYgKCFvdmVycmlkZU9wdGlvbnMubm9TZXBhcmF0b3IgJiYgbnVtYmVyWzFdKVxuICAgICAgICAgIG51bWJlclsxXSA9IGFkZERlY2ltYWxTZXBhcmF0b3JzKG51bWJlclsxXSwgb3B0aW9ucy5kZWNpbWFsc1NlcGFyYXRvcik7XG4gICAgICAgIGlmICghb3ZlcnJpZGVPcHRpb25zLm5vU2VwYXJhdG9yICYmIG51bWJlclswXSlcbiAgICAgICAgICBudW1iZXJbMF0gPSBhZGRJbnRlZ2VyU2VwYXJhdG9ycyhudW1iZXJbMF0sIG9wdGlvbnMuaW50ZWdlclNlcGFyYXRvcik7XG4gICAgICAgIG91dHB1dC5wdXNoKG51bWJlclswXSk7XG4gICAgICAgIGlmIChudW1iZXJbMV0pIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChvcHRpb25zLmRlY2ltYWwpO1xuICAgICAgICAgIG91dHB1dC5wdXNoKG51bWJlclsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubmVnYXRpdmVSaWdodE91dCAmJiAhb3ZlcnJpZGVPcHRpb25zLm5vVW5pdHMpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChvcHRpb25zLnN1ZmZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZ2F0aXZlKSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2gob3B0aW9ucy5uZWdhdGl2ZVJpZ2h0U3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMubmVnYXRpdmVSaWdodE91dCAmJiAhb3ZlcnJpZGVPcHRpb25zLm5vVW5pdHMpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChvcHRpb25zLnN1ZmZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKFwiXCIpO1xuICAgICAgfVxuICAgICAgZm9ybWF0NC5uZWdhdGl2ZSA9IG9wdGlvbnMubmVnYXRpdmU7XG4gICAgICBmb3JtYXQ0Lm5lZ2F0aXZlT3V0ID0gb3B0aW9ucy5uZWdhdGl2ZU91dDtcbiAgICAgIGZvcm1hdDQubmVnYXRpdmVUeXBlID0gb3B0aW9ucy5uZWdhdGl2ZVR5cGU7XG4gICAgICBmb3JtYXQ0Lm5lZ2F0aXZlTGVmdE91dCA9IG9wdGlvbnMubmVnYXRpdmVMZWZ0T3V0O1xuICAgICAgZm9ybWF0NC5uZWdhdGl2ZUxlZnRTeW1ib2wgPSBvcHRpb25zLm5lZ2F0aXZlTGVmdFN5bWJvbDtcbiAgICAgIGZvcm1hdDQubmVnYXRpdmVSaWdodE91dCA9IG9wdGlvbnMubmVnYXRpdmVSaWdodE91dDtcbiAgICAgIGZvcm1hdDQubmVnYXRpdmVSaWdodFN5bWJvbCA9IG9wdGlvbnMubmVnYXRpdmVSaWdodFN5bWJvbDtcbiAgICAgIGZvcm1hdDQucHJlZml4ID0gb3B0aW9ucy5wcmVmaXg7XG4gICAgICBmb3JtYXQ0LnN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuICAgICAgZm9ybWF0NC5zZXBhcmF0ZSA9IG9wdGlvbnMuc2VwYXJhdGU7XG4gICAgICBmb3JtYXQ0LmludGVnZXJTZXBhcmF0b3IgPSBvcHRpb25zLmludGVnZXJTZXBhcmF0b3I7XG4gICAgICBmb3JtYXQ0LmRlY2ltYWxzU2VwYXJhdG9yID0gb3B0aW9ucy5kZWNpbWFsc1NlcGFyYXRvcjtcbiAgICAgIGZvcm1hdDQuZGVjaW1hbCA9IG9wdGlvbnMuZGVjaW1hbDtcbiAgICAgIGZvcm1hdDQucGFkTGVmdCA9IG9wdGlvbnMucGFkTGVmdDtcbiAgICAgIGZvcm1hdDQucGFkUmlnaHQgPSBvcHRpb25zLnBhZFJpZ2h0O1xuICAgICAgZm9ybWF0NC50cnVuY2F0ZSA9IG9wdGlvbnMudHJ1bmNhdGU7XG4gICAgICBmb3JtYXQ0LnJvdW5kID0gb3B0aW9ucy5yb3VuZDtcbiAgICAgIGZ1bmN0aW9uIHVuZm9ybWF0KG51bWJlciwgYWxsb3dlZFNlcGFyYXRvcnMpIHtcbiAgICAgICAgYWxsb3dlZFNlcGFyYXRvcnMgPSBhbGxvd2VkU2VwYXJhdG9ycyB8fCBbXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dlZFNlcGFyYXRvcnMpIHtcbiAgICAgICAgICBvcHRpb25zLmFsbG93ZWRTZXBhcmF0b3JzLmZvckVhY2goZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgYWxsb3dlZFNlcGFyYXRvcnMucHVzaChzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhbGxvd2VkU2VwYXJhdG9ycy5wdXNoKG9wdGlvbnMuaW50ZWdlclNlcGFyYXRvcik7XG4gICAgICAgIGFsbG93ZWRTZXBhcmF0b3JzLnB1c2gob3B0aW9ucy5kZWNpbWFsc1NlcGFyYXRvcik7XG4gICAgICAgIG51bWJlciA9IG51bWJlci5yZXBsYWNlKG9wdGlvbnMucHJlZml4LCBcIlwiKTtcbiAgICAgICAgbnVtYmVyID0gbnVtYmVyLnJlcGxhY2Uob3B0aW9ucy5zdWZmaXgsIFwiXCIpO1xuICAgICAgICB2YXIgbmV3TnVtYmVyID0gbnVtYmVyO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbnVtYmVyID0gbmV3TnVtYmVyO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsb3dlZFNlcGFyYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5ld051bWJlciA9IG5ld051bWJlci5yZXBsYWNlKGFsbG93ZWRTZXBhcmF0b3JzW2ldLCBcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKG5ld051bWJlciAhPSBudW1iZXIpO1xuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgICAgfVxuICAgICAgZm9ybWF0NC51bmZvcm1hdCA9IHVuZm9ybWF0O1xuICAgICAgZnVuY3Rpb24gdmFsaWRhdGUobnVtYmVyLCBhbGxvd2VkU2VwYXJhdG9ycykge1xuICAgICAgICBudW1iZXIgPSB1bmZvcm1hdChudW1iZXIsIGFsbG93ZWRTZXBhcmF0b3JzKTtcbiAgICAgICAgbnVtYmVyID0gbnVtYmVyLnNwbGl0KG9wdGlvbnMuZGVjaW1hbCk7XG4gICAgICAgIGlmIChudW1iZXIubGVuZ3RoID4gMikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnRydW5jYXRlICE9IG51bGwgJiYgbnVtYmVyWzFdICYmIG51bWJlclsxXS5sZW5ndGggPiBvcHRpb25zLnRydW5jYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucm91bmQgIT0gbnVsbCAmJiBudW1iZXJbMV0gJiYgbnVtYmVyWzFdLmxlbmd0aCA+IG9wdGlvbnMucm91bmQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIC9eLT9cXGQrXFwuP1xcZCokLy50ZXN0KG51bWJlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3JtYXQ0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRJbnRlZ2VyU2VwYXJhdG9ycyh4LCBzZXBhcmF0b3IpIHtcbiAgICAgIHggKz0gXCJcIjtcbiAgICAgIGlmICghc2VwYXJhdG9yKVxuICAgICAgICByZXR1cm4geDtcbiAgICAgIHZhciByZ3ggPSAvKFxcZCspKFxcZHszfSkvO1xuICAgICAgd2hpbGUgKHJneC50ZXN0KHgpKSB7XG4gICAgICAgIHggPSB4LnJlcGxhY2Uocmd4LCBcIiQxXCIgKyBzZXBhcmF0b3IgKyBcIiQyXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZERlY2ltYWxTZXBhcmF0b3JzKHgsIHNlcGFyYXRvcikge1xuICAgICAgeCArPSBcIlwiO1xuICAgICAgaWYgKCFzZXBhcmF0b3IpXG4gICAgICAgIHJldHVybiB4O1xuICAgICAgdmFyIHJneCA9IC8oXFxkezN9KShcXGQrKS87XG4gICAgICB3aGlsZSAocmd4LnRlc3QoeCkpIHtcbiAgICAgICAgeCA9IHgucmVwbGFjZShyZ3gsIFwiJDFcIiArIHNlcGFyYXRvciArIFwiJDJcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFkTGVmdCh4LCBwYWRkaW5nKSB7XG4gICAgICB4ID0geCArIFwiXCI7XG4gICAgICB2YXIgYnVmID0gW107XG4gICAgICB3aGlsZSAoYnVmLmxlbmd0aCArIHgubGVuZ3RoIDwgcGFkZGluZykge1xuICAgICAgICBidWYucHVzaChcIjBcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmpvaW4oXCJcIikgKyB4O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYWRSaWdodCh4LCBwYWRkaW5nKSB7XG4gICAgICBpZiAoeCkge1xuICAgICAgICB4ICs9IFwiXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIHZhciBidWYgPSBbXTtcbiAgICAgIHdoaWxlIChidWYubGVuZ3RoICsgeC5sZW5ndGggPCBwYWRkaW5nKSB7XG4gICAgICAgIGJ1Zi5wdXNoKFwiMFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4ICsgYnVmLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRydW5jYXRlKHgsIGxlbmd0aCkge1xuICAgICAgaWYgKHgpIHtcbiAgICAgICAgeCArPSBcIlwiO1xuICAgICAgfVxuICAgICAgaWYgKHggJiYgeC5sZW5ndGggPiBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHguc3Vic3RyKDAsIGxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcm91bmQobnVtYmVyLCBwbGFjZXMpIHtcbiAgICAgIGlmIChudW1iZXJbMV0gJiYgcGxhY2VzID49IDAgJiYgbnVtYmVyWzFdLmxlbmd0aCA+IHBsYWNlcykge1xuICAgICAgICB2YXIgZGVjaW0gPSBudW1iZXJbMV0uc2xpY2UoMCwgcGxhY2VzKTtcbiAgICAgICAgaWYgKCtudW1iZXJbMV0uc3Vic3RyKHBsYWNlcywgMSkgPj0gNSkge1xuICAgICAgICAgIHZhciBsZWFkaW5nemVyb3MgPSBcIlwiO1xuICAgICAgICAgIHdoaWxlIChkZWNpbS5jaGFyQXQoMCkgPT09IFwiMFwiKSB7XG4gICAgICAgICAgICBsZWFkaW5nemVyb3MgPSBsZWFkaW5nemVyb3MgKyBcIjBcIjtcbiAgICAgICAgICAgIGRlY2ltID0gZGVjaW0uc3Vic3RyKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWNpbSA9ICtkZWNpbSArIDEgKyBcIlwiO1xuICAgICAgICAgIGRlY2ltID0gbGVhZGluZ3plcm9zICsgZGVjaW07XG4gICAgICAgICAgaWYgKGRlY2ltLmxlbmd0aCA+IHBsYWNlcykge1xuICAgICAgICAgICAgbnVtYmVyWzBdID0gK251bWJlclswXSArICtkZWNpbS5jaGFyQXQoMCkgKyBcIlwiO1xuICAgICAgICAgICAgZGVjaW0gPSBkZWNpbS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG51bWJlclsxXSA9IGRlY2ltO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvYWRkRGF5cy9pbmRleC5qc1xudmFyIHJlcXVpcmVfYWRkRGF5cyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9hZGREYXlzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGFkZERheXM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0ludGVnZXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZERheXMoZGlydHlEYXRlLCBkaXJ0eUFtb3VudCkge1xuICAgICAgKDAsIF9pbmRleDMuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlID0gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBhbW91bnQgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5QW1vdW50KTtcbiAgICAgIGlmIChpc05hTihhbW91bnQpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgICAgfVxuICAgICAgaWYgKCFhbW91bnQpIHtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgICB9XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBhbW91bnQpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2FkZE1vbnRocy9pbmRleC5qc1xudmFyIHJlcXVpcmVfYWRkTW9udGhzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2FkZE1vbnRocy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBhZGRNb250aHM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0ludGVnZXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZE1vbnRocyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gICAgICAoMCwgX2luZGV4My5kZWZhdWx0KSgyLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgdmFyIGFtb3VudCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlBbW91bnQpO1xuICAgICAgaWYgKGlzTmFOKGFtb3VudCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgICB9XG4gICAgICBpZiAoIWFtb3VudCkge1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXlPZk1vbnRoID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICB2YXIgZW5kT2ZEZXNpcmVkTW9udGggPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgICBlbmRPZkRlc2lyZWRNb250aC5zZXRNb250aChkYXRlLmdldE1vbnRoKCkgKyBhbW91bnQgKyAxLCAwKTtcbiAgICAgIHZhciBkYXlzSW5Nb250aCA9IGVuZE9mRGVzaXJlZE1vbnRoLmdldERhdGUoKTtcbiAgICAgIGlmIChkYXlPZk1vbnRoID49IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIHJldHVybiBlbmRPZkRlc2lyZWRNb250aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGUuc2V0RnVsbFllYXIoZW5kT2ZEZXNpcmVkTW9udGguZ2V0RnVsbFllYXIoKSwgZW5kT2ZEZXNpcmVkTW9udGguZ2V0TW9udGgoKSwgZGF5T2ZNb250aCk7XG4gICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgfVxuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9hZGQvaW5kZXguanNcbnZhciByZXF1aXJlX2FkZCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9hZGQvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gYWRkMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2FkZERheXMoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfYWRkTW9udGhzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgdmFyIF9pbmRleDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9JbnRlZ2VyKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkMihkaXJ0eURhdGUsIGR1cmF0aW9uKSB7XG4gICAgICAoMCwgX2luZGV4NC5kZWZhdWx0KSgyLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKCFkdXJhdGlvbiB8fCB0eXBlb2YgZHVyYXRpb24gIT09IFwib2JqZWN0XCIpXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgICAgdmFyIHllYXJzID0gZHVyYXRpb24ueWVhcnMgPyAoMCwgX2luZGV4NS5kZWZhdWx0KShkdXJhdGlvbi55ZWFycykgOiAwO1xuICAgICAgdmFyIG1vbnRocyA9IGR1cmF0aW9uLm1vbnRocyA/ICgwLCBfaW5kZXg1LmRlZmF1bHQpKGR1cmF0aW9uLm1vbnRocykgOiAwO1xuICAgICAgdmFyIHdlZWtzID0gZHVyYXRpb24ud2Vla3MgPyAoMCwgX2luZGV4NS5kZWZhdWx0KShkdXJhdGlvbi53ZWVrcykgOiAwO1xuICAgICAgdmFyIGRheXMgPSBkdXJhdGlvbi5kYXlzID8gKDAsIF9pbmRleDUuZGVmYXVsdCkoZHVyYXRpb24uZGF5cykgOiAwO1xuICAgICAgdmFyIGhvdXJzID0gZHVyYXRpb24uaG91cnMgPyAoMCwgX2luZGV4NS5kZWZhdWx0KShkdXJhdGlvbi5ob3VycykgOiAwO1xuICAgICAgdmFyIG1pbnV0ZXMgPSBkdXJhdGlvbi5taW51dGVzID8gKDAsIF9pbmRleDUuZGVmYXVsdCkoZHVyYXRpb24ubWludXRlcykgOiAwO1xuICAgICAgdmFyIHNlY29uZHMgPSBkdXJhdGlvbi5zZWNvbmRzID8gKDAsIF9pbmRleDUuZGVmYXVsdCkoZHVyYXRpb24uc2Vjb25kcykgOiAwO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4My5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgdmFyIGRhdGVXaXRoTW9udGhzID0gbW9udGhzIHx8IHllYXJzID8gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGF0ZSwgbW9udGhzICsgeWVhcnMgKiAxMikgOiBkYXRlO1xuICAgICAgdmFyIGRhdGVXaXRoRGF5cyA9IGRheXMgfHwgd2Vla3MgPyAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGVXaXRoTW9udGhzLCBkYXlzICsgd2Vla3MgKiA3KSA6IGRhdGVXaXRoTW9udGhzO1xuICAgICAgdmFyIG1pbnV0ZXNUb0FkZCA9IG1pbnV0ZXMgKyBob3VycyAqIDYwO1xuICAgICAgdmFyIHNlY29uZHNUb0FkZCA9IHNlY29uZHMgKyBtaW51dGVzVG9BZGQgKiA2MDtcbiAgICAgIHZhciBtc1RvQWRkID0gc2Vjb25kc1RvQWRkICogMWUzO1xuICAgICAgdmFyIGZpbmFsRGF0ZSA9IG5ldyBEYXRlKGRhdGVXaXRoRGF5cy5nZXRUaW1lKCkgKyBtc1RvQWRkKTtcbiAgICAgIHJldHVybiBmaW5hbERhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldERhdGUvaW5kZXguanNcbnZhciByZXF1aXJlX2dldERhdGUgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0RGF0ZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBnZXREYXRlMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRlMihkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBkYXlPZk1vbnRoID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICByZXR1cm4gZGF5T2ZNb250aDtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0RGF5L2luZGV4LmpzXG52YXIgcmVxdWlyZV9nZXREYXkgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0RGF5L2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGdldERheTI7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGF5MihkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgcmV0dXJuIGRheTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0SG91cnMvaW5kZXguanNcbnZhciByZXF1aXJlX2dldEhvdXJzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldEhvdXJzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGdldEhvdXJzMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRIb3VyczIoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICByZXR1cm4gaG91cnM7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldE1pbnV0ZXMvaW5kZXguanNcbnZhciByZXF1aXJlX2dldE1pbnV0ZXMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0TWludXRlcy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBnZXRNaW51dGVzMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRNaW51dGVzMihkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICByZXR1cm4gbWludXRlcztcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0TW9udGgvaW5kZXguanNcbnZhciByZXF1aXJlX2dldE1vbnRoID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldE1vbnRoL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGdldE1vbnRoMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRNb250aDIoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICByZXR1cm4gbW9udGg7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFllYXIvaW5kZXguanNcbnZhciByZXF1aXJlX2dldFllYXIgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZ2V0WWVhci9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBnZXRZZWFyMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRZZWFyMihkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpLmdldEZ1bGxZZWFyKCk7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbXBhcmVBc2MvaW5kZXguanNcbnZhciByZXF1aXJlX2NvbXBhcmVBc2MgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvY29tcGFyZUFzYy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBjb21wYXJlQXNjO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBhcmVBc2MoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZUxlZnQgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZUxlZnQpO1xuICAgICAgdmFyIGRhdGVSaWdodCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlUmlnaHQpO1xuICAgICAgdmFyIGRpZmYgPSBkYXRlTGVmdC5nZXRUaW1lKCkgLSBkYXRlUmlnaHQuZ2V0VGltZSgpO1xuICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH0gZWxzZSBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgIH1cbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluQ2FsZW5kYXJZZWFycy9pbmRleC5qc1xudmFyIHJlcXVpcmVfZGlmZmVyZW5jZUluQ2FsZW5kYXJZZWFycyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhclllYXJzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyWWVhcnM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluQ2FsZW5kYXJZZWFycyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlTGVmdCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlTGVmdCk7XG4gICAgICB2YXIgZGF0ZVJpZ2h0ID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGVSaWdodCk7XG4gICAgICByZXR1cm4gZGF0ZUxlZnQuZ2V0RnVsbFllYXIoKSAtIGRhdGVSaWdodC5nZXRGdWxsWWVhcigpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5ZZWFycy9pbmRleC5qc1xudmFyIHJlcXVpcmVfZGlmZmVyZW5jZUluWWVhcnMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluWWVhcnMvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZGlmZmVyZW5jZUluWWVhcnM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluQ2FsZW5kYXJZZWFycygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9jb21wYXJlQXNjKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJblllYXJzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gICAgICAoMCwgX2luZGV4NC5kZWZhdWx0KSgyLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGVMZWZ0ID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGVMZWZ0KTtcbiAgICAgIHZhciBkYXRlUmlnaHQgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZVJpZ2h0KTtcbiAgICAgIHZhciBzaWduID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCk7XG4gICAgICB2YXIgZGlmZmVyZW5jZSA9IE1hdGguYWJzKCgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGVMZWZ0LCBkYXRlUmlnaHQpKTtcbiAgICAgIGRhdGVMZWZ0LnNldEZ1bGxZZWFyKDE1ODQpO1xuICAgICAgZGF0ZVJpZ2h0LnNldEZ1bGxZZWFyKDE1ODQpO1xuICAgICAgdmFyIGlzTGFzdFllYXJOb3RGdWxsID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkgPT09IC1zaWduO1xuICAgICAgdmFyIHJlc3VsdCA9IHNpZ24gKiAoZGlmZmVyZW5jZSAtIE51bWJlcihpc0xhc3RZZWFyTm90RnVsbCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gMCA/IDAgOiByZXN1bHQ7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9kaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocztcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlTGVmdCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlTGVmdCk7XG4gICAgICB2YXIgZGF0ZVJpZ2h0ID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGVSaWdodCk7XG4gICAgICB2YXIgeWVhckRpZmYgPSBkYXRlTGVmdC5nZXRGdWxsWWVhcigpIC0gZGF0ZVJpZ2h0LmdldEZ1bGxZZWFyKCk7XG4gICAgICB2YXIgbW9udGhEaWZmID0gZGF0ZUxlZnQuZ2V0TW9udGgoKSAtIGRhdGVSaWdodC5nZXRNb250aCgpO1xuICAgICAgcmV0dXJuIHllYXJEaWZmICogMTIgKyBtb250aERpZmY7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VuZE9mRGF5L2luZGV4LmpzXG52YXIgcmVxdWlyZV9lbmRPZkRheSA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lbmRPZkRheS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBlbmRPZkRheTtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmRPZkRheShkaXJ0eURhdGUpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgICAgIGRhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lbmRPZk1vbnRoL2luZGV4LmpzXG52YXIgcmVxdWlyZV9lbmRPZk1vbnRoID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VuZE9mTW9udGgvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZW5kT2ZNb250aDtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmRPZk1vbnRoKGRpcnR5RGF0ZSkge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoICsgMSwgMCk7XG4gICAgICBkYXRlLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSk7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNMYXN0RGF5T2ZNb250aC9pbmRleC5qc1xudmFyIHJlcXVpcmVfaXNMYXN0RGF5T2ZNb250aCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pc0xhc3REYXlPZk1vbnRoL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGlzTGFzdERheU9mTW9udGg7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZW5kT2ZEYXkoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZW5kT2ZNb250aCgpKTtcbiAgICB2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0xhc3REYXlPZk1vbnRoKGRpcnR5RGF0ZSkge1xuICAgICAgKDAsIF9pbmRleDQuZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkYXRlID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICAgICAgcmV0dXJuICgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGUpLmdldFRpbWUoKSA9PT0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZGF0ZSkuZ2V0VGltZSgpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5Nb250aHMvaW5kZXguanNcbnZhciByZXF1aXJlX2RpZmZlcmVuY2VJbk1vbnRocyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5Nb250aHMvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZGlmZmVyZW5jZUluTW9udGhzO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2RpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2NvbXBhcmVBc2MoKSk7XG4gICAgdmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXg1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2lzTGFzdERheU9mTW9udGgoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5Nb250aHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgICAgICgwLCBfaW5kZXg0LmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZUxlZnQgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZUxlZnQpO1xuICAgICAgdmFyIGRhdGVSaWdodCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlUmlnaHQpO1xuICAgICAgdmFyIHNpZ24gPSAoMCwgX2luZGV4My5kZWZhdWx0KShkYXRlTGVmdCwgZGF0ZVJpZ2h0KTtcbiAgICAgIHZhciBkaWZmZXJlbmNlID0gTWF0aC5hYnMoKDAsIF9pbmRleDIuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkpO1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmIChkaWZmZXJlbmNlIDwgMSkge1xuICAgICAgICByZXN1bHQgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRhdGVMZWZ0LmdldE1vbnRoKCkgPT09IDEgJiYgZGF0ZUxlZnQuZ2V0RGF0ZSgpID4gMjcpIHtcbiAgICAgICAgICBkYXRlTGVmdC5zZXREYXRlKDMwKTtcbiAgICAgICAgfVxuICAgICAgICBkYXRlTGVmdC5zZXRNb250aChkYXRlTGVmdC5nZXRNb250aCgpIC0gc2lnbiAqIGRpZmZlcmVuY2UpO1xuICAgICAgICB2YXIgaXNMYXN0TW9udGhOb3RGdWxsID0gKDAsIF9pbmRleDMuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkgPT09IC1zaWduO1xuICAgICAgICBpZiAoKDAsIF9pbmRleDUuZGVmYXVsdCkoKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGVMZWZ0KSkgJiYgZGlmZmVyZW5jZSA9PT0gMSAmJiAoMCwgX2luZGV4My5kZWZhdWx0KShkaXJ0eURhdGVMZWZ0LCBkYXRlUmlnaHQpID09PSAxKSB7XG4gICAgICAgICAgaXNMYXN0TW9udGhOb3RGdWxsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gc2lnbiAqIChkaWZmZXJlbmNlIC0gTnVtYmVyKGlzTGFzdE1vbnRoTm90RnVsbCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gMCA/IDAgOiByZXN1bHQ7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZEYXkvaW5kZXguanNcbnZhciByZXF1aXJlX3N0YXJ0T2ZEYXkgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBzdGFydE9mRGF5O1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gICAgICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGUgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cy9pbmRleC5qc1xudmFyIHJlcXVpcmVfZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3N0YXJ0T2ZEYXkoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgdmFyIE1JTExJU0VDT05EU19JTl9EQVkgPSA4NjRlNTtcbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgc3RhcnRPZkRheUxlZnQgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShkaXJ0eURhdGVMZWZ0KTtcbiAgICAgIHZhciBzdGFydE9mRGF5UmlnaHQgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShkaXJ0eURhdGVSaWdodCk7XG4gICAgICB2YXIgdGltZXN0YW1wTGVmdCA9IHN0YXJ0T2ZEYXlMZWZ0LmdldFRpbWUoKSAtICgwLCBfaW5kZXguZGVmYXVsdCkoc3RhcnRPZkRheUxlZnQpO1xuICAgICAgdmFyIHRpbWVzdGFtcFJpZ2h0ID0gc3RhcnRPZkRheVJpZ2h0LmdldFRpbWUoKSAtICgwLCBfaW5kZXguZGVmYXVsdCkoc3RhcnRPZkRheVJpZ2h0KTtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKCh0aW1lc3RhbXBMZWZ0IC0gdGltZXN0YW1wUmlnaHQpIC8gTUlMTElTRUNPTkRTX0lOX0RBWSk7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbkRheXMvaW5kZXguanNcbnZhciByZXF1aXJlX2RpZmZlcmVuY2VJbkRheXMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluRGF5cy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBkaWZmZXJlbmNlSW5EYXlzO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9EYXRlKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2RpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlTG9jYWxBc2MoZGF0ZUxlZnQsIGRhdGVSaWdodCkge1xuICAgICAgdmFyIGRpZmYgPSBkYXRlTGVmdC5nZXRGdWxsWWVhcigpIC0gZGF0ZVJpZ2h0LmdldEZ1bGxZZWFyKCkgfHwgZGF0ZUxlZnQuZ2V0TW9udGgoKSAtIGRhdGVSaWdodC5nZXRNb250aCgpIHx8IGRhdGVMZWZ0LmdldERhdGUoKSAtIGRhdGVSaWdodC5nZXREYXRlKCkgfHwgZGF0ZUxlZnQuZ2V0SG91cnMoKSAtIGRhdGVSaWdodC5nZXRIb3VycygpIHx8IGRhdGVMZWZ0LmdldE1pbnV0ZXMoKSAtIGRhdGVSaWdodC5nZXRNaW51dGVzKCkgfHwgZGF0ZUxlZnQuZ2V0U2Vjb25kcygpIC0gZGF0ZVJpZ2h0LmdldFNlY29uZHMoKSB8fCBkYXRlTGVmdC5nZXRNaWxsaXNlY29uZHMoKSAtIGRhdGVSaWdodC5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRpZmY7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJbkRheXMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGF0ZUxlZnQgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRpcnR5RGF0ZUxlZnQpO1xuICAgICAgdmFyIGRhdGVSaWdodCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlUmlnaHQpO1xuICAgICAgdmFyIHNpZ24gPSBjb21wYXJlTG9jYWxBc2MoZGF0ZUxlZnQsIGRhdGVSaWdodCk7XG4gICAgICB2YXIgZGlmZmVyZW5jZSA9IE1hdGguYWJzKCgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGVMZWZ0LCBkYXRlUmlnaHQpKTtcbiAgICAgIGRhdGVMZWZ0LnNldERhdGUoZGF0ZUxlZnQuZ2V0RGF0ZSgpIC0gc2lnbiAqIGRpZmZlcmVuY2UpO1xuICAgICAgdmFyIGlzTGFzdERheU5vdEZ1bGwgPSBOdW1iZXIoY29tcGFyZUxvY2FsQXNjKGRhdGVMZWZ0LCBkYXRlUmlnaHQpID09PSAtc2lnbik7XG4gICAgICB2YXIgcmVzdWx0ID0gc2lnbiAqIChkaWZmZXJlbmNlIC0gaXNMYXN0RGF5Tm90RnVsbCk7XG4gICAgICByZXR1cm4gcmVzdWx0ID09PSAwID8gMCA6IHJlc3VsdDtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvY29uc3RhbnRzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9jb25zdGFudHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvY29uc3RhbnRzL2luZGV4LmpzXCIoZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLnNlY29uZHNJbk1pbnV0ZSA9IGV4cG9ydHMuc2Vjb25kc0luSG91ciA9IGV4cG9ydHMucXVhcnRlcnNJblllYXIgPSBleHBvcnRzLm1vbnRoc0luWWVhciA9IGV4cG9ydHMubW9udGhzSW5RdWFydGVyID0gZXhwb3J0cy5taW51dGVzSW5Ib3VyID0gZXhwb3J0cy5taW5UaW1lID0gZXhwb3J0cy5taWxsaXNlY29uZHNJblNlY29uZCA9IGV4cG9ydHMubWlsbGlzZWNvbmRzSW5Ib3VyID0gZXhwb3J0cy5taWxsaXNlY29uZHNJbk1pbnV0ZSA9IGV4cG9ydHMubWF4VGltZSA9IGV4cG9ydHMuZGF5c0luV2VlayA9IHZvaWQgMDtcbiAgICB2YXIgZGF5c0luV2VlayA9IDc7XG4gICAgZXhwb3J0cy5kYXlzSW5XZWVrID0gZGF5c0luV2VlaztcbiAgICB2YXIgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDFlMztcbiAgICBleHBvcnRzLm1heFRpbWUgPSBtYXhUaW1lO1xuICAgIHZhciBtaWxsaXNlY29uZHNJbk1pbnV0ZSA9IDZlNDtcbiAgICBleHBvcnRzLm1pbGxpc2Vjb25kc0luTWludXRlID0gbWlsbGlzZWNvbmRzSW5NaW51dGU7XG4gICAgdmFyIG1pbGxpc2Vjb25kc0luSG91ciA9IDM2ZTU7XG4gICAgZXhwb3J0cy5taWxsaXNlY29uZHNJbkhvdXIgPSBtaWxsaXNlY29uZHNJbkhvdXI7XG4gICAgdmFyIG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMWUzO1xuICAgIGV4cG9ydHMubWlsbGlzZWNvbmRzSW5TZWNvbmQgPSBtaWxsaXNlY29uZHNJblNlY29uZDtcbiAgICB2YXIgbWluVGltZSA9IC1tYXhUaW1lO1xuICAgIGV4cG9ydHMubWluVGltZSA9IG1pblRpbWU7XG4gICAgdmFyIG1pbnV0ZXNJbkhvdXIgPSA2MDtcbiAgICBleHBvcnRzLm1pbnV0ZXNJbkhvdXIgPSBtaW51dGVzSW5Ib3VyO1xuICAgIHZhciBtb250aHNJblF1YXJ0ZXIgPSAzO1xuICAgIGV4cG9ydHMubW9udGhzSW5RdWFydGVyID0gbW9udGhzSW5RdWFydGVyO1xuICAgIHZhciBtb250aHNJblllYXIgPSAxMjtcbiAgICBleHBvcnRzLm1vbnRoc0luWWVhciA9IG1vbnRoc0luWWVhcjtcbiAgICB2YXIgcXVhcnRlcnNJblllYXIgPSA0O1xuICAgIGV4cG9ydHMucXVhcnRlcnNJblllYXIgPSBxdWFydGVyc0luWWVhcjtcbiAgICB2YXIgc2Vjb25kc0luSG91ciA9IDM2MDA7XG4gICAgZXhwb3J0cy5zZWNvbmRzSW5Ib3VyID0gc2Vjb25kc0luSG91cjtcbiAgICB2YXIgc2Vjb25kc0luTWludXRlID0gNjA7XG4gICAgZXhwb3J0cy5zZWNvbmRzSW5NaW51dGUgPSBzZWNvbmRzSW5NaW51dGU7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9kaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcztcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvRGF0ZSgpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMoZGF0ZUxlZnQsIGRhdGVSaWdodCkge1xuICAgICAgKDAsIF9pbmRleDIuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGVMZWZ0KS5nZXRUaW1lKCkgLSAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGVSaWdodCkuZ2V0VGltZSgpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3JvdW5kaW5nTWV0aG9kcy9pbmRleC5qc1xudmFyIHJlcXVpcmVfcm91bmRpbmdNZXRob2RzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcm91bmRpbmdNZXRob2RzL2luZGV4LmpzXCIoZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmdldFJvdW5kaW5nTWV0aG9kID0gZ2V0Um91bmRpbmdNZXRob2Q7XG4gICAgdmFyIHJvdW5kaW5nTWFwID0ge1xuICAgICAgY2VpbDogTWF0aC5jZWlsLFxuICAgICAgcm91bmQ6IE1hdGgucm91bmQsXG4gICAgICBmbG9vcjogTWF0aC5mbG9vcixcbiAgICAgIHRydW5jOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPCAwID8gTWF0aC5jZWlsKHZhbHVlKSA6IE1hdGguZmxvb3IodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGRlZmF1bHRSb3VuZGluZ01ldGhvZCA9IFwidHJ1bmNcIjtcbiAgICBmdW5jdGlvbiBnZXRSb3VuZGluZ01ldGhvZChtZXRob2QpIHtcbiAgICAgIHJldHVybiBtZXRob2QgPyByb3VuZGluZ01hcFttZXRob2RdIDogcm91bmRpbmdNYXBbZGVmYXVsdFJvdW5kaW5nTWV0aG9kXTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluSG91cnMvaW5kZXguanNcbnZhciByZXF1aXJlX2RpZmZlcmVuY2VJbkhvdXJzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbkhvdXJzL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZGVmYXVsdCA9IGRpZmZlcmVuY2VJbkhvdXJzO1xuICAgIHZhciBfaW5kZXggPSByZXF1aXJlX2NvbnN0YW50cygpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2RpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcygpKTtcbiAgICB2YXIgX2luZGV4MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9yZXF1aXJlZEFyZ3MoKSk7XG4gICAgdmFyIF9pbmRleDQgPSByZXF1aXJlX3JvdW5kaW5nTWV0aG9kcygpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluSG91cnMoZGF0ZUxlZnQsIGRhdGVSaWdodCwgb3B0aW9ucykge1xuICAgICAgKDAsIF9pbmRleDMuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkaWZmID0gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkgLyBfaW5kZXgubWlsbGlzZWNvbmRzSW5Ib3VyO1xuICAgICAgcmV0dXJuICgwLCBfaW5kZXg0LmdldFJvdW5kaW5nTWV0aG9kKShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucm91bmRpbmdNZXRob2QpKGRpZmYpO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5NaW51dGVzL2luZGV4LmpzXG52YXIgcmVxdWlyZV9kaWZmZXJlbmNlSW5NaW51dGVzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJbk1pbnV0ZXMvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gZGlmZmVyZW5jZUluTWludXRlcztcbiAgICB2YXIgX2luZGV4ID0gcmVxdWlyZV9jb25zdGFudHMoKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9kaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gcmVxdWlyZV9yb3VuZGluZ01ldGhvZHMoKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJbk1pbnV0ZXMoZGF0ZUxlZnQsIGRhdGVSaWdodCwgb3B0aW9ucykge1xuICAgICAgKDAsIF9pbmRleDMuZGVmYXVsdCkoMiwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBkaWZmID0gKDAsIF9pbmRleDIuZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkgLyBfaW5kZXgubWlsbGlzZWNvbmRzSW5NaW51dGU7XG4gICAgICByZXR1cm4gKDAsIF9pbmRleDQuZ2V0Um91bmRpbmdNZXRob2QpKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yb3VuZGluZ01ldGhvZCkoZGlmZik7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2RpZmZlcmVuY2VJblNlY29uZHMvaW5kZXguanNcbnZhciByZXF1aXJlX2RpZmZlcmVuY2VJblNlY29uZHMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluU2Vjb25kcy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBkaWZmZXJlbmNlSW5TZWNvbmRzO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICB2YXIgX2luZGV4MyA9IHJlcXVpcmVfcm91bmRpbmdNZXRob2RzKCk7XG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5TZWNvbmRzKGRhdGVMZWZ0LCBkYXRlUmlnaHQsIG9wdGlvbnMpIHtcbiAgICAgICgwLCBfaW5kZXgyLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgZGlmZiA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCkgLyAxZTM7XG4gICAgICByZXR1cm4gKDAsIF9pbmRleDMuZ2V0Um91bmRpbmdNZXRob2QpKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yb3VuZGluZ01ldGhvZCkoZGlmZik7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N1YkRheXMvaW5kZXguanNcbnZhciByZXF1aXJlX3N1YkRheXMgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3ViRGF5cy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBzdWJEYXlzO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfdG9JbnRlZ2VyKCkpO1xuICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2FkZERheXMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3ViRGF5cyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gICAgICAoMCwgX2luZGV4My5kZWZhdWx0KSgyLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGFtb3VudCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlBbW91bnQpO1xuICAgICAgcmV0dXJuICgwLCBfaW5kZXgyLmRlZmF1bHQpKGRpcnR5RGF0ZSwgLWFtb3VudCk7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N1Yk1vbnRocy9pbmRleC5qc1xudmFyIHJlcXVpcmVfc3ViTW9udGhzID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N1Yk1vbnRocy9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBzdWJNb250aHM7XG4gICAgdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0ludGVnZXIoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfYWRkTW9udGhzKCkpO1xuICAgIHZhciBfaW5kZXgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3JlcXVpcmVkQXJncygpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1Yk1vbnRocyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gICAgICAoMCwgX2luZGV4My5kZWZhdWx0KSgyLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGFtb3VudCA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlBbW91bnQpO1xuICAgICAgcmV0dXJuICgwLCBfaW5kZXgyLmRlZmF1bHQpKGRpcnR5RGF0ZSwgLWFtb3VudCk7XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N1Yi9pbmRleC5qc1xudmFyIHJlcXVpcmVfc3ViID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N1Yi9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6IHRydWVcbiAgICB9KTtcbiAgICBleHBvcnRzLmRlZmF1bHQgPSBzdWIyO1xuICAgIHZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfc3ViRGF5cygpKTtcbiAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9zdWJNb250aHMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3RvSW50ZWdlcigpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YjIoZGF0ZSwgZHVyYXRpb24pIHtcbiAgICAgICgwLCBfaW5kZXgzLmRlZmF1bHQpKDIsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoIWR1cmF0aW9uIHx8IHR5cGVvZiBkdXJhdGlvbiAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgICB2YXIgeWVhcnMgPSBkdXJhdGlvbi55ZWFycyA/ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGR1cmF0aW9uLnllYXJzKSA6IDA7XG4gICAgICB2YXIgbW9udGhzID0gZHVyYXRpb24ubW9udGhzID8gKDAsIF9pbmRleDQuZGVmYXVsdCkoZHVyYXRpb24ubW9udGhzKSA6IDA7XG4gICAgICB2YXIgd2Vla3MgPSBkdXJhdGlvbi53ZWVrcyA/ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGR1cmF0aW9uLndlZWtzKSA6IDA7XG4gICAgICB2YXIgZGF5cyA9IGR1cmF0aW9uLmRheXMgPyAoMCwgX2luZGV4NC5kZWZhdWx0KShkdXJhdGlvbi5kYXlzKSA6IDA7XG4gICAgICB2YXIgaG91cnMgPSBkdXJhdGlvbi5ob3VycyA/ICgwLCBfaW5kZXg0LmRlZmF1bHQpKGR1cmF0aW9uLmhvdXJzKSA6IDA7XG4gICAgICB2YXIgbWludXRlcyA9IGR1cmF0aW9uLm1pbnV0ZXMgPyAoMCwgX2luZGV4NC5kZWZhdWx0KShkdXJhdGlvbi5taW51dGVzKSA6IDA7XG4gICAgICB2YXIgc2Vjb25kcyA9IGR1cmF0aW9uLnNlY29uZHMgPyAoMCwgX2luZGV4NC5kZWZhdWx0KShkdXJhdGlvbi5zZWNvbmRzKSA6IDA7XG4gICAgICB2YXIgZGF0ZVdpdGhvdXRNb250aHMgPSAoMCwgX2luZGV4Mi5kZWZhdWx0KShkYXRlLCBtb250aHMgKyB5ZWFycyAqIDEyKTtcbiAgICAgIHZhciBkYXRlV2l0aG91dERheXMgPSAoMCwgX2luZGV4LmRlZmF1bHQpKGRhdGVXaXRob3V0TW9udGhzLCBkYXlzICsgd2Vla3MgKiA3KTtcbiAgICAgIHZhciBtaW51dGVzdG9TdWIgPSBtaW51dGVzICsgaG91cnMgKiA2MDtcbiAgICAgIHZhciBzZWNvbmRzdG9TdWIgPSBzZWNvbmRzICsgbWludXRlc3RvU3ViICogNjA7XG4gICAgICB2YXIgbXN0b1N1YiA9IHNlY29uZHN0b1N1YiAqIDFlMztcbiAgICAgIHZhciBmaW5hbERhdGUgPSBuZXcgRGF0ZShkYXRlV2l0aG91dERheXMuZ2V0VGltZSgpIC0gbXN0b1N1Yik7XG4gICAgICByZXR1cm4gZmluYWxEYXRlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMuZGVmYXVsdDtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pbnRlcnZhbFRvRHVyYXRpb24vaW5kZXguanNcbnZhciByZXF1aXJlX2ludGVydmFsVG9EdXJhdGlvbiA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pbnRlcnZhbFRvRHVyYXRpb24vaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgZXhwb3J0cy5kZWZhdWx0ID0gaW50ZXJ2YWxUb0R1cmF0aW9uMjtcbiAgICB2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2NvbXBhcmVBc2MoKSk7XG4gICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluWWVhcnMoKSk7XG4gICAgdmFyIF9pbmRleDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluTW9udGhzKCkpO1xuICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2RpZmZlcmVuY2VJbkRheXMoKSk7XG4gICAgdmFyIF9pbmRleDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluSG91cnMoKSk7XG4gICAgdmFyIF9pbmRleDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfZGlmZmVyZW5jZUluTWludXRlcygpKTtcbiAgICB2YXIgX2luZGV4NyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV9kaWZmZXJlbmNlSW5TZWNvbmRzKCkpO1xuICAgIHZhciBfaW5kZXg4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX2lzVmFsaWQoKSk7XG4gICAgdmFyIF9pbmRleDkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmVfcmVxdWlyZWRBcmdzKCkpO1xuICAgIHZhciBfaW5kZXgxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZV90b0RhdGUoKSk7XG4gICAgdmFyIF9pbmRleDExID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlX3N1YigpKTtcbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVydmFsVG9EdXJhdGlvbjIoX3JlZikge1xuICAgICAgdmFyIHN0YXJ0ID0gX3JlZi5zdGFydCwgZW5kID0gX3JlZi5lbmQ7XG4gICAgICAoMCwgX2luZGV4OS5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGRhdGVMZWZ0ID0gKDAsIF9pbmRleDEwLmRlZmF1bHQpKHN0YXJ0KTtcbiAgICAgIHZhciBkYXRlUmlnaHQgPSAoMCwgX2luZGV4MTAuZGVmYXVsdCkoZW5kKTtcbiAgICAgIGlmICghKDAsIF9pbmRleDguZGVmYXVsdCkoZGF0ZUxlZnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiU3RhcnQgRGF0ZSBpcyBpbnZhbGlkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCEoMCwgX2luZGV4OC5kZWZhdWx0KShkYXRlUmlnaHQpKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRW5kIERhdGUgaXMgaW52YWxpZFwiKTtcbiAgICAgIH1cbiAgICAgIHZhciBkdXJhdGlvbiA9IHtcbiAgICAgICAgeWVhcnM6IDAsXG4gICAgICAgIG1vbnRoczogMCxcbiAgICAgICAgZGF5czogMCxcbiAgICAgICAgaG91cnM6IDAsXG4gICAgICAgIG1pbnV0ZXM6IDAsXG4gICAgICAgIHNlY29uZHM6IDBcbiAgICAgIH07XG4gICAgICB2YXIgc2lnbiA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGF0ZUxlZnQsIGRhdGVSaWdodCk7XG4gICAgICBkdXJhdGlvbi55ZWFycyA9IE1hdGguYWJzKCgwLCBfaW5kZXgyLmRlZmF1bHQpKGRhdGVMZWZ0LCBkYXRlUmlnaHQpKTtcbiAgICAgIHZhciByZW1haW5pbmdNb250aHMgPSAoMCwgX2luZGV4MTEuZGVmYXVsdCkoZGF0ZUxlZnQsIHtcbiAgICAgICAgeWVhcnM6IHNpZ24gKiBkdXJhdGlvbi55ZWFyc1xuICAgICAgfSk7XG4gICAgICBkdXJhdGlvbi5tb250aHMgPSBNYXRoLmFicygoMCwgX2luZGV4My5kZWZhdWx0KShyZW1haW5pbmdNb250aHMsIGRhdGVSaWdodCkpO1xuICAgICAgdmFyIHJlbWFpbmluZ0RheXMgPSAoMCwgX2luZGV4MTEuZGVmYXVsdCkocmVtYWluaW5nTW9udGhzLCB7XG4gICAgICAgIG1vbnRoczogc2lnbiAqIGR1cmF0aW9uLm1vbnRoc1xuICAgICAgfSk7XG4gICAgICBkdXJhdGlvbi5kYXlzID0gTWF0aC5hYnMoKDAsIF9pbmRleDQuZGVmYXVsdCkocmVtYWluaW5nRGF5cywgZGF0ZVJpZ2h0KSk7XG4gICAgICB2YXIgcmVtYWluaW5nSG91cnMgPSAoMCwgX2luZGV4MTEuZGVmYXVsdCkocmVtYWluaW5nRGF5cywge1xuICAgICAgICBkYXlzOiBzaWduICogZHVyYXRpb24uZGF5c1xuICAgICAgfSk7XG4gICAgICBkdXJhdGlvbi5ob3VycyA9IE1hdGguYWJzKCgwLCBfaW5kZXg1LmRlZmF1bHQpKHJlbWFpbmluZ0hvdXJzLCBkYXRlUmlnaHQpKTtcbiAgICAgIHZhciByZW1haW5pbmdNaW51dGVzID0gKDAsIF9pbmRleDExLmRlZmF1bHQpKHJlbWFpbmluZ0hvdXJzLCB7XG4gICAgICAgIGhvdXJzOiBzaWduICogZHVyYXRpb24uaG91cnNcbiAgICAgIH0pO1xuICAgICAgZHVyYXRpb24ubWludXRlcyA9IE1hdGguYWJzKCgwLCBfaW5kZXg2LmRlZmF1bHQpKHJlbWFpbmluZ01pbnV0ZXMsIGRhdGVSaWdodCkpO1xuICAgICAgdmFyIHJlbWFpbmluZ1NlY29uZHMgPSAoMCwgX2luZGV4MTEuZGVmYXVsdCkocmVtYWluaW5nTWludXRlcywge1xuICAgICAgICBtaW51dGVzOiBzaWduICogZHVyYXRpb24ubWludXRlc1xuICAgICAgfSk7XG4gICAgICBkdXJhdGlvbi5zZWNvbmRzID0gTWF0aC5hYnMoKDAsIF9pbmRleDcuZGVmYXVsdCkocmVtYWluaW5nU2Vjb25kcywgZGF0ZVJpZ2h0KSk7XG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfVxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0O1xuICB9XG59KTtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUzIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgZ2V0QmxvY2tDb2xsZWN0aW9uSWQsXG4gIGdldEJsb2NrUGFyZW50UGFnZSBhcyBnZXRCbG9ja1BhcmVudFBhZ2UyLFxuICBnZXRUZXh0Q29udGVudCBhcyBnZXRUZXh0Q29udGVudDRcbn0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgdXNlTG9jYWxTdG9yYWdlLCB1c2VXaW5kb3dTaXplIH0gZnJvbSBcInJlYWN0LXVzZVwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDIwIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0QmxvY2tJY29uLCBnZXRCbG9ja1RpdGxlIGFzIGdldEJsb2NrVGl0bGUzIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29udGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTggZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LXdyYXBwZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgYXMgcGFyc2VQYWdlSWQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCB7IGlzVXJsLCBmb3JtYXREYXRlLCBmb3JtYXROb3Rpb25EYXRlVGltZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL21hcC1pbWFnZS11cmwudHNcbnZhciBkZWZhdWx0TWFwSW1hZ2VVcmwgPSAodXJsLCBibG9jaykgPT4ge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICh1cmwuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb21cIikpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgdSA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAodS5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3NlY3VyZS5ub3Rpb24tc3RhdGljLmNvbVwiKSAmJiB1Lmhvc3RuYW1lLmVuZHNXaXRoKFwiLmFtYXpvbmF3cy5jb21cIikpIHtcbiAgICAgIGlmICh1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1DcmVkZW50aWFsXCIpICYmIHUuc2VhcmNoUGFyYW1zLmhhcyhcIlgtQW16LVNpZ25hdHVyZVwiKSAmJiB1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1BbGdvcml0aG1cIikpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VzXCIpKSB7XG4gICAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsfWA7XG4gIH1cbiAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VcIikgPyB1cmwgOiBgL2ltYWdlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YH1gO1xuICBjb25zdCBub3Rpb25JbWFnZVVybFYyID0gbmV3IFVSTCh1cmwpO1xuICBsZXQgdGFibGUgPSBibG9jay5wYXJlbnRfdGFibGUgPT09IFwic3BhY2VcIiA/IFwiYmxvY2tcIiA6IGJsb2NrLnBhcmVudF90YWJsZTtcbiAgaWYgKHRhYmxlID09PSBcImNvbGxlY3Rpb25cIiB8fCB0YWJsZSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICB0YWJsZSA9IFwiYmxvY2tcIjtcbiAgfVxuICBub3Rpb25JbWFnZVVybFYyLnNlYXJjaFBhcmFtcy5zZXQoXCJ0YWJsZVwiLCB0YWJsZSk7XG4gIG5vdGlvbkltYWdlVXJsVjIuc2VhcmNoUGFyYW1zLnNldChcImlkXCIsIGJsb2NrLmlkKTtcbiAgbm90aW9uSW1hZ2VVcmxWMi5zZWFyY2hQYXJhbXMuc2V0KFwiY2FjaGVcIiwgXCJ2MlwiKTtcbiAgdXJsID0gbm90aW9uSW1hZ2VVcmxWMi50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLy8gc3JjL21hcC1wYWdlLXVybC50c1xudmFyIGRlZmF1bHRNYXBQYWdlVXJsID0gKHJvb3RQYWdlSWQpID0+IChwYWdlSWQpID0+IHtcbiAgcGFnZUlkID0gKHBhZ2VJZCB8fCBcIlwiKS5yZXBsYWNlKC8tL2csIFwiXCIpO1xuICBpZiAocm9vdFBhZ2VJZCAmJiBwYWdlSWQgPT09IHJvb3RQYWdlSWQpIHtcbiAgICByZXR1cm4gXCIvXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAvJHtwYWdlSWR9YDtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzLnRzXG52YXIgY3MgPSAoLi4uY2xhc3NlcykgPT4gY2xhc3Nlcy5maWx0ZXIoKGEpID0+ICEhYSkuam9pbihcIiBcIik7XG52YXIgZ2V0SGFzaEZyYWdtZW50VmFsdWUgPSAodXJsKSA9PiB7XG4gIHJldHVybiB1cmwuaW5jbHVkZXMoXCIjXCIpID8gdXJsLnJlcGxhY2UoL14uKygjLispJC8sIFwiJDFcIikgOiBcIlwiO1xufTtcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIHlvdXR1YmVEb21haW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcInlvdXR1LmJlXCIsXG4gIFwieW91dHViZS5jb21cIixcbiAgXCJ3d3cueW91dHViZS5jb21cIixcbiAgXCJ5b3V0dWJlLW5vY29va2llLmNvbVwiLFxuICBcInd3dy55b3V0dWJlLW5vY29va2llLmNvbVwiXG5dKTtcbnZhciBnZXRZb3V0dWJlSWQgPSAodXJsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBob3N0bmFtZSB9ID0gbmV3IFVSTCh1cmwpO1xuICAgIGlmICgheW91dHViZURvbWFpbnMuaGFzKGhvc3RuYW1lKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlZ0V4cCA9IC9eLiooeW91dHVcXC5iZVxcL3x2XFwvfHVcXC9cXHdcXC98ZW1iZWRcXC98d2F0Y2hcXD92PXwmdj0pKFteIyY/XSopLiovaTtcbiAgICBjb25zdCBtYXRjaCA9IHVybC5tYXRjaChyZWdFeHApO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXS5sZW5ndGggPT0gMTEpIHtcbiAgICAgIHJldHVybiBtYXRjaFsyXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2ljb25zL3R5cGUtZ2l0aHViLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlR2l0SHViKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMjYwIDI2MFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTI4LjAwMTA2LDAgQzU3LjMxNzI5MjYsMCAwLDU3LjMwNjY5NDIgMCwxMjguMDAxMDYgQzAsMTg0LjU1NTI4MSAzNi42NzYxOTk3LDIzMi41MzU1NDIgODcuNTM0OTM3LDI0OS40NjA4OTkgQzkzLjkzMjAyMjMsMjUwLjY0NTc3OSA5Ni4yODA1ODgsMjQ2LjY4NDE2NSA5Ni4yODA1ODgsMjQzLjMwMzMzMyBDOTYuMjgwNTg4LDI0MC4yNTEwNDUgOTYuMTYxODg3OCwyMzAuMTY3ODk5IDk2LjEwNjc3NywyMTkuNDcyMTc2IEM2MC40OTY3NTg1LDIyNy4yMTUyMzUgNTIuOTgyNjIwNywyMDQuMzY5NzEyIDUyLjk4MjYyMDcsMjA0LjM2OTcxMiBDNDcuMTU5OTU4NCwxODkuNTc0NTk4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IEMyNy4xNTY4Nzg1LDE3Ny42OTYxMTMgMzkuNjQ1ODIwNiwxNzcuODU5MzI1IDM5LjY0NTgyMDYsMTc3Ljg1OTMyNSBDNTIuNDk5MzQxOSwxNzguNzYyMjkzIDU5LjI2NzM2NSwxOTEuMDQ5ODcgNTkuMjY3MzY1LDE5MS4wNDk4NyBDNzAuNjgzNzY3NSwyMTAuNjE4NDIzIDg5LjIxMTU3NTMsMjA0Ljk2MTA5MyA5Ni41MTU4Njg1LDIwMS42OTA0ODIgQzk3LjY2NDcxNTUsMTkzLjQxNzUxMiAxMDAuOTgxOTU5LDE4Ny43NzA3OCAxMDQuNjQyNTgzLDE4NC41NzQzNTcgQzc2LjIxMTc5OSwxODEuMzM3NjYgNDYuMzI0ODE5LDE3MC4zNjIxNDQgNDYuMzI0ODE5LDEyMS4zMTU3MDIgQzQ2LjMyNDgxOSwxMDcuMzQwODg5IDUxLjMyNTA1ODgsOTUuOTIyMzY4MiA1OS41MTMyNDM3LDg2Ljk1ODM5MzcgQzU4LjE4NDIyNjgsODMuNzM0NDE1MiA1My44MDI5MjI5LDcwLjcxNTU2MiA2MC43NTMyMzU0LDUzLjA4NDM2MzYgQzYwLjc1MzIzNTQsNTMuMDg0MzYzNiA3MS41MDE5NTAxLDQ5LjY0NDE4MTMgOTUuOTYyNjQxMiw2Ni4yMDQ5NTk1IEMxMDYuMTcyOTY3LDYzLjM2ODg3NiAxMTcuMTIzMDQ3LDYxLjk0NjU5NDkgMTI4LjAwMTA2LDYxLjg5Nzg0MzIgQzEzOC44NzkwNzMsNjEuOTQ2NTk0OSAxNDkuODM3NjMyLDYzLjM2ODg3NiAxNjAuMDY3MDMzLDY2LjIwNDk1OTUgQzE4NC40OTgwNSw0OS42NDQxODEzIDE5NS4yMzE5MjYsNTMuMDg0MzYzNiAxOTUuMjMxOTI2LDUzLjA4NDM2MzYgQzIwMi4xOTkxOTcsNzAuNzE1NTYyIDE5Ny44MTU3NzMsODMuNzM0NDE1MiAxOTYuNDg2NzU2LDg2Ljk1ODM5MzcgQzIwNC42OTQwMTgsOTUuOTIyMzY4MiAyMDkuNjYwMzQzLDEwNy4zNDA4ODkgMjA5LjY2MDM0MywxMjEuMzE1NzAyIEMyMDkuNjYwMzQzLDE3MC40Nzg3MjUgMTc5LjcxNjEzMywxODEuMzAzNzQ3IDE1MS4yMTMyODEsMTg0LjQ3MjYxNCBDMTU1LjgwNDQzLDE4OC40NDQ4MjggMTU5Ljg5NTM0MiwxOTYuMjM0NTE4IDE1OS44OTUzNDIsMjA4LjE3NjU5MyBDMTU5Ljg5NTM0MiwyMjUuMzAzMzE3IDE1OS43NDY5NjgsMjM5LjA4NzM2MSAxNTkuNzQ2OTY4LDI0My4zMDMzMzMgQzE1OS43NDY5NjgsMjQ2LjcwOTYwMSAxNjIuMDUxMDIsMjUwLjcwMDg5IDE2OC41MzkyNSwyNDkuNDQzOTQxIEMyMTkuMzcwNDMyLDIzMi40OTk1MDcgMjU2LDE4NC41MzYyMDQgMjU2LDEyOC4wMDEwNiBDMjU2LDU3LjMwNjY5NDIgMTk4LjY5MTE4NywwIDEyOC4wMDEwNiwwIFogTTQ3Ljk0MDU1OTMsMTgyLjM0MDIxMiBDNDcuNjU4NjQ2NSwxODIuOTc2MTA1IDQ2LjY1ODE3NDUsMTgzLjE2Njg3MyA0NS43NDY3Mjc3LDE4Mi43MzAyMjcgQzQ0LjgxODMyMzUsMTgyLjMxMjY1NiA0NC4yOTY4OTE0LDE4MS40NDU3MjIgNDQuNTk3ODgwOCwxODAuODA3NzEgQzQ0Ljg3MzQzNDQsMTgwLjE1MjczOSA0NS44NzYwMjYsMTc5Ljk3MDQ1IDQ2LjgwMjMxMDMsMTgwLjQwOTIxNiBDNDcuNzMyODM0MiwxODAuODI2Nzg2IDQ4LjI2Mjc0NTEsMTgxLjcwMjE5OSA0Ny45NDA1NTkzLDE4Mi4zNDAyMTIgWiBNNTQuMjM2Nzg5MiwxODcuOTU4MjU0IEM1My42MjYzMzE4LDE4OC41MjQxOTkgNTIuNDMyOTcyMywxODguMjYxMzYzIDUxLjYyMzI2ODIsMTg3LjM2Njg3NCBDNTAuNzg2MDA4OCwxODYuNDc0NTA0IDUwLjYyOTE1NTMsMTg1LjI4MTE0NCA1MS4yNDgwOTEyLDE4NC43MDY3MiBDNTEuODc3NjI1NCwxODQuMTQwNzc1IDUzLjAzNDk1MTIsMTg0LjQwNTczMSA1My44NzQzMzAyLDE4NS4yOTgxMDEgQzU0LjcxMTU4OTIsMTg2LjIwMTA2OSA1NC44NzQ4MDE5LDE4Ny4zODU5NSA1NC4yMzY3ODkyLDE4Ny45NTgyNTQgWiBNNTguNTU2MjQxMywxOTUuMTQ2MzQ3IEM1Ny43NzE5NzMyLDE5NS42OTEwOTYgNTYuNDg5NTg4NiwxOTUuMTgwMjYxIDU1LjY5Njg0MTcsMTk0LjA0MjAxMyBDNTQuOTEyNTczMywxOTIuOTAzNzY0IDU0LjkxMjU3MzMsMTkxLjUzODcxMyA1NS43MTM3OTksMTkwLjk5MTg0NSBDNTYuNTA4NjY1MSwxOTAuNDQ0OTc3IDU3Ljc3MTk3MzIsMTkwLjkzNjczNSA1OC41NzUzMTgxLDE5Mi4wNjY1MDUgQzU5LjM1NzQ2NjksMTkzLjIyMzgzIDU5LjM1NzQ2NjksMTk0LjU4ODg4IDU4LjU1NjI0MTMsMTk1LjE0NjM0NyBaIE02NS44NjEzNTkyLDIwMy40NzExNzQgQzY1LjE1OTc1NzEsMjA0LjI0NDg0NiA2My42NjU0MDgzLDIwNC4wMzcxMiA2Mi41NzE2NzE3LDIwMi45ODE1MzggQzYxLjQ1MjQ5OTksMjAxLjk0OTI3IDYxLjE0MDkxMjIsMjAwLjQ4NDU5NiA2MS44NDQ2MzQxLDE5OS43MTA5MjYgQzYyLjU1NDcxNDYsMTk4LjkzNTEzNyA2NC4wNTc1NDIyLDE5OS4xNTM0NiA2NS4xNTk3NTcxLDIwMC4yMDA1NjQgQzY2LjI3MDQ1MDYsMjAxLjIzMDcxMiA2Ni42MDk1OTM2LDIwMi43MDU5ODQgNjUuODYxMzU5MiwyMDMuNDcxMTc0IFogTTc1LjMwMjUxNTEsMjA2LjI4MTU0MiBDNzQuOTkzMDQ3NCwyMDcuMjg0MTM0IDczLjU1MzgwOSwyMDcuNzM5ODU3IDcyLjEwMzk3MjQsMjA3LjMxMzgwOSBDNzAuNjU2MjU1NiwyMDYuODc1MDQzIDY5LjcwODc3NDgsMjA1LjcwMDc2MSA3MC4wMDEyODU3LDIwNC42ODc1NzEgQzcwLjMwMjI3NSwyMDMuNjc4NjIxIDcxLjc0Nzg3MjEsMjAzLjIwMzgyIDczLjIwODMwNjksMjAzLjY1OTU0MyBDNzQuNjUzOTA0MSwyMDQuMDk2MTkgNzUuNjAzNTA0OCwyMDUuMjYxOTk0IDc1LjMwMjUxNTEsMjA2LjI4MTU0MiBaIE04Ni4wNDY5NDcsMjA3LjQ3MzYyNyBDODYuMDgyOTgwNiwyMDguNTI5MjA5IDg0Ljg1MzU4NzEsMjA5LjQwNDYyMiA4My4zMzE2ODI5LDIwOS40MjM3IEM4MS44MDEzLDIwOS40NTc2MTQgODAuNTYzNDI4LDIwOC42MDMzOTggODAuNTQ2NDcwOCwyMDcuNTY0NzcyIEM4MC41NDY0NzA4LDIwNi40OTg1OTEgODEuNzQ4MzA4OCwyMDUuNjMxNjU3IDgzLjI3ODY5MTcsMjA1LjYwNjIyMSBDODQuODAwNTk2MiwyMDUuNTc2NTQ2IDg2LjA0Njk0NywyMDYuNDI0NDAzIDg2LjA0Njk0NywyMDcuNDczNjI3IFogTTk2LjYwMjE0NzEsMjA3LjA2OTAyMyBDOTYuNzg0NDM2NiwyMDguMDk5MTcxIDk1LjcyNjczNDEsMjA5LjE1Njg3MiA5NC4yMTU0MjgsMjA5LjQzODc4NSBDOTIuNzI5NTU3NywyMDkuNzEwMDk5IDkxLjM1MzkwODYsMjA5LjA3NDIwNiA5MS4xNjUyNjAzLDIwOC4wNTI1MzggQzkwLjk4MDg1MTUsMjA2Ljk5Njk1NSA5Mi4wNTc2MzA2LDIwNS45MzkyNTMgOTMuNTQxMzgxMywyMDUuNjY1ODIgQzk1LjA1NDgwNywyMDUuNDAyOTg0IDk2LjQwOTI1OTYsMjA2LjAyMTkxOSA5Ni42MDIxNDcxLDIwNy4wNjkwMjMgWlwiLFxuICAgIGZpbGw6IFwiIzE2MTYxNFwiXG4gIH0pKSk7XG59XG52YXIgdHlwZV9naXRodWJfZGVmYXVsdCA9IFN2Z1R5cGVHaXRIdWI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbnZhciBFT0kgPSAoeyBibG9jaywgaW5saW5lLCBjbGFzc05hbWUgfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgeyBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHsgb3JpZ2luYWxfdXJsLCBhdHRyaWJ1dGVzLCBkb21haW4gfSA9IChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suZm9ybWF0KSB8fCB7fTtcbiAgaWYgKCFvcmlnaW5hbF91cmwgfHwgIWF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB0aXRsZSA9IChfYSA9IGF0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5pZCA9PT0gXCJ0aXRsZVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlc1swXTtcbiAgbGV0IG93bmVyID0gKF9iID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcIm93bmVyXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWVzWzBdO1xuICBjb25zdCBsYXN0VXBkYXRlZEF0ID0gKF9jID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcInVwZGF0ZWRfYXRcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZXNbMF07XG4gIGNvbnN0IGxhc3RVcGRhdGVkID0gbGFzdFVwZGF0ZWRBdCA/IGZvcm1hdE5vdGlvbkRhdGVUaW1lKGxhc3RVcGRhdGVkQXQpIDogbnVsbDtcbiAgbGV0IGV4dGVybmFsSW1hZ2U7XG4gIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgY2FzZSBcImdpdGh1Yi5jb21cIjpcbiAgICAgIGV4dGVybmFsSW1hZ2UgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQodHlwZV9naXRodWJfZGVmYXVsdCwgbnVsbCk7XG4gICAgICBpZiAob3duZXIpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBvd25lci5zcGxpdChcIi9cIik7XG4gICAgICAgIG93bmVyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFVuc3VwcG9ydGVkIGV4dGVybmFsX29iamVjdF9pbnN0YW5jZSBkb21haW4gXCIke2RvbWFpbn1cImAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYmxvY2ssIG51bGwsIDIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTGluaywge1xuICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgIGhyZWY6IG9yaWdpbmFsX3VybCxcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgXCJub3Rpb24tZXh0ZXJuYWxcIixcbiAgICAgIGlubGluZSA/IFwibm90aW9uLWV4dGVybmFsLW1lbnRpb25cIiA6IFwibm90aW9uLWV4dGVybmFsLWJsb2NrIG5vdGlvbi1yb3dcIixcbiAgICAgIGNsYXNzTmFtZVxuICAgIClcbiAgfSwgZXh0ZXJuYWxJbWFnZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtaW1hZ2VcIlxuICB9LCBleHRlcm5hbEltYWdlKSwgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLWRlc2NyaXB0aW9uXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXRpdGxlXCJcbiAgfSwgdGl0bGUpLCAob3duZXIgfHwgbGFzdFVwZGF0ZWQpICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1zdWJ0aXRsZVwiXG4gIH0sIG93bmVyICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgb3duZXIpLCBvd25lciAmJiBsYXN0VXBkYXRlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIFwiIFxcdTIwMjIgXCIpLCBsYXN0VXBkYXRlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIFwiVXBkYXRlZCBcIiwgbGFzdFVwZGF0ZWQpKSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvdGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHBhcnNlUGFnZUlkIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9ncmFjZWZ1bC1pbWFnZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEltZyB9IGZyb20gXCJyZWFjdC1pbWFnZVwiO1xudmFyIEdyYWNlZnVsSW1hZ2UgPSAocHJvcHMpID0+IHtcbiAgaWYgKGlzQnJvd3Nlcikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoSW1nLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLXRpdGxlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0QmxvY2tUaXRsZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbnZhciBQYWdlVGl0bGVJbXBsID0gKF9hKSA9PiB7XG4gIHZhciBfYiA9IF9hLCB7IGJsb2NrLCBjbGFzc05hbWUsIGRlZmF1bHRJY29uIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1wiYmxvY2tcIiwgXCJjbGFzc05hbWVcIiwgXCJkZWZhdWx0SWNvblwiXSk7XG4gIHZhciBfYTIsIF9iMjtcbiAgY29uc3QgeyByZWNvcmRNYXAgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgaWYgKCFibG9jaylcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKGJsb2NrLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIiB8fCBibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld1wiKSB7XG4gICAgY29uc3QgdGl0bGUgPSBnZXRCbG9ja1RpdGxlKGJsb2NrLCByZWNvcmRNYXApO1xuICAgIGlmICghdGl0bGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0aXRsZURlY29yYXRpb24gPSBbW3RpdGxlXV07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1wYWdlLXRpdGxlXCIsIGNsYXNzTmFtZSlcbiAgICB9LCByZXN0KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgICBibG9jayxcbiAgICAgIGRlZmF1bHRJY29uLFxuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLWljb25cIlxuICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS10aXRsZS10ZXh0XCJcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgdmFsdWU6IHRpdGxlRGVjb3JhdGlvbixcbiAgICAgIGJsb2NrXG4gICAgfSkpKTtcbiAgfVxuICBpZiAoISgoX2EyID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50aXRsZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1wYWdlLXRpdGxlXCIsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQuY3JlYXRlRWxlbWVudChQYWdlSWNvbiwge1xuICAgIGJsb2NrLFxuICAgIGRlZmF1bHRJY29uLFxuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS10aXRsZS1pY29uXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS10aXRsZS10ZXh0XCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICB2YWx1ZTogKF9iMiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYjIudGl0bGUsXG4gICAgYmxvY2tcbiAgfSkpKTtcbn07XG52YXIgUGFnZVRpdGxlID0gUmVhY3Q0Lm1lbW8oUGFnZVRpdGxlSW1wbCk7XG5cbi8vIHNyYy9jb21wb25lbnRzL3RleHQudHN4XG52YXIgVGV4dCA9ICh7IHZhbHVlLCBibG9jaywgbGlua1Byb3BzLCBsaW5rUHJvdG9jb2wgfSkgPT4ge1xuICBjb25zdCB7IGNvbXBvbmVudHMsIHJlY29yZE1hcCwgbWFwUGFnZVVybCwgbWFwSW1hZ2VVcmwsIHJvb3REb21haW4gfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChSZWFjdDUuRnJhZ21lbnQsIG51bGwsIHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5tYXAoKFt0ZXh0LCBkZWNvcmF0aW9uc10sIGluZGV4KSA9PiB7XG4gICAgaWYgKCFkZWNvcmF0aW9ucykge1xuICAgICAgaWYgKHRleHQgPT09IFwiLFwiKSB7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgIHN0eWxlOiB7IHBhZGRpbmc6IFwiMC41ZW1cIiB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChSZWFjdDUuRnJhZ21lbnQsIHtcbiAgICAgICAgICBrZXk6IGluZGV4XG4gICAgICAgIH0sIHRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSBkZWNvcmF0aW9ucy5yZWR1Y2UoXG4gICAgICAoZWxlbWVudCwgZGVjb3JhdG9yKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHN3aXRjaCAoZGVjb3JhdG9yWzBdKSB7XG4gICAgICAgICAgY2FzZSBcInBcIjoge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZEJsb2NrID0gKF9hID0gcmVjb3JkTWFwLmJsb2NrW2Jsb2NrSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgICAgICAgICBpZiAoIWxpbmtlZEJsb2NrKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcInBcIiBtaXNzaW5nIGJsb2NrJywgYmxvY2tJZCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlua1wiLFxuICAgICAgICAgICAgICBocmVmOiBtYXBQYWdlVXJsKGJsb2NrSWQpXG4gICAgICAgICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgICAgIGJsb2NrOiBsaW5rZWRCbG9ja1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiXFx1MjAyM1wiOiB7XG4gICAgICAgICAgICBjb25zdCBsaW5rVHlwZSA9IGRlY29yYXRvclsxXVswXTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZGVjb3JhdG9yWzFdWzFdO1xuICAgICAgICAgICAgc3dpdGNoIChsaW5rVHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IChfYiA9IHJlY29yZE1hcC5ub3Rpb25fdXNlcltpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcIlxcdTIwMjNcIiBtaXNzaW5nIHVzZXInLCBpZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IFt1c2VyLmdpdmVuX25hbWUsIHVzZXIuZmFtaWx5X25hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KEdyYWNlZnVsSW1hZ2UsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdXNlclwiLFxuICAgICAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybCh1c2VyLnByb2ZpbGVfcGhvdG8sIGJsb2NrKSxcbiAgICAgICAgICAgICAgICAgIGFsdDogbmFtZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRCbG9jayA9IChfYyA9IHJlY29yZE1hcC5ibG9ja1tpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmtlZEJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXCJcXHUyMDIzXCIgbWlzc2luZyBibG9jaycsIGxpbmtUeXBlLCBpZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlua1wiLFxuICAgICAgICAgICAgICAgICAgaHJlZjogbWFwUGFnZVVybChpZClcbiAgICAgICAgICAgICAgICB9LCBsaW5rUHJvcHMpLCB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgICAgICAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrOiBsaW5rZWRCbG9ja1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IGBub3Rpb24tJHtkZWNvcmF0b3JbMV19YFxuICAgICAgICAgICAgfSwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJjb2RlXCIsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1pbmxpbmUtY29kZVwiXG4gICAgICAgICAgICB9LCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImJcIiwgbnVsbCwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJlbVwiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcInNcIiwgbnVsbCwgZWxlbWVudCk7XG4gICAgICAgICAgY2FzZSBcIl9cIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1pbmxpbmUtdW5kZXJzY29yZVwiXG4gICAgICAgICAgICB9LCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiZVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkVxdWF0aW9uLCB7XG4gICAgICAgICAgICAgIG1hdGg6IGRlY29yYXRvclsxXSxcbiAgICAgICAgICAgICAgaW5saW5lOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgY2FzZSBcImFcIjoge1xuICAgICAgICAgICAgY29uc3QgdiA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhuYW1lID0gdi5zdWJzdHIoMSk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlUGFnZUlkKHBhdGhuYW1lLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgICAgICAgICBpZiAoKHZbMF0gPT09IFwiL1wiIHx8IHYuaW5jbHVkZXMocm9vdERvbWFpbikpICYmIGlkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB2LmluY2x1ZGVzKHJvb3REb21haW4pID8gdiA6IGAke21hcFBhZ2VVcmwoaWQpfSR7Z2V0SGFzaEZyYWdtZW50VmFsdWUodil9YDtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgaHJlZlxuICAgICAgICAgICAgICB9LCBsaW5rUHJvcHMpLCBlbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5MaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgaHJlZjogbGlua1Byb3RvY29sID8gYCR7bGlua1Byb3RvY29sfToke2RlY29yYXRvclsxXX1gIDogZGVjb3JhdG9yWzFdXG4gICAgICAgICAgICAgIH0sIGxpbmtQcm9wcyksIGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZFwiOiB7XG4gICAgICAgICAgICBjb25zdCB2ID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHYgPT0gbnVsbCA/IHZvaWQgMCA6IHYudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSB2LnN0YXJ0X2RhdGU7XG4gICAgICAgICAgICAgIHJldHVybiBmb3JtYXREYXRlKHN0YXJ0RGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiZGF0ZXJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdi5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICBjb25zdCBlbmREYXRlID0gdi5lbmRfZGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGAke2Zvcm1hdERhdGUoc3RhcnREYXRlKX0gXFx1MjE5MiAke2Zvcm1hdERhdGUoZW5kRGF0ZSl9YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwidVwiOiB7XG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gKF9kID0gcmVjb3JkTWFwLm5vdGlvbl91c2VyW3VzZXJJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZC52YWx1ZTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1pc3NpbmcgdXNlclwiLCB1c2VySWQpO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBbdXNlci5naXZlbl9uYW1lLCB1c2VyLmZhbWlseV9uYW1lXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KEdyYWNlZnVsSW1hZ2UsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi11c2VyXCIsXG4gICAgICAgICAgICAgIHNyYzogbWFwSW1hZ2VVcmwodXNlci5wcm9maWxlX3Bob3RvLCBibG9jayksXG4gICAgICAgICAgICAgIGFsdDogbmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJlb2lcIjoge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsT2JqZWN0SW5zdGFuY2UgPSAoX2UgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZS52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoRU9JLCB7XG4gICAgICAgICAgICAgIGJsb2NrOiBleHRlcm5hbE9iamVjdEluc3RhbmNlLFxuICAgICAgICAgICAgICBpbmxpbmU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1bnN1cHBvcnRlZCB0ZXh0IGZvcm1hdFwiLCBkZWNvcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoUmVhY3Q1LkZyYWdtZW50LCBudWxsLCB0ZXh0KVxuICAgICk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChSZWFjdDUuRnJhZ21lbnQsIHtcbiAgICAgIGtleTogaW5kZXhcbiAgICB9LCBmb3JtYXR0ZWQpO1xuICB9KSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9sYXp5LWltYWdlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbm9ybWFsaXplVXJsIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgSW1hZ2VTdGF0ZSwgTGF6eUltYWdlRnVsbCB9IGZyb20gXCJyZWFjdC1sYXp5LWltYWdlc1wiO1xudmFyIExhenlJbWFnZSA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHNyYyxcbiAgICBhbHQsXG4gICAgY2xhc3NOYW1lLFxuICAgIHN0eWxlLFxuICAgIHpvb21hYmxlID0gZmFsc2UsXG4gICAgcHJpb3JpdHkgPSBmYWxzZSxcbiAgICBoZWlnaHRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJzcmNcIixcbiAgICBcImFsdFwiLFxuICAgIFwiY2xhc3NOYW1lXCIsXG4gICAgXCJzdHlsZVwiLFxuICAgIFwiem9vbWFibGVcIixcbiAgICBcInByaW9yaXR5XCIsXG4gICAgXCJoZWlnaHRcIlxuICBdKTtcbiAgdmFyIF9hMiwgX2IyLCBfYztcbiAgY29uc3QgeyByZWNvcmRNYXAsIHpvb20sIHByZXZpZXdJbWFnZXMsIGZvcmNlQ3VzdG9tSW1hZ2VzLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHpvb21SZWYgPSBSZWFjdDYudXNlUmVmKHpvb20gPyB6b29tLmNsb25lKCkgOiBudWxsKTtcbiAgY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlcyA/IChfYyA9IChfYTIgPSByZWNvcmRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IHJlY29yZE1hcC5wcmV2aWV3X2ltYWdlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMltzcmNdKSAhPSBudWxsID8gX2MgOiAoX2IyID0gcmVjb3JkTWFwID09IG51bGwgPyB2b2lkIDAgOiByZWNvcmRNYXAucHJldmlld19pbWFnZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYjJbbm9ybWFsaXplVXJsKHNyYyldIDogbnVsbDtcbiAgY29uc3Qgb25Mb2FkID0gUmVhY3Q2LnVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoem9vbWFibGUgJiYgKGUudGFyZ2V0LnNyYyB8fCBlLnRhcmdldC5zcmNzZXQpKSB7XG4gICAgICAgIGlmICh6b29tUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICA7XG4gICAgICAgICAgem9vbVJlZi5jdXJyZW50LmF0dGFjaChlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFt6b29tUmVmLCB6b29tYWJsZV1cbiAgKTtcbiAgY29uc3QgYXR0YWNoWm9vbSA9IFJlYWN0Ni51c2VDYWxsYmFjayhcbiAgICAoaW1hZ2UpID0+IHtcbiAgICAgIGlmICh6b29tUmVmLmN1cnJlbnQgJiYgaW1hZ2UpIHtcbiAgICAgICAgO1xuICAgICAgICB6b29tUmVmLmN1cnJlbnQuYXR0YWNoKGltYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFt6b29tUmVmXVxuICApO1xuICBjb25zdCBhdHRhY2hab29tUmVmID0gUmVhY3Q2LnVzZU1lbW8oXG4gICAgKCkgPT4gem9vbWFibGUgPyBhdHRhY2hab29tIDogdm9pZCAwLFxuICAgIFt6b29tYWJsZSwgYXR0YWNoWm9vbV1cbiAgKTtcbiAgaWYgKHByZXZpZXdJbWFnZSkge1xuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gcHJldmlld0ltYWdlLm9yaWdpbmFsSGVpZ2h0IC8gcHJldmlld0ltYWdlLm9yaWdpbmFsV2lkdGg7XG4gICAgaWYgKGNvbXBvbmVudHMuSW1hZ2UpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5JbWFnZSwge1xuICAgICAgICBzcmMsXG4gICAgICAgIGFsdCxcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgd2lkdGg6IHByZXZpZXdJbWFnZS5vcmlnaW5hbFdpZHRoLFxuICAgICAgICBoZWlnaHQ6IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgYmx1ckRhdGFVUkw6IHByZXZpZXdJbWFnZS5kYXRhVVJJQmFzZTY0LFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJibHVyXCIsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBvbkxvYWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KExhenlJbWFnZUZ1bGwsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgc3JjXG4gICAgfSwgcmVzdCksIHtcbiAgICAgIGV4cGVyaW1lbnRhbERlY29kZTogdHJ1ZVxuICAgIH0pLCAoeyBpbWFnZVN0YXRlLCByZWYgfSkgPT4ge1xuICAgICAgY29uc3QgaXNMb2FkZWQgPSBpbWFnZVN0YXRlID09PSBJbWFnZVN0YXRlLkxvYWRTdWNjZXNzO1xuICAgICAgY29uc3Qgd3JhcHBlclN0eWxlID0ge1xuICAgICAgICB3aWR0aDogXCIxMDAlXCJcbiAgICAgIH07XG4gICAgICBjb25zdCBpbWdTdHlsZSA9IHt9O1xuICAgICAgaWYgKGhlaWdodCkge1xuICAgICAgICB3cmFwcGVyU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW1nU3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIHdyYXBwZXJTdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7YXNwZWN0UmF0aW8gKiAxMDB9JWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICBcImxhenktaW1hZ2Utd3JhcHBlclwiLFxuICAgICAgICAgIGlzTG9hZGVkICYmIFwibGF6eS1pbWFnZS1sb2FkZWRcIixcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKSxcbiAgICAgICAgc3R5bGU6IHdyYXBwZXJTdHlsZVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxhenktaW1hZ2UtcHJldmlld1wiLFxuICAgICAgICBzcmM6IHByZXZpZXdJbWFnZS5kYXRhVVJJQmFzZTY0LFxuICAgICAgICBhbHQsXG4gICAgICAgIHJlZixcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCJcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibGF6eS1pbWFnZS1yZWFsXCIsXG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICByZWY6IGF0dGFjaFpvb21SZWYsXG4gICAgICAgIHN0eWxlOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3R5bGUpLCBpbWdTdHlsZSksXG4gICAgICAgIHdpZHRoOiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxIZWlnaHQsXG4gICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCIsXG4gICAgICAgIGxvYWRpbmc6IFwibGF6eVwiXG4gICAgICB9KSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGNvbXBvbmVudHMuSW1hZ2UgJiYgZm9yY2VDdXN0b21JbWFnZXMpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5JbWFnZSwge1xuICAgICAgICBzcmMsXG4gICAgICAgIGFsdCxcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZSxcbiAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBvbkxvYWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgcmVmOiBhdHRhY2hab29tUmVmLFxuICAgICAgbG9hZGluZzogXCJsYXp5XCIsXG4gICAgICBkZWNvZGluZzogXCJhc3luY1wiXG4gICAgfSwgcmVzdCkpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9oZWFkZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDExIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0UGFnZUJyZWFkY3J1bWJzIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgdXNlSG90a2V5cyB9IGZyb20gXCJyZWFjdC1ob3RrZXlzLWhvb2tcIjtcblxuLy8gc3JjL2ljb25zL3NlYXJjaC1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3IGZyb20gXCJyZWFjdFwiO1xudmFyIFNlYXJjaEljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKSxcbiAgICB2aWV3Qm94OiBcIjAgMCAxNyAxN1wiXG4gIH0sIHJlc3QpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk02Ljc4MDI3IDEzLjY3MjlDOC4yNDgwNSAxMy42NzI5IDkuNjAxNTYgMTMuMTk4MiAxMC43MDkgMTIuNDA3MkwxNC44NzUgMTYuNTczMkMxNS4wNjg0IDE2Ljc2NjYgMTUuMzIzMiAxNi44NjMzIDE1LjU5NTcgMTYuODYzM0MxNi4xNjcgMTYuODYzMyAxNi41NzEzIDE2LjQyMzggMTYuNTcxMyAxNS44NjEzQzE2LjU3MTMgMTUuNTk3NyAxNi40ODM0IDE1LjM1MTYgMTYuMjkgMTUuMTU4MkwxMi4xNTA0IDExLjAwOThDMTMuMDIwNSA5Ljg2NzE5IDEzLjUzOTEgOC40NTIxNSAxMy41MzkxIDYuOTE0MDZDMTMuNTM5MSAzLjE5NjI5IDEwLjQ5OCAwLjE1NTI3MyA2Ljc4MDI3IDAuMTU1MjczQzMuMDYyNSAwLjE1NTI3MyAwLjAyMTQ4NDQgMy4xOTYyOSAwLjAyMTQ4NDQgNi45MTQwNkMwLjAyMTQ4NDQgMTAuNjMxOCAzLjA2MjUgMTMuNjcyOSA2Ljc4MDI3IDEzLjY3MjlaTTYuNzgwMjcgMTIuMjEzOUMzLjg3OTg4IDEyLjIxMzkgMS40ODA0NyA5LjgxNDQ1IDEuNDgwNDcgNi45MTQwNkMxLjQ4MDQ3IDQuMDEzNjcgMy44Nzk4OCAxLjYxNDI2IDYuNzgwMjcgMS42MTQyNkM5LjY4MDY2IDEuNjE0MjYgMTIuMDgwMSA0LjAxMzY3IDEyLjA4MDEgNi45MTQwNkMxMi4wODAxIDkuODE0NDUgOS42ODA2NiAxMi4yMTM5IDYuNzgwMjcgMTIuMjEzOVpcIlxuICB9KSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9zZWFyY2gtZGlhbG9nLnRzeFxudmFyIGltcG9ydF9sb2Rhc2ggPSBfX3RvRVNNKHJlcXVpcmVfbG9kYXNoKCksIDEpO1xuaW1wb3J0ICogYXMgUmVhY3QxMCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldEJsb2NrUGFyZW50UGFnZSwgZ2V0QmxvY2tUaXRsZSBhcyBnZXRCbG9ja1RpdGxlMiB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2ljb25zL2NsZWFyLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDggZnJvbSBcInJlYWN0XCI7XG52YXIgQ2xlYXJJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDMwIDMwXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTE1LDBDNi43MTYsMCwwLDYuNzE2LDAsMTVzNi43MTYsMTUsMTUsMTVzMTUtNi43MTYsMTUtMTVTMjMuMjg0LDAsMTUsMHogTTIyLDIwLjZMMjAuNiwyMkwxNSwxNi40TDkuNCwyMkw4LDIwLjZsNS42LTUuNiBMOCw5LjRMOS40LDhsNS42LDUuNkwyMC42LDhMMjIsOS40TDE2LjQsMTVMMjIsMjAuNnpcIlxuICB9KSk7XG59O1xuXG4vLyBzcmMvaWNvbnMvbG9hZGluZy1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q5IGZyb20gXCJyZWFjdFwiO1xudmFyIExvYWRpbmdJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWljb25cIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwge1xuICAgIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcImRlZnNcIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwibGluZWFyR3JhZGllbnRcIiwge1xuICAgIHgxOiBcIjI4LjE1NDI5NjklXCIsXG4gICAgeTE6IFwiNjMuNzQwMjM0NCVcIixcbiAgICB4MjogXCI3NC42Mjg5MDYyJVwiLFxuICAgIHkyOiBcIjE3Ljc4MzIwMzElXCIsXG4gICAgaWQ6IFwibGluZWFyR3JhZGllbnQtMVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcInN0b3BcIiwge1xuICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgb2Zmc2V0OiBcIjAlXCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcInN0b3BcIiwge1xuICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDApXCIsXG4gICAgc3RvcE9wYWNpdHk6IFwiMFwiLFxuICAgIG9mZnNldDogXCIxMDAlXCJcbiAgfSkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgaWQ6IFwiUGFnZS0xXCIsXG4gICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICBzdHJva2VXaWR0aDogXCIxXCIsXG4gICAgZmlsbDogXCJub25lXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtMjM2LjAwMDAwMCwgLTI4Ni4wMDAwMDApXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgyMzguMDAwMDAwLCAyODYuMDAwMDAwKVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcImNpcmNsZVwiLCB7XG4gICAgaWQ6IFwiT3ZhbC0yXCIsXG4gICAgc3Ryb2tlOiBcInVybCgjbGluZWFyR3JhZGllbnQtMSlcIixcbiAgICBzdHJva2VXaWR0aDogXCI0XCIsXG4gICAgY3g6IFwiMTBcIixcbiAgICBjeTogXCIxMlwiLFxuICAgIHI6IFwiMTBcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTAsMiBDNC40NzcxNTI1LDIgMCw2LjQ3NzE1MjUgMCwxMlwiLFxuICAgIGlkOiBcIk92YWwtMlwiLFxuICAgIHN0cm9rZTogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgc3Ryb2tlV2lkdGg6IFwiNFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICBpZDogXCJSZWN0YW5nbGUtMVwiLFxuICAgIGZpbGw6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAxKVwiLFxuICAgIHg6IFwiOFwiLFxuICAgIHk6IFwiMFwiLFxuICAgIHdpZHRoOiBcIjRcIixcbiAgICBoZWlnaHQ6IFwiNFwiLFxuICAgIHJ4OiBcIjhcIlxuICB9KSkpKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9zZWFyY2gtZGlhbG9nLnRzeFxudmFyIFNlYXJjaERpYWxvZyA9IGNsYXNzIGV4dGVuZHMgUmVhY3QxMC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiBcIlwiLFxuICAgICAgc2VhcmNoUmVzdWx0OiBudWxsLFxuICAgICAgc2VhcmNoRXJyb3I6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuX29uQWZ0ZXJPcGVuID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2lucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdGhpcy5faW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fb25DaGFuZ2VRdWVyeSA9IChlKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHF1ZXJ5IH0pO1xuICAgICAgaWYgKCFxdWVyeS50cmltKCkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHNlYXJjaFJlc3VsdDogbnVsbCwgc2VhcmNoRXJyb3I6IG51bGwgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NlYXJjaCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fb25DbGVhclF1ZXJ5ID0gKCkgPT4ge1xuICAgICAgdGhpcy5fb25DaGFuZ2VRdWVyeSh7IHRhcmdldDogeyB2YWx1ZTogXCJcIiB9IH0pO1xuICAgIH07XG4gICAgdGhpcy5fd2FybXVwU2VhcmNoID0gKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgeyBzZWFyY2hOb3Rpb24sIHJvb3RCbG9ja0lkIH0gPSB0aGlzLnByb3BzO1xuICAgICAgeWllbGQgc2VhcmNoTm90aW9uKHtcbiAgICAgICAgcXVlcnk6IFwiXCIsXG4gICAgICAgIGFuY2VzdG9ySWQ6IHJvb3RCbG9ja0lkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZWFyY2hJbXBsID0gKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgeyBzZWFyY2hOb3Rpb24sIHJvb3RCbG9ja0lkIH0gPSB0aGlzLnByb3BzO1xuICAgICAgY29uc3QgeyBxdWVyeSB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGlmICghcXVlcnkudHJpbSgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IGZhbHNlLCBzZWFyY2hSZXN1bHQ6IG51bGwsIHNlYXJjaEVycm9yOiBudWxsIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiB0cnVlIH0pO1xuICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgc2VhcmNoTm90aW9uKHtcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGFuY2VzdG9ySWQ6IHJvb3RCbG9ja0lkXG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKFwic2VhcmNoXCIsIHF1ZXJ5LCByZXN1bHQpO1xuICAgICAgbGV0IHNlYXJjaFJlc3VsdCA9IG51bGw7XG4gICAgICBsZXQgc2VhcmNoRXJyb3IgPSBudWxsO1xuICAgICAgaWYgKHJlc3VsdC5lcnJvciB8fCByZXN1bHQuZXJyb3JJZCkge1xuICAgICAgICBzZWFyY2hFcnJvciA9IHJlc3VsdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlYXJjaFJlc3VsdCA9IF9fc3ByZWFkVmFsdWVzKHt9LCByZXN1bHQpO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gc2VhcmNoUmVzdWx0LnJlc3VsdHMubWFwKChyZXN1bHQyKSA9PiB7XG4gICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICBjb25zdCBibG9jayA9IChfYSA9IHNlYXJjaFJlc3VsdC5yZWNvcmRNYXAuYmxvY2tbcmVzdWx0Mi5pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgICAgICBpZiAoIWJsb2NrKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZTIoYmxvY2ssIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXApO1xuICAgICAgICAgIGlmICghdGl0bGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0Mi50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgIHJlc3VsdDIuYmxvY2sgPSBibG9jaztcbiAgICAgICAgICByZXN1bHQyLnJlY29yZE1hcCA9IHNlYXJjaFJlc3VsdC5yZWNvcmRNYXA7XG4gICAgICAgICAgcmVzdWx0Mi5wYWdlID0gZ2V0QmxvY2tQYXJlbnRQYWdlKGJsb2NrLCBzZWFyY2hSZXN1bHQucmVjb3JkTWFwLCB7XG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWVcbiAgICAgICAgICB9KSB8fCBibG9jaztcbiAgICAgICAgICBpZiAoIXJlc3VsdDIucGFnZS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKF9iID0gcmVzdWx0Mi5oaWdobGlnaHQpID09IG51bGwgPyB2b2lkIDAgOiBfYi50ZXh0KSB7XG4gICAgICAgICAgICByZXN1bHQyLmhpZ2hsaWdodC5odG1sID0gcmVzdWx0Mi5oaWdobGlnaHQudGV4dC5yZXBsYWNlKC88Z3prTmZvVVU+L2dpLCBcIjxiPlwiKS5yZXBsYWNlKC88XFwvZ3prTmZvVVU+L2dpLCBcIjwvYj5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQyO1xuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHNNYXAgPSByZXN1bHRzLnJlZHVjZShcbiAgICAgICAgICAobWFwLCByZXN1bHQyKSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBtYXApLCB7XG4gICAgICAgICAgICBbcmVzdWx0Mi5wYWdlLmlkXTogcmVzdWx0MlxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHt9XG4gICAgICAgICk7XG4gICAgICAgIHNlYXJjaFJlc3VsdC5yZXN1bHRzID0gT2JqZWN0LnZhbHVlcyhzZWFyY2hSZXN1bHRzTWFwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlLnF1ZXJ5ID09PSBxdWVyeSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0LCBzZWFyY2hFcnJvciB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9pbnB1dFJlZiA9IFJlYWN0MTAuY3JlYXRlUmVmKCk7XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5fc2VhcmNoID0gKDAsIGltcG9ydF9sb2Rhc2guZGVmYXVsdCkodGhpcy5fc2VhcmNoSW1wbC5iaW5kKHRoaXMpLCAxZTMpO1xuICAgIHRoaXMuX3dhcm11cFNlYXJjaCgpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGlzT3Blbiwgb25DbG9zZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGlzTG9hZGluZywgcXVlcnksIHNlYXJjaFJlc3VsdCwgc2VhcmNoRXJyb3IgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgaGFzUXVlcnkgPSAhIXF1ZXJ5LnRyaW0oKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChOb3Rpb25Db250ZXh0Q29uc3VtZXIsIG51bGwsIChjdHgyKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbXBvbmVudHMsIGRlZmF1bHRQYWdlSWNvbiwgbWFwUGFnZVVybCB9ID0gY3R4MjtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTW9kYWwsIHtcbiAgICAgICAgaXNPcGVuLFxuICAgICAgICBjb250ZW50TGFiZWw6IFwiU2VhcmNoXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tc2VhcmNoXCIsXG4gICAgICAgIG92ZXJsYXlDbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaC1vdmVybGF5XCIsXG4gICAgICAgIG9uUmVxdWVzdENsb3NlOiBvbkNsb3NlLFxuICAgICAgICBvbkFmdGVyT3BlbjogdGhpcy5fb25BZnRlck9wZW5cbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicXVpY2tGaW5kTWVudVwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInNlYXJjaEJhclwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImlubGluZUljb25cIlxuICAgICAgfSwgaXNMb2FkaW5nID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChMb2FkaW5nSWNvbiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibG9hZGluZ0ljb25cIlxuICAgICAgfSkgOiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFNlYXJjaEljb24sIG51bGwpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInNlYXJjaElucHV0XCIsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLFxuICAgICAgICB2YWx1ZTogcXVlcnksXG4gICAgICAgIHJlZjogdGhpcy5faW5wdXRSZWYsXG4gICAgICAgIG9uQ2hhbmdlOiB0aGlzLl9vbkNoYW5nZVF1ZXJ5XG4gICAgICB9KSwgcXVlcnkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHJvbGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJjbGVhckJ1dHRvblwiLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLl9vbkNsZWFyUXVlcnlcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoQ2xlYXJJY29uLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJjbGVhckljb25cIlxuICAgICAgfSkpKSwgaGFzUXVlcnkgJiYgc2VhcmNoUmVzdWx0ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMC5GcmFnbWVudCwgbnVsbCwgc2VhcmNoUmVzdWx0LnJlc3VsdHMubGVuZ3RoID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChOb3Rpb25Db250ZXh0UHJvdmlkZXIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGN0eDIpLCB7XG4gICAgICAgIHJlY29yZE1hcDogc2VhcmNoUmVzdWx0LnJlY29yZE1hcFxuICAgICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicmVzdWx0c1BhbmVcIlxuICAgICAgfSwgc2VhcmNoUmVzdWx0LnJlc3VsdHMubWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCB7XG4gICAgICAgICAga2V5OiByZXN1bHQuaWQsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcInJlc3VsdFwiLCBcIm5vdGlvbi1wYWdlLWxpbmtcIiksXG4gICAgICAgICAgaHJlZjogbWFwUGFnZVVybChcbiAgICAgICAgICAgIHJlc3VsdC5wYWdlLmlkLFxuICAgICAgICAgICAgc2VhcmNoUmVzdWx0LnJlY29yZE1hcFxuICAgICAgICAgIClcbiAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgICBibG9jazogcmVzdWx0LnBhZ2UsXG4gICAgICAgICAgZGVmYXVsdEljb246IGRlZmF1bHRQYWdlSWNvblxuICAgICAgICB9KSwgKChfYSA9IHJlc3VsdC5oaWdobGlnaHQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5odG1sKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaC1yZXN1bHQtaGlnaGxpZ2h0XCIsXG4gICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgIF9faHRtbDogcmVzdWx0LmhpZ2hsaWdodC5odG1sXG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJmb290ZXJcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicmVzdWx0c0Zvb3RlclwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInJlc3VsdHNDb3VudFwiXG4gICAgICB9LCBzZWFyY2hSZXN1bHQudG90YWwpLCBzZWFyY2hSZXN1bHQudG90YWwgPT09IDEgPyBcIiByZXN1bHRcIiA6IFwiIHJlc3VsdHNcIikpKSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzUGFuZVwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1wiXG4gICAgICB9LCBcIk5vIHJlc3VsdHNcIiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzRGV0YWlsXCJcbiAgICAgIH0sIFwiVHJ5IGRpZmZlcmVudCBzZWFyY2ggdGVybXNcIikpKSwgaGFzUXVlcnkgJiYgIXNlYXJjaFJlc3VsdCAmJiBzZWFyY2hFcnJvciAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1BhbmVcIlxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNcIlxuICAgICAgfSwgXCJTZWFyY2ggZXJyb3JcIikpKSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2hlYWRlci50c3hcbnZhciBIZWFkZXIgPSAoeyBibG9jayB9KSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWhlYWRlclwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbmF2LWhlYWRlclwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoQnJlYWRjcnVtYnMsIHtcbiAgICBibG9ja1xuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChTZWFyY2gsIHtcbiAgICBibG9ja1xuICB9KSkpO1xufTtcbnZhciBCcmVhZGNydW1icyA9ICh7IGJsb2NrLCByb290T25seSA9IGZhbHNlIH0pID0+IHtcbiAgY29uc3QgeyByZWNvcmRNYXAsIG1hcFBhZ2VVcmwsIGNvbXBvbmVudHMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgYnJlYWRjcnVtYnMgPSBSZWFjdDExLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGJyZWFkY3J1bWJzMiA9IGdldFBhZ2VCcmVhZGNydW1icyhyZWNvcmRNYXAsIGJsb2NrLmlkKTtcbiAgICBpZiAocm9vdE9ubHkpIHtcbiAgICAgIHJldHVybiBbYnJlYWRjcnVtYnMyWzBdXS5maWx0ZXIoQm9vbGVhbik7XG4gICAgfVxuICAgIHJldHVybiBicmVhZGNydW1iczI7XG4gIH0sIFtyZWNvcmRNYXAsIGJsb2NrLmlkLCByb290T25seV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJyZWFkY3J1bWJzXCIsXG4gICAga2V5OiBcImJyZWFkY3J1bWJzXCJcbiAgfSwgYnJlYWRjcnVtYnMubWFwKChicmVhZGNydW1iLCBpbmRleCkgPT4ge1xuICAgIGlmICghYnJlYWRjcnVtYikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHBhZ2VMaW5rUHJvcHMgPSB7fTtcbiAgICBjb25zdCBjb21wb25lbnRNYXAgPSB7XG4gICAgICBwYWdlTGluazogY29tcG9uZW50cy5QYWdlTGlua1xuICAgIH07XG4gICAgaWYgKGJyZWFkY3J1bWIuYWN0aXZlKSB7XG4gICAgICBjb21wb25lbnRNYXAucGFnZUxpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhZ2VMaW5rUHJvcHMuaHJlZiA9IG1hcFBhZ2VVcmwoYnJlYWRjcnVtYi5wYWdlSWQpO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChSZWFjdDExLkZyYWdtZW50LCB7XG4gICAgICBrZXk6IGJyZWFkY3J1bWIucGFnZUlkXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChjb21wb25lbnRNYXAucGFnZUxpbmssIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNsYXNzTmFtZTogY3MoXCJicmVhZGNydW1iXCIsIGJyZWFkY3J1bWIuYWN0aXZlICYmIFwiYWN0aXZlXCIpXG4gICAgfSwgcGFnZUxpbmtQcm9wcyksIGJyZWFkY3J1bWIuaWNvbiAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgICBjbGFzc05hbWU6IFwiaWNvblwiLFxuICAgICAgYmxvY2s6IGJyZWFkY3J1bWIuYmxvY2tcbiAgICB9KSwgYnJlYWRjcnVtYi50aXRsZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwidGl0bGVcIlxuICAgIH0sIGJyZWFkY3J1bWIudGl0bGUpKSwgaW5kZXggPCBicmVhZGNydW1icy5sZW5ndGggLSAxICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJzcGFjZXJcIlxuICAgIH0sIFwiL1wiKSk7XG4gIH0pKTtcbn07XG52YXIgU2VhcmNoID0gKHsgYmxvY2ssIHNlYXJjaCwgdGl0bGUgPSBcIlNlYXJjaFwiIH0pID0+IHtcbiAgY29uc3QgeyBzZWFyY2hOb3Rpb24sIHJvb3RQYWdlSWQsIGlzU2hvd2luZ1NlYXJjaCwgb25IaWRlU2VhcmNoIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IG9uU2VhcmNoTm90aW9uID0gc2VhcmNoIHx8IHNlYXJjaE5vdGlvbjtcbiAgY29uc3QgW2lzU2VhcmNoT3Blbiwgc2V0SXNTZWFyY2hPcGVuXSA9IFJlYWN0MTEudXNlU3RhdGUoaXNTaG93aW5nU2VhcmNoKTtcbiAgUmVhY3QxMS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzU2VhcmNoT3Blbihpc1Nob3dpbmdTZWFyY2gpO1xuICB9LCBbaXNTaG93aW5nU2VhcmNoXSk7XG4gIGNvbnN0IG9uT3BlblNlYXJjaCA9IFJlYWN0MTEudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzU2VhcmNoT3Blbih0cnVlKTtcbiAgfSwgW10pO1xuICBjb25zdCBvbkNsb3NlU2VhcmNoID0gUmVhY3QxMS51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNTZWFyY2hPcGVuKGZhbHNlKTtcbiAgICBpZiAob25IaWRlU2VhcmNoKSB7XG4gICAgICBvbkhpZGVTZWFyY2goKTtcbiAgICB9XG4gIH0sIFtvbkhpZGVTZWFyY2hdKTtcbiAgdXNlSG90a2V5cyhcImNtZCtwXCIsIChldmVudCkgPT4ge1xuICAgIG9uT3BlblNlYXJjaCgpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuICB1c2VIb3RrZXlzKFwiY21kK2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgb25PcGVuU2VhcmNoKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG4gIGNvbnN0IGhhc1NlYXJjaCA9ICEhb25TZWFyY2hOb3Rpb247XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFJlYWN0MTEuRnJhZ21lbnQsIG51bGwsIGhhc1NlYXJjaCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzTmFtZTogY3MoXCJicmVhZGNydW1iXCIsIFwiYnV0dG9uXCIsIFwibm90aW9uLXNlYXJjaC1idXR0b25cIiksXG4gICAgb25DbGljazogb25PcGVuU2VhcmNoXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoU2VhcmNoSWNvbiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWFyY2hJY29uXCJcbiAgfSksIHRpdGxlICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6IFwidGl0bGVcIlxuICB9LCB0aXRsZSkpLCBpc1NlYXJjaE9wZW4gJiYgaGFzU2VhcmNoICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoU2VhcmNoRGlhbG9nLCB7XG4gICAgaXNPcGVuOiBpc1NlYXJjaE9wZW4sXG4gICAgcm9vdEJsb2NrSWQ6IHJvb3RQYWdlSWQgfHwgKGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5pZCksXG4gICAgb25DbG9zZTogb25DbG9zZVNlYXJjaCxcbiAgICBzZWFyY2hOb3Rpb246IG9uU2VhcmNoTm90aW9uXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldFRleHRDb250ZW50IH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9saXRlLXlvdXR1YmUtZW1iZWQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDEyIGZyb20gXCJyZWFjdFwiO1xudmFyIHFzID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoXG4gICAgKGtleSkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gXG4gICkuam9pbihcIiZcIik7XG59O1xudmFyIExpdGVZb3VUdWJlRW1iZWQgPSAoe1xuICBpZCxcbiAgZGVmYXVsdFBsYXkgPSBmYWxzZSxcbiAgbXV0ZSA9IGZhbHNlLFxuICBsYXp5SW1hZ2UgPSBmYWxzZSxcbiAgaWZyYW1lVGl0bGUgPSBcIllvdVR1YmUgdmlkZW9cIixcbiAgYWx0ID0gXCJWaWRlbyBwcmV2aWV3XCIsXG4gIHBhcmFtcyA9IHt9LFxuICBhZExpbmtzUHJlY29ubmVjdCA9IHRydWUsXG4gIHN0eWxlLFxuICBjbGFzc05hbWVcbn0pID0+IHtcbiAgY29uc3QgbXV0ZVBhcmFtID0gbXV0ZSB8fCBkZWZhdWx0UGxheSA/IFwiMVwiIDogXCIwXCI7XG4gIGNvbnN0IHF1ZXJ5U3RyaW5nID0gUmVhY3QxMi51c2VNZW1vKFxuICAgICgpID0+IHFzKF9fc3ByZWFkVmFsdWVzKHsgYXV0b3BsYXk6IFwiMVwiLCBtdXRlOiBtdXRlUGFyYW0gfSwgcGFyYW1zKSksXG4gICAgW211dGVQYXJhbSwgcGFyYW1zXVxuICApO1xuICBjb25zdCByZXNvbHV0aW9uID0gXCJocWRlZmF1bHRcIjtcbiAgY29uc3QgcG9zdGVyVXJsID0gYGh0dHBzOi8vaS55dGltZy5jb20vdmkvJHtpZH0vJHtyZXNvbHV0aW9ufS5qcGdgO1xuICBjb25zdCB5dFVybCA9IFwiaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb21cIjtcbiAgY29uc3QgaWZyYW1lU3JjID0gYCR7eXRVcmx9L2VtYmVkLyR7aWR9PyR7cXVlcnlTdHJpbmd9YDtcbiAgY29uc3QgW2lzUHJlY29ubmVjdGVkLCBzZXRJc1ByZWNvbm5lY3RlZF0gPSBSZWFjdDEyLnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lmcmFtZUluaXRpYWxpemVkLCBzZXRJZnJhbWVJbml0aWFsaXplZF0gPSBSZWFjdDEyLnVzZVN0YXRlKGRlZmF1bHRQbGF5KTtcbiAgY29uc3QgW2lzSWZyYW1lTG9hZGVkLCBzZXRJc0lmcmFtZUxvYWRlZF0gPSBSZWFjdDEyLnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgd2FybUNvbm5lY3Rpb25zID0gUmVhY3QxMi51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGlzUHJlY29ubmVjdGVkKVxuICAgICAgcmV0dXJuO1xuICAgIHNldElzUHJlY29ubmVjdGVkKHRydWUpO1xuICB9LCBbaXNQcmVjb25uZWN0ZWRdKTtcbiAgY29uc3Qgb25Mb2FkSWZyYW1lID0gUmVhY3QxMi51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGlmcmFtZUluaXRpYWxpemVkKVxuICAgICAgcmV0dXJuO1xuICAgIHNldElmcmFtZUluaXRpYWxpemVkKHRydWUpO1xuICB9LCBbaWZyYW1lSW5pdGlhbGl6ZWRdKTtcbiAgY29uc3Qgb25JZnJhbWVMb2FkZWQgPSBSZWFjdDEyLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc0lmcmFtZUxvYWRlZCh0cnVlKTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWxvYWRcIixcbiAgICBocmVmOiBwb3N0ZXJVcmwsXG4gICAgYXM6IFwiaW1hZ2VcIlxuICB9KSwgaXNQcmVjb25uZWN0ZWQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiB5dFVybFxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVjb25uZWN0XCIsXG4gICAgaHJlZjogXCJodHRwczovL3d3dy5nb29nbGUuY29tXCJcbiAgfSkpLCBpc1ByZWNvbm5lY3RlZCAmJiBhZExpbmtzUHJlY29ubmVjdCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFJlYWN0MTIuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlY29ubmVjdFwiLFxuICAgIGhyZWY6IFwiaHR0cHM6Ly9zdGF0aWMuZG91YmxlY2xpY2submV0XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlY29ubmVjdFwiLFxuICAgIGhyZWY6IFwiaHR0cHM6Ly9nb29nbGVhZHMuZy5kb3VibGVjbGljay5uZXRcIlxuICB9KSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIG9uQ2xpY2s6IG9uTG9hZElmcmFtZSxcbiAgICBvblBvaW50ZXJPdmVyOiB3YXJtQ29ubmVjdGlvbnMsXG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLXl0LWxpdGVcIixcbiAgICAgIGlzSWZyYW1lTG9hZGVkICYmIFwibm90aW9uLXl0LWxvYWRlZFwiLFxuICAgICAgaWZyYW1lSW5pdGlhbGl6ZWQgJiYgXCJub3Rpb24teXQtaW5pdGlhbGl6ZWRcIixcbiAgICAgIGNsYXNzTmFtZVxuICAgICksXG4gICAgc3R5bGVcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImltZ1wiLCB7XG4gICAgc3JjOiBwb3N0ZXJVcmwsXG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi15dC10aHVtYm5haWxcIixcbiAgICBsb2FkaW5nOiBsYXp5SW1hZ2UgPyBcImxhenlcIiA6IHZvaWQgMCxcbiAgICBhbHRcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24teXQtcGxheWJ0blwiXG4gIH0pLCBpZnJhbWVJbml0aWFsaXplZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIsIHtcbiAgICB3aWR0aDogXCI1NjBcIixcbiAgICBoZWlnaHQ6IFwiMzE1XCIsXG4gICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgIGFsbG93OiBcImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXCIsXG4gICAgYWxsb3dGdWxsU2NyZWVuOiB0cnVlLFxuICAgIHRpdGxlOiBpZnJhbWVUaXRsZSxcbiAgICBzcmM6IGlmcmFtZVNyYyxcbiAgICBvbkxvYWQ6IG9uSWZyYW1lTG9hZGVkXG4gIH0pKSk7XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9hc3NldC50c3hcbnZhciBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCI7XG52YXIgc3VwcG9ydGVkQXNzZXRUeXBlcyA9IFtcbiAgXCJ2aWRlb1wiLFxuICBcImltYWdlXCIsXG4gIFwiZW1iZWRcIixcbiAgXCJmaWdtYVwiLFxuICBcInR5cGVmb3JtXCIsXG4gIFwiZXhjYWxpZHJhd1wiLFxuICBcIm1hcHNcIixcbiAgXCJ0d2VldFwiLFxuICBcInBkZlwiLFxuICBcImdpc3RcIixcbiAgXCJjb2RlcGVuXCIsXG4gIFwiZHJpdmVcIlxuXTtcbnZhciBBc3NldCA9ICh7IGJsb2NrLCB6b29tYWJsZSA9IHRydWUsIGNoaWxkcmVuIH0pID0+IHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qO1xuICBjb25zdCB7IHJlY29yZE1hcCwgbWFwSW1hZ2VVcmwsIGNvbXBvbmVudHMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgaWYgKCFibG9jayB8fCAhc3VwcG9ydGVkQXNzZXRUeXBlcy5pbmNsdWRlcyhibG9jay50eXBlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN0eWxlID0ge1xuICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgYWxpZ25TZWxmOiBcImNlbnRlclwiLFxuICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICBtYXhXaWR0aDogXCIxMDAlXCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIlxuICB9O1xuICBjb25zdCBhc3NldFN0eWxlID0ge307XG4gIGlmIChibG9jay5mb3JtYXQpIHtcbiAgICBjb25zdCB7XG4gICAgICBibG9ja19hc3BlY3RfcmF0aW8sXG4gICAgICBibG9ja19oZWlnaHQsXG4gICAgICBibG9ja193aWR0aCxcbiAgICAgIGJsb2NrX2Z1bGxfd2lkdGgsXG4gICAgICBibG9ja19wYWdlX3dpZHRoLFxuICAgICAgYmxvY2tfcHJlc2VydmVfc2NhbGVcbiAgICB9ID0gYmxvY2suZm9ybWF0O1xuICAgIGlmIChibG9ja19mdWxsX3dpZHRoIHx8IGJsb2NrX3BhZ2Vfd2lkdGgpIHtcbiAgICAgIGlmIChibG9ja19mdWxsX3dpZHRoKSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gXCIxMDB2d1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgIH1cbiAgICAgIGlmIChibG9jay50eXBlID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgaWYgKGJsb2NrX2hlaWdodCkge1xuICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGJsb2NrX2hlaWdodDtcbiAgICAgICAgfSBlbHNlIGlmIChibG9ja19hc3BlY3RfcmF0aW8pIHtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7YmxvY2tfYXNwZWN0X3JhdGlvICogMTAwfSVgO1xuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlKSB7XG4gICAgICAgICAgc3R5bGUub2JqZWN0Rml0ID0gXCJjb250YWluXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYmxvY2tfYXNwZWN0X3JhdGlvICYmIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIikge1xuICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7YmxvY2tfYXNwZWN0X3JhdGlvICogMTAwfSVgO1xuICAgICAgfSBlbHNlIGlmIChibG9ja19oZWlnaHQpIHtcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gYmxvY2tfaGVpZ2h0O1xuICAgICAgfSBlbHNlIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSkge1xuICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNzUlXCI7XG4gICAgICAgICAgc3R5bGUubWluSGVpZ2h0ID0gMTAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoKF9hID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuYmxvY2tfYWxpZ25tZW50KSB7XG4gICAgICAgIGNhc2UgXCJjZW50ZXJcIjoge1xuICAgICAgICAgIHN0eWxlLmFsaWduU2VsZiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImxlZnRcIjoge1xuICAgICAgICAgIHN0eWxlLmFsaWduU2VsZiA9IFwic3RhcnRcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmlnaHRcIjoge1xuICAgICAgICAgIHN0eWxlLmFsaWduU2VsZiA9IFwiZW5kXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChibG9ja193aWR0aCkge1xuICAgICAgICBzdHlsZS53aWR0aCA9IGJsb2NrX3dpZHRoO1xuICAgICAgfVxuICAgICAgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlICYmIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIikge1xuICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gXCI1MCVcIjtcbiAgICAgICAgc3R5bGUubWluSGVpZ2h0ID0gMTAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGJsb2NrX2hlaWdodCAmJiBibG9jay50eXBlICE9PSBcImltYWdlXCIpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBibG9ja19oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgYXNzZXRTdHlsZS5vYmplY3RGaXQgPSBcImNvdmVyXCI7XG4gICAgfSBlbHNlIGlmIChibG9ja19wcmVzZXJ2ZV9zY2FsZSkge1xuICAgICAgYXNzZXRTdHlsZS5vYmplY3RGaXQgPSBcImNvbnRhaW5cIjtcbiAgICB9XG4gIH1cbiAgbGV0IHNvdXJjZSA9ICgoX2IgPSByZWNvcmRNYXAuc2lnbmVkX3VybHMpID09IG51bGwgPyB2b2lkIDAgOiBfYltibG9jay5pZF0pIHx8ICgoX2UgPSAoX2QgPSAoX2MgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2Muc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2RbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfZVswXSk7XG4gIGxldCBjb250ZW50ID0gbnVsbDtcbiAgaWYgKCFzb3VyY2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0d2VldFwiKSB7XG4gICAgY29uc3Qgc3JjID0gc291cmNlO1xuICAgIGlmICghc3JjKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaWQgPSBzcmMuc3BsaXQoXCI/XCIpWzBdLnNwbGl0KFwiL1wiKS5wb3AoKTtcbiAgICBpZiAoIWlkKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgc3R5bGU6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGFzc2V0U3R5bGUpLCB7XG4gICAgICAgIG1heFdpZHRoOiA0MjAsXG4gICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgbWFyZ2luTGVmdDogXCJhdXRvXCIsXG4gICAgICAgIG1hcmdpblJpZ2h0OiBcImF1dG9cIlxuICAgICAgfSlcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuVHdlZXQsIHtcbiAgICAgIGlkXG4gICAgfSkpO1xuICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwicGRmXCIpIHtcbiAgICBzdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuICAgIHN0eWxlLmJhY2tncm91bmQgPSBcInJnYigyMjYsIDIyNiwgMjI2KVwiO1xuICAgIHN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgaWYgKCFzdHlsZS5wYWRkaW5nKSB7XG4gICAgICBzdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgIH1cbiAgICBpZiAoIWlzU2VydmVyKSB7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBkZiwge1xuICAgICAgICBmaWxlOiBzb3VyY2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImVtYmVkXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiZmlnbWFcIiB8fCBibG9jay50eXBlID09PSBcInR5cGVmb3JtXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJnaXN0XCIgfHwgYmxvY2sudHlwZSA9PT0gXCJtYXBzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJleGNhbGlkcmF3XCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2RlcGVuXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJkcml2ZVwiKSB7XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIiAmJiBzb3VyY2UgJiYgc291cmNlLmluZGV4T2YoXCJ5b3V0dWJlXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcInlvdXR1LmJlXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcInZpbWVvXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcIndpc3RpYVwiKSA8IDAgJiYgc291cmNlLmluZGV4T2YoXCJsb29tXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcInZpZGVvYXNrXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcImdldGNsb3VkYXBwXCIpIDwgMCkge1xuICAgICAgc3R5bGUucGFkZGluZ0JvdHRvbSA9IHZvaWQgMDtcbiAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwidmlkZW9cIiwge1xuICAgICAgICBwbGF5c0lubGluZTogdHJ1ZSxcbiAgICAgICAgY29udHJvbHM6IHRydWUsXG4gICAgICAgIHByZWxvYWQ6IFwibWV0YWRhdGFcIixcbiAgICAgICAgc3R5bGU6IGFzc2V0U3R5bGUsXG4gICAgICAgIHNyYzogc291cmNlLFxuICAgICAgICB0aXRsZTogYmxvY2sudHlwZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBzcmMgPSAoKF9mID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2YuZGlzcGxheV9zb3VyY2UpIHx8IHNvdXJjZTtcbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgY29uc3QgeW91dHViZVZpZGVvSWQgPSBibG9jay50eXBlID09PSBcInZpZGVvXCIgPyBnZXRZb3V0dWJlSWQoc3JjKSA6IG51bGw7XG4gICAgICAgIGlmICh5b3V0dWJlVmlkZW9JZCkge1xuICAgICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KExpdGVZb3VUdWJlRW1iZWQsIHtcbiAgICAgICAgICAgIGlkOiB5b3V0dWJlVmlkZW9JZCxcbiAgICAgICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1hc3NldC1vYmplY3QtZml0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImdpc3RcIikge1xuICAgICAgICAgIGlmICghc3JjLmVuZHNXaXRoKFwiLnBpYmJcIikpIHtcbiAgICAgICAgICAgIHNyYyA9IGAke3NyY30ucGliYmA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFzc2V0U3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gXCI1MCVcIjtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiLCB7XG4gICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtb2JqZWN0LWZpdFwiLFxuICAgICAgICAgICAgc3JjLFxuICAgICAgICAgICAgdGl0bGU6IFwiR2l0SHViIEdpc3RcIixcbiAgICAgICAgICAgIGZyYW1lQm9yZGVyOiBcIjBcIixcbiAgICAgICAgICAgIGxvYWRpbmc6IFwibGF6eVwiLFxuICAgICAgICAgICAgc2Nyb2xsaW5nOiBcImF1dG9cIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtb2JqZWN0LWZpdFwiLFxuICAgICAgICAgICAgc3R5bGU6IGFzc2V0U3R5bGUsXG4gICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICB0aXRsZTogYGlmcmFtZSAke2Jsb2NrLnR5cGV9YCxcbiAgICAgICAgICAgIGZyYW1lQm9yZGVyOiBcIjBcIixcbiAgICAgICAgICAgIGFsbG93RnVsbFNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgIGxvYWRpbmc6IFwibGF6eVwiLFxuICAgICAgICAgICAgc2Nyb2xsaW5nOiBcImF1dG9cIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgIGlmIChzb3VyY2UuaW5jbHVkZXMoXCJmaWxlLm5vdGlvbi5zb1wiKSkge1xuICAgICAgc291cmNlID0gKF9pID0gKF9oID0gKF9nID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2lbMF07XG4gICAgfVxuICAgIGNvbnN0IHNyYyA9IG1hcEltYWdlVXJsKHNvdXJjZSwgYmxvY2spO1xuICAgIGNvbnN0IGNhcHRpb24gPSBnZXRUZXh0Q29udGVudCgoX2ogPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2ouY2FwdGlvbik7XG4gICAgY29uc3QgYWx0ID0gY2FwdGlvbiB8fCBcIm5vdGlvbiBpbWFnZVwiO1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KExhenlJbWFnZSwge1xuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgem9vbWFibGUsXG4gICAgICBoZWlnaHQ6IHN0eWxlLmhlaWdodCxcbiAgICAgIHN0eWxlOiBhc3NldFN0eWxlXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMy5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgc3R5bGVcbiAgfSwgY29udGVudCwgYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiICYmIGNoaWxkcmVuKSwgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiICYmIGNoaWxkcmVuKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LXdyYXBwZXIudHN4XG52YXIgdXJsU3R5bGUgPSB7IHdpZHRoOiBcIjEwMCVcIiB9O1xudmFyIEFzc2V0V3JhcHBlciA9ICh7IGJsb2NrSWQsIGJsb2NrIH0pID0+IHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IHZhbHVlID0gYmxvY2s7XG4gIGNvbnN0IHsgY29tcG9uZW50cywgbWFwUGFnZVVybCwgcm9vdERvbWFpbiwgem9vbSB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBsZXQgaXNVUkwgPSBmYWxzZTtcbiAgaWYgKGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgIGNvbnN0IGNhcHRpb24gPSAoX2MgPSAoX2IgPSAoX2EgPSB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhcHRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYlswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jWzBdO1xuICAgIGlmIChjYXB0aW9uKSB7XG4gICAgICBjb25zdCBpZCA9IHBhcnNlUGFnZUlkMihjYXB0aW9uLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBpc1BhZ2UgPSBjYXB0aW9uLmNoYXJBdCgwKSA9PT0gXCIvXCIgJiYgaWQ7XG4gICAgICBpZiAoaXNQYWdlIHx8IGlzVmFsaWRVUkwoY2FwdGlvbikpIHtcbiAgICAgICAgaXNVUkwgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBmaWd1cmUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZmlndXJlXCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgXCJub3Rpb24tYXNzZXQtd3JhcHBlclwiLFxuICAgICAgYG5vdGlvbi1hc3NldC13cmFwcGVyLSR7YmxvY2sudHlwZX1gLFxuICAgICAgKChfZCA9IHZhbHVlLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmJsb2NrX2Z1bGxfd2lkdGgpICYmIFwibm90aW9uLWFzc2V0LXdyYXBwZXItZnVsbFwiLFxuICAgICAgYmxvY2tJZFxuICAgIClcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChBc3NldCwge1xuICAgIGJsb2NrOiB2YWx1ZSxcbiAgICB6b29tYWJsZTogem9vbSAmJiAhaXNVUkxcbiAgfSwgKChfZSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FwdGlvbikgJiYgIWlzVVJMICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJmaWdjYXB0aW9uXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LWNhcHRpb25cIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICB2YWx1ZTogdmFsdWUucHJvcGVydGllcy5jYXB0aW9uLFxuICAgIGJsb2NrXG4gIH0pKSkpO1xuICBpZiAoaXNVUkwpIHtcbiAgICBjb25zdCBjYXB0aW9uID0gKF9mID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYXB0aW9uWzBdWzBdO1xuICAgIGNvbnN0IGlkID0gcGFyc2VQYWdlSWQyKGNhcHRpb24sIHsgdXVpZDogdHJ1ZSB9KTtcbiAgICBjb25zdCBpc1BhZ2UgPSBjYXB0aW9uLmNoYXJBdCgwKSA9PT0gXCIvXCIgJiYgaWQ7XG4gICAgY29uc3QgY2FwdGlvbkhvc3RuYW1lID0gZXh0cmFjdEhvc3RuYW1lKGNhcHRpb24pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIHtcbiAgICAgIHN0eWxlOiB1cmxTdHlsZSxcbiAgICAgIGhyZWY6IGlzUGFnZSA/IG1hcFBhZ2VVcmwoaWQpIDogY2FwdGlvbixcbiAgICAgIHRhcmdldDogY2FwdGlvbkhvc3RuYW1lICYmIGNhcHRpb25Ib3N0bmFtZSAhPT0gcm9vdERvbWFpbiAmJiAhY2FwdGlvbi5zdGFydHNXaXRoKFwiL1wiKSA/IFwiYmxhbmtfXCIgOiBudWxsXG4gICAgfSwgZmlndXJlKTtcbiAgfVxuICByZXR1cm4gZmlndXJlO1xufTtcbmZ1bmN0aW9uIGlzVmFsaWRVUkwoc3RyKSB7XG4gIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKFxuICAgIFwiXihodHRwcz86XFxcXC9cXFxcLyk/KCgoW2EtelxcXFxkXShbYS16XFxcXGQtXSpbYS16XFxcXGRdKSopXFxcXC4pK1thLXpdezIsfXwoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSkoXFxcXDpcXFxcZCspPyhcXFxcL1stYS16XFxcXGQlXy5+K10qKSooXFxcXD9bOyZhLXpcXFxcZCVfLn4rPS1dKik/KFxcXFwjWy1hLXpcXFxcZF9dKik/JFwiLFxuICAgIFwiaVwiXG4gICk7XG4gIHJldHVybiAhIXBhdHRlcm4udGVzdChzdHIpO1xufVxuZnVuY3Rpb24gZXh0cmFjdEhvc3RuYW1lKHVybCkge1xuICB0cnkge1xuICAgIGNvbnN0IGhvc3RuYW1lID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICAgIHJldHVybiBob3N0bmFtZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY2hlY2tib3gudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE2IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaWNvbnMvY2hlY2sudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnQ2hlY2socHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNS41IDEyTDE0IDMuNSAxMi41IDJsLTcgNy00LTQuMDAzTDAgNi40OTl6XCJcbiAgfSkpO1xufVxudmFyIGNoZWNrX2RlZmF1bHQgPSBTdmdDaGVjaztcblxuLy8gc3JjL2NvbXBvbmVudHMvY2hlY2tib3gudHN4XG52YXIgQ2hlY2tib3ggPSAoeyBpc0NoZWNrZWQgfSkgPT4ge1xuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmIChpc0NoZWNrZWQpIHtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLXByb3BlcnR5LWNoZWNrYm94LWNoZWNrZWRcIlxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoY2hlY2tfZGVmYXVsdCwgbnVsbCkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtdW5jaGVja2VkXCJcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHkgbm90aW9uLXByb3BlcnR5LWNoZWNrYm94XCJcbiAgfSwgY29udGVudCk7XG59O1xuXG4vLyBzcmMvbmV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwicmVhY3QtZmFzdC1jb21wYXJlXCI7XG52YXIgd3JhcE5leHRJbWFnZSA9IChOZXh0SW1hZ2UpID0+IHtcbiAgcmV0dXJuIFJlYWN0MTcubWVtbyhmdW5jdGlvbiBSZWFjdE5vdGlvblhOZXh0SW1hZ2UoX2EpIHtcbiAgICB2YXIgX2IgPSBfYSwge1xuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBzdHlsZSxcbiAgICAgIGxheW91dFxuICAgIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1xuICAgICAgXCJzcmNcIixcbiAgICAgIFwiYWx0XCIsXG4gICAgICBcIndpZHRoXCIsXG4gICAgICBcImhlaWdodFwiLFxuICAgICAgXCJjbGFzc05hbWVcIixcbiAgICAgIFwic3R5bGVcIixcbiAgICAgIFwibGF5b3V0XCJcbiAgICBdKTtcbiAgICBpZiAoIWxheW91dCkge1xuICAgICAgbGF5b3V0ID0gd2lkdGggJiYgaGVpZ2h0ID8gXCJpbnRyaW5zaWNcIiA6IFwiZmlsbFwiO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTcuY3JlYXRlRWxlbWVudChOZXh0SW1hZ2UsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHNyYyxcbiAgICAgIGFsdCxcbiAgICAgIHdpZHRoOiBsYXlvdXQgPT09IFwiaW50cmluc2ljXCIgJiYgd2lkdGgsXG4gICAgICBoZWlnaHQ6IGxheW91dCA9PT0gXCJpbnRyaW5zaWNcIiAmJiBoZWlnaHQsXG4gICAgICBvYmplY3RGaXQ6IHN0eWxlID09IG51bGwgPyB2b2lkIDAgOiBzdHlsZS5vYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbjogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLm9iamVjdFBvc2l0aW9uLFxuICAgICAgbGF5b3V0XG4gICAgfSwgcmVzdCkpO1xuICB9LCBpc0VxdWFsKTtcbn07XG52YXIgd3JhcE5leHRMaW5rID0gKE5leHRMaW5rKSA9PiBmdW5jdGlvbiBSZWFjdE5vdGlvblhOZXh0TGluayhfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGhyZWYsXG4gICAgYXMsXG4gICAgcGFzc0hyZWYsXG4gICAgcHJlZmV0Y2gsXG4gICAgcmVwbGFjZSxcbiAgICBzY3JvbGwsXG4gICAgc2hhbGxvdyxcbiAgICBsb2NhbGVcbiAgfSA9IF9iLCBsaW5rUHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImhyZWZcIixcbiAgICBcImFzXCIsXG4gICAgXCJwYXNzSHJlZlwiLFxuICAgIFwicHJlZmV0Y2hcIixcbiAgICBcInJlcGxhY2VcIixcbiAgICBcInNjcm9sbFwiLFxuICAgIFwic2hhbGxvd1wiLFxuICAgIFwibG9jYWxlXCJcbiAgXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KE5leHRMaW5rLCB7XG4gICAgaHJlZixcbiAgICBhcyxcbiAgICBwYXNzSHJlZixcbiAgICBwcmVmZXRjaCxcbiAgICByZXBsYWNlLFxuICAgIHNjcm9sbCxcbiAgICBzaGFsbG93LFxuICAgIGxvY2FsZVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFwiYVwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgbGlua1Byb3BzKSkpO1xufTtcblxuLy8gc3JjL2NvbnRleHQudHN4XG52YXIgRGVmYXVsdExpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG59LCBwcm9wcykpO1xudmFyIERlZmF1bHRMaW5rTWVtbyA9IFJlYWN0MTgubWVtbyhEZWZhdWx0TGluayk7XG52YXIgRGVmYXVsdFBhZ2VMaW5rID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwiYVwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBEZWZhdWx0UGFnZUxpbmtNZW1vID0gUmVhY3QxOC5tZW1vKERlZmF1bHRQYWdlTGluayk7XG52YXIgRGVmYXVsdEVtYmVkID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KEFzc2V0V3JhcHBlciwgX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSk7XG52YXIgRGVmYXVsdEhlYWRlciA9IEhlYWRlcjtcbnZhciBkdW1teUxpbmsgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHsgaHJlZiwgcmVsLCB0YXJnZXQsIHRpdGxlIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1wiaHJlZlwiLCBcInJlbFwiLCBcInRhcmdldFwiLCBcInRpdGxlXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCByZXN0KSk7XG59O1xudmFyIGR1bW15Q29tcG9uZW50ID0gKG5hbWUpID0+ICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgIGBXYXJuaW5nOiB1c2luZyBlbXB0eSBjb21wb25lbnQgXCIke25hbWV9XCIgKHlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBpbiBOb3Rpb25SZW5kZXJlci5jb21wb25lbnRzKWBcbiAgKTtcbiAgcmV0dXJuIG51bGw7XG59O1xudmFyIGR1bW15T3ZlcnJpZGVGbiA9IChfLCBkZWZhdWx0VmFsdWVGbikgPT4gZGVmYXVsdFZhbHVlRm4oKTtcbnZhciBkZWZhdWx0Q29tcG9uZW50cyA9IHtcbiAgSW1hZ2U6IG51bGwsXG4gIExpbms6IERlZmF1bHRMaW5rTWVtbyxcbiAgUGFnZUxpbms6IERlZmF1bHRQYWdlTGlua01lbW8sXG4gIENoZWNrYm94LFxuICBDYWxsb3V0OiB2b2lkIDAsXG4gIENvZGU6IGR1bW15Q29tcG9uZW50KFwiQ29kZVwiKSxcbiAgRXF1YXRpb246IGR1bW15Q29tcG9uZW50KFwiRXF1YXRpb25cIiksXG4gIENvbGxlY3Rpb246IGR1bW15Q29tcG9uZW50KFwiQ29sbGVjdGlvblwiKSxcbiAgUHJvcGVydHk6IHZvaWQgMCxcbiAgcHJvcGVydHlUZXh0VmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlTZWxlY3RWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVJlbGF0aW9uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGb3JtdWxhVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlUaXRsZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGVyc29uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGaWxlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlDaGVja2JveFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5VXJsVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlFbWFpbFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGhvbmVOdW1iZXJWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eU51bWJlclZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5TGFzdEVkaXRlZFRpbWVWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eUNyZWF0ZWRUaW1lVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlEYXRlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgUGRmOiBkdW1teUNvbXBvbmVudChcIlBkZlwiKSxcbiAgVHdlZXQ6IGR1bW15Q29tcG9uZW50KFwiVHdlZXRcIiksXG4gIE1vZGFsOiBkdW1teUNvbXBvbmVudChcIk1vZGFsXCIpLFxuICBIZWFkZXI6IERlZmF1bHRIZWFkZXIsXG4gIEVtYmVkOiBEZWZhdWx0RW1iZWRcbn07XG52YXIgZGVmYXVsdE5vdGlvbkNvbnRleHQgPSB7XG4gIHJlY29yZE1hcDoge1xuICAgIGJsb2NrOiB7fSxcbiAgICBjb2xsZWN0aW9uOiB7fSxcbiAgICBjb2xsZWN0aW9uX3ZpZXc6IHt9LFxuICAgIGNvbGxlY3Rpb25fcXVlcnk6IHt9LFxuICAgIG5vdGlvbl91c2VyOiB7fSxcbiAgICBzaWduZWRfdXJsczoge31cbiAgfSxcbiAgY29tcG9uZW50czogZGVmYXVsdENvbXBvbmVudHMsXG4gIG1hcFBhZ2VVcmw6IGRlZmF1bHRNYXBQYWdlVXJsKCksXG4gIG1hcEltYWdlVXJsOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbjogbnVsbCxcbiAgaXNTaG93aW5nU2VhcmNoOiBmYWxzZSxcbiAgb25IaWRlU2VhcmNoOiBudWxsLFxuICBmdWxsUGFnZTogZmFsc2UsXG4gIGRhcmtNb2RlOiBmYWxzZSxcbiAgcHJldmlld0ltYWdlczogZmFsc2UsXG4gIGZvcmNlQ3VzdG9tSW1hZ2VzOiBmYWxzZSxcbiAgc2hvd0NvbGxlY3Rpb25WaWV3RHJvcGRvd246IHRydWUsXG4gIGxpbmtUYWJsZVRpdGxlUHJvcGVydGllczogdHJ1ZSxcbiAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHk6IGZhbHNlLFxuICBzaG93VGFibGVPZkNvbnRlbnRzOiBmYWxzZSxcbiAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXM6IDMsXG4gIGRlZmF1bHRQYWdlSWNvbjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlcjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uOiAwLjUsXG4gIHpvb206IG51bGxcbn07XG52YXIgY3R4ID0gUmVhY3QxOC5jcmVhdGVDb250ZXh0KGRlZmF1bHROb3Rpb25Db250ZXh0KTtcbnZhciBOb3Rpb25Db250ZXh0UHJvdmlkZXIgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjb21wb25lbnRzOiB0aGVtZUNvbXBvbmVudHMgPSB7fSxcbiAgICBjaGlsZHJlbixcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHJvb3RQYWdlSWRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb21wb25lbnRzXCIsXG4gICAgXCJjaGlsZHJlblwiLFxuICAgIFwibWFwUGFnZVVybFwiLFxuICAgIFwibWFwSW1hZ2VVcmxcIixcbiAgICBcInJvb3RQYWdlSWRcIlxuICBdKTtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVzdCkpIHtcbiAgICBpZiAocmVzdFtrZXldID09PSB2b2lkIDApIHtcbiAgICAgIGRlbGV0ZSByZXN0W2tleV07XG4gICAgfVxuICB9XG4gIGNvbnN0IHdyYXBwZWRUaGVtZUNvbXBvbmVudHMgPSBSZWFjdDE4LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe30sIHRoZW1lQ29tcG9uZW50cyksXG4gICAgW3RoZW1lQ29tcG9uZW50c11cbiAgKTtcbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dEltYWdlKSB7XG4gICAgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5JbWFnZSA9IHdyYXBOZXh0SW1hZ2UodGhlbWVDb21wb25lbnRzLm5leHRJbWFnZSk7XG4gIH1cbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dExpbmspIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMaW5rID0gd3JhcE5leHRMaW5rKHRoZW1lQ29tcG9uZW50cy5uZXh0TGluayk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMod3JhcHBlZFRoZW1lQ29tcG9uZW50cykpIHtcbiAgICBpZiAoIXdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XSkge1xuICAgICAgZGVsZXRlIHdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBSZWFjdDE4LnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdE5vdGlvbkNvbnRleHQpLCByZXN0KSwge1xuICAgICAgcm9vdFBhZ2VJZCxcbiAgICAgIG1hcFBhZ2VVcmw6IG1hcFBhZ2VVcmwgIT0gbnVsbCA/IG1hcFBhZ2VVcmwgOiBkZWZhdWx0TWFwUGFnZVVybChyb290UGFnZUlkKSxcbiAgICAgIG1hcEltYWdlVXJsOiBtYXBJbWFnZVVybCAhPSBudWxsID8gbWFwSW1hZ2VVcmwgOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gICAgICBjb21wb25lbnRzOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdENvbXBvbmVudHMpLCB3cmFwcGVkVGhlbWVDb21wb25lbnRzKVxuICAgIH0pLFxuICAgIFttYXBJbWFnZVVybCwgbWFwUGFnZVVybCwgd3JhcHBlZFRoZW1lQ29tcG9uZW50cywgcm9vdFBhZ2VJZCwgcmVzdF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoY3R4LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufTtcbnZhciBOb3Rpb25Db250ZXh0Q29uc3VtZXIgPSBjdHguQ29uc3VtZXI7XG52YXIgdXNlTm90aW9uQ29udGV4dCA9ICgpID0+IHtcbiAgcmV0dXJuIFJlYWN0MTgudXNlQ29udGV4dChjdHgpO1xufTtcblxuLy8gc3JjL2ljb25zL2RlZmF1bHQtcGFnZS1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxOSBmcm9tIFwicmVhY3RcIjtcbnZhciBEZWZhdWx0UGFnZUljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTkuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWVcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAzMCAzMFwiLFxuICAgIHdpZHRoOiBcIjE2XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNiwxSDR2MjhoMjJWMTFMMTYsMXogTTE2LDMuODI4TDIzLjE3MiwxMUgxNlYzLjgyOHogTTI0LDI3SDZWM2g4djEwaDEwVjI3eiBNOCwxN2gxNHYtMkg4VjE3eiBNOCwyMWgxNHYtMkg4VjIxeiBNOCwyNWgxNHYtMkg4VjI1elwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtaWNvbi50c3hcbnZhciBpc0ljb25CbG9jayA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gdmFsdWUudHlwZSA9PT0gXCJwYWdlXCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjYWxsb3V0XCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIiB8fCB2YWx1ZS50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCI7XG59O1xudmFyIFBhZ2VJY29uSW1wbCA9ICh7XG4gIGJsb2NrLFxuICBjbGFzc05hbWUsXG4gIGlubGluZSA9IHRydWUsXG4gIGhpZGVEZWZhdWx0SWNvbiA9IGZhbHNlLFxuICBkZWZhdWx0SWNvblxufSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgbWFwSW1hZ2VVcmwsIHJlY29yZE1hcCwgZGFya01vZGUgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgbGV0IGlzSW1hZ2UgPSBmYWxzZTtcbiAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICBpZiAoaXNJY29uQmxvY2soYmxvY2spKSB7XG4gICAgY29uc3QgaWNvbiA9ICgoX2EgPSBnZXRCbG9ja0ljb24oYmxvY2ssIHJlY29yZE1hcCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmltKCkpIHx8IGRlZmF1bHRJY29uO1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZTMoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKGljb24gJiYgaXNVcmwoaWNvbikpIHtcbiAgICAgIGNvbnN0IHVybCA9IG1hcEltYWdlVXJsKGljb24sIGJsb2NrKTtcbiAgICAgIGlzSW1hZ2UgPSB0cnVlO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICAgIHNyYzogdXJsLFxuICAgICAgICBhbHQ6IHRpdGxlIHx8IFwicGFnZSBpY29uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIilcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaWNvbiAmJiBpY29uLnN0YXJ0c1dpdGgoXCIvaWNvbnMvXCIpKSB7XG4gICAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vd3d3Lm5vdGlvbi5zb1wiICsgaWNvbiArIFwiP21vZGU9XCIgKyAoZGFya01vZGUgPyBcImRhcmtcIiA6IFwibGlnaHRcIik7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgc3JjOiB1cmwsXG4gICAgICAgIGFsdDogdGl0bGUgfHwgXCJwYWdlIGljb25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaWNvbikge1xuICAgICAgaWYgKCFoaWRlRGVmYXVsdEljb24pIHtcbiAgICAgICAgaXNJbWFnZSA9IHRydWU7XG4gICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QyMC5jcmVhdGVFbGVtZW50KERlZmF1bHRQYWdlSWNvbiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIiksXG4gICAgICAgICAgYWx0OiB0aXRsZSA/IHRpdGxlIDogXCJwYWdlIGljb25cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXNJbWFnZSA9IGZhbHNlO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKSxcbiAgICAgICAgcm9sZTogXCJpbWdcIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGljb25cbiAgICAgIH0sIGljb24pO1xuICAgIH1cbiAgfVxuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIGlubGluZSA/IFwibm90aW9uLXBhZ2UtaWNvbi1pbmxpbmVcIiA6IFwibm90aW9uLXBhZ2UtaWNvbi1oZXJvXCIsXG4gICAgICBpc0ltYWdlID8gXCJub3Rpb24tcGFnZS1pY29uLWltYWdlXCIgOiBcIm5vdGlvbi1wYWdlLWljb24tc3BhblwiXG4gICAgKVxuICB9LCBjb250ZW50KTtcbn07XG52YXIgUGFnZUljb24gPSBSZWFjdDIwLm1lbW8oUGFnZUljb25JbXBsKTtcblxuLy8gc3JjL2ljb25zL2NvbGxlY3Rpb24tdmlldy1ib2FyZC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjEgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdDb2xsZWN0aW9uVmlld0JvYXJkKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyMS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjEuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTEyIDEuNUgyYS41LjUgMCAwMC0uNS41djEwYS41LjUgMCAwMC41LjVoMTBhLjUuNSAwIDAwLjUtLjVWMmEuNS41IDAgMDAtLjUtLjV6TTIgMGgxMGEyIDIgMCAwMTIgMnYxMGEyIDIgMCAwMS0yIDJIMmEyIDIgMCAwMS0yLTJWMmEyIDIgMCAwMTItMnptMSAzaDJ2NkgzVjN6bTMgMGgydjhINlYzem0zIDBoMnY0SDlWM3pcIlxuICB9KSk7XG59XG52YXIgY29sbGVjdGlvbl92aWV3X2JvYXJkX2RlZmF1bHQgPSBTdmdDb2xsZWN0aW9uVmlld0JvYXJkO1xuXG4vLyBzcmMvaWNvbnMvY29sbGVjdGlvbi12aWV3LWNhbGVuZGFyLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyMiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z0NvbGxlY3Rpb25WaWV3Q2FsZW5kYXIocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyMi5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMi41NjQgNC4wMDRjLS41ODYgMC0uNzEuMDI0LS44MzMuMDlhLjMxOS4zMTkgMCAwMC0uMTQxLjE0Yy0uMDY2LjEyNC0uMDkuMjQ3LS4wOS44MzR2Ni4zNjhjMCAuNTg2LjAyNC43MS4wOS44MzNhLjMxOS4zMTkgMCAwMC4xNC4xNDFjLjEyNC4wNjYuMjQ4LjA5LjgzNC4wOWg4Ljg3MmMuNTg2IDAgLjcxLS4wMjQuODMzLS4wOWEuMzE5LjMxOSAwIDAwLjE0MS0uMTRjLjA2Ni0uMTI0LjA5LS4yNDguMDktLjgzNFY1LjA2OGMwLS41ODctLjAyNC0uNzEtLjA5LS44MzRhLjMxOS4zMTkgMCAwMC0uMTQtLjE0Yy0uMTI0LS4wNjYtLjI0OC0uMDktLjgzNC0uMDlIMi41NjR6bTAtNC4wMDRoOC44NzJjLjg5MiAwIDEuMjE1LjA5MyAxLjU0LjI2Ny4zMjcuMTc0LjU4My40My43NTcuNzU2LjE3NC4zMjYuMjY3LjY1LjI2NyAxLjU0djguODczYzAgLjg5Mi0uMDkzIDEuMjE1LS4yNjcgMS41NC0uMTc0LjMyNy0uNDMuNTgzLS43NTYuNzU3LS4zMjYuMTc0LS42NS4yNjctMS41NC4yNjdIMi41NjNjLS44OTIgMC0xLjIxNS0uMDkzLTEuNTQtLjI2N2ExLjgxNyAxLjgxNyAwIDAxLS43NTctLjc1NkMuMDkzIDEyLjY1IDAgMTIuMzI3IDAgMTEuNDM3VjIuNTYzYzAtLjg5Mi4wOTMtMS4yMTUuMjY3LTEuNTQuMTc0LS4zMjcuNDMtLjU4My43NTYtLjc1N0MxLjM1LjA5MyAxLjY3MyAwIDIuNTYzIDB6bTQuMDQ0IDcuODhjLjE3OS4xMS4zMTguMjU2LjQxOC40MzYuMS4xOC4xNDguMzk0LjE0OC42NCAwIC4zMDQtLjA4LjU5Ny0uMjM4Ljg3Ni0uMTYuMjgtLjM5Mi40OTgtLjY5Mi42NS0uMjk5LjE1LS42ODUuMjI0LTEuMTYuMjI0LS40NiAwLS44MjctLjA1NS0xLjEtLjE2NmExLjY4NyAxLjY4NyAwIDAxLS42OC0uNDkyIDIuMjI3IDIuMjI3IDAgMDEtLjQwNC0uODAybC4wODMtLjEyNyAxLjM3LS4xODIuMTEyLjA4Yy4wNS4yNTguMTI2LjQzMS4yMjEuNTJhLjUwNy41MDcgMCAwMC4zNjQuMTMzLjQ5NS40OTUgMCAwMC4zODYtLjE2OWMuMTA1LS4xMTUuMTU4LS4yNy4xNTgtLjQ3MiAwLS4yMDUtLjA1MS0uMzU4LS4xNS0uNDYzYS41MjcuNTI3IDAgMDAtLjQwNy0uMTU3IDEuNjUgMS42NSAwIDAwLS40MTcuMDc3bC0uMTI3LS4xMDQuMDctLjk4LjExNS0uMDkxYy4wNzIuMDEuMTI3LjAxNS4xNjQuMDE1LjE1NCAwIC4yOC0uMDQ3LjM4LS4xNDQuMS0uMDk2LjE1LS4yMDUuMTUtLjMzNWEuMzg4LjM4OCAwIDAwLS4xMDYtLjI5Yy0uMDctLjA3LS4xNjgtLjEwNS0uMy0uMTA1YS40NDQuNDQ0IDAgMDAtLjMyNC4xMThjLS4wODMuMDgtLjE0My4yMzItLjE3Ni40NTdsLS4xMTcuMDg0LTEuMjk3LS4yMzMtLjA3OS0uMTIzYy4xMTQtLjQzNS4zMzQtLjc3Mi42Ni0xLjAwNi4zMjYtLjIzNC43OC0uMzQ5IDEuMzYtLjM0OS42NjYgMCAxLjE1My4xMjYgMS40NjIuMzg0LjMxLjI1OS40NjcuNTg5LjQ2Ny45ODIgMCAuMjMzLS4wNjQuNDQ2LS4xOTIuNjM2YTEuNDMgMS40MyAwIDAxLS4zNy4zNjVjLjEuMDM0LjE4Mi4wNzIuMjQ4LjExM3ptMS43NDctLjE0NWE1LjE4NiA1LjE4NiAwIDAxLS44MDYuMzFsLS4xMjktLjA5N1Y2LjgyNGwuMDctLjA5NmMuNDU1LS4xNDcuODA3LS4zMjIgMS4wNTUtLjUyNC4yNDYtLjIwMi40MzktLjQ1LjU3OS0uNzQ3bC4wOS0uMDU3aDEuMTM1bC4xLjF2NS4wMjFsLS4xLjFIOC45NjFsLS4xLS4xVjcuNDI4YTQuMDUzIDQuMDUzIDAgMDEtLjUwNi4zMDd6XCJcbiAgfSkpO1xufVxudmFyIGNvbGxlY3Rpb25fdmlld19jYWxlbmRhcl9kZWZhdWx0ID0gU3ZnQ29sbGVjdGlvblZpZXdDYWxlbmRhcjtcblxuLy8gc3JjL2ljb25zL2NvbGxlY3Rpb24tdmlldy1nYWxsZXJ5LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyMyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z0NvbGxlY3Rpb25WaWV3R2FsbGVyeShwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjMuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xMiAxLjVIMmEuNS41IDAgMDAtLjUuNXYxMGEuNS41IDAgMDAuNS41aDEwYS41LjUgMCAwMC41LS41VjJhLjUuNSAwIDAwLS41LS41ek0yIDBoMTBhMiAyIDAgMDEyIDJ2MTBhMiAyIDAgMDEtMiAySDJhMiAyIDAgMDEtMi0yVjJhMiAyIDAgMDEyLTJ6bTEgM2gzLjV2My41SDNWM3ptNC41IDBIMTF2My41SDcuNVYzek0zIDcuNWgzLjVWMTFIM1Y3LjV6bTQuNSAwSDExVjExSDcuNVY3LjV6XCJcbiAgfSkpO1xufVxudmFyIGNvbGxlY3Rpb25fdmlld19nYWxsZXJ5X2RlZmF1bHQgPSBTdmdDb2xsZWN0aW9uVmlld0dhbGxlcnk7XG5cbi8vIHNyYy9pY29ucy9jb2xsZWN0aW9uLXZpZXctbGlzdC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdDb2xsZWN0aW9uVmlld0xpc3QocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyNC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTIgMS41SDJhLjUuNSAwIDAwLS41LjV2MTBhLjUuNSAwIDAwLjUuNWgxMGEuNS41IDAgMDAuNS0uNVYyYS41LjUgMCAwMC0uNS0uNXpNMiAwaDEwYTIgMiAwIDAxMiAydjEwYTIgMiAwIDAxLTIgMkgyYTIgMiAwIDAxLTItMlYyYTIgMiAwIDAxMi0yem0xIDNoNnYxLjVIM1Yzem0wIDIuNWg4VjdIM1Y1LjV6TTMgOGg0djEuNUgzVjh6XCJcbiAgfSkpO1xufVxudmFyIGNvbGxlY3Rpb25fdmlld19saXN0X2RlZmF1bHQgPSBTdmdDb2xsZWN0aW9uVmlld0xpc3Q7XG5cbi8vIHNyYy9pY29ucy9jb2xsZWN0aW9uLXZpZXctdGFibGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDI1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnQ29sbGVjdGlvblZpZXdUYWJsZShwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI1LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0yIDBoMTBhMiAyIDAgMDEyIDJ2MTBhMiAyIDAgMDEtMiAySDJhMiAyIDAgMDEtMi0yVjJhMiAyIDAgMDEyLTJ6bTMuNzUgNS42N3YyLjY2aDYuNzVWNS42N0g1Ljc1em0wIDQuMTd2Mi42Nmg1Ljc1YTEgMSAwIDAwMS0xVjkuODRINS43NXpNMS41IDUuNjd2Mi42NmgyLjc1VjUuNjdIMS41em0wIDQuMTd2MS42NmExIDEgMCAwMDEgMWgxLjc1VjkuODRIMS41em0xLTguMzRhMSAxIDAgMDAtMSAxdjEuNjZoMi43NVYxLjVIMi41em0zLjI1IDB2Mi42Nmg2Ljc1VjIuNWExIDEgMCAwMC0xLTFINS43NXpcIlxuICB9KSk7XG59XG52YXIgY29sbGVjdGlvbl92aWV3X3RhYmxlX2RlZmF1bHQgPSBTdmdDb2xsZWN0aW9uVmlld1RhYmxlO1xuXG4vLyBzcmMvaWNvbnMvY29sbGVjdGlvbi12aWV3LWljb24udHN4XG52YXIgaWNvbk1hcCA9IHtcbiAgdGFibGU6IGNvbGxlY3Rpb25fdmlld190YWJsZV9kZWZhdWx0LFxuICBib2FyZDogY29sbGVjdGlvbl92aWV3X2JvYXJkX2RlZmF1bHQsXG4gIGdhbGxlcnk6IGNvbGxlY3Rpb25fdmlld19nYWxsZXJ5X2RlZmF1bHQsXG4gIGxpc3Q6IGNvbGxlY3Rpb25fdmlld19saXN0X2RlZmF1bHQsXG4gIGNhbGVuZGFyOiBjb2xsZWN0aW9uX3ZpZXdfY2FsZW5kYXJfZGVmYXVsdFxufTtcbnZhciBDb2xsZWN0aW9uVmlld0ljb24gPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICB0eXBlXG4gIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwidHlwZVwiXG4gIF0pO1xuICBjb25zdCBpY29uID0gaWNvbk1hcFt0eXBlXTtcbiAgaWYgKCFpY29uKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGljb24ocmVzdCk7XG59O1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi1yb3cudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDQ0IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi1jb2x1bW4tdGl0bGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDQyIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1jaGVja2JveC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjYgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlQ2hlY2tib3gocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI2LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyNi5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMCAzYTMgMyAwIDAxMy0zaDhhMyAzIDAgMDEzIDN2OGEzIDMgMCAwMS0zIDNIM2EzIDMgMCAwMS0zLTNWM3ptMy0xLjVBMS41IDEuNSAwIDAwMS41IDN2OEExLjUgMS41IDAgMDAzIDEyLjVoOGExLjUgMS41IDAgMDAxLjUtMS41VjNBMS41IDEuNSAwIDAwMTEgMS41SDN6bS0uMTY3IDUuMzE2bC41NjYtLjU0Mi4xNzctLjE3LjM0Ny0uMzMyLjM0Ni4zMzQuMTc2LjE3IDEuMTM5IDEuMDk4IDMuNjk5LTMuNTYzLjE3Ny0uMTcuMzQ3LS4zMzUuMzQ3LjMzNC4xNzcuMTcuNTYzLjU0My4xNzcuMTcxLjM3Mi4zNi0uMzcyLjM2LS4xNzcuMTctNC43ODYgNC42MTUtLjE3Ny4xNzEtLjM0Ny4zMzQtLjM0Ny0uMzM0LS4xNzctLjE3LTIuMjMtMi4xNS0uMTc3LS4xNzItLjM3NS0uMzYxLjM3Ni0uMzYuMTc5LS4xN3pcIlxuICB9KSk7XG59XG52YXIgdHlwZV9jaGVja2JveF9kZWZhdWx0ID0gU3ZnVHlwZUNoZWNrYm94O1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1kYXRlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QyNyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVEYXRlKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyNy5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjcuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTEwLjg4OSA1LjVIMy4xMXYxLjU1Nmg3Ljc3OFY1LjV6bTEuNTU1LTQuNDQ0aC0uNzc3VjBIMTAuMTF2MS4wNTZIMy44OVYwSDIuMzMzdjEuMDU2aC0uNzc3Yy0uODY0IDAtMS41NDguNy0xLjU0OCAxLjU1NUwwIDEyLjVjMCAuODU2LjY5MiAxLjUgMS41NTYgMS41aDEwLjg4OEMxMy4zIDE0IDE0IDEzLjM1NiAxNCAxMi41VjIuNjExYzAtLjg1NS0uNy0xLjU1NS0xLjU1Ni0xLjU1NXptMCAxMS40NDRIMS41NTZWMy45NDRoMTAuODg4VjEyLjV6TTguNTU2IDguNjExSDMuMTF2MS41NTZoNS40NDVWOC42MXpcIlxuICB9KSk7XG59XG52YXIgdHlwZV9kYXRlX2RlZmF1bHQgPSBTdmdUeXBlRGF0ZTtcblxuLy8gc3JjL2ljb25zL3R5cGUtZW1haWwudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDI4IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZUVtYWlsKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QyOC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MjguY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTE0IDYuMjI1YzAgLjgyMi0uMTMzIDEuNTc0LS40IDIuMjU2LS4yNjcuNjgzLS42NDQgMS4yMTgtMS4xMyAxLjYwNi0uNDg4LjM4OC0uOTQ2LjYtMS40OTQuNi0uNDI5IDAtLjgwOC0uMTAyLTEuMTM5LS4zMDVhMS43NTMgMS43NTMgMCAwMS0uNzEzLS44Yy0uNjEzLjczNi0xLjU2MyAxLjEwNC0yLjUzMSAxLjEwNC0xLjAyNyAwLTEuODM1LS4zMDQtMi40MjctLjkxMi0uNTkxLS42MDgtLjg4Ny0xLjQ0LS44ODctMi40OTYgMC0xLjIwNC4zODktMi4xNzUgMS4xNjYtMi45MTEuNzc2LS43MzYgMS43OTEtMS4xMDUgMy4wNDQtMS4xMDUuNDk4IDAgMi4wMzIuMjEyIDIuMjUyLjI2OC41MS4xMy44Ni41OTMuODM1IDEuMTEybC0uMTU2IDMuMjg3YzAgLjc5NC4yMiAxLjE5LjY2IDEuMTkuMzcyIDAgLjY2OC0uMjY3Ljg4OC0uOC4yMi0uNTM0LjMzLTEuMjMyLjMzLTIuMDk0IDAtLjkxOS0uMTk0LTEuNzMxLS41ODItMi40MzZhMy45MjQgMy45MjQgMCAwMC0xLjY0LTEuNjE0Yy0uNzA0LS4zNzEtMS41MDktLjU1Ny0yLjQxMy0uNTU3LTEuMTcyIDAtMi4xOS4yMzctMy4wNTMuNzExYTQuNzg1IDQuNzg1IDAgMDAtMS45ODggMi4wNWMtLjQ2Ljg5NC0uNjkxIDEuOTI2LS42OTEgMy4wOTYgMCAxLjU3Ni40MjggMi43ODQgMS4yODMgMy42MjcuODU1Ljg0MSAyLjA5NCAxLjI2MiAzLjcxOCAxLjI2Mi42MTUgMCAxLjI5LS4wNjcgMi4wMjctLjIuMjI1LS4wNDIuNTE4LS4xMDguODc3LS4yYS44NjMuODYzIDAgMDExLjAyNS41MjcuNzYuNzYgMCAwMS0uNTAyLjk5M2MtMS4wNTIuMzE2LTIuMTcuNDg4LTMuMzU3LjUxNi0yLjIwNCAwLTMuOTIyLS41Ny01LjE1NC0xLjcxM0MuNjE2IDExLjE0NiAwIDkuNTYgMCA3LjUyN2MwLTEuNDEuMzE1LTIuNjkuOTQ0LTMuODRBNi43OTIgNi43OTIgMCAwMTMuNjMuOThDNC43OTQuMzI3IDYuMTMxIDAgNy42NDUgMGMxLjI3NiAwIDIuNTE0LjI5IDMuNDE4Ljc3LjkwNS40ODEgMS41NzQgMS4yMjggMi4xMiAyLjE3Ni41NDQuOTQ3LjgxNyAyLjA0LjgxNyAzLjI4em0tOC42MTUgMS4wMWMwIDEuMjA4LjQ4OCAxLjgxMSAxLjQ2NiAxLjgxMS41MTEgMCAuOS0uMTgxIDEuMTY4LS41NDUuMjY3LS4zNjMuNDI5LS45NTQuNDg2LTEuNzcybC4xMS0xLjg5NmE0LjYzOCA0LjYzOCAwIDAwLS45OC0uMDk1Yy0uNzEgMC0xLjI2My4yMjQtMS42NTguNjctLjM5NS40NDYtLjU5MiAxLjA1NS0uNTkyIDEuODI4elwiXG4gIH0pKTtcbn1cbnZhciB0eXBlX2VtYWlsX2RlZmF1bHQgPSBTdmdUeXBlRW1haWw7XG5cbi8vIHNyYy9pY29ucy90eXBlLWZpbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDI5IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZUZpbGUocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDI5LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QyOS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNS45NDYgMTRhNC45NzUgNC45NzUgMCAwMS0zLjQ5Ny0xLjQxNUE0LjczMSA0LjczMSAwIDAxMSA5LjE3NGMwLTEuMjg4LjUxNS0yLjUgMS40NDktMy40MUw3LjQ1Ni45ODZjMS4zNDUtMS4zMTMgMy43MjItMS4zMTggNS4wOC4wMDdhMy40NTMgMy40NTMgMCAwMTAgNC45NjFMOC4wMyAxMC4yNDFjLS44NjcuODQ3LTIuMjkzLjg0OC0zLjE3LS4wMDZhMi4xNTggMi4xNTggMCAwMTAtMy4xMDJsMS43NDQtMS43MDEgMS4yNzIgMS4yNC0xLjc0NCAxLjcwMWEuNDMuNDMgMCAwMDAgLjYyMWMuMjMuMjIzLjQwNS4yMjMuNjM2IDBsNC41MDMtNC4yODhhMS43MjMgMS43MjMgMCAwMC0uMDA3LTIuNDczYy0uNjgtLjY2My0xLjg2NC0uNjYzLTIuNTQzIDBMMy43MTMgNy4wMTFhMy4wMDYgMy4wMDYgMCAwMC0uOTE1IDIuMTYzYzAgLjgyLjMyOCAxLjU5MS45MjIgMi4xNyAxLjE5IDEuMTYyIDMuMjYyIDEuMTYyIDQuNDUxIDBsMi4yNDgtMi4xOTIgMS4yNzIgMS4yNC0yLjI0OCAyLjE5M0E0Ljk3OCA0Ljk3OCAwIDAxNS45NDYgMTR6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfZmlsZV9kZWZhdWx0ID0gU3ZnVHlwZUZpbGU7XG5cbi8vIHNyYy9pY29ucy90eXBlLWZvcm11bGEudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDMwIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZUZvcm11bGEocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMwLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QzMC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNy43NzkgNy4wNjNsLTMuMTU3IDQuMjI0YS40OS40OSAwIDAwLS4wNzIuMjE4LjM1LjM1IDAgMDAuMzQ2LjM1N2g2LjI0MmMuNDc2IDAgLjg2Mi4zOTguODYyLjg4OXYuMzZjMCAuNDkxLS4zODYuODg5LS44NjIuODg5SDEuODYyQS44NzYuODc2IDAgMDExIDEzLjExMXYtLjQyNWEuODIuODIgMCAwMS4xNzctLjU0TDQuMzkzIDcuOGExLjM2NyAxLjM2NyAwIDAwLS4wMDYtMS42MjVMMS40IDIuMTk0YS44MjIuODIyIDAgMDEtLjE4LS41NDRWLjg5QzEuMjIuMzk4IDEuNjA0IDAgMi4wOCAwaDguODM4Yy40NzYgMCAuODYxLjM5OC44NjEuODg5di4zNmMwIC40OTEtLjM4NS44OS0uODYuODlINS4xMzVjLS4xOSAwLS4zNDUuMTU5LS4zNDUuMzU2YS40ODkuNDg5IDAgMDAuMDcuMjE2bDIuOTIgMy45NzVjLjA0OS4wNjIuMDYzLjEwNy4wNi4xODhhLjI0Ni4yNDYgMCAwMS0uMDYyLjE4OXpcIlxuICB9KSk7XG59XG52YXIgdHlwZV9mb3JtdWxhX2RlZmF1bHQgPSBTdmdUeXBlRm9ybXVsYTtcblxuLy8gc3JjL2ljb25zL3R5cGUtbXVsdGktc2VsZWN0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QzMSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVNdWx0aVNlbGVjdChwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MzEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMxLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk00IDNhMSAxIDAgMDExLTFoN2ExIDEgMCAxMTAgMkg1YTEgMSAwIDAxLTEtMXptMCA0YTEgMSAwIDAxMS0xaDdhMSAxIDAgMTEwIDJINWExIDEgMCAwMS0xLTF6bTAgNGExIDEgMCAwMTEtMWg3YTEgMSAwIDExMCAySDVhMSAxIDAgMDEtMS0xek0yIDRhMSAxIDAgMTEwLTIgMSAxIDAgMDEwIDJ6bTAgNGExIDEgMCAxMTAtMiAxIDEgMCAwMTAgMnptMCA0YTEgMSAwIDExMC0yIDEgMSAwIDAxMCAyelwiXG4gIH0pKTtcbn1cbnZhciB0eXBlX211bHRpX3NlbGVjdF9kZWZhdWx0ID0gU3ZnVHlwZU11bHRpU2VsZWN0O1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1udW1iZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDMyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZU51bWJlcihwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MzIuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMyLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk00LjQ2MiAwYy0uNTk1IDAtMS4wNzguNDgyLTEuMDc4IDEuMDc4djIuMzA2SDEuMDc4YTEuMDc4IDEuMDc4IDAgMTAwIDIuMTU1aDIuMzA2djIuOTIySDEuMDc4YTEuMDc4IDEuMDc4IDAgMTAwIDIuMTU1aDIuMzA2djIuMzA2YTEuMDc4IDEuMDc4IDAgMDAyLjE1NSAwdi0yLjMwNkg4LjQ2djIuMzA2YTEuMDc4IDEuMDc4IDAgMDAyLjE1NiAwdi0yLjMwNmgyLjMwNmExLjA3OCAxLjA3OCAwIDEwMC0yLjE1NWgtMi4zMDZWNS41MzloMi4zMDZhMS4wNzggMS4wNzggMCAxMDAtMi4xNTVoLTIuMzA2VjEuMDc4YTEuMDc4IDEuMDc4IDAgMDAtMi4xNTYgMHYyLjMwNkg1LjU0VjEuMDc4QzUuNTQuNDgyIDUuMDU2IDAgNC40NjEgMHptMS4wNzcgOC40NlY1LjU0SDguNDZ2Mi45Mkg1LjU0elwiXG4gIH0pKTtcbn1cbnZhciB0eXBlX251bWJlcl9kZWZhdWx0ID0gU3ZnVHlwZU51bWJlcjtcblxuLy8gc3JjL2ljb25zL3R5cGUtcGVyc29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QzMyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVQZXJzb24ocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMzLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QzMy5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNOS42MjUgMTAuODQ3QzguOTEyIDEwLjI4OSA4LjEyMSA5LjkyNiA3IDkuMjZ2LS41NGEzLjMzIDMuMzMgMCAwMC41MzgtLjg4OGMuNDA4LS4xLjc3NC0uNDk4Ljc3NC0uODMyIDAtLjQ4Mi0uMjAyLS42NzMtLjQ0LS44MjkgMC0uMDE1LjAwMy0uMDMuMDAzLS4wNDYgMC0uNzExLS40MzgtMi42MjUtMi42MjUtMi42MjUtMi4xODggMC0yLjYyNSAxLjkxNS0yLjYyNSAyLjYyNSAwIC4wMTcuMDAzLjAzLjAwMy4wNDYtLjIzOC4xNTYtLjQ0LjM0Ny0uNDQuODI5IDAgLjMzNC4zNjYuNzMxLjc3NC44MzMuMTQ2LjM0My4zMjYuNjQzLjUzOC44ODZ2LjU0MWMtMS4xMi42NjUtMS45MTIgMS4wMjgtMi42MjUgMS41ODdDLjA0MSAxMS40OTggMCAxMi40NjkgMCAxNGgxMC41YzAtMS41MzEtLjA0MS0yLjUwMi0uODc1LTMuMTUzem0zLjUtMy41Yy0uNzEzLS41NTgtMS41MDQtLjkyMS0yLjYyNS0xLjU4N3YtLjU0Yy4yMTItLjI0NC4zOTItLjU0NC41MzgtLjg4OC40MDgtLjEuNzc0LS40OTguNzc0LS44MzIgMC0uNDgyLS4yMDItLjY3My0uNDQtLjgyOSAwLS4wMTUuMDAzLS4wMy4wMDMtLjA0NkMxMS4zNzUgMS45MTQgMTAuOTM3IDAgOC43NSAwIDYuNTYyIDAgNi4xMjUgMS45MTUgNi4xMjUgMi42MjVjMCAuMDE3LjAwMy4wMy4wMDMuMDQ2LS4wMTYuMDEyLS4wMy4wMjUtLjA0Ny4wMzYgMS43NTEuMzU5IDIuNTE2IDEuODQxIDIuNjQ3IDMuMDQuMjQ4LjI2Mi40Ni42NS40NiAxLjI1MyAwIC42MDMtLjQxNyAxLjIwMy0xLjAwNCAxLjUxNS0uMDU3LjEwOS0uMTE3LjIxNC0uMTgxLjMxNWwuNDM3LjI0NWMuNjQuMzU3IDEuMTk0LjY2NiAxLjcyNCAxLjA4MS4xMzguMTA4LjI1Ni4yMjQuMzY1LjM0M0gxNGMwLTEuNTMtLjA0MS0yLjUtLjg3NS0zLjE1M3pcIlxuICB9KSk7XG59XG52YXIgdHlwZV9wZXJzb25fZGVmYXVsdCA9IFN2Z1R5cGVQZXJzb247XG5cbi8vIHNyYy9pY29ucy90eXBlLXBlcnNvbi0yLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QzNCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVQZXJzb24yKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzNC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MzQuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTEzLjEyNSAxMC4wMzVjLS41NzEtLjU1LTIuMzI0LTEuNTA0LTMuNS0yLjE2di0uODM0Yy4yMjQtLjMyMi40Mi0uNjcxLjU2Ni0xLjA1NS4zOTQtLjI0Mi43NDYtLjcwMi43NDYtMS4xNzMgMC0uNDU4LS4wMDUtLjg3LS40Ny0xLjIwOEMxMC4zMDUgMS41NTggOS40MzYgMCA3IDBTMy42OTUgMS41NTggMy41MzMgMy42MDVjLS40NjUuMzM4LS40Ny43NS0uNDcgMS4yMDggMCAuNDcxLjM1Mi45My43NDYgMS4xNzMuMTQ2LjM4NC4zNDIuNzMzLjU2NiAxLjA1NXYuODM0Yy0xLjE3Ni42NTYtMi45MjkgMS42MS0zLjUgMi4xNkMuMTY1IDEwLjcyIDAgMTEuODEyIDAgMTRoMTRjMC0yLjE4OC0uMTY0LTMuMjgxLS44NzUtMy45NjV6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfcGVyc29uXzJfZGVmYXVsdCA9IFN2Z1R5cGVQZXJzb24yO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1waG9uZS1udW1iZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDM1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZVBob25lTnVtYmVyKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzNS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MzUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTIuMjA3LjAxM2EuNDg3LjQ4NyAwIDAwLS4yOS4wMkMuODcuNDM4LjIxMyAxLjkzLjA1OCAyLjk1NWMtLjQ4NCAzLjMzIDIuMTUgNi4yMTUgNC41NyA4LjExMyAyLjE0OSAxLjY4NCA2LjI3MyA0LjQ1MyA4LjcxMyAxLjc4MS4zMS0uMzI5LjY3OC0uODEzLjY1OC0xLjI5Ny0uMDU4LS44MTMtLjgxMy0xLjM5NC0xLjM5NC0xLjg0LS40NDUtLjMyOS0xLjM3NS0xLjIzOS0xLjk1Ni0xLjIyLS41MjIuMDItLjg1MS41NjItMS4xOC44OTFsLS41ODIuNTgxYy0uMDk2LjA5Ny0xLjMzNi0uNzE2LTEuNDcxLS44MTNhOS44ODEgOS44ODEgMCAwMS0xLjQxNC0xLjEwNEE5LjEzIDkuMTMgMCAwMTQuODYgNi43MzJjLS4wOTctLjEzNi0uODktMS4zMTctLjgxMy0xLjQxNCAwIDAgLjY3Ny0uNzM2Ljg3MS0xLjAyNi40MDctLjYyLjcxNy0xLjEwNC4yNTItMS44NC0uMTc0LS4yNy0uMzg3LS40ODQtLjYyLS43MTYtLjQwNi0uMzg3LS44MTMtLjc5NC0xLjI3OC0xLjEyMy0uMjUxLS4xOTQtLjY3Ny0uNTQyLTEuMDY1LS42elwiXG4gIH0pKTtcbn1cbnZhciB0eXBlX3Bob25lX251bWJlcl9kZWZhdWx0ID0gU3ZnVHlwZVBob25lTnVtYmVyO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS1yZWxhdGlvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0MzYgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlUmVsYXRpb24ocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDM2LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QzNi5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNC41IDF2Mmg1LjA4NkwxIDExLjU4NiAyLjQxNCAxMyAxMSA0LjQxNFY5LjVoMlYxelwiXG4gIH0pKTtcbn1cbnZhciB0eXBlX3JlbGF0aW9uX2RlZmF1bHQgPSBTdmdUeXBlUmVsYXRpb247XG5cbi8vIHNyYy9pY29ucy90eXBlLXNlbGVjdC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MzcgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlU2VsZWN0KHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzNy5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MzcuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTcgMTNBNiA2IDAgMTA3IDFhNiA2IDAgMDAwIDEyek0zLjc1MSA1LjMyM0EuMi4yIDAgMDEzLjkwOSA1aDYuMTgyYS4yLjIgMCAwMS4xNTguMzIzTDcuMTU4IDkuMjk3YS4yLjIgMCAwMS0uMzE2IDBMMy43NTEgNS4zMjN6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfc2VsZWN0X2RlZmF1bHQgPSBTdmdUeXBlU2VsZWN0O1xuXG4vLyBzcmMvaWNvbnMvdHlwZS10ZXh0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QzOCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFN2Z1R5cGVUZXh0KHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzOC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MzguY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTcgNC41NjhhLjUuNSAwIDAwLS41LS41aC02YS41LjUgMCAwMC0uNS41djEuMDQ2YS41LjUgMCAwMC41LjVoNmEuNS41IDAgMDAuNS0uNVY0LjU2OHpNLjUgMWEuNS41IDAgMDAtLjUuNXYxLjA0NWEuNS41IDAgMDAuNS41aDEyYS41LjUgMCAwMC41LS41VjEuNWEuNS41IDAgMDAtLjUtLjVILjV6TTAgOC42ODJhLjUuNSAwIDAwLjUuNWgxMWEuNS41IDAgMDAuNS0uNVY3LjYzNmEuNS41IDAgMDAtLjUtLjVILjVhLjUuNSAwIDAwLS41LjV2MS4wNDZ6bTAgMy4wNjhhLjUuNSAwIDAwLjUuNWg5YS41LjUgMCAwMC41LS41di0xLjA0NWEuNS41IDAgMDAtLjUtLjVoLTlhLjUuNSAwIDAwLS41LjV2MS4wNDV6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfdGV4dF9kZWZhdWx0ID0gU3ZnVHlwZVRleHQ7XG5cbi8vIHNyYy9pY29ucy90eXBlLXRpbWVzdGFtcC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MzkgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlVGltZXN0YW1wKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzOS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MzkuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYuOTg2IDE0Yy0xLjc5IDAtMy41ODItLjY5LTQuOTQ0LTIuMDY4LTIuNzIzLTIuNzItMi43MjMtNy4xNzIgMC05Ljg5MiAyLjcyNS0yLjcyIDcuMTgyLTIuNzIgOS45MDYgMEE2Ljk3MiA2Ljk3MiAwIDAxMTQgNi45OTZjMCAxLjg4LS43MjggMy42MzMtMi4wNTIgNC45NTVBNy4wNTggNy4wNTggMCAwMTYuOTg2IDE0em0zLjI4NS02Ljk5djEuNjQ1SDUuNTI2di01LjQ3aDEuODQxdjMuNjNoMi45MDR2LjE5NHptMS44OS0uMDE0YzAtMS4zNzktLjU0Mi0yLjY3LTEuNTIyLTMuNjQ4LTIuMDA2LTIuMDA1LTUuMjg3LTIuMDA3LTcuMjk3LS4wMDlsLS4wMDkuMDA5YTUuMTY4IDUuMTY4IDAgMDAwIDcuMjk1YzIuMDEgMi4wMDcgNS4yOTcgMi4wMDcgNy4zMDYgMGE1LjExOSA1LjExOSAwIDAwMS41MjEtMy42NDd6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfdGltZXN0YW1wX2RlZmF1bHQgPSBTdmdUeXBlVGltZXN0YW1wO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS10aXRsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDAgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlVGl0bGUocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQwLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIHZpZXdCb3g6IFwiMCAwIDE0IDE0XCJcbiAgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0MC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNNy43NCA4LjY5N2EuODEuODEgMCAwMS4wNzMuMzA4Ljg5NC44OTQgMCAwMS0uOS44ODguODY3Ljg2NyAwIDAxLS44MjUtLjU5MmwtLjMzMy0uOTYxSDIuMDU4bC0uMzMzLjk2MWEuODgyLjg4MiAwIDAxLS44MzguNTkyQS44ODQuODg0IDAgMDEwIDkuMDA1YzAtLjExLjAyNS0uMjIyLjA2Mi0uMzA4bDIuNDAzLTYuMjExYy4yMjItLjU4Ljc3Ni0uOTg2IDEuNDQyLS45ODYuNjUzIDAgMS4yMi40MDcgMS40NDIuOTg2bDIuMzkgNi4yMTF6TTIuNiA2LjgyNGgyLjYxM0wzLjkwNyAzLjEwMiAyLjYgNi44MjR6bTguOC0zLjExOGMxLjM1NSAwIDIuNi41NDIgMi42IDIuMjU1VjkuMDhhLjguOCAwIDAxLS43ODkuODE0Ljc5Ny43OTcgMCAwMS0uNzg4LS43MDNjLS4zOTUuNDY4LTEuMDk3Ljc2NC0xLjg3NC43NjQtLjk0OSAwLTIuMDctLjY0LTIuMDctMS45NzIgMC0xLjM5MiAxLjEyMS0xLjg5NyAyLjA3LTEuODk3Ljc4OSAwIDEuNDkxLjI0NiAxLjg4Ni43Mjd2LS44MjZjMC0uNjA0LS41MTgtLjk5OC0xLjMwNi0uOTk4LS40NjkgMC0uODg4LjEyMy0xLjMyLjM5NGEuNjQuNjQgMCAwMS0uMzA3LjA4Ni42MDIuNjAyIDAgMDEtLjU5Mi0uNjA0YzAtLjIyMS4xMjMtLjQxOS4yODQtLjUxN2EzLjk2MyAzLjk2MyAwIDAxMi4yMDYtLjY0MXptLS4yMjIgNS4xODhjLjUwNSAwIC45OTgtLjE3MiAxLjI1Ny0uNTE3di0uNzRjLS4yNTktLjM0NS0uNzUyLS41MTctMS4yNTctLjUxNy0uNjE2IDAtMS4xMjIuMzMyLTEuMTIyLjkgMCAuNTU0LjUwNi44NzQgMS4xMjIuODc0ek0uNjU2IDExLjEyNWgxMi42ODhhLjY1Ni42NTYgMCAxMTAgMS4zMTNILjY1NmEuNjU2LjY1NiAwIDExMC0xLjMxM3pcIlxuICB9KSk7XG59XG52YXIgdHlwZV90aXRsZV9kZWZhdWx0ID0gU3ZnVHlwZVRpdGxlO1xuXG4vLyBzcmMvaWNvbnMvdHlwZS11cmwudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDQxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gU3ZnVHlwZVVybChwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQxLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0zLjczMyAzLjg2N2gzLjczNGMxLjAzIDAgMS44NjYuODM3IDEuODY2IDEuODY2IDAgMS4wMy0uODM3IDEuODY3LTEuODY2IDEuODY3aC0uOTM0YS45MzQuOTM0IDAgMDAwIDEuODY3aC45MzRhMy43MzQgMy43MzQgMCAwMDAtNy40NjdIMy43MzNBMy43MyAzLjczIDAgMDAxLjg5IDguOTc3YTQuNjM3IDQuNjM3IDAgMDEuMzE0LTIuMTggMS44NTQgMS44NTQgMCAwMS0uMzM2LTEuMDY0YzAtMS4wMy44MzctMS44NjYgMS44NjYtMS44NjZ6bTguMzc3IDEuNDIyYTQuNiA0LjYgMCAwMS0uMzE2IDIuMTc2Yy4yMTIuMzAzLjM0LjY3LjM0IDEuMDY4IDAgMS4wMy0uODM4IDEuODY3LTEuODY3IDEuODY3SDYuNTMzYTEuODY5IDEuODY5IDAgMDEtMS44NjYtMS44NjdjMC0xLjAzLjgzNy0xLjg2NiAxLjg2Ni0xLjg2NmguOTM0YS45MzQuOTM0IDAgMDAwLTEuODY3aC0uOTM0YTMuNzMzIDMuNzMzIDAgMDAwIDcuNDY3aDMuNzM0YTMuNzMgMy43MyAwIDAwMS44NDMtNi45Nzh6XCJcbiAgfSkpO1xufVxudmFyIHR5cGVfdXJsX2RlZmF1bHQgPSBTdmdUeXBlVXJsO1xuXG4vLyBzcmMvaWNvbnMvcHJvcGVydHktaWNvbi50c3hcbnZhciBpY29uTWFwMiA9IHtcbiAgdGl0bGU6IHR5cGVfdGl0bGVfZGVmYXVsdCxcbiAgdGV4dDogdHlwZV90ZXh0X2RlZmF1bHQsXG4gIG51bWJlcjogdHlwZV9udW1iZXJfZGVmYXVsdCxcbiAgc2VsZWN0OiB0eXBlX3NlbGVjdF9kZWZhdWx0LFxuICBtdWx0aV9zZWxlY3Q6IHR5cGVfbXVsdGlfc2VsZWN0X2RlZmF1bHQsXG4gIGRhdGU6IHR5cGVfZGF0ZV9kZWZhdWx0LFxuICBwZXJzb246IHR5cGVfcGVyc29uX2RlZmF1bHQsXG4gIGZpbGU6IHR5cGVfZmlsZV9kZWZhdWx0LFxuICBjaGVja2JveDogdHlwZV9jaGVja2JveF9kZWZhdWx0LFxuICB1cmw6IHR5cGVfdXJsX2RlZmF1bHQsXG4gIGVtYWlsOiB0eXBlX2VtYWlsX2RlZmF1bHQsXG4gIHBob25lX251bWJlcjogdHlwZV9waG9uZV9udW1iZXJfZGVmYXVsdCxcbiAgZm9ybXVsYTogdHlwZV9mb3JtdWxhX2RlZmF1bHQsXG4gIHJlbGF0aW9uOiB0eXBlX3JlbGF0aW9uX2RlZmF1bHQsXG4gIGNyZWF0ZWRfdGltZTogdHlwZV90aW1lc3RhbXBfZGVmYXVsdCxcbiAgbGFzdF9lZGl0ZWRfdGltZTogdHlwZV90aW1lc3RhbXBfZGVmYXVsdCxcbiAgY3JlYXRlZF9ieTogdHlwZV9wZXJzb25fMl9kZWZhdWx0LFxuICBsYXN0X2VkaXRlZF9ieTogdHlwZV9wZXJzb25fMl9kZWZhdWx0XG59O1xudmFyIFByb3BlcnR5SWNvbiA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHR5cGVcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJ0eXBlXCJcbiAgXSk7XG4gIGNvbnN0IGljb24gPSBpY29uTWFwMlt0eXBlXTtcbiAgaWYgKCFpY29uKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gaWNvbihyZXN0KTtcbn07XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2xsZWN0aW9uLWNvbHVtbi10aXRsZS50c3hcbnZhciBDb2xsZWN0aW9uQ29sdW1uVGl0bGUgPSAoeyBzY2hlbWEgfSkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLWNvbHVtbi10aXRsZVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQyLmNyZWF0ZUVsZW1lbnQoUHJvcGVydHlJY29uLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLWNvbHVtbi10aXRsZS1pY29uXCIsXG4gICAgdHlwZTogc2NoZW1hLnR5cGVcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi1jb2x1bW4tdGl0bGUtYm9keVwiXG4gIH0sIHNjaGVtYS5uYW1lKSk7XG59O1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvcHJvcGVydHkudHN4XG52YXIgaW1wb3J0X2Zvcm1hdDIgPSBfX3RvRVNNKHJlcXVpcmVfZm9ybWF0KCksIDEpO1xudmFyIGltcG9ydF9mb3JtYXRfbnVtYmVyID0gX190b0VTTShyZXF1aXJlX2Zvcm1hdF9udW1iZXIoKSwgMSk7XG5pbXBvcnQgKiBhcyBSZWFjdDQzIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvZXZhbC1mb3JtdWxhLnRzXG52YXIgaW1wb3J0X2FkZCA9IF9fdG9FU00ocmVxdWlyZV9hZGQoKSwgMSk7XG52YXIgaW1wb3J0X2Zvcm1hdCA9IF9fdG9FU00ocmVxdWlyZV9mb3JtYXQoKSwgMSk7XG52YXIgaW1wb3J0X2dldERhdGUgPSBfX3RvRVNNKHJlcXVpcmVfZ2V0RGF0ZSgpLCAxKTtcbnZhciBpbXBvcnRfZ2V0RGF5ID0gX190b0VTTShyZXF1aXJlX2dldERheSgpLCAxKTtcbnZhciBpbXBvcnRfZ2V0SG91cnMgPSBfX3RvRVNNKHJlcXVpcmVfZ2V0SG91cnMoKSwgMSk7XG52YXIgaW1wb3J0X2dldE1pbnV0ZXMgPSBfX3RvRVNNKHJlcXVpcmVfZ2V0TWludXRlcygpLCAxKTtcbnZhciBpbXBvcnRfZ2V0TW9udGggPSBfX3RvRVNNKHJlcXVpcmVfZ2V0TW9udGgoKSwgMSk7XG52YXIgaW1wb3J0X2dldFllYXIgPSBfX3RvRVNNKHJlcXVpcmVfZ2V0WWVhcigpLCAxKTtcbnZhciBpbXBvcnRfaW50ZXJ2YWxUb0R1cmF0aW9uID0gX190b0VTTShyZXF1aXJlX2ludGVydmFsVG9EdXJhdGlvbigpLCAxKTtcbnZhciBpbXBvcnRfc3ViID0gX190b0VTTShyZXF1aXJlX3N1YigpLCAxKTtcbmltcG9ydCB7IGdldERhdGVWYWx1ZSwgZ2V0VGV4dENvbnRlbnQgYXMgZ2V0VGV4dENvbnRlbnQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuZnVuY3Rpb24gZXZhbEZvcm11bGEoZm9ybXVsYSwgY29udGV4dCkge1xuICBjb25zdCBfYSA9IGNvbnRleHQsIHsgZW5kRGF0ZSB9ID0gX2EsIGN0eDIgPSBfX29ialJlc3QoX2EsIFtcImVuZERhdGVcIl0pO1xuICBzd2l0Y2ggKGZvcm11bGEgPT0gbnVsbCA/IHZvaWQgMCA6IGZvcm11bGEudHlwZSkge1xuICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgIHJldHVybiBmb3JtdWxhLm5hbWUgPT09IFwidHJ1ZVwiO1xuICAgIGNhc2UgXCJjb25zdGFudFwiOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGZvcm11bGEudmFsdWU7XG4gICAgICBzd2l0Y2ggKGZvcm11bGEucmVzdWx0X3R5cGUpIHtcbiAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwicHJvcGVydHlcIjoge1xuICAgICAgY29uc3QgdmFsdWUgPSBjdHgyLnByb3BlcnRpZXNbZm9ybXVsYS5pZF07XG4gICAgICBjb25zdCB0ZXh0ID0gZ2V0VGV4dENvbnRlbnQyKHZhbHVlKTtcbiAgICAgIHN3aXRjaCAoZm9ybXVsYS5yZXN1bHRfdHlwZSkge1xuICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodGV4dCk7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dCA9PT0gXCJ0cnVlXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlIFwiZGF0ZVwiOiB7XG4gICAgICAgICAgY29uc3QgdiA9IGdldERhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgIGlmIChlbmREYXRlICYmIHYuZW5kX2RhdGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHYuZW5kX2RhdGUpO1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoXG4gICAgICAgICAgICAgICAgZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgIGRhdGUuZ2V0VVRDTW9udGgoKSxcbiAgICAgICAgICAgICAgICBkYXRlLmdldFVUQ0RhdGUoKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHYuc3RhcnRfZGF0ZSk7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShcbiAgICAgICAgICAgICAgICBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICAgICAgICAgICAgZGF0ZS5nZXRVVENNb250aCgpLFxuICAgICAgICAgICAgICAgIGRhdGUuZ2V0VVRDRGF0ZSgpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh0ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSBcIm9wZXJhdG9yXCI6XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICByZXR1cm4gZXZhbEZ1bmN0aW9uRm9ybXVsYShmb3JtdWxhLCBjdHgyKTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgaW52YWxpZCBvciB1bnN1cHBvcnRlZCBmb3JtdWxhIFwiJHtmb3JtdWxhID09IG51bGwgPyB2b2lkIDAgOiBmb3JtdWxhLnR5cGV9YFxuICAgICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gZXZhbEZ1bmN0aW9uRm9ybXVsYShmb3JtdWxhLCBjdHgyKSB7XG4gIGNvbnN0IGFyZ3MgPSBmb3JtdWxhID09IG51bGwgPyB2b2lkIDAgOiBmb3JtdWxhLmFyZ3M7XG4gIHN3aXRjaCAoZm9ybXVsYS5uYW1lKSB7XG4gICAgY2FzZSBcImFuZFwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpICYmIGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgIGNhc2UgXCJlbXB0eVwiOlxuICAgICAgcmV0dXJuICFldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICBjYXNlIFwiZXF1YWxcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSA9PSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICBjYXNlIFwiaWZcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSA/IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpIDogZXZhbEZvcm11bGEoYXJnc1syXSwgY3R4Mik7XG4gICAgY2FzZSBcImxhcmdlclwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpID4gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgY2FzZSBcImxhcmdlckVxXCI6XG4gICAgICByZXR1cm4gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikgPj0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgY2FzZSBcIm5vdFwiOlxuICAgICAgcmV0dXJuICFldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICBjYXNlIFwib3JcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSB8fCBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICBjYXNlIFwic21hbGxlclwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpIDwgZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgY2FzZSBcInNtYWxsZXJFcVwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpIDw9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgIGNhc2UgXCJ1bmVxdWFsXCI6XG4gICAgICByZXR1cm4gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikgIT0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgY2FzZSBcImFic1wiOlxuICAgICAgcmV0dXJuIE1hdGguYWJzKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwiYWRkXCI6IHtcbiAgICAgIGNvbnN0IHYwID0gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4Mik7XG4gICAgICBjb25zdCB2MSA9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgICAgaWYgKHR5cGVvZiB2MCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdjAgKyArdjE7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2MCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdjAgKyBgJHt2MX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHYwO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwiY2JydFwiOlxuICAgICAgcmV0dXJuIE1hdGguY2JydChldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcImNlaWxcIjpcbiAgICAgIHJldHVybiBNYXRoLmNlaWwoZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikpO1xuICAgIGNhc2UgXCJkaXZpZGVcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSAvIGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgIGNhc2UgXCJleHBcIjpcbiAgICAgIHJldHVybiBNYXRoLmV4cChldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcImZsb29yXCI6XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcImxuXCI6XG4gICAgICByZXR1cm4gTWF0aC5sb2coZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikpO1xuICAgIGNhc2UgXCJsb2cxMFwiOlxuICAgICAgcmV0dXJuIE1hdGgubG9nMTAoZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikpO1xuICAgIGNhc2UgXCJsb2cyXCI6XG4gICAgICByZXR1cm4gTWF0aC5sb2cyKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwibWF4XCI6IHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGFyZ3MubWFwKChhcmcpID0+IGV2YWxGb3JtdWxhKGFyZywgY3R4MikpO1xuICAgICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHZhbHVlKSA9PiBNYXRoLm1heChhY2MsIHZhbHVlKSxcbiAgICAgICAgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwibWluXCI6IHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGFyZ3MubWFwKChhcmcpID0+IGV2YWxGb3JtdWxhKGFyZywgY3R4MikpO1xuICAgICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHZhbHVlKSA9PiBNYXRoLm1pbihhY2MsIHZhbHVlKSxcbiAgICAgICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwibW9kXCI6XG4gICAgICByZXR1cm4gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikgJSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICBjYXNlIFwibXVsdGlwbHlcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSAqIGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgIGNhc2UgXCJwb3dcIjpcbiAgICAgIHJldHVybiBNYXRoLnBvdyhcbiAgICAgICAgZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MiksXG4gICAgICAgIGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpXG4gICAgICApO1xuICAgIGNhc2UgXCJyb3VuZFwiOlxuICAgICAgcmV0dXJuIE1hdGgucm91bmQoZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikpO1xuICAgIGNhc2UgXCJzaWduXCI6XG4gICAgICByZXR1cm4gTWF0aC5zaWduKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwic3FydFwiOlxuICAgICAgcmV0dXJuIE1hdGguc3FydChldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcInN1YnRyYWN0XCI6XG4gICAgICByZXR1cm4gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikgLSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICBjYXNlIFwidG9OdW1iZXJcIjpcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwidW5hcnlNaW51c1wiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpICogLTE7XG4gICAgY2FzZSBcInVuYXJ5UGx1c1wiOlxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikpO1xuICAgIGNhc2UgXCJjb25jYXRcIjoge1xuICAgICAgY29uc3QgdmFsdWVzID0gYXJncy5tYXAoKGFyZykgPT4gZXZhbEZvcm11bGEoYXJnLCBjdHgyKSk7XG4gICAgICByZXR1cm4gdmFsdWVzLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIGNhc2UgXCJjb250YWluc1wiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpLmluY2x1ZGVzKFxuICAgICAgICBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKVxuICAgICAgKTtcbiAgICBjYXNlIFwiZm9ybWF0XCI6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4Mik7XG4gICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBpbXBvcnRfZm9ybWF0LmRlZmF1bHQpKHZhbHVlLCBcIk1NTSBkLCBZWVlcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwiam9pblwiOiB7XG4gICAgICBjb25zdCBbZGVsaW1pdGVyQXJnLCAuLi5yZXN0QXJnc10gPSBhcmdzO1xuICAgICAgY29uc3QgZGVsaW1pdGVyID0gZXZhbEZvcm11bGEoZGVsaW1pdGVyQXJnLCBjdHgyKTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHJlc3RBcmdzLm1hcCgoYXJnKSA9PiBldmFsRm9ybXVsYShhcmcsIGN0eDIpKTtcbiAgICAgIHJldHVybiB2YWx1ZXMuam9pbihkZWxpbWl0ZXIpO1xuICAgIH1cbiAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICByZXR1cm4gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4MikubGVuZ3RoO1xuICAgIGNhc2UgXCJyZXBsYWNlXCI6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4Mik7XG4gICAgICBjb25zdCByZWdleCA9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBldmFsRm9ybXVsYShhcmdzWzJdLCBjdHgyKTtcbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAocmVnZXgpLCByZXBsYWNlbWVudCk7XG4gICAgfVxuICAgIGNhc2UgXCJyZXBsYWNlQWxsXCI6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4Mik7XG4gICAgICBjb25zdCByZWdleCA9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBldmFsRm9ybXVsYShhcmdzWzJdLCBjdHgyKTtcbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAocmVnZXgsIFwiZ1wiKSwgcmVwbGFjZW1lbnQpO1xuICAgIH1cbiAgICBjYXNlIFwic2xpY2VcIjoge1xuICAgICAgY29uc3QgdmFsdWUgPSBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICAgIGNvbnN0IGJlZ2luSW5kZXggPSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICAgIGNvbnN0IGVuZEluZGV4ID0gYXJnc1syXSA/IGV2YWxGb3JtdWxhKGFyZ3NbMl0sIGN0eDIpIDogdmFsdWUubGVuZ3RoO1xuICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKGJlZ2luSW5kZXgsIGVuZEluZGV4KTtcbiAgICB9XG4gICAgY2FzZSBcInRlc3RcIjoge1xuICAgICAgY29uc3QgdmFsdWUgPSBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleCkudGVzdCh2YWx1ZSk7XG4gICAgfVxuICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICByZXR1cm4gKDAsIGltcG9ydF9nZXREYXRlLmRlZmF1bHQpKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwiZGF0ZUFkZFwiOiB7XG4gICAgICBjb25zdCBkYXRlID0gZXZhbEZvcm11bGEoYXJnc1swXSwgY3R4Mik7XG4gICAgICBjb25zdCBudW1iZXIgPSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICAgIGNvbnN0IHVuaXQgPSBldmFsRm9ybXVsYShhcmdzWzFdLCBjdHgyKTtcbiAgICAgIHJldHVybiAoMCwgaW1wb3J0X2FkZC5kZWZhdWx0KShkYXRlLCB7IFt1bml0XTogbnVtYmVyIH0pO1xuICAgIH1cbiAgICBjYXNlIFwiZGF0ZUJldHdlZW5cIjoge1xuICAgICAgY29uc3QgZGF0ZTEgPSBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICAgIGNvbnN0IGRhdGUyID0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgICBjb25zdCB1bml0ID0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4Mik7XG4gICAgICByZXR1cm4gKDAsIGltcG9ydF9pbnRlcnZhbFRvRHVyYXRpb24uZGVmYXVsdCkoe1xuICAgICAgICBzdGFydDogZGF0ZTIsXG4gICAgICAgIGVuZDogZGF0ZTFcbiAgICAgIH0pW3VuaXRdO1xuICAgIH1cbiAgICBjYXNlIFwiZGF0ZVN1YnRyYWN0XCI6IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICAgIGNvbnN0IG51bWJlciA9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgICAgY29uc3QgdW5pdCA9IGV2YWxGb3JtdWxhKGFyZ3NbMV0sIGN0eDIpO1xuICAgICAgcmV0dXJuICgwLCBpbXBvcnRfc3ViLmRlZmF1bHQpKGRhdGUsIHsgW3VuaXRdOiBudW1iZXIgfSk7XG4gICAgfVxuICAgIGNhc2UgXCJkYXlcIjpcbiAgICAgIHJldHVybiAoMCwgaW1wb3J0X2dldERheS5kZWZhdWx0KShldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcImVuZFwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGN0eDIpLCB7IGVuZERhdGU6IHRydWUgfSkpO1xuICAgIGNhc2UgXCJmb3JtYXREYXRlXCI6IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKTtcbiAgICAgIGNvbnN0IGZvcm1hdFZhbHVlID0gZXZhbEZvcm11bGEoYXJnc1sxXSwgY3R4MikucmVwbGFjZShcbiAgICAgICAgXCJkZGRkXCIsXG4gICAgICAgIFwiZWVlZVwiXG4gICAgICApO1xuICAgICAgcmV0dXJuICgwLCBpbXBvcnRfZm9ybWF0LmRlZmF1bHQpKGRhdGUsIGZvcm1hdFZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBcImZyb21UaW1lc3RhbXBcIjpcbiAgICAgIHJldHVybiBuZXcgRGF0ZShldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgY2FzZSBcImhvdXJcIjpcbiAgICAgIHJldHVybiAoMCwgaW1wb3J0X2dldEhvdXJzLmRlZmF1bHQpKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwibWludXRlXCI6XG4gICAgICByZXR1cm4gKDAsIGltcG9ydF9nZXRNaW51dGVzLmRlZmF1bHQpKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwibW9udGhcIjpcbiAgICAgIHJldHVybiAoMCwgaW1wb3J0X2dldE1vbnRoLmRlZmF1bHQpKGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpKTtcbiAgICBjYXNlIFwibm93XCI6XG4gICAgICByZXR1cm4gbmV3IERhdGUoKTtcbiAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgIHJldHVybiBldmFsRm9ybXVsYShhcmdzWzBdLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjdHgyKSwgeyBlbmREYXRlOiBmYWxzZSB9KSk7XG4gICAgY2FzZSBcInRpbWVzdGFtcFwiOlxuICAgICAgcmV0dXJuIGV2YWxGb3JtdWxhKGFyZ3NbMF0sIGN0eDIpLmdldFRpbWUoKTtcbiAgICBjYXNlIFwieWVhclwiOlxuICAgICAgcmV0dXJuICgwLCBpbXBvcnRfZ2V0WWVhci5kZWZhdWx0KShldmFsRm9ybXVsYShhcmdzWzBdLCBjdHgyKSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYGludmFsaWQgb3IgdW5zdXBwb3J0ZWQgZnVuY3Rpb24gZm9ybXVsYSBcIiR7Zm9ybXVsYSA9PSBudWxsID8gdm9pZCAwIDogZm9ybXVsYS50eXBlfWBcbiAgICAgICk7XG4gIH1cbn1cblxuLy8gc3JjL3RoaXJkLXBhcnR5L3Byb3BlcnR5LnRzeFxudmFyIFByb3BlcnR5ID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY29tcG9uZW50cyB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBpZiAoY29tcG9uZW50cy5Qcm9wZXJ0eSkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUHJvcGVydHksIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFByb3BlcnR5SW1wbE1lbW8sIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9XG59O1xudmFyIFByb3BlcnR5SW1wbCA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGNvbXBvbmVudHMsIG1hcEltYWdlVXJsLCBtYXBQYWdlVXJsIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBzY2hlbWEsXG4gICAgZGF0YSxcbiAgICBibG9jayxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGlubGluZSA9IGZhbHNlLFxuICAgIGxpbmtUb1RpdGxlUGFnZSA9IHRydWVcbiAgfSA9IHByb3BzO1xuICBjb25zdCByZW5kZXJUZXh0VmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gVGV4dFByb3BlcnR5KCkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICB2YWx1ZTogZGF0YSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Jsb2NrLCBkYXRhXVxuICApO1xuICBjb25zdCByZW5kZXJEYXRlVmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gRGF0ZVByb3BlcnR5KCkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICB2YWx1ZTogZGF0YSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Jsb2NrLCBkYXRhXVxuICApO1xuICBjb25zdCByZW5kZXJSZWxhdGlvblZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIFJlbGF0aW9uUHJvcGVydHkoKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDMuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICBibG9ja1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbYmxvY2ssIGRhdGFdXG4gICk7XG4gIGNvbnN0IHJlbmRlckZvcm11bGFWYWx1ZSA9IFJlYWN0NDMudXNlTWVtbyhcbiAgICAoKSA9PiBmdW5jdGlvbiBGb3JtdWxhUHJvcGVydHkoKSB7XG4gICAgICBsZXQgY29udGVudDI7XG4gICAgICB0cnkge1xuICAgICAgICBjb250ZW50MiA9IGV2YWxGb3JtdWxhKHNjaGVtYS5mb3JtdWxhLCB7XG4gICAgICAgICAgc2NoZW1hOiBjb2xsZWN0aW9uID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uLnNjaGVtYSxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2sucHJvcGVydGllc1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzTmFOKGNvbnRlbnQyKSkge1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZW50MiBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICBjb250ZW50MiA9ICgwLCBpbXBvcnRfZm9ybWF0Mi5kZWZhdWx0KShjb250ZW50MiwgXCJNTU0gZCwgWVlZIGhoOm1tIGFhXCIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29udGVudDIgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQyO1xuICAgIH0sXG4gICAgW2Jsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5wcm9wZXJ0aWVzLCBjb2xsZWN0aW9uID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uLnNjaGVtYSwgc2NoZW1hXVxuICApO1xuICBjb25zdCByZW5kZXJUaXRsZVZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIEZvcm11bGFUaXRsZSgpIHtcbiAgICAgIGlmIChibG9jayAmJiBsaW5rVG9UaXRsZVBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tcGFnZS1saW5rXCIpLFxuICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoYmxvY2suaWQpXG4gICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoUGFnZVRpdGxlLCB7XG4gICAgICAgICAgYmxvY2tcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICAgIGJsb2NrXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2Jsb2NrLCBjb21wb25lbnRzLCBkYXRhLCBsaW5rVG9UaXRsZVBhZ2UsIG1hcFBhZ2VVcmxdXG4gICk7XG4gIGNvbnN0IHJlbmRlclBlcnNvblZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIFBlcnNvblByb3BlcnR5KCkge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICB2YWx1ZTogZGF0YSxcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Jsb2NrLCBkYXRhXVxuICApO1xuICBjb25zdCByZW5kZXJGaWxlVmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gRmlsZVByb3BlcnR5KCkge1xuICAgICAgY29uc3QgZmlsZXMgPSBkYXRhLmZpbHRlcigodikgPT4gdi5sZW5ndGggPT09IDIpLm1hcCgoZikgPT4gZi5mbGF0KCkuZmxhdCgpKTtcbiAgICAgIHJldHVybiBmaWxlcy5tYXAoKGZpbGUsIGkpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5MaW5rLCB7XG4gICAgICAgIGtleTogaSxcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eS1maWxlXCIsXG4gICAgICAgIGhyZWY6IG1hcEltYWdlVXJsKGZpbGVbMl0sIGJsb2NrKSxcbiAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICByZWw6IFwibm9yZWZlcnJlciBub29wZW5lclwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KEdyYWNlZnVsSW1hZ2UsIHtcbiAgICAgICAgYWx0OiBmaWxlWzBdLFxuICAgICAgICBzcmM6IG1hcEltYWdlVXJsKGZpbGVbMl0sIGJsb2NrKSxcbiAgICAgICAgbG9hZGluZzogXCJsYXp5XCJcbiAgICAgIH0pKSk7XG4gICAgfSxcbiAgICBbYmxvY2ssIGNvbXBvbmVudHMsIGRhdGEsIG1hcEltYWdlVXJsXVxuICApO1xuICBjb25zdCByZW5kZXJDaGVja2JveFZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIENoZWNrYm94UHJvcGVydHkoKSB7XG4gICAgICBjb25zdCBpc0NoZWNrZWQgPSBkYXRhICYmIGRhdGFbMF1bMF0gPT09IFwiWWVzXCI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtY29udGFpbmVyXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoQ2hlY2tib3gsIHtcbiAgICAgICAgaXNDaGVja2VkLFxuICAgICAgICBibG9ja0lkOiB2b2lkIDBcbiAgICAgIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtdGV4dFwiXG4gICAgICB9LCBzY2hlbWEubmFtZSkpO1xuICAgIH0sXG4gICAgW2RhdGEsIHNjaGVtYV1cbiAgKTtcbiAgY29uc3QgcmVuZGVyVXJsVmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gVXJsUHJvcGVydHkoKSB7XG4gICAgICBjb25zdCBkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICBpZiAoaW5saW5lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChkWzBdWzBdKTtcbiAgICAgICAgICBkWzBdWzBdID0gdXJsLmhvc3RuYW1lLnJlcGxhY2UoL153d3dcXC4vLCBcIlwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgdmFsdWU6IGQsXG4gICAgICAgIGJsb2NrLFxuICAgICAgICBpbmxpbmUsXG4gICAgICAgIGxpbmtQcm9wczoge1xuICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICByZWw6IFwibm9yZWZlcnJlciBub29wZW5lclwiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Jsb2NrLCBkYXRhLCBpbmxpbmVdXG4gICk7XG4gIGNvbnN0IHJlbmRlckVtYWlsVmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gRW1haWxQcm9wZXJ0eSgpIHtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgdmFsdWU6IGRhdGEsXG4gICAgICAgIGxpbmtQcm90b2NvbDogXCJtYWlsdG9cIixcbiAgICAgICAgYmxvY2tcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2Jsb2NrLCBkYXRhXVxuICApO1xuICBjb25zdCByZW5kZXJQaG9uZU51bWJlclZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIFBob25lTnVtYmVyUHJvcGVydHkoKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDMuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICBsaW5rUHJvdG9jb2w6IFwidGVsXCIsXG4gICAgICAgIGJsb2NrXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtibG9jaywgZGF0YV1cbiAgKTtcbiAgY29uc3QgcmVuZGVyTnVtYmVyVmFsdWUgPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gZnVuY3Rpb24gTnVtYmVyUHJvcGVydHkoKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQoZGF0YVswXVswXSB8fCBcIjBcIik7XG4gICAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICAgIGJsb2NrXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChzY2hlbWEubnVtYmVyX2Zvcm1hdCkge1xuICAgICAgICAgIGNhc2UgXCJudW1iZXJfd2l0aF9jb21tYXNcIjpcbiAgICAgICAgICAgIG91dHB1dCA9ICgwLCBpbXBvcnRfZm9ybWF0X251bWJlci5kZWZhdWx0KSgpKHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJwZXJjZW50XCI6XG4gICAgICAgICAgICBvdXRwdXQgPSAoMCwgaW1wb3J0X2Zvcm1hdF9udW1iZXIuZGVmYXVsdCkoeyBzdWZmaXg6IFwiJVwiIH0pKHZhbHVlICogMTAwKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJkb2xsYXJcIjpcbiAgICAgICAgICAgIG91dHB1dCA9ICgwLCBpbXBvcnRfZm9ybWF0X251bWJlci5kZWZhdWx0KSh7IHByZWZpeDogXCIkXCIsIHJvdW5kOiAyLCBwYWRSaWdodDogMiB9KShcbiAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZXVyb1wiOlxuICAgICAgICAgICAgb3V0cHV0ID0gKDAsIGltcG9ydF9mb3JtYXRfbnVtYmVyLmRlZmF1bHQpKHsgcHJlZml4OiBcIlxcdTIwQUNcIiwgcm91bmQ6IDIsIHBhZFJpZ2h0OiAyIH0pKFxuICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJwb3VuZFwiOlxuICAgICAgICAgICAgb3V0cHV0ID0gKDAsIGltcG9ydF9mb3JtYXRfbnVtYmVyLmRlZmF1bHQpKHsgcHJlZml4OiBcIlxceEEzXCIsIHJvdW5kOiAyLCBwYWRSaWdodDogMiB9KShcbiAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwieWVuXCI6XG4gICAgICAgICAgICBvdXRwdXQgPSAoMCwgaW1wb3J0X2Zvcm1hdF9udW1iZXIuZGVmYXVsdCkoeyBwcmVmaXg6IFwiXFx4QTVcIiwgcm91bmQ6IDAgfSkodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInJ1cGVlXCI6XG4gICAgICAgICAgICBvdXRwdXQgPSAoMCwgaW1wb3J0X2Zvcm1hdF9udW1iZXIuZGVmYXVsdCkoeyBwcmVmaXg6IFwiXFx1MjBCOVwiLCByb3VuZDogMiwgcGFkUmlnaHQ6IDIgfSkoXG4gICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIndvblwiOlxuICAgICAgICAgICAgb3V0cHV0ID0gKDAsIGltcG9ydF9mb3JtYXRfbnVtYmVyLmRlZmF1bHQpKHsgcHJlZml4OiBcIlxcdTIwQTlcIiwgcm91bmQ6IDAgfSkodmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInl1YW5cIjpcbiAgICAgICAgICAgIG91dHB1dCA9ICgwLCBpbXBvcnRfZm9ybWF0X251bWJlci5kZWZhdWx0KSh7IHByZWZpeDogXCJDTlxceEE1XCIsIHJvdW5kOiAyLCBwYWRSaWdodDogMiB9KShcbiAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcbiAgICAgICAgICAgICAgYmxvY2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFRleHQsIHtcbiAgICAgICAgICB2YWx1ZTogW1tvdXRwdXRdXSxcbiAgICAgICAgICBibG9ja1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtibG9jaywgZGF0YSwgc2NoZW1hXVxuICApO1xuICBjb25zdCByZW5kZXJDcmVhdGVkVGltZVZhbHVlID0gUmVhY3Q0My51c2VNZW1vKFxuICAgICgpID0+IGZ1bmN0aW9uIENyZWF0ZWRUaW1lUHJvcGVydHkoKSB7XG4gICAgICByZXR1cm4gKDAsIGltcG9ydF9mb3JtYXQyLmRlZmF1bHQpKG5ldyBEYXRlKGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5jcmVhdGVkX3RpbWUpLCBcIk1NTSBkLCBZWVkgaGg6bW0gYWFcIik7XG4gICAgfSxcbiAgICBbYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLmNyZWF0ZWRfdGltZV1cbiAgKTtcbiAgY29uc3QgcmVuZGVyTGFzdEVkaXRlZFRpbWVWYWx1ZSA9IFJlYWN0NDMudXNlTWVtbyhcbiAgICAoKSA9PiBmdW5jdGlvbiBMYXN0RWRpdGVkVGltZVByb3BlcnR5KCkge1xuICAgICAgcmV0dXJuICgwLCBpbXBvcnRfZm9ybWF0Mi5kZWZhdWx0KShuZXcgRGF0ZShibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2subGFzdF9lZGl0ZWRfdGltZSksIFwiTU1NIGQsIFlZWSBoaDptbSBhYVwiKTtcbiAgICB9LFxuICAgIFtibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2subGFzdF9lZGl0ZWRfdGltZV1cbiAgKTtcbiAgaWYgKCFzY2hlbWEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmIChkYXRhIHx8IHNjaGVtYS50eXBlID09PSBcImNoZWNrYm94XCIgfHwgc2NoZW1hLnR5cGUgPT09IFwidGl0bGVcIiB8fCBzY2hlbWEudHlwZSA9PT0gXCJmb3JtdWxhXCIgfHwgc2NoZW1hLnR5cGUgPT09IFwiY3JlYXRlZF9ieVwiIHx8IHNjaGVtYS50eXBlID09PSBcImxhc3RfZWRpdGVkX2J5XCIgfHwgc2NoZW1hLnR5cGUgPT09IFwiY3JlYXRlZF90aW1lXCIgfHwgc2NoZW1hLnR5cGUgPT09IFwibGFzdF9lZGl0ZWRfdGltZVwiKSB7XG4gICAgc3dpdGNoIChzY2hlbWEudHlwZSkge1xuICAgICAgY2FzZSBcInJlbGF0aW9uXCI6XG4gICAgICAgIGNvbnRlbnQgPSBjb21wb25lbnRzLnByb3BlcnR5UmVsYXRpb25WYWx1ZShwcm9wcywgcmVuZGVyUmVsYXRpb25WYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImZvcm11bGFcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlGb3JtdWxhVmFsdWUocHJvcHMsIHJlbmRlckZvcm11bGFWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRpdGxlXCI6XG4gICAgICAgIGNvbnRlbnQgPSBjb21wb25lbnRzLnByb3BlcnR5VGl0bGVWYWx1ZShwcm9wcywgcmVuZGVyVGl0bGVWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNlbGVjdFwiOlxuICAgICAgY2FzZSBcIm11bHRpX3NlbGVjdFwiOiB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IChkYXRhWzBdWzBdIHx8IFwiXCIpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgY29udGVudCA9IHZhbHVlcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSAoX2EgPSBzY2hlbWEub3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZpbmQoXG4gICAgICAgICAgICAob3B0aW9uMikgPT4gdmFsdWUgPT09IG9wdGlvbjIudmFsdWVcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGNvbG9yID0gb3B0aW9uID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb24uY29sb3I7XG4gICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHMucHJvcGVydHlTZWxlY3RWYWx1ZShcbiAgICAgICAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwge1xuICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgb3B0aW9uLFxuICAgICAgICAgICAgICBjb2xvclxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAoKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgICBgbm90aW9uLXByb3BlcnR5LSR7c2NoZW1hLnR5cGV9LWl0ZW1gLFxuICAgICAgICAgICAgICAgIGNvbG9yICYmIGBub3Rpb24taXRlbS0ke2NvbG9yfWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwgdmFsdWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInBlcnNvblwiOlxuICAgICAgICBjb250ZW50ID0gY29tcG9uZW50cy5wcm9wZXJ0eVBlcnNvblZhbHVlKHByb3BzLCByZW5kZXJQZXJzb25WYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlGaWxlVmFsdWUocHJvcHMsIHJlbmRlckZpbGVWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgIGNvbnRlbnQgPSBjb21wb25lbnRzLnByb3BlcnR5Q2hlY2tib3hWYWx1ZShwcm9wcywgcmVuZGVyQ2hlY2tib3hWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInVybFwiOlxuICAgICAgICBjb250ZW50ID0gY29tcG9uZW50cy5wcm9wZXJ0eVVybFZhbHVlKHByb3BzLCByZW5kZXJVcmxWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgIGNvbnRlbnQgPSBjb21wb25lbnRzLnByb3BlcnR5RW1haWxWYWx1ZShwcm9wcywgcmVuZGVyRW1haWxWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBob25lX251bWJlclwiOlxuICAgICAgICBjb250ZW50ID0gY29tcG9uZW50cy5wcm9wZXJ0eVBob25lTnVtYmVyVmFsdWUoXG4gICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgcmVuZGVyUGhvbmVOdW1iZXJWYWx1ZVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlOdW1iZXJWYWx1ZShwcm9wcywgcmVuZGVyTnVtYmVyVmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjcmVhdGVkX3RpbWVcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlDcmVhdGVkVGltZVZhbHVlKFxuICAgICAgICAgIHByb3BzLFxuICAgICAgICAgIHJlbmRlckNyZWF0ZWRUaW1lVmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibGFzdF9lZGl0ZWRfdGltZVwiOlxuICAgICAgICBjb250ZW50ID0gY29tcG9uZW50cy5wcm9wZXJ0eUxhc3RFZGl0ZWRUaW1lVmFsdWUoXG4gICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgcmVuZGVyTGFzdEVkaXRlZFRpbWVWYWx1ZVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjcmVhdGVkX2J5XCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImxhc3RfZWRpdGVkX2J5XCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlUZXh0VmFsdWUocHJvcHMsIHJlbmRlclRleHRWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgY29udGVudCA9IGNvbXBvbmVudHMucHJvcGVydHlEYXRlVmFsdWUocHJvcHMsIHJlbmRlckRhdGVWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICAgIGJsb2NrXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQzLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6IGBub3Rpb24tcHJvcGVydHkgbm90aW9uLXByb3BlcnR5LSR7c2NoZW1hLnR5cGV9YFxuICB9LCBjb250ZW50KTtcbn07XG52YXIgUHJvcGVydHlJbXBsTWVtbyA9IFJlYWN0NDMubWVtbyhQcm9wZXJ0eUltcGwpO1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi1yb3cudHN4XG52YXIgQ29sbGVjdGlvblJvdyA9ICh7IGJsb2NrLCBwYWdlSGVhZGVyID0gZmFsc2UsIGNsYXNzTmFtZSB9KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgY29uc3QgeyByZWNvcmRNYXAgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgY29sbGVjdGlvbklkID0gYmxvY2sucGFyZW50X2lkO1xuICBjb25zdCBjb2xsZWN0aW9uID0gKF9hID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25bY29sbGVjdGlvbklkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICBjb25zdCBzY2hlbWFzID0gY29sbGVjdGlvbiA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvbi5zY2hlbWE7XG4gIGlmICghY29sbGVjdGlvbiB8fCAhc2NoZW1hcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGxldCBwcm9wZXJ0eUlkcyA9IE9iamVjdC5rZXlzKHNjaGVtYXMpLmZpbHRlcigoaWQpID0+IGlkICE9PSBcInRpdGxlXCIpO1xuICBpZiAoKF9iID0gY29sbGVjdGlvbi5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wcm9wZXJ0eV92aXNpYmlsaXR5KSB7XG4gICAgcHJvcGVydHlJZHMgPSBwcm9wZXJ0eUlkcy5maWx0ZXIoXG4gICAgICAoaWQpID0+IHtcbiAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgcmV0dXJuICgoX2EyID0gY29sbGVjdGlvbi5mb3JtYXQucHJvcGVydHlfdmlzaWJpbGl0eS5maW5kKFxuICAgICAgICAgICh7IHByb3BlcnR5IH0pID0+IHByb3BlcnR5ID09PSBpZFxuICAgICAgICApKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnZpc2liaWxpdHkpICE9PSBcImhpZGVcIjtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIGlmICgoX2MgPSBjb2xsZWN0aW9uLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmNvbGxlY3Rpb25fcGFnZV9wcm9wZXJ0aWVzKSB7XG4gICAgY29uc3QgaWRUb0luZGV4ID0gKF9kID0gY29sbGVjdGlvbi5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5jb2xsZWN0aW9uX3BhZ2VfcHJvcGVydGllcy5yZWR1Y2UoXG4gICAgICAoYWNjLCBwLCBpKSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBhY2MpLCB7XG4gICAgICAgIFtwLnByb3BlcnR5XTogaVxuICAgICAgfSksXG4gICAgICB7fVxuICAgICk7XG4gICAgcHJvcGVydHlJZHMuc29ydCgoYSwgYikgPT4gaWRUb0luZGV4W2FdIC0gaWRUb0luZGV4W2JdKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9wZXJ0eUlkcy5zb3J0KChhLCBiKSA9PiBzY2hlbWFzW2FdLm5hbWUubG9jYWxlQ29tcGFyZShzY2hlbWFzW2JdLm5hbWUpKTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1jb2xsZWN0aW9uLXJvd1wiLCBjbGFzc05hbWUpXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi1yb3ctYm9keVwiXG4gIH0sIHByb3BlcnR5SWRzLm1hcCgocHJvcGVydHlJZCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgY29uc3Qgc2NoZW1hID0gc2NoZW1hc1twcm9wZXJ0eUlkXTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tcm93LXByb3BlcnR5XCIsXG4gICAgICBrZXk6IHByb3BlcnR5SWRcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0NC5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25Db2x1bW5UaXRsZSwge1xuICAgICAgc2NoZW1hXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLXJvdy12YWx1ZVwiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NDQuY3JlYXRlRWxlbWVudChQcm9wZXJ0eSwge1xuICAgICAgc2NoZW1hLFxuICAgICAgZGF0YTogKF9hMiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbcHJvcGVydHlJZF0sXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgYmxvY2ssXG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgcGFnZUhlYWRlclxuICAgIH0pKSk7XG4gIH0pKSk7XG59O1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi12aWV3LnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q1MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24tdmlldy1ib2FyZC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDggZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy9lbXB0eS1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q0NSBmcm9tIFwicmVhY3RcIjtcbnZhciBFbXB0eUljb24gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgX2EgPSBwcm9wcywgeyBjbGFzc05hbWUgfSA9IF9hLCByZXN0ID0gX19vYmpSZXN0KF9hLCBbXCJjbGFzc05hbWVcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWVcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAxNCAxNFwiLFxuICAgIHdpZHRoOiBcIjE0XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ1LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xMS4wOTE4LDAgQzExLjUzODMsMCAxMS45MzA3LDAuMjk1ODk4IDEyLjA1MzMsMC43MjU1ODYgTDEzLjk2MTUsNy40MDMzMiBDMTMuOTg3MSw3LjQ5MzE2IDE0LDcuNTg1OTQgMTQsNy42Nzg3MSBMMTQsMTMgQzE0LDEzLjU1MjcgMTMuNTUyMiwxNCAxMywxNCBMMSwxNCBDMC40NDc3NTQsMTQgMCwxMy41NTI3IDAsMTMgTDAsNy42Nzg3MSBDMCw3LjU4NTk0IDAuMDEyOTM5NSw3LjQ5MzE2IDAuMDM4NDUyMSw3LjQwMzMyIEwxLjk0NjY2LDAuNzI1NTg2IEMyLjA2OTM0LDAuMjk1ODk4IDIuNDYxNjcsMCAyLjkwODIsMCBMMTEuMDkxOCwwIFogTTQuMjcyNzEsMS41IEMzLjgzNzI4LDEuNSAzLjQ1MTc4LDEuNzgyMjMgMy4zMTk4MiwyLjE5NzI3IEwxLjkxNDU1LDYuNjEzMjggQzEuNzA5NDcsNy4yNTg3OSAyLjE5MDgsNy45MTY5OSAyLjg2NzU1LDcuOTE2OTkgTDQuNzA4MzcsNy45MTY5OSBDNC43MDgzNyw4LjkzNjUyIDUuMTY2NjMsMTAuMTY4IDcsMTAuMTY4IEM4LjgzMzM3LDEwLjE2OCA5LjI5MTYzLDguOTM2NTIgOS4yOTE2Myw3LjkxNjk5IEwxMS4xNDc4LDcuODkzNTUgQzExLjgyMDEsNy44ODQ3NyAxMi4yOTI3LDcuMjI4NTIgMTIuMDg3Niw2LjU4ODg3IEwxMC42ODEsMi4xOTUzMSBDMTAuNTQ4NSwxLjc4MTI1IDEwLjE2MzUsMS41IDkuNzI4NjQsMS41IEw0LjI3MjcxLDEuNSBaXCJcbiAgfSkpO1xufTtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24tY2FyZC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDYgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRUZXh0Q29udGVudCBhcyBnZXRUZXh0Q29udGVudDMgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG52YXIgQ29sbGVjdGlvbkNhcmQgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjb2xsZWN0aW9uLFxuICAgIGJsb2NrLFxuICAgIGNvdmVyLFxuICAgIGNvdmVyU2l6ZSxcbiAgICBjb3ZlckFzcGVjdCxcbiAgICBwcm9wZXJ0aWVzLFxuICAgIGNsYXNzTmFtZVxuICB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImNvbGxlY3Rpb25cIixcbiAgICBcImJsb2NrXCIsXG4gICAgXCJjb3ZlclwiLFxuICAgIFwiY292ZXJTaXplXCIsXG4gICAgXCJjb3ZlckFzcGVjdFwiLFxuICAgIFwicHJvcGVydGllc1wiLFxuICAgIFwiY2xhc3NOYW1lXCJcbiAgXSk7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2wsIF9tLCBfbjtcbiAgY29uc3QgY3R4MiA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3Qge1xuICAgIGNvbXBvbmVudHMsXG4gICAgcmVjb3JkTWFwLFxuICAgIG1hcFBhZ2VVcmwsXG4gICAgbWFwSW1hZ2VVcmwsXG4gICAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHlcbiAgfSA9IGN0eDI7XG4gIGxldCBjb3ZlckNvbnRlbnQgPSBudWxsO1xuICBjb25zdCB7IHBhZ2VfY292ZXJfcG9zaXRpb24gPSAwLjUgfSA9IGJsb2NrLmZvcm1hdCB8fCB7fTtcbiAgY29uc3QgY292ZXJQb3NpdGlvbiA9ICgxIC0gcGFnZV9jb3Zlcl9wb3NpdGlvbikgKiAxMDA7XG4gIGlmICgoY292ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvdmVyLnR5cGUpID09PSBcInBhZ2VfY29udGVudFwiKSB7XG4gICAgY29uc3QgY29udGVudEJsb2NrSWQgPSAoX2EyID0gYmxvY2suY29udGVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5maW5kKChibG9ja0lkKSA9PiB7XG4gICAgICB2YXIgX2EzO1xuICAgICAgY29uc3QgYmxvY2syID0gKF9hMyA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMy52YWx1ZTtcbiAgICAgIGlmICgoYmxvY2syID09IG51bGwgPyB2b2lkIDAgOiBibG9jazIudHlwZSkgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoY29udGVudEJsb2NrSWQpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRCbG9jayA9IChfYjIgPSByZWNvcmRNYXAuYmxvY2tbY29udGVudEJsb2NrSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnZhbHVlO1xuICAgICAgY29uc3Qgc291cmNlID0gKF9nID0gKF9lID0gKF9kID0gKF9jID0gY29udGVudEJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfZFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lWzBdKSAhPSBudWxsID8gX2cgOiAoX2YgPSBjb250ZW50QmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2YuZGlzcGxheV9zb3VyY2U7XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIGNvbnN0IHNyYyA9IG1hcEltYWdlVXJsKHNvdXJjZSwgY29udGVudEJsb2NrKTtcbiAgICAgICAgY29uc3QgY2FwdGlvbiA9IChfaiA9IChfaSA9IChfaCA9IGNvbnRlbnRCbG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2guY2FwdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9pWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2pbMF07XG4gICAgICAgIGNvdmVyQ29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICAgICAgc3JjLFxuICAgICAgICAgIGFsdDogY2FwdGlvbiB8fCBcIm5vdGlvbiBpbWFnZVwiLFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBvYmplY3RGaXQ6IGNvdmVyQXNwZWN0XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjb3ZlckNvbnRlbnQpIHtcbiAgICAgIGNvdmVyQ29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tY2FyZC1jb3Zlci1lbXB0eVwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoKGNvdmVyID09IG51bGwgPyB2b2lkIDAgOiBjb3Zlci50eXBlKSA9PT0gXCJwYWdlX2NvdmVyXCIpIHtcbiAgICBjb25zdCB7IHBhZ2VfY292ZXIgfSA9IGJsb2NrLmZvcm1hdCB8fCB7fTtcbiAgICBpZiAocGFnZV9jb3Zlcikge1xuICAgICAgY29uc3QgY292ZXJQb3NpdGlvbjIgPSAoMSAtIHBhZ2VfY292ZXJfcG9zaXRpb24pICogMTAwO1xuICAgICAgY292ZXJDb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0NDYuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgc3JjOiBtYXBJbWFnZVVybChwYWdlX2NvdmVyLCBibG9jayksXG4gICAgICAgIGFsdDogZ2V0VGV4dENvbnRlbnQzKChfayA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfay50aXRsZSksXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgb2JqZWN0Rml0OiBjb3ZlckFzcGVjdCxcbiAgICAgICAgICBvYmplY3RQb3NpdGlvbjogYGNlbnRlciAke2NvdmVyUG9zaXRpb24yfSVgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmICgoY292ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvdmVyLnR5cGUpID09PSBcInByb3BlcnR5XCIpIHtcbiAgICBjb25zdCB7IHByb3BlcnR5IH0gPSBjb3ZlcjtcbiAgICBjb25zdCBzY2hlbWEgPSBjb2xsZWN0aW9uLnNjaGVtYVtwcm9wZXJ0eV07XG4gICAgY29uc3QgZGF0YSA9IChfbCA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfbFtwcm9wZXJ0eV07XG4gICAgaWYgKHNjaGVtYSAmJiBkYXRhKSB7XG4gICAgICBpZiAoc2NoZW1hLnR5cGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZGF0YS5maWx0ZXIoKHYpID0+IHYubGVuZ3RoID09PSAyKS5tYXAoKGYpID0+IGYuZmxhdCgpLmZsYXQoKSk7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1swXTtcbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICBjb3ZlckNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGBub3Rpb24tcHJvcGVydHktJHtzY2hlbWEudHlwZX1gXG4gICAgICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NDYuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2UsIHtcbiAgICAgICAgICAgIGFsdDogZmlsZVswXSxcbiAgICAgICAgICAgIHNyYzogbWFwSW1hZ2VVcmwoZmlsZVsyXSwgYmxvY2spLFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgb2JqZWN0Rml0OiBjb3ZlckFzcGVjdCxcbiAgICAgICAgICAgICAgb2JqZWN0UG9zaXRpb246IGBjZW50ZXIgJHtjb3ZlclBvc2l0aW9ufSVgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb3ZlckNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFByb3BlcnR5LCB7XG4gICAgICAgICAgcHJvcGVydHlJZDogcHJvcGVydHksXG4gICAgICAgICAgc2NoZW1hLFxuICAgICAgICAgIGRhdGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCBsaW5rUHJvcGVydGllcyA9IFtdO1xuICBpZiAoaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHkpIHtcbiAgICBsaW5rUHJvcGVydGllcyA9IChfbSA9IHByb3BlcnRpZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BlcnRpZXMuZmlsdGVyKFxuICAgICAgKHApID0+IHAudmlzaWJsZSAmJiBwLnByb3BlcnR5ICE9PSBcInRpdGxlXCIgJiYgY29sbGVjdGlvbi5zY2hlbWFbcC5wcm9wZXJ0eV1cbiAgICApLmZpbHRlcigocCkgPT4ge1xuICAgICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBzY2hlbWEgPSBjb2xsZWN0aW9uLnNjaGVtYVtwLnByb3BlcnR5XTtcbiAgICAgIHJldHVybiBzY2hlbWEudHlwZSA9PSBcInVybFwiO1xuICAgIH0pLm1hcCgocCkgPT4ge1xuICAgICAgcmV0dXJuIGJsb2NrLnByb3BlcnRpZXNbcC5wcm9wZXJ0eV07XG4gICAgfSkpID09IG51bGwgPyB2b2lkIDAgOiBfbS5maWx0ZXIoKHApID0+IHAgJiYgcC5sZW5ndGggPiAwICYmIHBbMF0gIT0gdm9pZCAwKTtcbiAgfVxuICBsZXQgdXJsID0gbnVsbDtcbiAgaWYgKGxpbmtQcm9wZXJ0aWVzICYmIGxpbmtQcm9wZXJ0aWVzLmxlbmd0aCA+IDAgJiYgbGlua1Byb3BlcnRpZXNbMF0ubGVuZ3RoID4gMCAmJiBsaW5rUHJvcGVydGllc1swXVswXS5sZW5ndGggPiAwKSB7XG4gICAgdXJsID0gbGlua1Byb3BlcnRpZXNbMF1bMF1bMF07XG4gIH1cbiAgY29uc3QgaW5uZXJDYXJkID0gLyogQF9fUFVSRV9fICovIFJlYWN0NDYuY3JlYXRlRWxlbWVudChSZWFjdDQ2LkZyYWdtZW50LCBudWxsLCAoY292ZXJDb250ZW50IHx8IChjb3ZlciA9PSBudWxsID8gdm9pZCAwIDogY292ZXIudHlwZSkgIT09IFwibm9uZVwiKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tY2FyZC1jb3ZlclwiXG4gIH0sIGNvdmVyQ29udGVudCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi1jYXJkLWJvZHlcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tY2FyZC1wcm9wZXJ0eVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoUHJvcGVydHksIHtcbiAgICBzY2hlbWE6IGNvbGxlY3Rpb24uc2NoZW1hLnRpdGxlLFxuICAgIGRhdGE6IChfbiA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX24udGl0bGUsXG4gICAgYmxvY2ssXG4gICAgY29sbGVjdGlvblxuICB9KSksIHByb3BlcnRpZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3BlcnRpZXMuZmlsdGVyKFxuICAgIChwKSA9PiBwLnZpc2libGUgJiYgcC5wcm9wZXJ0eSAhPT0gXCJ0aXRsZVwiICYmIGNvbGxlY3Rpb24uc2NoZW1hW3AucHJvcGVydHldXG4gICkubWFwKChwKSA9PiB7XG4gICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgc2NoZW1hID0gY29sbGVjdGlvbi5zY2hlbWFbcC5wcm9wZXJ0eV07XG4gICAgY29uc3QgZGF0YSA9IGJsb2NrLnByb3BlcnRpZXNbcC5wcm9wZXJ0eV07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLWNhcmQtcHJvcGVydHlcIixcbiAgICAgIGtleTogcC5wcm9wZXJ0eVxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ2LmNyZWF0ZUVsZW1lbnQoUHJvcGVydHksIHtcbiAgICAgIHNjaGVtYSxcbiAgICAgIGRhdGEsXG4gICAgICBibG9jayxcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBpbmxpbmU6IHRydWVcbiAgICB9KSk7XG4gIH0pKSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KE5vdGlvbkNvbnRleHRQcm92aWRlciwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY3R4MiksIHtcbiAgICBjb21wb25lbnRzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBjdHgyLmNvbXBvbmVudHMpLCB7XG4gICAgICBMaW5rOiAocHJvcHMpID0+IHtcbiAgICAgICAgdmFyIF9hMywgX2IzLCBfYzI7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7XG4gICAgICAgICAgYWN0aW9uOiBwcm9wcy5ocmVmLFxuICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIlxuICAgICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgICAgdmFsdWU6IChfYzIgPSAoX2IzID0gKF9hMyA9IHByb3BzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wcy5jaGlsZHJlbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMy5wcm9wcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMy5jaGlsZHJlbikgIT0gbnVsbCA/IF9jMiA6IHByb3BzLmhyZWYsXG4gICAgICAgICAgY2xhc3NOYW1lOiBcIm5lc3RlZC1mb3JtLWxpbmsgbm90aW9uLWxpbmtcIlxuICAgICAgICB9KSk7XG4gICAgICB9LFxuICAgICAgUGFnZUxpbms6IGR1bW15TGlua1xuICAgIH0pXG4gIH0pLCBpc0xpbmtDb2xsZWN0aW9uVG9VcmxQcm9wZXJ0eSAmJiB1cmwgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ni5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTGluaywgX19zcHJlYWRWYWx1ZXMoe1xuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi1jb2xsZWN0aW9uLWNhcmRcIixcbiAgICAgIGBub3Rpb24tY29sbGVjdGlvbi1jYXJkLXNpemUtJHtjb3ZlclNpemV9YCxcbiAgICAgIGNsYXNzTmFtZVxuICAgICksXG4gICAgaHJlZjogdXJsXG4gIH0sIHJlc3QpLCBpbm5lckNhcmQpIDogLyogQF9fUFVSRV9fICovIFJlYWN0NDYuY3JlYXRlRWxlbWVudChjb21wb25lbnRzLlBhZ2VMaW5rLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLWNvbGxlY3Rpb24tY2FyZFwiLFxuICAgICAgYG5vdGlvbi1jb2xsZWN0aW9uLWNhcmQtc2l6ZS0ke2NvdmVyU2l6ZX1gLFxuICAgICAgY2xhc3NOYW1lXG4gICAgKSxcbiAgICBocmVmOiBtYXBQYWdlVXJsKGJsb2NrLmlkKVxuICB9LCByZXN0KSwgaW5uZXJDYXJkKSk7XG59O1xuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi1ncm91cC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDcgZnJvbSBcInJlYWN0XCI7XG52YXIgQ29sbGVjdGlvbkdyb3VwID0gKF9hKSA9PiB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgY29sbGVjdGlvblZpZXdDb21wb25lbnQ6IENvbGxlY3Rpb25WaWV3Q29tcG9uZW50LFxuICAgIGNvbGxlY3Rpb24sXG4gICAgY29sbGVjdGlvbkdyb3VwLFxuICAgIHNjaGVtYSxcbiAgICB2YWx1ZSxcbiAgICBoaWRkZW4sXG4gICAgc3VtbWFyeVByb3BzLFxuICAgIGRldGFpbHNQcm9wc1xuICB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImNvbGxlY3Rpb25WaWV3Q29tcG9uZW50XCIsXG4gICAgXCJjb2xsZWN0aW9uXCIsXG4gICAgXCJjb2xsZWN0aW9uR3JvdXBcIixcbiAgICBcInNjaGVtYVwiLFxuICAgIFwidmFsdWVcIixcbiAgICBcImhpZGRlblwiLFxuICAgIFwic3VtbWFyeVByb3BzXCIsXG4gICAgXCJkZXRhaWxzUHJvcHNcIlxuICBdKTtcbiAgaWYgKGhpZGRlbilcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ3LmNyZWF0ZUVsZW1lbnQoXCJkZXRhaWxzXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBvcGVuOiB0cnVlLFxuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi1ncm91cFwiXG4gIH0sIGRldGFpbHNQcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ3LmNyZWF0ZUVsZW1lbnQoXCJzdW1tYXJ5XCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tZ3JvdXAtdGl0bGVcIlxuICB9LCBzdW1tYXJ5UHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0Ny5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ3LmNyZWF0ZUVsZW1lbnQoUHJvcGVydHksIHtcbiAgICBzY2hlbWEsXG4gICAgZGF0YTogW1t2YWx1ZV1dLFxuICAgIGNvbGxlY3Rpb25cbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ3LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkLXRoLWNvdW50XCJcbiAgfSwgY29sbGVjdGlvbkdyb3VwID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uR3JvdXAudG90YWwpKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ3LmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvblZpZXdDb21wb25lbnQsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjb2xsZWN0aW9uLFxuICAgIGNvbGxlY3Rpb25Hcm91cFxuICB9LCByZXN0KSkpO1xufTtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24tdXRpbHMudHNcbnZhciBpbXBvcnRfZm9ybWF0MyA9IF9fdG9FU00ocmVxdWlyZV9mb3JtYXQoKSwgMSk7XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uR3JvdXBzKGNvbGxlY3Rpb24sIGNvbGxlY3Rpb25WaWV3LCBjb2xsZWN0aW9uRGF0YSwgLi4ucmVzdCkge1xuICB2YXIgX2E7XG4gIGNvbnN0IGVsZW1zID0gKChfYSA9IGNvbGxlY3Rpb25WaWV3ID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uVmlldy5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jb2xsZWN0aW9uX2dyb3VwcykgfHwgW107XG4gIHJldHVybiBlbGVtcyA9PSBudWxsID8gdm9pZCAwIDogZWxlbXMubWFwKCh7IHByb3BlcnR5LCBoaWRkZW4sIHZhbHVlOiB7IHZhbHVlLCB0eXBlIH0gfSkgPT4ge1xuICAgIHZhciBfYTIsIF9iO1xuICAgIGNvbnN0IGlzVW5jYXRlZ29yaXplZFZhbHVlID0gdHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiO1xuICAgIGNvbnN0IGlzRGF0ZVZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnJhbmdlO1xuICAgIGNvbnN0IHF1ZXJ5TGFiZWwgPSBpc1VuY2F0ZWdvcml6ZWRWYWx1ZSA/IFwidW5jYXRlZ29yaXplZFwiIDogaXNEYXRlVmFsdWUgPyAoKF9hMiA9IHZhbHVlLnJhbmdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnN0YXJ0X2RhdGUpIHx8ICgoX2IgPSB2YWx1ZS5yYW5nZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmVuZF9kYXRlKSA6ICh2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUudmFsdWUpIHx8IHZhbHVlO1xuICAgIGNvbnN0IGNvbGxlY3Rpb25Hcm91cCA9IGNvbGxlY3Rpb25EYXRhW2ByZXN1bHRzOiR7dHlwZX06JHtxdWVyeUxhYmVsfWBdO1xuICAgIGxldCBxdWVyeVZhbHVlID0gIWlzVW5jYXRlZ29yaXplZFZhbHVlICYmIChpc0RhdGVWYWx1ZSB8fCAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnZhbHVlKSB8fCB2YWx1ZSk7XG4gICAgbGV0IHNjaGVtYSA9IGNvbGxlY3Rpb24uc2NoZW1hW3Byb3BlcnR5XTtcbiAgICBpZiAodHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHZhbHVlKSB7XG4gICAgICBxdWVyeVZhbHVlID0gXCJZZXNcIjtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZVZhbHVlKSB7XG4gICAgICBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICBuYW1lOiBcInRleHRcIlxuICAgICAgfTtcbiAgICAgIHF1ZXJ5VmFsdWUgPSAoMCwgaW1wb3J0X2Zvcm1hdDMuZGVmYXVsdCkobmV3IERhdGUocXVlcnlMYWJlbCksIFwiTU1NIGQsIFlZWSBoaDptbSBhYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIGNvbGxlY3Rpb25Hcm91cCxcbiAgICAgIHNjaGVtYSxcbiAgICAgIHZhbHVlOiBxdWVyeVZhbHVlIHx8IFwiTm8gZGVzY3JpcHRpb25cIixcbiAgICAgIGhpZGRlbixcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBjb2xsZWN0aW9uVmlldyxcbiAgICAgIGNvbGxlY3Rpb25EYXRhLFxuICAgICAgYmxvY2tJZHM6IGNvbGxlY3Rpb25Hcm91cCA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvbkdyb3VwLmJsb2NrSWRzXG4gICAgfSwgcmVzdCk7XG4gIH0pO1xufVxuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi12aWV3LWJvYXJkLnRzeFxudmFyIENvbGxlY3Rpb25WaWV3Qm9hcmQgPSAoe1xuICBjb2xsZWN0aW9uLFxuICBjb2xsZWN0aW9uVmlldyxcbiAgY29sbGVjdGlvbkRhdGEsXG4gIHBhZGRpbmdcbn0pID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBpc0dyb3VwZWRDb2xsZWN0aW9uID0gKF9hID0gY29sbGVjdGlvblZpZXcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbGxlY3Rpb25WaWV3LmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbGxlY3Rpb25fZ3JvdXBfYnk7XG4gIGlmIChpc0dyb3VwZWRDb2xsZWN0aW9uKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbkdyb3VwcyA9IGdldENvbGxlY3Rpb25Hcm91cHMoXG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgY29sbGVjdGlvblZpZXcsXG4gICAgICBjb2xsZWN0aW9uRGF0YSxcbiAgICAgIHBhZGRpbmdcbiAgICApO1xuICAgIHJldHVybiBjb2xsZWN0aW9uR3JvdXBzLm1hcCgoZ3JvdXAsIGluZGV4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OC5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25Hcm91cCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBrZXk6IGluZGV4XG4gICAgfSwgZ3JvdXApLCB7XG4gICAgICBzdW1tYXJ5UHJvcHM6IHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwYWRkaW5nTGVmdDogcGFkZGluZ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29sbGVjdGlvblZpZXdDb21wb25lbnQ6IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChCb2FyZCwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICBwYWRkaW5nXG4gICAgICB9LCBwcm9wcykpXG4gICAgfSkpKTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChCb2FyZCwge1xuICAgIHBhZGRpbmcsXG4gICAgY29sbGVjdGlvblZpZXcsXG4gICAgY29sbGVjdGlvbixcbiAgICBjb2xsZWN0aW9uRGF0YVxuICB9KTtcbn07XG5mdW5jdGlvbiBCb2FyZCh7IGNvbGxlY3Rpb25WaWV3LCBjb2xsZWN0aW9uRGF0YSwgY29sbGVjdGlvbiwgcGFkZGluZyB9KSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBib2FyZF9jb3ZlciA9IHsgdHlwZTogXCJub25lXCIgfSxcbiAgICBib2FyZF9jb3Zlcl9zaXplID0gXCJtZWRpdW1cIixcbiAgICBib2FyZF9jb3Zlcl9hc3BlY3QgPSBcImNvdmVyXCJcbiAgfSA9IChjb2xsZWN0aW9uVmlldyA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvblZpZXcuZm9ybWF0KSB8fCB7fTtcbiAgY29uc3QgYm9hcmRHcm91cHMgPSAoKF9hID0gY29sbGVjdGlvblZpZXcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbGxlY3Rpb25WaWV3LmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmJvYXJkX2NvbHVtbnMpIHx8ICgoX2IgPSBjb2xsZWN0aW9uVmlldyA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvblZpZXcuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2IuYm9hcmRfZ3JvdXBzMikgfHwgW107XG4gIGNvbnN0IGJvYXJkU3R5bGUgPSBSZWFjdDQ4LnVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIHBhZGRpbmdMZWZ0OiBwYWRkaW5nXG4gICAgfSksXG4gICAgW3BhZGRpbmddXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLWJvYXJkLXZpZXdcIixcbiAgICAgIGBub3Rpb24tYm9hcmQtdmlldy1zaXplLSR7Ym9hcmRfY292ZXJfc2l6ZX1gXG4gICAgKSxcbiAgICBzdHlsZTogYm9hcmRTdHlsZVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkLWhlYWRlclwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYm9hcmQtaGVhZGVyLWlubmVyXCJcbiAgfSwgYm9hcmRHcm91cHMubWFwKChwLCBpbmRleCkgPT4ge1xuICAgIHZhciBfYTIsIF9iMiwgX2M7XG4gICAgaWYgKCEoKF9hMiA9IGNvbGxlY3Rpb25EYXRhLmJvYXJkX2NvbHVtbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucmVzdWx0cykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBncm91cCA9IGNvbGxlY3Rpb25EYXRhLmJvYXJkX2NvbHVtbnMucmVzdWx0c1tpbmRleF07XG4gICAgY29uc3Qgc2NoZW1hID0gY29sbGVjdGlvbi5zY2hlbWFbcC5wcm9wZXJ0eV07XG4gICAgaWYgKCFncm91cCB8fCAhc2NoZW1hIHx8IHAuaGlkZGVuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib2FyZC10aFwiLFxuICAgICAga2V5OiBpbmRleFxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib2FyZC10aC1ib2R5XCJcbiAgICB9LCAoKF9iMiA9IGdyb3VwLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLnZhbHVlKSA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoUHJvcGVydHksIHtcbiAgICAgIHNjaGVtYSxcbiAgICAgIGRhdGE6IFtbKF9jID0gZ3JvdXAudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZV1dLFxuICAgICAgY29sbGVjdGlvblxuICAgIH0pIDogLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChFbXB0eUljb24sIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYm9hcmQtdGgtZW1wdHlcIlxuICAgIH0pLCBcIiBObyBTZWxlY3RcIiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYm9hcmQtdGgtY291bnRcIlxuICAgIH0sIGdyb3VwLnRvdGFsKSkpO1xuICB9KSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkLWhlYWRlci1wbGFjZWhvbGRlclwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkLWJvZHlcIlxuICB9LCBib2FyZEdyb3Vwcy5tYXAoKHAsIGluZGV4KSA9PiB7XG4gICAgdmFyIF9hMiwgX2IyLCBfYywgX2QsIF9lO1xuICAgIGNvbnN0IGJvYXJkUmVzdWx0cyA9IChfYTIgPSBjb2xsZWN0aW9uRGF0YS5ib2FyZF9jb2x1bW5zKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnJlc3VsdHM7XG4gICAgaWYgKCFib2FyZFJlc3VsdHMpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoISgoX2IyID0gcCA9PSBudWxsID8gdm9pZCAwIDogcC52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50eXBlKSlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHNjaGVtYSA9IGNvbGxlY3Rpb24uc2NoZW1hW3AucHJvcGVydHldO1xuICAgIGNvbnN0IGdyb3VwID0gY29sbGVjdGlvbkRhdGFbYHJlc3VsdHM6JHsoX2MgPSBwID09IG51bGwgPyB2b2lkIDAgOiBwLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2MudHlwZX06JHsoKF9kID0gcCA9PSBudWxsID8gdm9pZCAwIDogcC52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnZhbHVlKSB8fCBcInVuY2F0ZWdvcml6ZWRcIn1gXTtcbiAgICBpZiAoIWdyb3VwIHx8ICFzY2hlbWEgfHwgcC5oaWRkZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NDguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLWJvYXJkLWdyb3VwXCIsXG4gICAgICBrZXk6IGluZGV4XG4gICAgfSwgKF9lID0gZ3JvdXAuYmxvY2tJZHMpID09IG51bGwgPyB2b2lkIDAgOiBfZS5tYXAoKGJsb2NrSWQpID0+IHtcbiAgICAgIHZhciBfYTMsIF9iMztcbiAgICAgIGNvbnN0IGJsb2NrID0gKF9hMyA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMy52YWx1ZTtcbiAgICAgIGlmICghYmxvY2spXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ4LmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvbkNhcmQsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib2FyZC1ncm91cC1jYXJkXCIsXG4gICAgICAgIGNvbGxlY3Rpb24sXG4gICAgICAgIGJsb2NrLFxuICAgICAgICBjb3ZlcjogYm9hcmRfY292ZXIsXG4gICAgICAgIGNvdmVyU2l6ZTogYm9hcmRfY292ZXJfc2l6ZSxcbiAgICAgICAgY292ZXJBc3BlY3Q6IGJvYXJkX2NvdmVyX2FzcGVjdCxcbiAgICAgICAgcHJvcGVydGllczogKF9iMyA9IGNvbGxlY3Rpb25WaWV3LmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMy5ib2FyZF9wcm9wZXJ0aWVzLFxuICAgICAgICBrZXk6IGJsb2NrSWRcbiAgICAgIH0pO1xuICAgIH0pKTtcbiAgfSkpKSk7XG59XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2xsZWN0aW9uLXZpZXctZ2FsbGVyeS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NDkgZnJvbSBcInJlYWN0XCI7XG52YXIgZGVmYXVsdEJsb2NrSWRzID0gW107XG52YXIgQ29sbGVjdGlvblZpZXdHYWxsZXJ5ID0gKHtcbiAgY29sbGVjdGlvbixcbiAgY29sbGVjdGlvblZpZXcsXG4gIGNvbGxlY3Rpb25EYXRhXG59KSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IGlzR3JvdXBlZENvbGxlY3Rpb24gPSAoX2EgPSBjb2xsZWN0aW9uVmlldyA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvblZpZXcuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29sbGVjdGlvbl9ncm91cF9ieTtcbiAgaWYgKGlzR3JvdXBlZENvbGxlY3Rpb24pIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uR3JvdXBzID0gZ2V0Q29sbGVjdGlvbkdyb3VwcyhcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBjb2xsZWN0aW9uVmlldyxcbiAgICAgIGNvbGxlY3Rpb25EYXRhXG4gICAgKTtcbiAgICByZXR1cm4gY29sbGVjdGlvbkdyb3Vwcy5tYXAoKGdyb3VwLCBpbmRleCkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NDkuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uR3JvdXAsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAga2V5OiBpbmRleFxuICAgIH0sIGdyb3VwKSwge1xuICAgICAgY29sbGVjdGlvblZpZXdDb21wb25lbnQ6IEdhbGxlcnlcbiAgICB9KSkpO1xuICB9XG4gIGNvbnN0IGJsb2NrSWRzID0gKChfZSA9IChfZCA9IChfYiA9IGNvbGxlY3Rpb25EYXRhW1wiY29sbGVjdGlvbl9ncm91cF9yZXN1bHRzXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2IuYmxvY2tJZHMpICE9IG51bGwgPyBfZCA6IChfYyA9IGNvbGxlY3Rpb25EYXRhW1wicmVzdWx0czpyZWxhdGlvbjp1bmNhdGVnb3JpemVkXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2MuYmxvY2tJZHMpICE9IG51bGwgPyBfZSA6IGNvbGxlY3Rpb25EYXRhLmJsb2NrSWRzKSB8fCBkZWZhdWx0QmxvY2tJZHM7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OS5jcmVhdGVFbGVtZW50KEdhbGxlcnksIHtcbiAgICBjb2xsZWN0aW9uVmlldyxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGJsb2NrSWRzXG4gIH0pO1xufTtcbmZ1bmN0aW9uIEdhbGxlcnkoeyBibG9ja0lkcywgY29sbGVjdGlvblZpZXcsIGNvbGxlY3Rpb24gfSkge1xuICBjb25zdCB7IHJlY29yZE1hcCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCB7XG4gICAgZ2FsbGVyeV9jb3ZlciA9IHsgdHlwZTogXCJub25lXCIgfSxcbiAgICBnYWxsZXJ5X2NvdmVyX3NpemUgPSBcIm1lZGl1bVwiLFxuICAgIGdhbGxlcnlfY292ZXJfYXNwZWN0ID0gXCJjb3ZlclwiXG4gIH0gPSBjb2xsZWN0aW9uVmlldy5mb3JtYXQgfHwge307XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdhbGxlcnlcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q0OS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWdhbGxlcnktdmlld1wiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi1nYWxsZXJ5LWdyaWRcIixcbiAgICAgIGBub3Rpb24tZ2FsbGVyeS1ncmlkLXNpemUtJHtnYWxsZXJ5X2NvdmVyX3NpemV9YFxuICAgIClcbiAgfSwgYmxvY2tJZHMgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrSWRzLm1hcCgoYmxvY2tJZCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICBpZiAoIWJsb2NrKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQ5LmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvbkNhcmQsIHtcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBibG9jayxcbiAgICAgIGNvdmVyOiBnYWxsZXJ5X2NvdmVyLFxuICAgICAgY292ZXJTaXplOiBnYWxsZXJ5X2NvdmVyX3NpemUsXG4gICAgICBjb3ZlckFzcGVjdDogZ2FsbGVyeV9jb3Zlcl9hc3BlY3QsXG4gICAgICBwcm9wZXJ0aWVzOiAoX2IgPSBjb2xsZWN0aW9uVmlldy5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5nYWxsZXJ5X3Byb3BlcnRpZXMsXG4gICAgICBrZXk6IGJsb2NrSWRcbiAgICB9KTtcbiAgfSkpKSk7XG59XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2xsZWN0aW9uLXZpZXctbGlzdC50c3hcbmltcG9ydCAqIGFzIFJlYWN0NTAgZnJvbSBcInJlYWN0XCI7XG52YXIgZGVmYXVsdEJsb2NrSWRzMiA9IFtdO1xudmFyIENvbGxlY3Rpb25WaWV3TGlzdCA9ICh7XG4gIGNvbGxlY3Rpb24sXG4gIGNvbGxlY3Rpb25WaWV3LFxuICBjb2xsZWN0aW9uRGF0YVxufSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgaXNHcm91cGVkQ29sbGVjdGlvbiA9IChfYSA9IGNvbGxlY3Rpb25WaWV3ID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uVmlldy5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jb2xsZWN0aW9uX2dyb3VwX2J5O1xuICBpZiAoaXNHcm91cGVkQ29sbGVjdGlvbikge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25Hcm91cHMgPSBnZXRDb2xsZWN0aW9uR3JvdXBzKFxuICAgICAgY29sbGVjdGlvbixcbiAgICAgIGNvbGxlY3Rpb25WaWV3LFxuICAgICAgY29sbGVjdGlvbkRhdGFcbiAgICApO1xuICAgIHJldHVybiBjb2xsZWN0aW9uR3JvdXBzLm1hcCgoZ3JvdXAsIGtleSkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NTAuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uR3JvdXAsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAga2V5XG4gICAgfSwgZ3JvdXApLCB7XG4gICAgICBjb2xsZWN0aW9uVmlld0NvbXBvbmVudDogTGlzdFxuICAgIH0pKSk7XG4gIH1cbiAgY29uc3QgYmxvY2tJZHMgPSAoKF9jID0gKF9iID0gY29sbGVjdGlvbkRhdGFbXCJjb2xsZWN0aW9uX2dyb3VwX3Jlc3VsdHNcIl0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5ibG9ja0lkcykgIT0gbnVsbCA/IF9jIDogY29sbGVjdGlvbkRhdGEuYmxvY2tJZHMpIHx8IGRlZmF1bHRCbG9ja0lkczI7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KExpc3QsIHtcbiAgICBibG9ja0lkcyxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGNvbGxlY3Rpb25WaWV3XG4gIH0pO1xufTtcbmZ1bmN0aW9uIExpc3QoeyBibG9ja0lkcywgY29sbGVjdGlvbiwgY29sbGVjdGlvblZpZXcgfSkge1xuICBjb25zdCB7IGNvbXBvbmVudHMsIHJlY29yZE1hcCwgbWFwUGFnZVVybCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saXN0LWNvbGxlY3Rpb25cIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpc3Qtdmlld1wiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlzdC1ib2R5XCJcbiAgfSwgYmxvY2tJZHMgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrSWRzLm1hcCgoYmxvY2tJZCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCBibG9jayA9IChfYSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGlmICghYmxvY2spXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB0aXRsZVNjaGVtYSA9IGNvbGxlY3Rpb24uc2NoZW1hLnRpdGxlO1xuICAgIGNvbnN0IHRpdGxlRGF0YSA9IChfYiA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2IudGl0bGU7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUwLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saXN0LWl0ZW0gbm90aW9uLXBhZ2UtbGlua1wiLFxuICAgICAgaHJlZjogbWFwUGFnZVVybChibG9jay5pZCksXG4gICAgICBrZXk6IGJsb2NrSWRcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlzdC1pdGVtLXRpdGxlXCJcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KFByb3BlcnR5LCB7XG4gICAgICBzY2hlbWE6IHRpdGxlU2NoZW1hLFxuICAgICAgZGF0YTogdGl0bGVEYXRhLFxuICAgICAgYmxvY2ssXG4gICAgICBjb2xsZWN0aW9uXG4gICAgfSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlzdC1pdGVtLWJvZHlcIlxuICAgIH0sIChfZCA9IChfYyA9IGNvbGxlY3Rpb25WaWV3LmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmxpc3RfcHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmZpbHRlcigocCkgPT4gcC52aXNpYmxlKS5tYXAoKHApID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICBjb25zdCBzY2hlbWEgPSBjb2xsZWN0aW9uLnNjaGVtYVtwLnByb3BlcnR5XTtcbiAgICAgIGNvbnN0IGRhdGEgPSBibG9jayAmJiAoKF9hMiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbcC5wcm9wZXJ0eV0pO1xuICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlzdC1pdGVtLXByb3BlcnR5XCIsXG4gICAgICAgIGtleTogcC5wcm9wZXJ0eVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTAuY3JlYXRlRWxlbWVudChQcm9wZXJ0eSwge1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGJsb2NrLFxuICAgICAgICBjb2xsZWN0aW9uXG4gICAgICB9KSk7XG4gICAgfSkpKTtcbiAgfSkpKSk7XG59XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9jb2xsZWN0aW9uLXZpZXctdGFibGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDUxIGZyb20gXCJyZWFjdFwiO1xudmFyIGRlZmF1bHRCbG9ja0lkczMgPSBbXTtcbnZhciBDb2xsZWN0aW9uVmlld1RhYmxlID0gKHtcbiAgY29sbGVjdGlvbixcbiAgY29sbGVjdGlvblZpZXcsXG4gIGNvbGxlY3Rpb25EYXRhLFxuICBwYWRkaW5nLFxuICB3aWR0aFxufSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgaXNHcm91cGVkQ29sbGVjdGlvbiA9IChfYSA9IGNvbGxlY3Rpb25WaWV3ID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uVmlldy5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jb2xsZWN0aW9uX2dyb3VwX2J5O1xuICBpZiAoaXNHcm91cGVkQ29sbGVjdGlvbikge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25Hcm91cHMgPSBnZXRDb2xsZWN0aW9uR3JvdXBzKFxuICAgICAgY29sbGVjdGlvbixcbiAgICAgIGNvbGxlY3Rpb25WaWV3LFxuICAgICAgY29sbGVjdGlvbkRhdGEsXG4gICAgICBwYWRkaW5nLFxuICAgICAgd2lkdGhcbiAgICApO1xuICAgIHJldHVybiBjb2xsZWN0aW9uR3JvdXBzLm1hcCgoZ3JvdXAsIGluZGV4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25Hcm91cCwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBrZXk6IGluZGV4XG4gICAgfSwgZ3JvdXApLCB7XG4gICAgICBjb2xsZWN0aW9uVmlld0NvbXBvbmVudDogKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFRhYmxlLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcyksIHtcbiAgICAgICAgcGFkZGluZyxcbiAgICAgICAgd2lkdGhcbiAgICAgIH0pKSxcbiAgICAgIHN1bW1hcnlQcm9wczoge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIHBhZGRpbmdMZWZ0OiBwYWRkaW5nLFxuICAgICAgICAgIHBhZGRpbmdSaWdodDogcGFkZGluZ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpKTtcbiAgfVxuICBjb25zdCBibG9ja0lkcyA9ICgoX2MgPSAoX2IgPSBjb2xsZWN0aW9uRGF0YVtcImNvbGxlY3Rpb25fZ3JvdXBfcmVzdWx0c1wiXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmJsb2NrSWRzKSAhPSBudWxsID8gX2MgOiBjb2xsZWN0aW9uRGF0YS5ibG9ja0lkcykgfHwgZGVmYXVsdEJsb2NrSWRzMztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUxLmNyZWF0ZUVsZW1lbnQoVGFibGUsIHtcbiAgICBibG9ja0lkcyxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGNvbGxlY3Rpb25WaWV3LFxuICAgIHBhZGRpbmcsXG4gICAgd2lkdGhcbiAgfSk7XG59O1xuZnVuY3Rpb24gVGFibGUoeyBibG9ja0lkcyA9IFtdLCBjb2xsZWN0aW9uLCBjb2xsZWN0aW9uVmlldywgd2lkdGgsIHBhZGRpbmcgfSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCBsaW5rVGFibGVUaXRsZVByb3BlcnRpZXMgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgdGFibGVTdHlsZSA9IFJlYWN0NTEudXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgd2lkdGgsXG4gICAgICBtYXhXaWR0aDogd2lkdGhcbiAgICB9KSxcbiAgICBbd2lkdGhdXG4gICk7XG4gIGNvbnN0IHRhYmxlVmlld1N0eWxlID0gUmVhY3Q1MS51c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBwYWRkaW5nTGVmdDogcGFkZGluZyxcbiAgICAgIHBhZGRpbmdSaWdodDogcGFkZGluZ1xuICAgIH0pLFxuICAgIFtwYWRkaW5nXVxuICApO1xuICBsZXQgcHJvcGVydGllcyA9IFtdO1xuICBpZiAoKF9hID0gY29sbGVjdGlvblZpZXcuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EudGFibGVfcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMgPSBjb2xsZWN0aW9uVmlldy5mb3JtYXQudGFibGVfcHJvcGVydGllcy5maWx0ZXIoXG4gICAgICAocCkgPT4gcC52aXNpYmxlICYmIGNvbGxlY3Rpb24uc2NoZW1hW3AucHJvcGVydHldXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9wZXJ0aWVzID0gW3sgcHJvcGVydHk6IFwidGl0bGVcIiB9XS5jb25jYXQoXG4gICAgICBPYmplY3Qua2V5cyhjb2xsZWN0aW9uLnNjaGVtYSkuZmlsdGVyKChwKSA9PiBwICE9PSBcInRpdGxlXCIpLm1hcCgocHJvcGVydHkpID0+ICh7IHByb3BlcnR5IH0pKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUxLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGFibGVcIixcbiAgICBzdHlsZTogdGFibGVTdHlsZVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLXZpZXdcIixcbiAgICBzdHlsZTogdGFibGVWaWV3U3R5bGVcbiAgfSwgISFwcm9wZXJ0aWVzLmxlbmd0aCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFJlYWN0NTEuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUxLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGFibGUtaGVhZGVyXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi10YWJsZS1oZWFkZXItaW5uZXJcIlxuICB9LCBwcm9wZXJ0aWVzLm1hcCgocCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgY29uc3Qgc2NoZW1hID0gKF9hMiA9IGNvbGxlY3Rpb24uc2NoZW1hKSA9PSBudWxsID8gdm9pZCAwIDogX2EyW3AucHJvcGVydHldO1xuICAgIGNvbnN0IGlzVGl0bGUgPSBwLnByb3BlcnR5ID09PSBcInRpdGxlXCI7XG4gICAgY29uc3Qgc3R5bGUgPSB7fTtcbiAgICBpZiAocC53aWR0aCkge1xuICAgICAgc3R5bGUud2lkdGggPSBwLndpZHRoO1xuICAgIH0gZWxzZSBpZiAoaXNUaXRsZSkge1xuICAgICAgc3R5bGUud2lkdGggPSAyODA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLndpZHRoID0gMjAwO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTEuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLXRoXCIsXG4gICAgICBrZXk6IHAucHJvcGVydHlcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGFibGUtdmlldy1oZWFkZXItY2VsbFwiLFxuICAgICAgc3R5bGVcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdGFibGUtdmlldy1oZWFkZXItY2VsbC1pbm5lclwiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTEuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uQ29sdW1uVGl0bGUsIHtcbiAgICAgIHNjaGVtYVxuICAgIH0pKSkpO1xuICB9KSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLWhlYWRlci1wbGFjZWhvbGRlclwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLWJvZHlcIlxuICB9LCBibG9ja0lkcyA9PSBudWxsID8gdm9pZCAwIDogYmxvY2tJZHMubWFwKChibG9ja0lkKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLXJvd1wiLFxuICAgIGtleTogYmxvY2tJZFxuICB9LCBwcm9wZXJ0aWVzLm1hcCgocCkgPT4ge1xuICAgIHZhciBfYTIsIF9iLCBfYztcbiAgICBjb25zdCBzY2hlbWEgPSAoX2EyID0gY29sbGVjdGlvbi5zY2hlbWEpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbcC5wcm9wZXJ0eV07XG4gICAgY29uc3QgYmxvY2sgPSAoX2IgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZTtcbiAgICBjb25zdCBkYXRhID0gKF9jID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfY1twLnByb3BlcnR5XTtcbiAgICBjb25zdCBpc1RpdGxlID0gcC5wcm9wZXJ0eSA9PT0gXCJ0aXRsZVwiO1xuICAgIGNvbnN0IHN0eWxlID0ge307XG4gICAgaWYgKHAud2lkdGgpIHtcbiAgICAgIHN0eWxlLndpZHRoID0gcC53aWR0aDtcbiAgICB9IGVsc2UgaWYgKGlzVGl0bGUpIHtcbiAgICAgIHN0eWxlLndpZHRoID0gMjgwO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS53aWR0aCA9IDIwMDtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUxLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAga2V5OiBwLnByb3BlcnR5LFxuICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgXCJub3Rpb24tdGFibGUtY2VsbFwiLFxuICAgICAgICBgbm90aW9uLXRhYmxlLWNlbGwtJHtzY2hlbWEudHlwZX1gXG4gICAgICApLFxuICAgICAgc3R5bGVcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1MS5jcmVhdGVFbGVtZW50KFByb3BlcnR5LCB7XG4gICAgICBzY2hlbWEsXG4gICAgICBkYXRhLFxuICAgICAgYmxvY2ssXG4gICAgICBjb2xsZWN0aW9uLFxuICAgICAgbGlua1RvVGl0bGVQYWdlOiBsaW5rVGFibGVUaXRsZVByb3BlcnRpZXNcbiAgICB9KSk7XG4gIH0pKSkpKSkpO1xufVxuXG4vLyBzcmMvdGhpcmQtcGFydHkvY29sbGVjdGlvbi12aWV3LnRzeFxudmFyIENvbGxlY3Rpb25WaWV3SW1wbCA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGNvbGxlY3Rpb25WaWV3IH0gPSBwcm9wcztcbiAgc3dpdGNoIChjb2xsZWN0aW9uVmlldy50eXBlKSB7XG4gICAgY2FzZSBcInRhYmxlXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTIuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uVmlld1RhYmxlLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgICBjYXNlIFwiZ2FsbGVyeVwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvblZpZXdHYWxsZXJ5LCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgICBjYXNlIFwibGlzdFwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvblZpZXdMaXN0LCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgICBjYXNlIFwiYm9hcmRcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1Mi5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25WaWV3Qm9hcmQsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLndhcm4oXCJ1bnN1cHBvcnRlZCBjb2xsZWN0aW9uIHZpZXdcIiwgY29sbGVjdGlvblZpZXcpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG52YXIgQ29sbGVjdGlvblZpZXcgPSBSZWFjdDUyLm1lbW8oQ29sbGVjdGlvblZpZXdJbXBsKTtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2NvbGxlY3Rpb24udHN4XG52YXIgaXNTZXJ2ZXIyID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIjtcbnZhciBDb2xsZWN0aW9uID0gKHsgYmxvY2ssIGNsYXNzTmFtZSwgY3R4OiBjdHgyIH0pID0+IHtcbiAgY29uc3QgY29udGV4dCA9IFJlYWN0NTMudXNlTWVtbyhcbiAgICAoKSA9PiBfX3NwcmVhZFZhbHVlcyh7fSwgY3R4MiksXG4gICAgW2N0eDJdXG4gICk7XG4gIGlmIChibG9jay50eXBlID09PSBcInBhZ2VcIikge1xuICAgIGlmIChibG9jay5wYXJlbnRfdGFibGUgIT09IFwiY29sbGVjdGlvblwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoTm90aW9uQ29udGV4dFByb3ZpZGVyLCBfX3NwcmVhZFZhbHVlcyh7fSwgY29udGV4dCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLXBhZ2UtcHJvcGVydGllc1wiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uUm93LCB7XG4gICAgICBibG9jayxcbiAgICAgIHBhZ2VIZWFkZXI6IHRydWUsXG4gICAgICBjbGFzc05hbWVcbiAgICB9KSkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KE5vdGlvbkNvbnRleHRQcm92aWRlciwgX19zcHJlYWRWYWx1ZXMoe30sIGNvbnRleHQpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25WaWV3QmxvY2ssIHtcbiAgICAgIGJsb2NrLFxuICAgICAgY2xhc3NOYW1lXG4gICAgfSkpO1xuICB9XG59O1xudmFyIENvbGxlY3Rpb25WaWV3QmxvY2sgPSAoeyBibG9jaywgY2xhc3NOYW1lIH0pID0+IHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICBjb25zdCB7IHJlY29yZE1hcCwgc2hvd0NvbGxlY3Rpb25WaWV3RHJvcGRvd24gfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgeyB2aWV3X2lkczogdmlld0lkcyB9ID0gYmxvY2s7XG4gIGNvbnN0IGNvbGxlY3Rpb25JZCA9IGdldEJsb2NrQ29sbGVjdGlvbklkKGJsb2NrLCByZWNvcmRNYXApO1xuICBjb25zdCBbaXNNb3VudGVkLCBzZXRJc01vdW50ZWRdID0gUmVhY3Q1My51c2VTdGF0ZShmYWxzZSk7XG4gIFJlYWN0NTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc01vdW50ZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgZGVmYXVsdENvbGxlY3Rpb25WaWV3SWQgPSB2aWV3SWRzWzBdO1xuICBjb25zdCBbY29sbGVjdGlvblN0YXRlLCBzZXRDb2xsZWN0aW9uU3RhdGVdID0gdXNlTG9jYWxTdG9yYWdlKGJsb2NrLmlkLCB7XG4gICAgY29sbGVjdGlvblZpZXdJZDogZGVmYXVsdENvbGxlY3Rpb25WaWV3SWRcbiAgfSk7XG4gIGNvbnN0IGNvbGxlY3Rpb25WaWV3SWQgPSBpc01vdW50ZWQgJiYgdmlld0lkcy5maW5kKChpZCkgPT4gaWQgPT09IGNvbGxlY3Rpb25TdGF0ZS5jb2xsZWN0aW9uVmlld0lkKSB8fCBkZWZhdWx0Q29sbGVjdGlvblZpZXdJZDtcbiAgY29uc3Qgb25DaGFuZ2VWaWV3ID0gUmVhY3Q1My51c2VDYWxsYmFjayhcbiAgICAoY29sbGVjdGlvblZpZXdJZDIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2hhbmdlIGNvbGxlY3Rpb24gdmlld1wiLCBjb2xsZWN0aW9uVmlld0lkMik7XG4gICAgICBzZXRDb2xsZWN0aW9uU3RhdGUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY29sbGVjdGlvblN0YXRlKSwge1xuICAgICAgICBjb2xsZWN0aW9uVmlld0lkOiBjb2xsZWN0aW9uVmlld0lkMlxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW2NvbGxlY3Rpb25TdGF0ZSwgc2V0Q29sbGVjdGlvblN0YXRlXVxuICApO1xuICBsZXQgeyB3aWR0aDogd2luZG93V2lkdGggfSA9IHVzZVdpbmRvd1NpemUoKTtcbiAgaWYgKGlzU2VydmVyMikge1xuICAgIHdpbmRvd1dpZHRoID0gMTAyNDtcbiAgfVxuICBjb25zdCBjb2xsZWN0aW9uID0gKF9hID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25bY29sbGVjdGlvbklkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICBjb25zdCBjb2xsZWN0aW9uVmlldyA9IChfYiA9IHJlY29yZE1hcC5jb2xsZWN0aW9uX3ZpZXdbY29sbGVjdGlvblZpZXdJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZTtcbiAgY29uc3QgY29sbGVjdGlvbkRhdGEgPSAoX2MgPSByZWNvcmRNYXAuY29sbGVjdGlvbl9xdWVyeVtjb2xsZWN0aW9uSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbY29sbGVjdGlvblZpZXdJZF07XG4gIGNvbnN0IHBhcmVudFBhZ2UgPSBnZXRCbG9ja1BhcmVudFBhZ2UyKGJsb2NrLCByZWNvcmRNYXApO1xuICBjb25zdCB7IHdpZHRoLCBwYWRkaW5nIH0gPSBSZWFjdDUzLnVzZU1lbW8oKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgY29uc3Qgc3R5bGUgPSB7fTtcbiAgICBpZiAoKGNvbGxlY3Rpb25WaWV3ID09IG51bGwgPyB2b2lkIDAgOiBjb2xsZWN0aW9uVmlldy50eXBlKSAhPT0gXCJ0YWJsZVwiICYmIChjb2xsZWN0aW9uVmlldyA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvblZpZXcudHlwZSkgIT09IFwiYm9hcmRcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBwYWRkaW5nOiAwXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCB3aWR0aDIgPSB3aW5kb3dXaWR0aDtcbiAgICBjb25zdCBtYXhOb3Rpb25Cb2R5V2lkdGggPSA3MDg7XG4gICAgbGV0IG5vdGlvbkJvZHlXaWR0aCA9IG1heE5vdGlvbkJvZHlXaWR0aDtcbiAgICBpZiAoKF9hMiA9IHBhcmVudFBhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudFBhZ2UuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnBhZ2VfZnVsbF93aWR0aCkge1xuICAgICAgbm90aW9uQm9keVdpZHRoID0gd2lkdGgyIC0gMiAqIE1hdGgubWluKDk2LCB3aWR0aDIgKiAwLjA4KSB8IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vdGlvbkJvZHlXaWR0aCA9IHdpZHRoMiA8IG1heE5vdGlvbkJvZHlXaWR0aCA/IHdpZHRoMiAtIHdpZHRoMiAqIDAuMDIgfCAwIDogbWF4Tm90aW9uQm9keVdpZHRoO1xuICAgIH1cbiAgICBjb25zdCBwYWRkaW5nMiA9IGlzU2VydmVyMiAmJiAhaXNNb3VudGVkID8gOTYgOiAod2lkdGgyIC0gbm90aW9uQm9keVdpZHRoKSAvIDIgfCAwO1xuICAgIHN0eWxlLnBhZGRpbmdMZWZ0ID0gcGFkZGluZzI7XG4gICAgc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZzI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0eWxlLFxuICAgICAgd2lkdGg6IHdpZHRoMixcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmcyXG4gICAgfTtcbiAgfSwgW3dpbmRvd1dpZHRoLCBwYXJlbnRQYWdlLCBjb2xsZWN0aW9uVmlldyA9PSBudWxsID8gdm9pZCAwIDogY29sbGVjdGlvblZpZXcudHlwZSwgaXNNb3VudGVkXSk7XG4gIGlmICghKGNvbGxlY3Rpb24gJiYgY29sbGVjdGlvblZpZXcgJiYgY29sbGVjdGlvbkRhdGEpKSB7XG4gICAgY29uc29sZS53YXJuKFwic2tpcHBpbmcgbWlzc2luZyBjb2xsZWN0aW9uIHZpZXcgZm9yIGJsb2NrXCIsIGJsb2NrLmlkLCB7XG4gICAgICBjb2xsZWN0aW9uSWQsXG4gICAgICBjb2xsZWN0aW9uVmlld0lkLFxuICAgICAgY29sbGVjdGlvblZpZXcsXG4gICAgICBjb2xsZWN0aW9uRGF0YSxcbiAgICAgIHJlY29yZE1hcFxuICAgIH0pO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHRpdGxlID0gZ2V0VGV4dENvbnRlbnQ0KGNvbGxlY3Rpb24ubmFtZSkudHJpbSgpO1xuICBjb25zdCBzaG93VGl0bGUgPSAoKF9kID0gY29sbGVjdGlvblZpZXcuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2QuaGlkZV9saW5rZWRfY29sbGVjdGlvbl9uYW1lKSAhPT0gdHJ1ZSAmJiB0aXRsZTtcbiAgaWYgKGNvbGxlY3Rpb24uaWNvbikge1xuICAgIGJsb2NrLmZvcm1hdCA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIGJsb2NrLmZvcm1hdCksIHtcbiAgICAgIHBhZ2VfaWNvbjogY29sbGVjdGlvbi5pY29uXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoUmVhY3Q1My5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIHZpZXdJZHMubGVuZ3RoID4gMSAmJiBzaG93Q29sbGVjdGlvblZpZXdEcm9wZG93biAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25WaWV3VGFicywge1xuICAgIGNvbGxlY3Rpb25WaWV3SWQsXG4gICAgdmlld0lkcyxcbiAgICBvbkNoYW5nZVZpZXdcbiAgfSkpLCBzaG93VGl0bGUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLWhlYWRlclwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi1oZWFkZXItdGl0bGVcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgYmxvY2ssXG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLWljb25cIixcbiAgICBoaWRlRGVmYXVsdEljb246IHRydWVcbiAgfSksIHRpdGxlKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWNvbGxlY3Rpb25cIiwgY2xhc3NOYW1lKVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KENvbGxlY3Rpb25WaWV3LCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBjb2xsZWN0aW9uVmlldyxcbiAgICBjb2xsZWN0aW9uRGF0YSxcbiAgICBwYWRkaW5nLFxuICAgIHdpZHRoXG4gIH0pKSk7XG59O1xudmFyIENvbGxlY3Rpb25WaWV3VGFicyA9ICh7IGNvbGxlY3Rpb25WaWV3SWQsIHZpZXdJZHMsIG9uQ2hhbmdlVmlldyB9KSA9PiB7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWNvbGxlY3Rpb24tdmlldy10YWJzLXJvd1wiXG4gIH0sIHZpZXdJZHMubWFwKCh2aWV3SWQpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgb25DbGljazogKCkgPT4gb25DaGFuZ2VWaWV3KHZpZXdJZCksXG4gICAgICBrZXk6IHZpZXdJZCxcbiAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgIFwibm90aW9uLWNvbGxlY3Rpb24tdmlldy10YWJzLWNvbnRlbnQtaXRlbVwiLFxuICAgICAgICBjb2xsZWN0aW9uVmlld0lkID09PSB2aWV3SWQgJiYgXCJub3Rpb24tY29sbGVjdGlvbi12aWV3LXRhYnMtY29udGVudC1pdGVtLWFjdGl2ZVwiXG4gICAgICApXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChDb2xsZWN0aW9uVmlld0NvbHVtbkRlc2MsIHtcbiAgICAgIGNvbGxlY3Rpb25WaWV3OiAoX2EgPSByZWNvcmRNYXAuY29sbGVjdGlvbl92aWV3W3ZpZXdJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZVxuICAgIH0pKTtcbiAgfSkpO1xufTtcbnZhciBDb2xsZWN0aW9uVmlld0NvbHVtbkRlc2MgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHsgY29sbGVjdGlvblZpZXcsIGNsYXNzTmFtZSwgY2hpbGRyZW4gfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXCJjb2xsZWN0aW9uVmlld1wiLCBcImNsYXNzTmFtZVwiLCBcImNoaWxkcmVuXCJdKTtcbiAgY29uc3QgeyB0eXBlIH0gPSBjb2xsZWN0aW9uVmlldztcbiAgY29uc3QgbmFtZSA9IGNvbGxlY3Rpb25WaWV3Lm5hbWUgfHwgYCR7dHlwZVswXS50b1VwcGVyQ2FzZSgpfSR7dHlwZS5zbGljZSgxKX0gdmlld2A7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1My5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWNvbGxlY3Rpb24tdmlldy10eXBlXCIsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUzLmNyZWF0ZUVsZW1lbnQoQ29sbGVjdGlvblZpZXdJY29uLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1jb2xsZWN0aW9uLXZpZXctdHlwZS1pY29uXCIsXG4gICAgdHlwZVxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tY29sbGVjdGlvbi12aWV3LXR5cGUtdGl0bGVcIlxuICB9LCBuYW1lKSwgY2hpbGRyZW4pO1xufTtcbmV4cG9ydCB7XG4gIENvbGxlY3Rpb24sXG4gIFByb3BlcnR5SW1wbE1lbW8gYXMgUHJvcGVydHlcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/build/third-party/collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/build/third-party/equation.js":
/*!*******************************************************************!*\
  !*** ./node_modules/react-notion-x/build/third-party/equation.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Equation: () => (/* binding */ Equation)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _matejmazur_react_katex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @matejmazur/react-katex */ \"(ssr)/./node_modules/@matejmazur/react-katex/dist/react-katex.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/notion-utils/build/index.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! notion-utils */ \"(ssr)/./node_modules/is-url-superb/index.js\");\n/* harmony import */ var react_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-image */ \"(ssr)/./node_modules/react-image/cjs/index.js\");\n/* harmony import */ var react_lazy_images__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-lazy-images */ \"(ssr)/./node_modules/react-notion-x/node_modules/react-lazy-images/dist/react-lazy-images.js\");\n/* harmony import */ var react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-hotkeys-hook */ \"(ssr)/./node_modules/react-hotkeys-hook/dist/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-fast-compare */ \"(ssr)/./node_modules/react-fast-compare/index.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// ../../node_modules/lodash.throttle/index.js\nvar require_lodash = __commonJS({\n  \"../../node_modules/lodash.throttle/index.js\"(exports, module) {\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var NAN = 0 / 0;\n    var symbolTag = \"[object Symbol]\";\n    var reTrim = /^\\s+|\\s+$/g;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var objectProto = Object.prototype;\n    var objectToString = objectProto.toString;\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    var now = function() {\n      return root.Date.now();\n    };\n    function debounce(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, result2 = wait - timeSinceLastCall;\n        return maxing ? nativeMin(result2, maxWait - timeSinceLastInvoke) : result2;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    function throttle2(func, wait, options) {\n      var leading = true, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = \"leading\" in options ? !!options.leading : leading;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        \"leading\": leading,\n        \"maxWait\": wait,\n        \"trailing\": trailing\n      });\n    }\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == \"object\" || type == \"function\");\n    }\n    function isObjectLike(value) {\n      return !!value && typeof value == \"object\";\n    }\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && objectToString.call(value) == symbolTag;\n    }\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, \"\");\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module.exports = throttle2;\n  }\n});\n\n// src/third-party/equation.tsx\n\n\n\n\n// src/context.tsx\n\n\n// src/components/asset-wrapper.tsx\n\n\n\n// src/utils.ts\n\n\n// src/map-image-url.ts\nvar defaultMapImageUrl = (url, block) => {\n  if (!url) {\n    return null;\n  }\n  if (url.startsWith(\"data:\")) {\n    return url;\n  }\n  if (url.startsWith(\"https://images.unsplash.com\")) {\n    return url;\n  }\n  try {\n    const u = new URL(url);\n    if (u.pathname.startsWith(\"/secure.notion-static.com\") && u.hostname.endsWith(\".amazonaws.com\")) {\n      if (u.searchParams.has(\"X-Amz-Credential\") && u.searchParams.has(\"X-Amz-Signature\") && u.searchParams.has(\"X-Amz-Algorithm\")) {\n        return url;\n      }\n    }\n  } catch (e) {\n  }\n  if (url.startsWith(\"/images\")) {\n    url = `https://www.notion.so${url}`;\n  }\n  url = `https://www.notion.so${url.startsWith(\"/image\") ? url : `/image/${encodeURIComponent(url)}`}`;\n  const notionImageUrlV2 = new URL(url);\n  let table = block.parent_table === \"space\" ? \"block\" : block.parent_table;\n  if (table === \"collection\" || table === \"team\") {\n    table = \"block\";\n  }\n  notionImageUrlV2.searchParams.set(\"table\", table);\n  notionImageUrlV2.searchParams.set(\"id\", block.id);\n  notionImageUrlV2.searchParams.set(\"cache\", \"v2\");\n  url = notionImageUrlV2.toString();\n  return url;\n};\n\n// src/map-page-url.ts\nvar defaultMapPageUrl = (rootPageId) => (pageId) => {\n  pageId = (pageId || \"\").replace(/-/g, \"\");\n  if (rootPageId && pageId === rootPageId) {\n    return \"/\";\n  } else {\n    return `/${pageId}`;\n  }\n};\n\n// src/utils.ts\nvar cs = (...classes) => classes.filter((a) => !!a).join(\" \");\nvar getHashFragmentValue = (url) => {\n  return url.includes(\"#\") ? url.replace(/^.+(#.+)$/, \"$1\") : \"\";\n};\nvar isBrowser = typeof window !== \"undefined\";\nvar youtubeDomains = /* @__PURE__ */ new Set([\n  \"youtu.be\",\n  \"youtube.com\",\n  \"www.youtube.com\",\n  \"youtube-nocookie.com\",\n  \"www.youtube-nocookie.com\"\n]);\nvar getYoutubeId = (url) => {\n  try {\n    const { hostname } = new URL(url);\n    if (!youtubeDomains.has(hostname)) {\n      return null;\n    }\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/i;\n    const match = url.match(regExp);\n    if (match && match[2].length == 11) {\n      return match[2];\n    }\n  } catch (e) {\n  }\n  return null;\n};\n\n// src/components/eoi.tsx\n\n\n// src/icons/type-github.tsx\n\nfunction SvgTypeGitHub(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 260 260\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n    fill: \"#161614\"\n  })));\n}\nvar type_github_default = SvgTypeGitHub;\n\n// src/components/eoi.tsx\nvar EOI = ({ block, inline, className }) => {\n  var _a, _b, _c;\n  const { components } = useNotionContext();\n  const { original_url, attributes, domain } = (block == null ? void 0 : block.format) || {};\n  if (!original_url || !attributes) {\n    return null;\n  }\n  const title = (_a = attributes.find((attr) => attr.id === \"title\")) == null ? void 0 : _a.values[0];\n  let owner = (_b = attributes.find((attr) => attr.id === \"owner\")) == null ? void 0 : _b.values[0];\n  const lastUpdatedAt = (_c = attributes.find((attr) => attr.id === \"updated_at\")) == null ? void 0 : _c.values[0];\n  const lastUpdated = lastUpdatedAt ? (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.formatNotionDateTime)(lastUpdatedAt) : null;\n  let externalImage;\n  switch (domain) {\n    case \"github.com\":\n      externalImage = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(type_github_default, null);\n      if (owner) {\n        const parts = owner.split(\"/\");\n        owner = parts[parts.length - 1];\n      }\n      break;\n    default:\n      if (true) {\n        console.log(\n          `Unsupported external_object_instance domain \"${domain}\"`,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: original_url,\n    className: cs(\n      \"notion-external\",\n      inline ? \"notion-external-mention\" : \"notion-external-block notion-row\",\n      className\n    )\n  }, externalImage && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-image\"\n  }, externalImage), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-description\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-title\"\n  }, title), (owner || lastUpdated) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-external-subtitle\"\n  }, owner && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, owner), owner && lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \" \\u2022 \"), lastUpdated && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", null, \"Updated \", lastUpdated))));\n};\n\n// src/components/text.tsx\n\n\n\n// src/components/graceful-image.tsx\n\n\nvar GracefulImage = (props) => {\n  if (isBrowser) {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_image__WEBPACK_IMPORTED_MODULE_3__.Img, __spreadValues({}, props));\n  } else {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({}, props));\n  }\n};\n\n// src/components/page-title.tsx\n\n\n\n// src/components/page-icon.tsx\n\n\n\n// src/icons/default-page-icon.tsx\n\nvar DefaultPageIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className\n  }, rest), {\n    viewBox: \"0 0 30 30\",\n    width: \"16\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\"\n  }));\n};\n\n// src/components/lazy-image.tsx\n\n\n\nvar LazyImage = (_a) => {\n  var _b = _a, {\n    src,\n    alt,\n    className,\n    style,\n    zoomable = false,\n    priority = false,\n    height\n  } = _b, rest = __objRest(_b, [\n    \"src\",\n    \"alt\",\n    \"className\",\n    \"style\",\n    \"zoomable\",\n    \"priority\",\n    \"height\"\n  ]);\n  var _a2, _b2, _c;\n  const { recordMap, zoom, previewImages, forceCustomImages, components } = useNotionContext();\n  const zoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(zoom ? zoom.clone() : null);\n  const previewImage = previewImages ? (_c = (_a2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _a2[src]) != null ? _c : (_b2 = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _b2[(0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.normalizeUrl)(src)] : null;\n  const onLoad = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (zoomable && (e.target.src || e.target.srcset)) {\n        if (zoomRef.current) {\n          ;\n          zoomRef.current.attach(e.target);\n        }\n      }\n    },\n    [zoomRef, zoomable]\n  );\n  const attachZoom = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (image) => {\n      if (zoomRef.current && image) {\n        ;\n        zoomRef.current.attach(image);\n      }\n    },\n    [zoomRef]\n  );\n  const attachZoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => zoomable ? attachZoom : void 0,\n    [zoomable, attachZoom]\n  );\n  if (previewImage) {\n    const aspectRatio = previewImage.originalHeight / previewImage.originalWidth;\n    if (components.Image) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        style,\n        className,\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        blurDataURL: previewImage.dataURIBase64,\n        placeholder: \"blur\",\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_lazy_images__WEBPACK_IMPORTED_MODULE_4__.LazyImageFull, __spreadProps(__spreadValues({\n      src\n    }, rest), {\n      experimentalDecode: true\n    }), ({ imageState, ref }) => {\n      const isLoaded = imageState === react_lazy_images__WEBPACK_IMPORTED_MODULE_4__.ImageState.LoadSuccess;\n      const wrapperStyle = {\n        width: \"100%\"\n      };\n      const imgStyle = {};\n      if (height) {\n        wrapperStyle.height = height;\n      } else {\n        imgStyle.position = \"absolute\";\n        wrapperStyle.paddingBottom = `${aspectRatio * 100}%`;\n      }\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: cs(\n          \"lazy-image-wrapper\",\n          isLoaded && \"lazy-image-loaded\",\n          className\n        ),\n        style: wrapperStyle\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-preview\",\n        src: previewImage.dataURIBase64,\n        alt,\n        ref,\n        style,\n        decoding: \"async\"\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n        className: \"lazy-image-real\",\n        src,\n        alt,\n        ref: attachZoomRef,\n        style: __spreadValues(__spreadValues({}, style), imgStyle),\n        width: previewImage.originalWidth,\n        height: previewImage.originalHeight,\n        decoding: \"async\",\n        loading: \"lazy\"\n      }));\n    });\n  } else {\n    if (components.Image && forceCustomImages) {\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Image, {\n        src,\n        alt,\n        className,\n        style,\n        width: null,\n        height: height || null,\n        priority,\n        onLoad\n      });\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", __spreadValues({\n      className,\n      style,\n      src,\n      alt,\n      ref: attachZoomRef,\n      loading: \"lazy\",\n      decoding: \"async\"\n    }, rest));\n  }\n};\n\n// src/components/page-icon.tsx\nvar isIconBlock = (value) => {\n  return value.type === \"page\" || value.type === \"callout\" || value.type === \"collection_view\" || value.type === \"collection_view_page\";\n};\nvar PageIconImpl = ({\n  block,\n  className,\n  inline = true,\n  hideDefaultIcon = false,\n  defaultIcon\n}) => {\n  var _a;\n  const { mapImageUrl, recordMap, darkMode } = useNotionContext();\n  let isImage = false;\n  let content = null;\n  if (isIconBlock(block)) {\n    const icon = ((_a = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockIcon)(block, recordMap)) == null ? void 0 : _a.trim()) || defaultIcon;\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockTitle)(block, recordMap);\n    if (icon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(icon)) {\n      const url = mapImageUrl(icon, block);\n      isImage = true;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (icon && icon.startsWith(\"/icons/\")) {\n      const url = \"https://www.notion.so\" + icon + \"?mode=\" + (darkMode ? \"dark\" : \"light\");\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n        src: url,\n        alt: title || \"page icon\",\n        className: cs(className, \"notion-page-icon\")\n      });\n    } else if (!icon) {\n      if (!hideDefaultIcon) {\n        isImage = true;\n        content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultPageIcon, {\n          className: cs(className, \"notion-page-icon\"),\n          alt: title ? title : \"page icon\"\n        });\n      }\n    } else {\n      isImage = false;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: cs(className, \"notion-page-icon\"),\n        role: \"img\",\n        \"aria-label\": icon\n      }, icon);\n    }\n  }\n  if (!content) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: cs(\n      inline ? \"notion-page-icon-inline\" : \"notion-page-icon-hero\",\n      isImage ? \"notion-page-icon-image\" : \"notion-page-icon-span\"\n    )\n  }, content);\n};\nvar PageIcon = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageIconImpl);\n\n// src/components/page-title.tsx\nvar PageTitleImpl = (_a) => {\n  var _b = _a, { block, className, defaultIcon } = _b, rest = __objRest(_b, [\"block\", \"className\", \"defaultIcon\"]);\n  var _a2, _b2;\n  const { recordMap } = useNotionContext();\n  if (!block)\n    return null;\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockTitle)(block, recordMap);\n    if (!title) {\n      return null;\n    }\n    const titleDecoration = [[title]];\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n      className: cs(\"notion-page-title\", className)\n    }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      block,\n      defaultIcon,\n      className: \"notion-page-title-icon\"\n    }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"notion-page-title-text\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n      value: titleDecoration,\n      block\n    })));\n  }\n  if (!((_a2 = block.properties) == null ? void 0 : _a2.title)) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({\n    className: cs(\"notion-page-title\", className)\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n    block,\n    defaultIcon,\n    className: \"notion-page-title-icon\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-page-title-text\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: (_b2 = block.properties) == null ? void 0 : _b2.title,\n    block\n  })));\n};\nvar PageTitle = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageTitleImpl);\n\n// src/components/text.tsx\nvar Text = ({ value, block, linkProps, linkProtocol }) => {\n  const { components, recordMap, mapPageUrl, mapImageUrl, rootDomain } = useNotionContext();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, value == null ? void 0 : value.map(([text, decorations], index) => {\n    if (!decorations) {\n      if (text === \",\") {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n          key: index,\n          style: { padding: \"0.5em\" }\n        });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n          key: index\n        }, text);\n      }\n    }\n    const formatted = decorations.reduce(\n      (element, decorator) => {\n        var _a, _b, _c, _d, _e;\n        switch (decorator[0]) {\n          case \"p\": {\n            const blockId = decorator[1];\n            const linkedBlock = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n            if (!linkedBlock) {\n              console.log('\"p\" missing block', blockId);\n              return null;\n            }\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n              className: \"notion-link\",\n              href: mapPageUrl(blockId)\n            }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n              block: linkedBlock\n            }));\n          }\n          case \"\\u2023\": {\n            const linkType = decorator[1][0];\n            const id = decorator[1][1];\n            switch (linkType) {\n              case \"u\": {\n                const user = (_b = recordMap.notion_user[id]) == null ? void 0 : _b.value;\n                if (!user) {\n                  console.log('\"\\u2023\" missing user', id);\n                  return null;\n                }\n                const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n                  className: \"notion-user\",\n                  src: mapImageUrl(user.profile_photo, block),\n                  alt: name\n                });\n              }\n              default: {\n                const linkedBlock = (_c = recordMap.block[id]) == null ? void 0 : _c.value;\n                if (!linkedBlock) {\n                  console.log('\"\\u2023\" missing block', linkType, id);\n                  return null;\n                }\n                return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadProps(__spreadValues({\n                  className: \"notion-link\",\n                  href: mapPageUrl(id)\n                }, linkProps), {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n                  block: linkedBlock\n                }));\n              }\n            }\n          }\n          case \"h\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: `notion-${decorator[1]}`\n            }, element);\n          case \"c\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"code\", {\n              className: \"notion-inline-code\"\n            }, element);\n          case \"b\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"b\", null, element);\n          case \"i\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"em\", null, element);\n          case \"s\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"s\", null, element);\n          case \"_\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n              className: \"notion-inline-underscore\"\n            }, element);\n          case \"e\":\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Equation, {\n              math: decorator[1],\n              inline: true\n            });\n          case \"m\":\n            return element;\n          case \"a\": {\n            const v = decorator[1];\n            const pathname = v.substr(1);\n            const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.parsePageId)(pathname, { uuid: true });\n            if ((v[0] === \"/\" || v.includes(rootDomain)) && id) {\n              const href = v.includes(rootDomain) ? v : `${mapPageUrl(id)}${getHashFragmentValue(v)}`;\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, __spreadValues({\n                className: \"notion-link\",\n                href\n              }, linkProps), element);\n            } else {\n              return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Link, __spreadValues({\n                className: \"notion-link\",\n                href: linkProtocol ? `${linkProtocol}:${decorator[1]}` : decorator[1]\n              }, linkProps), element);\n            }\n          }\n          case \"d\": {\n            const v = decorator[1];\n            const type = v == null ? void 0 : v.type;\n            if (type === \"date\") {\n              const startDate = v.start_date;\n              return (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.formatDate)(startDate);\n            } else if (type === \"daterange\") {\n              const startDate = v.start_date;\n              const endDate = v.end_date;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.formatDate)(startDate)} \\u2192 ${(0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.formatDate)(endDate)}`;\n            } else {\n              return element;\n            }\n          }\n          case \"u\": {\n            const userId = decorator[1];\n            const user = (_d = recordMap.notion_user[userId]) == null ? void 0 : _d.value;\n            if (!user) {\n              console.log(\"missing user\", userId);\n              return null;\n            }\n            const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GracefulImage, {\n              className: \"notion-user\",\n              src: mapImageUrl(user.profile_photo, block),\n              alt: name\n            });\n          }\n          case \"eoi\": {\n            const blockId = decorator[1];\n            const externalObjectInstance = (_e = recordMap.block[blockId]) == null ? void 0 : _e.value;\n            return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(EOI, {\n              block: externalObjectInstance,\n              inline: true\n            });\n          }\n          default:\n            if (true) {\n              console.log(\"unsupported text format\", decorator);\n            }\n            return element;\n        }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, text)\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: index\n    }, formatted);\n  }));\n};\n\n// src/components/header.tsx\n\n\n\n\n// src/icons/search-icon.tsx\n\nvar SearchIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    className: cs(\"notion-icon\", className),\n    viewBox: \"0 0 17 17\"\n  }, rest), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M6.78027 13.6729C8.24805 13.6729 9.60156 13.1982 10.709 12.4072L14.875 16.5732C15.0684 16.7666 15.3232 16.8633 15.5957 16.8633C16.167 16.8633 16.5713 16.4238 16.5713 15.8613C16.5713 15.5977 16.4834 15.3516 16.29 15.1582L12.1504 11.0098C13.0205 9.86719 13.5391 8.45215 13.5391 6.91406C13.5391 3.19629 10.498 0.155273 6.78027 0.155273C3.0625 0.155273 0.0214844 3.19629 0.0214844 6.91406C0.0214844 10.6318 3.0625 13.6729 6.78027 13.6729ZM6.78027 12.2139C3.87988 12.2139 1.48047 9.81445 1.48047 6.91406C1.48047 4.01367 3.87988 1.61426 6.78027 1.61426C9.68066 1.61426 12.0801 4.01367 12.0801 6.91406C12.0801 9.81445 9.68066 12.2139 6.78027 12.2139Z\"\n  }));\n};\n\n// src/components/search-dialog.tsx\nvar import_lodash = __toESM(require_lodash(), 1);\n\n\n\n// src/icons/clear-icon.tsx\n\nvar ClearIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 30 30\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M15,0C6.716,0,0,6.716,0,15s6.716,15,15,15s15-6.716,15-15S23.284,0,15,0z M22,20.6L20.6,22L15,16.4L9.4,22L8,20.6l5.6-5.6 L8,9.4L9.4,8l5.6,5.6L20.6,8L22,9.4L16.4,15L22,20.6z\"\n  }));\n};\n\n// src/icons/loading-icon.tsx\n\nvar LoadingIcon = (props) => {\n  const _a = props, { className } = _a, rest = __objRest(_a, [\"className\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadProps(__spreadValues({\n    className: cs(\"notion-icon\", className)\n  }, rest), {\n    viewBox: \"0 0 24 24\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"defs\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"linearGradient\", {\n    x1: \"28.1542969%\",\n    y1: \"63.7402344%\",\n    x2: \"74.6289062%\",\n    y2: \"17.7832031%\",\n    id: \"linearGradient-1\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 1)\",\n    offset: \"0%\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"stop\", {\n    stopColor: \"rgba(164, 164, 164, 0)\",\n    stopOpacity: \"0\",\n    offset: \"100%\"\n  }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(-236.000000, -286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", {\n    transform: \"translate(238.000000, 286.000000)\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"circle\", {\n    id: \"Oval-2\",\n    stroke: \"url(#linearGradient-1)\",\n    strokeWidth: \"4\",\n    cx: \"10\",\n    cy: \"12\",\n    r: \"10\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M10,2 C4.4771525,2 0,6.4771525 0,12\",\n    id: \"Oval-2\",\n    stroke: \"rgba(164, 164, 164, 1)\",\n    strokeWidth: \"4\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", {\n    id: \"Rectangle-1\",\n    fill: \"rgba(164, 164, 164, 1)\",\n    x: \"8\",\n    y: \"0\",\n    width: \"4\",\n    height: \"4\",\n    rx: \"8\"\n  })))));\n};\n\n// src/components/search-dialog.tsx\nvar SearchDialog = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      query: \"\",\n      searchResult: null,\n      searchError: null\n    };\n    this._onAfterOpen = () => {\n      if (this._inputRef.current) {\n        this._inputRef.current.focus();\n      }\n    };\n    this._onChangeQuery = (e) => {\n      const query = e.target.value;\n      this.setState({ query });\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      } else {\n        this._search();\n      }\n    };\n    this._onClearQuery = () => {\n      this._onChangeQuery({ target: { value: \"\" } });\n    };\n    this._warmupSearch = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      yield searchNotion({\n        query: \"\",\n        ancestorId: rootBlockId\n      });\n    });\n    this._searchImpl = () => __async(this, null, function* () {\n      const { searchNotion, rootBlockId } = this.props;\n      const { query } = this.state;\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      }\n      this.setState({ isLoading: true });\n      const result = yield searchNotion({\n        query,\n        ancestorId: rootBlockId\n      });\n      console.log(\"search\", query, result);\n      let searchResult = null;\n      let searchError = null;\n      if (result.error || result.errorId) {\n        searchError = result;\n      } else {\n        searchResult = __spreadValues({}, result);\n        const results = searchResult.results.map((result2) => {\n          var _a, _b;\n          const block = (_a = searchResult.recordMap.block[result2.id]) == null ? void 0 : _a.value;\n          if (!block)\n            return;\n          const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockTitle)(block, searchResult.recordMap);\n          if (!title) {\n            return;\n          }\n          result2.title = title;\n          result2.block = block;\n          result2.recordMap = searchResult.recordMap;\n          result2.page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockParentPage)(block, searchResult.recordMap, {\n            inclusive: true\n          }) || block;\n          if (!result2.page.id) {\n            return;\n          }\n          if ((_b = result2.highlight) == null ? void 0 : _b.text) {\n            result2.highlight.html = result2.highlight.text.replace(/<gzkNfoUU>/gi, \"<b>\").replace(/<\\/gzkNfoUU>/gi, \"</b>\");\n          }\n          return result2;\n        }).filter(Boolean);\n        const searchResultsMap = results.reduce(\n          (map, result2) => __spreadProps(__spreadValues({}, map), {\n            [result2.page.id]: result2\n          }),\n          {}\n        );\n        searchResult.results = Object.values(searchResultsMap);\n      }\n      if (this.state.query === query) {\n        this.setState({ isLoading: false, searchResult, searchError });\n      }\n    });\n    this._inputRef = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  }\n  componentDidMount() {\n    this._search = (0, import_lodash.default)(this._searchImpl.bind(this), 1e3);\n    this._warmupSearch();\n  }\n  render() {\n    const { isOpen, onClose } = this.props;\n    const { isLoading, query, searchResult, searchError } = this.state;\n    const hasQuery = !!query.trim();\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextConsumer, null, (ctx2) => {\n      const { components, defaultPageIcon, mapPageUrl } = ctx2;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Modal, {\n        isOpen,\n        contentLabel: \"Search\",\n        className: \"notion-search\",\n        overlayClassName: \"notion-search-overlay\",\n        onRequestClose: onClose,\n        onAfterOpen: this._onAfterOpen\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"quickFindMenu\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"searchBar\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"inlineIcon\"\n      }, isLoading ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingIcon, {\n        className: \"loadingIcon\"\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"input\", {\n        className: \"searchInput\",\n        placeholder: \"Search\",\n        value: query,\n        ref: this._inputRef,\n        onChange: this._onChangeQuery\n      }), query && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        role: \"button\",\n        className: \"clearButton\",\n        onClick: this._onClearQuery\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClearIcon, {\n        className: \"clearIcon\"\n      }))), hasQuery && searchResult && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, searchResult.results.length ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NotionContextProvider, __spreadProps(__spreadValues({}, ctx2), {\n        recordMap: searchResult.recordMap\n      }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"resultsPane\"\n      }, searchResult.results.map((result) => {\n        var _a;\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n          key: result.id,\n          className: cs(\"result\", \"notion-page-link\"),\n          href: mapPageUrl(\n            result.page.id,\n            searchResult.recordMap\n          )\n        }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageTitle, {\n          block: result.page,\n          defaultIcon: defaultPageIcon\n        }), ((_a = result.highlight) == null ? void 0 : _a.html) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n          className: \"notion-search-result-highlight\",\n          dangerouslySetInnerHTML: {\n            __html: result.highlight.html\n          }\n        }));\n      })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"footer\", {\n        className: \"resultsFooter\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n        className: \"resultsCount\"\n      }, searchResult.total), searchResult.total === 1 ? \" result\" : \" results\"))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"No results\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsDetail\"\n      }, \"Try different search terms\"))), hasQuery && !searchResult && searchError && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResultsPane\"\n      }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n        className: \"noResults\"\n      }, \"Search error\"))));\n    });\n  }\n};\n\n// src/components/header.tsx\nvar Header = ({ block }) => {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"header\", {\n    className: \"notion-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-nav-header\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumbs, {\n    block\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Search, {\n    block\n  })));\n};\nvar Breadcrumbs = ({ block, rootOnly = false }) => {\n  const { recordMap, mapPageUrl, components } = useNotionContext();\n  const breadcrumbs = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const breadcrumbs2 = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getPageBreadcrumbs)(recordMap, block.id);\n    if (rootOnly) {\n      return [breadcrumbs2[0]].filter(Boolean);\n    }\n    return breadcrumbs2;\n  }, [recordMap, block.id, rootOnly]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"breadcrumbs\",\n    key: \"breadcrumbs\"\n  }, breadcrumbs.map((breadcrumb, index) => {\n    if (!breadcrumb) {\n      return null;\n    }\n    const pageLinkProps = {};\n    const componentMap = {\n      pageLink: components.PageLink\n    };\n    if (breadcrumb.active) {\n      componentMap.pageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, props));\n    } else {\n      pageLinkProps.href = mapPageUrl(breadcrumb.pageId);\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      key: breadcrumb.pageId\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(componentMap.pageLink, __spreadValues({\n      className: cs(\"breadcrumb\", breadcrumb.active && \"active\")\n    }, pageLinkProps), breadcrumb.icon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageIcon, {\n      className: \"icon\",\n      block: breadcrumb.block\n    }), breadcrumb.title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"title\"\n    }, breadcrumb.title)), index < breadcrumbs.length - 1 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n      className: \"spacer\"\n    }, \"/\"));\n  }));\n};\nvar Search = ({ block, search, title = \"Search\" }) => {\n  const { searchNotion, rootPageId, isShowingSearch, onHideSearch } = useNotionContext();\n  const onSearchNotion = search || searchNotion;\n  const [isSearchOpen, setIsSearchOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(isShowingSearch);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsSearchOpen(isShowingSearch);\n  }, [isShowingSearch]);\n  const onOpenSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(true);\n  }, []);\n  const onCloseSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(false);\n    if (onHideSearch) {\n      onHideSearch();\n    }\n  }, [onHideSearch]);\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_6__.useHotkeys)(\"cmd+p\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_6__.useHotkeys)(\"cmd+k\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  const hasSearch = !!onSearchNotion;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    role: \"button\",\n    className: cs(\"breadcrumb\", \"button\", \"notion-search-button\"),\n    onClick: onOpenSearch\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchIcon, {\n    className: \"searchIcon\"\n  }), title && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"title\"\n  }, title)), isSearchOpen && hasSearch && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SearchDialog, {\n    isOpen: isSearchOpen,\n    rootBlockId: rootPageId || (block == null ? void 0 : block.id),\n    onClose: onCloseSearch,\n    searchNotion: onSearchNotion\n  }));\n};\n\n// src/components/asset.tsx\n\n\n\n// src/components/lite-youtube-embed.tsx\n\nvar qs = (params) => {\n  return Object.keys(params).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n  ).join(\"&\");\n};\nvar LiteYouTubeEmbed = ({\n  id,\n  defaultPlay = false,\n  mute = false,\n  lazyImage = false,\n  iframeTitle = \"YouTube video\",\n  alt = \"Video preview\",\n  params = {},\n  adLinksPreconnect = true,\n  style,\n  className\n}) => {\n  const muteParam = mute || defaultPlay ? \"1\" : \"0\";\n  const queryString = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => qs(__spreadValues({ autoplay: \"1\", mute: muteParam }, params)),\n    [muteParam, params]\n  );\n  const resolution = \"hqdefault\";\n  const posterUrl = `https://i.ytimg.com/vi/${id}/${resolution}.jpg`;\n  const ytUrl = \"https://www.youtube-nocookie.com\";\n  const iframeSrc = `${ytUrl}/embed/${id}?${queryString}`;\n  const [isPreconnected, setIsPreconnected] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [iframeInitialized, setIframeInitialized] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultPlay);\n  const [isIframeLoaded, setIsIframeLoaded] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const warmConnections = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (isPreconnected)\n      return;\n    setIsPreconnected(true);\n  }, [isPreconnected]);\n  const onLoadIframe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (iframeInitialized)\n      return;\n    setIframeInitialized(true);\n  }, [iframeInitialized]);\n  const onIframeLoaded = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsIframeLoaded(true);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preload\",\n    href: posterUrl,\n    as: \"image\"\n  }), isPreconnected && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: ytUrl\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://www.google.com\"\n  })), isPreconnected && adLinksPreconnect && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://static.doubleclick.net\"\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://googleads.g.doubleclick.net\"\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    onClick: onLoadIframe,\n    onPointerOver: warmConnections,\n    className: cs(\n      \"notion-yt-lite\",\n      isIframeLoaded && \"notion-yt-loaded\",\n      iframeInitialized && \"notion-yt-initialized\",\n      className\n    ),\n    style\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"img\", {\n    src: posterUrl,\n    className: \"notion-yt-thumbnail\",\n    loading: lazyImage ? \"lazy\" : void 0,\n    alt\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    className: \"notion-yt-playbtn\"\n  }), iframeInitialized && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n    width: \"560\",\n    height: \"315\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true,\n    title: iframeTitle,\n    src: iframeSrc,\n    onLoad: onIframeLoaded\n  })));\n};\n\n// src/components/asset.tsx\nvar isServer = typeof window === \"undefined\";\nvar supportedAssetTypes = [\n  \"video\",\n  \"image\",\n  \"embed\",\n  \"figma\",\n  \"typeform\",\n  \"excalidraw\",\n  \"maps\",\n  \"tweet\",\n  \"pdf\",\n  \"gist\",\n  \"codepen\",\n  \"drive\"\n];\nvar Asset = ({ block, zoomable = true, children }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  const { recordMap, mapImageUrl, components } = useNotionContext();\n  if (!block || !supportedAssetTypes.includes(block.type)) {\n    return null;\n  }\n  const style = {\n    position: \"relative\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    flexDirection: \"column\"\n  };\n  const assetStyle = {};\n  if (block.format) {\n    const {\n      block_aspect_ratio,\n      block_height,\n      block_width,\n      block_full_width,\n      block_page_width,\n      block_preserve_scale\n    } = block.format;\n    if (block_full_width || block_page_width) {\n      if (block_full_width) {\n        style.width = \"100vw\";\n      } else {\n        style.width = \"100%\";\n      }\n      if (block.type === \"video\") {\n        if (block_height) {\n          style.height = block_height;\n        } else if (block_aspect_ratio) {\n          style.paddingBottom = `${block_aspect_ratio * 100}%`;\n        } else if (block_preserve_scale) {\n          style.objectFit = \"contain\";\n        }\n      } else if (block_aspect_ratio && block.type !== \"image\") {\n        style.paddingBottom = `${block_aspect_ratio * 100}%`;\n      } else if (block_height) {\n        style.height = block_height;\n      } else if (block_preserve_scale) {\n        if (block.type === \"image\") {\n          style.height = \"100%\";\n        } else {\n          style.paddingBottom = \"75%\";\n          style.minHeight = 100;\n        }\n      }\n    } else {\n      switch ((_a = block.format) == null ? void 0 : _a.block_alignment) {\n        case \"center\": {\n          style.alignSelf = \"center\";\n          break;\n        }\n        case \"left\": {\n          style.alignSelf = \"start\";\n          break;\n        }\n        case \"right\": {\n          style.alignSelf = \"end\";\n          break;\n        }\n      }\n      if (block_width) {\n        style.width = block_width;\n      }\n      if (block_preserve_scale && block.type !== \"image\") {\n        style.paddingBottom = \"50%\";\n        style.minHeight = 100;\n      } else {\n        if (block_height && block.type !== \"image\") {\n          style.height = block_height;\n        }\n      }\n    }\n    if (block.type === \"image\") {\n      assetStyle.objectFit = \"cover\";\n    } else if (block_preserve_scale) {\n      assetStyle.objectFit = \"contain\";\n    }\n  }\n  let source = ((_b = recordMap.signed_urls) == null ? void 0 : _b[block.id]) || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n  let content = null;\n  if (!source) {\n    return null;\n  }\n  if (block.type === \"tweet\") {\n    const src = source;\n    if (!src)\n      return null;\n    const id = src.split(\"?\")[0].split(\"/\").pop();\n    if (!id)\n      return null;\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      style: __spreadProps(__spreadValues({}, assetStyle), {\n        maxWidth: 420,\n        width: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      })\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Tweet, {\n      id\n    }));\n  } else if (block.type === \"pdf\") {\n    style.overflow = \"auto\";\n    style.background = \"rgb(226, 226, 226)\";\n    style.display = \"block\";\n    if (!style.padding) {\n      style.padding = \"8px 16px\";\n    }\n    if (!isServer) {\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.Pdf, {\n        file: source\n      });\n    }\n  } else if (block.type === \"embed\" || block.type === \"video\" || block.type === \"figma\" || block.type === \"typeform\" || block.type === \"gist\" || block.type === \"maps\" || block.type === \"excalidraw\" || block.type === \"codepen\" || block.type === \"drive\") {\n    if (block.type === \"video\" && source && source.indexOf(\"youtube\") < 0 && source.indexOf(\"youtu.be\") < 0 && source.indexOf(\"vimeo\") < 0 && source.indexOf(\"wistia\") < 0 && source.indexOf(\"loom\") < 0 && source.indexOf(\"videoask\") < 0 && source.indexOf(\"getcloudapp\") < 0) {\n      style.paddingBottom = void 0;\n      content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", {\n        playsInline: true,\n        controls: true,\n        preload: \"metadata\",\n        style: assetStyle,\n        src: source,\n        title: block.type\n      });\n    } else {\n      let src = ((_f = block.format) == null ? void 0 : _f.display_source) || source;\n      if (src) {\n        const youtubeVideoId = block.type === \"video\" ? getYoutubeId(src) : null;\n        if (youtubeVideoId) {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LiteYouTubeEmbed, {\n            id: youtubeVideoId,\n            style: assetStyle,\n            className: \"notion-asset-object-fit\"\n          });\n        } else if (block.type === \"gist\") {\n          if (!src.endsWith(\".pibb\")) {\n            src = `${src}.pibb`;\n          }\n          assetStyle.width = \"100%\";\n          style.paddingBottom = \"50%\";\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            style: assetStyle,\n            className: \"notion-asset-object-fit\",\n            src,\n            title: \"GitHub Gist\",\n            frameBorder: \"0\",\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        } else {\n          content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"iframe\", {\n            className: \"notion-asset-object-fit\",\n            style: assetStyle,\n            src,\n            title: `iframe ${block.type}`,\n            frameBorder: \"0\",\n            allowFullScreen: true,\n            loading: \"lazy\",\n            scrolling: \"auto\"\n          });\n        }\n      }\n    }\n  } else if (block.type === \"image\") {\n    if (source.includes(\"file.notion.so\")) {\n      source = (_i = (_h = (_g = block.properties) == null ? void 0 : _g.source) == null ? void 0 : _h[0]) == null ? void 0 : _i[0];\n    }\n    const src = mapImageUrl(source, block);\n    const caption = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getTextContent)((_j = block.properties) == null ? void 0 : _j.caption);\n    const alt = caption || \"notion image\";\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LazyImage, {\n      src,\n      alt,\n      zoomable,\n      height: style.height,\n      style: assetStyle\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n    style\n  }, content, block.type === \"image\" && children), block.type !== \"image\" && children);\n};\n\n// src/components/asset-wrapper.tsx\nvar urlStyle = { width: \"100%\" };\nvar AssetWrapper = ({ blockId, block }) => {\n  var _a, _b, _c, _d, _e, _f;\n  const value = block;\n  const { components, mapPageUrl, rootDomain, zoom } = useNotionContext();\n  let isURL = false;\n  if (block.type === \"image\") {\n    const caption = (_c = (_b = (_a = value == null ? void 0 : value.properties) == null ? void 0 : _a.caption) == null ? void 0 : _b[0]) == null ? void 0 : _c[0];\n    if (caption) {\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.parsePageId)(caption, { uuid: true });\n      const isPage = caption.charAt(0) === \"/\" && id;\n      if (isPage || isValidURL(caption)) {\n        isURL = true;\n      }\n    }\n  }\n  const figure = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figure\", {\n    className: cs(\n      \"notion-asset-wrapper\",\n      `notion-asset-wrapper-${block.type}`,\n      ((_d = value.format) == null ? void 0 : _d.block_full_width) && \"notion-asset-wrapper-full\",\n      blockId\n    )\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Asset, {\n    block: value,\n    zoomable: zoom && !isURL\n  }, ((_e = value == null ? void 0 : value.properties) == null ? void 0 : _e.caption) && !isURL && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"figcaption\", {\n    className: \"notion-asset-caption\"\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Text, {\n    value: value.properties.caption,\n    block\n  }))));\n  if (isURL) {\n    const caption = (_f = value == null ? void 0 : value.properties) == null ? void 0 : _f.caption[0][0];\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.parsePageId)(caption, { uuid: true });\n    const isPage = caption.charAt(0) === \"/\" && id;\n    const captionHostname = extractHostname(caption);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(components.PageLink, {\n      style: urlStyle,\n      href: isPage ? mapPageUrl(id) : caption,\n      target: captionHostname && captionHostname !== rootDomain && !caption.startsWith(\"/\") ? \"blank_\" : null\n    }, figure);\n  }\n  return figure;\n};\nfunction isValidURL(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  );\n  return !!pattern.test(str);\n}\nfunction extractHostname(url) {\n  try {\n    const hostname = new URL(url).hostname;\n    return hostname;\n  } catch (err) {\n    return \"\";\n  }\n}\n\n// src/components/checkbox.tsx\n\n\n// src/icons/check.tsx\n\nfunction SvgCheck(props) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({\n    viewBox: \"0 0 14 14\"\n  }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", {\n    d: \"M5.5 12L14 3.5 12.5 2l-7 7-4-4.003L0 6.499z\"\n  }));\n}\nvar check_default = SvgCheck;\n\n// src/components/checkbox.tsx\nvar Checkbox = ({ isChecked }) => {\n  let content = null;\n  if (isChecked) {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-checked\"\n    }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(check_default, null));\n  } else {\n    content = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", {\n      className: \"notion-property-checkbox-unchecked\"\n    });\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    className: \"notion-property notion-property-checkbox\"\n  }, content);\n};\n\n// src/next.tsx\n\n\nvar wrapNextImage = (NextImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextImage(_a) {\n    var _b = _a, {\n      src,\n      alt,\n      width,\n      height,\n      className,\n      style,\n      layout\n    } = _b, rest = __objRest(_b, [\n      \"src\",\n      \"alt\",\n      \"width\",\n      \"height\",\n      \"className\",\n      \"style\",\n      \"layout\"\n    ]);\n    if (!layout) {\n      layout = width && height ? \"intrinsic\" : \"fill\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextImage, __spreadValues({\n      className,\n      src,\n      alt,\n      width: layout === \"intrinsic\" && width,\n      height: layout === \"intrinsic\" && height,\n      objectFit: style == null ? void 0 : style.objectFit,\n      objectPosition: style == null ? void 0 : style.objectPosition,\n      layout\n    }, rest));\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_7__);\n};\nvar wrapNextLink = (NextLink) => function ReactNotionXNextLink(_a) {\n  var _b = _a, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  } = _b, linkProps = __objRest(_b, [\n    \"href\",\n    \"as\",\n    \"passHref\",\n    \"prefetch\",\n    \"replace\",\n    \"scroll\",\n    \"shallow\",\n    \"locale\"\n  ]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(NextLink, {\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, linkProps)));\n};\n\n// src/context.tsx\nvar DefaultLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\"\n}, props));\nvar DefaultLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultLink);\nvar DefaultPageLink = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", __spreadValues({}, props));\nvar DefaultPageLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultPageLink);\nvar DefaultEmbed = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AssetWrapper, __spreadValues({}, props));\nvar DefaultHeader = Header;\nvar dummyComponent = (name) => () => {\n  console.warn(\n    `Warning: using empty component \"${name}\" (you should override this in NotionRenderer.components)`\n  );\n  return null;\n};\nvar dummyOverrideFn = (_, defaultValueFn) => defaultValueFn();\nvar defaultComponents = {\n  Image: null,\n  Link: DefaultLinkMemo,\n  PageLink: DefaultPageLinkMemo,\n  Checkbox,\n  Callout: void 0,\n  Code: dummyComponent(\"Code\"),\n  Equation: dummyComponent(\"Equation\"),\n  Collection: dummyComponent(\"Collection\"),\n  Property: void 0,\n  propertyTextValue: dummyOverrideFn,\n  propertySelectValue: dummyOverrideFn,\n  propertyRelationValue: dummyOverrideFn,\n  propertyFormulaValue: dummyOverrideFn,\n  propertyTitleValue: dummyOverrideFn,\n  propertyPersonValue: dummyOverrideFn,\n  propertyFileValue: dummyOverrideFn,\n  propertyCheckboxValue: dummyOverrideFn,\n  propertyUrlValue: dummyOverrideFn,\n  propertyEmailValue: dummyOverrideFn,\n  propertyPhoneNumberValue: dummyOverrideFn,\n  propertyNumberValue: dummyOverrideFn,\n  propertyLastEditedTimeValue: dummyOverrideFn,\n  propertyCreatedTimeValue: dummyOverrideFn,\n  propertyDateValue: dummyOverrideFn,\n  Pdf: dummyComponent(\"Pdf\"),\n  Tweet: dummyComponent(\"Tweet\"),\n  Modal: dummyComponent(\"Modal\"),\n  Header: DefaultHeader,\n  Embed: DefaultEmbed\n};\nvar defaultNotionContext = {\n  recordMap: {\n    block: {},\n    collection: {},\n    collection_view: {},\n    collection_query: {},\n    notion_user: {},\n    signed_urls: {}\n  },\n  components: defaultComponents,\n  mapPageUrl: defaultMapPageUrl(),\n  mapImageUrl: defaultMapImageUrl,\n  searchNotion: null,\n  isShowingSearch: false,\n  onHideSearch: null,\n  fullPage: false,\n  darkMode: false,\n  previewImages: false,\n  forceCustomImages: false,\n  showCollectionViewDropdown: true,\n  linkTableTitleProperties: true,\n  isLinkCollectionToUrlProperty: false,\n  showTableOfContents: false,\n  minTableOfContentsItems: 3,\n  defaultPageIcon: null,\n  defaultPageCover: null,\n  defaultPageCoverPosition: 0.5,\n  zoom: null\n};\nvar ctx = react__WEBPACK_IMPORTED_MODULE_0__.createContext(defaultNotionContext);\nvar NotionContextProvider = (_a) => {\n  var _b = _a, {\n    components: themeComponents = {},\n    children,\n    mapPageUrl,\n    mapImageUrl,\n    rootPageId\n  } = _b, rest = __objRest(_b, [\n    \"components\",\n    \"children\",\n    \"mapPageUrl\",\n    \"mapImageUrl\",\n    \"rootPageId\"\n  ]);\n  for (const key of Object.keys(rest)) {\n    if (rest[key] === void 0) {\n      delete rest[key];\n    }\n  }\n  const wrappedThemeComponents = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadValues({}, themeComponents),\n    [themeComponents]\n  );\n  if (wrappedThemeComponents.nextImage) {\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  }\n  if (wrappedThemeComponents.nextLink) {\n    wrappedThemeComponents.nextLink = wrapNextLink(themeComponents.nextLink);\n  }\n  for (const key of Object.keys(wrappedThemeComponents)) {\n    if (!wrappedThemeComponents[key]) {\n      delete wrappedThemeComponents[key];\n    }\n  }\n  const value = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => __spreadProps(__spreadValues(__spreadValues({}, defaultNotionContext), rest), {\n      rootPageId,\n      mapPageUrl: mapPageUrl != null ? mapPageUrl : defaultMapPageUrl(rootPageId),\n      mapImageUrl: mapImageUrl != null ? mapImageUrl : defaultMapImageUrl,\n      components: __spreadValues(__spreadValues({}, defaultComponents), wrappedThemeComponents)\n    }),\n    [mapImageUrl, mapPageUrl, wrappedThemeComponents, rootPageId, rest]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ctx.Provider, {\n    value\n  }, children);\n};\nvar NotionContextConsumer = ctx.Consumer;\nvar useNotionContext = () => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ctx);\n};\n\n// src/third-party/equation.tsx\nvar katexSettings = {\n  throwOnError: false,\n  strict: false\n};\nvar Equation = (_a) => {\n  var _b = _a, { block, math, inline = false, className } = _b, rest = __objRest(_b, [\"block\", \"math\", \"inline\", \"className\"]);\n  const { recordMap } = useNotionContext();\n  math = math || (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getBlockTitle)(block, recordMap);\n  if (!math)\n    return null;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", {\n    role: \"button\",\n    tabIndex: 0,\n    className: cs(\n      \"notion-equation\",\n      inline ? \"notion-equation-inline\" : \"notion-equation-block\",\n      className\n    )\n  }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_matejmazur_react_katex__WEBPACK_IMPORTED_MODULE_1__, __spreadValues({\n    math,\n    settings: katexSettings\n  }, rest)));\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvdGhpcmQtcGFydHkvZXF1YXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsYUFBYTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkcseUVBQXlFLDhCQUE4QjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixrQkFBa0I7QUFDbEIsdUJBQXVCO0FBQ3ZCLHdCQUF3QjtBQUN4QixtQkFBbUI7QUFDbkI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0RBQXFCO0FBQy9CO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywwQ0FBZTtBQUNoRCwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQWU7QUFDL0Isd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRCxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixnREFBcUI7QUFDOUM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2Q0FBa0I7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHlDQUF5QztBQUMxRCxVQUFVLFlBQVk7QUFDdEIsaUJBQWlCLDJEQUFjO0FBQy9CO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxrQkFBa0IsZ0RBQXFCLENBQUMsb0RBQUs7QUFDaEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90aW9uLXgtZXhhbXBsZS1mdWxsLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW5vdGlvbi14L2J1aWxkL3RoaXJkLXBhcnR5L2VxdWF0aW9uLmpzPzBlN2YiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fb2JqUmVzdCA9IChzb3VyY2UsIGV4Y2x1ZGUpID0+IHtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoc291cmNlLCBwcm9wKSAmJiBleGNsdWRlLmluZGV4T2YocHJvcCkgPCAwKVxuICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICBpZiAoc291cmNlICE9IG51bGwgJiYgX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoc291cmNlKSkge1xuICAgICAgaWYgKGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDAgJiYgX19wcm9wSXNFbnVtLmNhbGwoc291cmNlLCBwcm9wKSlcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19jb21tb25KUyA9IChjYiwgbW9kKSA9PiBmdW5jdGlvbiBfX3JlcXVpcmUoKSB7XG4gIHJldHVybiBtb2QgfHwgKDAsIGNiW19fZ2V0T3duUHJvcE5hbWVzKGNiKVswXV0pKChtb2QgPSB7IGV4cG9ydHM6IHt9IH0pLmV4cG9ydHMsIG1vZCksIG1vZC5leHBvcnRzO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xudmFyIF9fYXN5bmMgPSAoX190aGlzLCBfX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdmFyIGZ1bGZpbGxlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgcmVqZWN0ZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLnRocm93KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzdGVwID0gKHgpID0+IHguZG9uZSA/IHJlc29sdmUoeC52YWx1ZSkgOiBQcm9taXNlLnJlc29sdmUoeC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcbiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkoX190aGlzLCBfX2FyZ3VtZW50cykpLm5leHQoKSk7XG4gIH0pO1xufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qc1xudmFyIHJlcXVpcmVfbG9kYXNoID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIHZhciBGVU5DX0VSUk9SX1RFWFQgPSBcIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjtcbiAgICB2YXIgTkFOID0gMCAvIDA7XG4gICAgdmFyIHN5bWJvbFRhZyA9IFwiW29iamVjdCBTeW1ib2xdXCI7XG4gICAgdmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuICAgIHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG4gICAgdmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG4gICAgdmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG4gICAgdmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuICAgIHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuICAgIHZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09IFwib2JqZWN0XCIgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG4gICAgdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbiAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICAgIHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuICAgIHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcbiAgICB2YXIgbmF0aXZlTWluID0gTWF0aC5taW47XG4gICAgdmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsYXN0QXJncywgbGFzdFRoaXMsIG1heFdhaXQsIHJlc3VsdCwgdGltZXJJZCwgbGFzdENhbGxUaW1lLCBsYXN0SW52b2tlVGltZSA9IDAsIGxlYWRpbmcgPSBmYWxzZSwgbWF4aW5nID0gZmFsc2UsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhpbmcgPSBcIm1heFdhaXRcIiBpbiBvcHRpb25zO1xuICAgICAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBsYXN0QXJncywgdGhpc0FyZyA9IGxhc3RUaGlzO1xuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdm9pZCAwO1xuICAgICAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsIHJlc3VsdDIgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG4gICAgICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0MiwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0MjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG4gICAgICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHZvaWQgMCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgICAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgdGltZXJJZCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRpbWVySWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHJldHVybiB0aW1lcklkID09PSB2b2lkIDAgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpLCBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuICAgICAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuICAgICAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgICAgIGlmICh0aW1lcklkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWVySWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgICAgIHJldHVybiBkZWJvdW5jZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRocm90dGxlMihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGVhZGluZyA9IHRydWUsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSBcImxlYWRpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICAgICBcImxlYWRpbmdcIjogbGVhZGluZyxcbiAgICAgICAgXCJtYXhXYWl0XCI6IHdhaXQsXG4gICAgICAgIFwidHJhaWxpbmdcIjogdHJhaWxpbmdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSBcIm9iamVjdFwiIHx8IHR5cGUgPT0gXCJmdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzeW1ib2xcIiB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBOQU47XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgICAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgXCJcIiA6IG90aGVyO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgXCJcIik7XG4gICAgICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICAgICAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlMjtcbiAgfVxufSk7XG5cbi8vIHNyYy90aGlyZC1wYXJ0eS9lcXVhdGlvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgS2F0ZXggZnJvbSBcIkBtYXRlam1henVyL3JlYWN0LWthdGV4XCI7XG5pbXBvcnQgeyBnZXRCbG9ja1RpdGxlIGFzIGdldEJsb2NrVGl0bGU0IH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29udGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MjAgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LXdyYXBwZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE2IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgYXMgcGFyc2VQYWdlSWQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCB7IGlzVXJsLCBmb3JtYXREYXRlLCBmb3JtYXROb3Rpb25EYXRlVGltZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL21hcC1pbWFnZS11cmwudHNcbnZhciBkZWZhdWx0TWFwSW1hZ2VVcmwgPSAodXJsLCBibG9jaykgPT4ge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICh1cmwuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb21cIikpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgdSA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAodS5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3NlY3VyZS5ub3Rpb24tc3RhdGljLmNvbVwiKSAmJiB1Lmhvc3RuYW1lLmVuZHNXaXRoKFwiLmFtYXpvbmF3cy5jb21cIikpIHtcbiAgICAgIGlmICh1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1DcmVkZW50aWFsXCIpICYmIHUuc2VhcmNoUGFyYW1zLmhhcyhcIlgtQW16LVNpZ25hdHVyZVwiKSAmJiB1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1BbGdvcml0aG1cIikpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VzXCIpKSB7XG4gICAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsfWA7XG4gIH1cbiAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VcIikgPyB1cmwgOiBgL2ltYWdlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YH1gO1xuICBjb25zdCBub3Rpb25JbWFnZVVybFYyID0gbmV3IFVSTCh1cmwpO1xuICBsZXQgdGFibGUgPSBibG9jay5wYXJlbnRfdGFibGUgPT09IFwic3BhY2VcIiA/IFwiYmxvY2tcIiA6IGJsb2NrLnBhcmVudF90YWJsZTtcbiAgaWYgKHRhYmxlID09PSBcImNvbGxlY3Rpb25cIiB8fCB0YWJsZSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICB0YWJsZSA9IFwiYmxvY2tcIjtcbiAgfVxuICBub3Rpb25JbWFnZVVybFYyLnNlYXJjaFBhcmFtcy5zZXQoXCJ0YWJsZVwiLCB0YWJsZSk7XG4gIG5vdGlvbkltYWdlVXJsVjIuc2VhcmNoUGFyYW1zLnNldChcImlkXCIsIGJsb2NrLmlkKTtcbiAgbm90aW9uSW1hZ2VVcmxWMi5zZWFyY2hQYXJhbXMuc2V0KFwiY2FjaGVcIiwgXCJ2MlwiKTtcbiAgdXJsID0gbm90aW9uSW1hZ2VVcmxWMi50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLy8gc3JjL21hcC1wYWdlLXVybC50c1xudmFyIGRlZmF1bHRNYXBQYWdlVXJsID0gKHJvb3RQYWdlSWQpID0+IChwYWdlSWQpID0+IHtcbiAgcGFnZUlkID0gKHBhZ2VJZCB8fCBcIlwiKS5yZXBsYWNlKC8tL2csIFwiXCIpO1xuICBpZiAocm9vdFBhZ2VJZCAmJiBwYWdlSWQgPT09IHJvb3RQYWdlSWQpIHtcbiAgICByZXR1cm4gXCIvXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAvJHtwYWdlSWR9YDtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzLnRzXG52YXIgY3MgPSAoLi4uY2xhc3NlcykgPT4gY2xhc3Nlcy5maWx0ZXIoKGEpID0+ICEhYSkuam9pbihcIiBcIik7XG52YXIgZ2V0SGFzaEZyYWdtZW50VmFsdWUgPSAodXJsKSA9PiB7XG4gIHJldHVybiB1cmwuaW5jbHVkZXMoXCIjXCIpID8gdXJsLnJlcGxhY2UoL14uKygjLispJC8sIFwiJDFcIikgOiBcIlwiO1xufTtcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIHlvdXR1YmVEb21haW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcInlvdXR1LmJlXCIsXG4gIFwieW91dHViZS5jb21cIixcbiAgXCJ3d3cueW91dHViZS5jb21cIixcbiAgXCJ5b3V0dWJlLW5vY29va2llLmNvbVwiLFxuICBcInd3dy55b3V0dWJlLW5vY29va2llLmNvbVwiXG5dKTtcbnZhciBnZXRZb3V0dWJlSWQgPSAodXJsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBob3N0bmFtZSB9ID0gbmV3IFVSTCh1cmwpO1xuICAgIGlmICgheW91dHViZURvbWFpbnMuaGFzKGhvc3RuYW1lKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlZ0V4cCA9IC9eLiooeW91dHVcXC5iZVxcL3x2XFwvfHVcXC9cXHdcXC98ZW1iZWRcXC98d2F0Y2hcXD92PXwmdj0pKFteIyY/XSopLiovaTtcbiAgICBjb25zdCBtYXRjaCA9IHVybC5tYXRjaChyZWdFeHApO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXS5sZW5ndGggPT0gMTEpIHtcbiAgICAgIHJldHVybiBtYXRjaFsyXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2ljb25zL3R5cGUtZ2l0aHViLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdUeXBlR2l0SHViKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMjYwIDI2MFwiXG4gIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTI4LjAwMTA2LDAgQzU3LjMxNzI5MjYsMCAwLDU3LjMwNjY5NDIgMCwxMjguMDAxMDYgQzAsMTg0LjU1NTI4MSAzNi42NzYxOTk3LDIzMi41MzU1NDIgODcuNTM0OTM3LDI0OS40NjA4OTkgQzkzLjkzMjAyMjMsMjUwLjY0NTc3OSA5Ni4yODA1ODgsMjQ2LjY4NDE2NSA5Ni4yODA1ODgsMjQzLjMwMzMzMyBDOTYuMjgwNTg4LDI0MC4yNTEwNDUgOTYuMTYxODg3OCwyMzAuMTY3ODk5IDk2LjEwNjc3NywyMTkuNDcyMTc2IEM2MC40OTY3NTg1LDIyNy4yMTUyMzUgNTIuOTgyNjIwNywyMDQuMzY5NzEyIDUyLjk4MjYyMDcsMjA0LjM2OTcxMiBDNDcuMTU5OTU4NCwxODkuNTc0NTk4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IEMyNy4xNTY4Nzg1LDE3Ny42OTYxMTMgMzkuNjQ1ODIwNiwxNzcuODU5MzI1IDM5LjY0NTgyMDYsMTc3Ljg1OTMyNSBDNTIuNDk5MzQxOSwxNzguNzYyMjkzIDU5LjI2NzM2NSwxOTEuMDQ5ODcgNTkuMjY3MzY1LDE5MS4wNDk4NyBDNzAuNjgzNzY3NSwyMTAuNjE4NDIzIDg5LjIxMTU3NTMsMjA0Ljk2MTA5MyA5Ni41MTU4Njg1LDIwMS42OTA0ODIgQzk3LjY2NDcxNTUsMTkzLjQxNzUxMiAxMDAuOTgxOTU5LDE4Ny43NzA3OCAxMDQuNjQyNTgzLDE4NC41NzQzNTcgQzc2LjIxMTc5OSwxODEuMzM3NjYgNDYuMzI0ODE5LDE3MC4zNjIxNDQgNDYuMzI0ODE5LDEyMS4zMTU3MDIgQzQ2LjMyNDgxOSwxMDcuMzQwODg5IDUxLjMyNTA1ODgsOTUuOTIyMzY4MiA1OS41MTMyNDM3LDg2Ljk1ODM5MzcgQzU4LjE4NDIyNjgsODMuNzM0NDE1MiA1My44MDI5MjI5LDcwLjcxNTU2MiA2MC43NTMyMzU0LDUzLjA4NDM2MzYgQzYwLjc1MzIzNTQsNTMuMDg0MzYzNiA3MS41MDE5NTAxLDQ5LjY0NDE4MTMgOTUuOTYyNjQxMiw2Ni4yMDQ5NTk1IEMxMDYuMTcyOTY3LDYzLjM2ODg3NiAxMTcuMTIzMDQ3LDYxLjk0NjU5NDkgMTI4LjAwMTA2LDYxLjg5Nzg0MzIgQzEzOC44NzkwNzMsNjEuOTQ2NTk0OSAxNDkuODM3NjMyLDYzLjM2ODg3NiAxNjAuMDY3MDMzLDY2LjIwNDk1OTUgQzE4NC40OTgwNSw0OS42NDQxODEzIDE5NS4yMzE5MjYsNTMuMDg0MzYzNiAxOTUuMjMxOTI2LDUzLjA4NDM2MzYgQzIwMi4xOTkxOTcsNzAuNzE1NTYyIDE5Ny44MTU3NzMsODMuNzM0NDE1MiAxOTYuNDg2NzU2LDg2Ljk1ODM5MzcgQzIwNC42OTQwMTgsOTUuOTIyMzY4MiAyMDkuNjYwMzQzLDEwNy4zNDA4ODkgMjA5LjY2MDM0MywxMjEuMzE1NzAyIEMyMDkuNjYwMzQzLDE3MC40Nzg3MjUgMTc5LjcxNjEzMywxODEuMzAzNzQ3IDE1MS4yMTMyODEsMTg0LjQ3MjYxNCBDMTU1LjgwNDQzLDE4OC40NDQ4MjggMTU5Ljg5NTM0MiwxOTYuMjM0NTE4IDE1OS44OTUzNDIsMjA4LjE3NjU5MyBDMTU5Ljg5NTM0MiwyMjUuMzAzMzE3IDE1OS43NDY5NjgsMjM5LjA4NzM2MSAxNTkuNzQ2OTY4LDI0My4zMDMzMzMgQzE1OS43NDY5NjgsMjQ2LjcwOTYwMSAxNjIuMDUxMDIsMjUwLjcwMDg5IDE2OC41MzkyNSwyNDkuNDQzOTQxIEMyMTkuMzcwNDMyLDIzMi40OTk1MDcgMjU2LDE4NC41MzYyMDQgMjU2LDEyOC4wMDEwNiBDMjU2LDU3LjMwNjY5NDIgMTk4LjY5MTE4NywwIDEyOC4wMDEwNiwwIFogTTQ3Ljk0MDU1OTMsMTgyLjM0MDIxMiBDNDcuNjU4NjQ2NSwxODIuOTc2MTA1IDQ2LjY1ODE3NDUsMTgzLjE2Njg3MyA0NS43NDY3Mjc3LDE4Mi43MzAyMjcgQzQ0LjgxODMyMzUsMTgyLjMxMjY1NiA0NC4yOTY4OTE0LDE4MS40NDU3MjIgNDQuNTk3ODgwOCwxODAuODA3NzEgQzQ0Ljg3MzQzNDQsMTgwLjE1MjczOSA0NS44NzYwMjYsMTc5Ljk3MDQ1IDQ2LjgwMjMxMDMsMTgwLjQwOTIxNiBDNDcuNzMyODM0MiwxODAuODI2Nzg2IDQ4LjI2Mjc0NTEsMTgxLjcwMjE5OSA0Ny45NDA1NTkzLDE4Mi4zNDAyMTIgWiBNNTQuMjM2Nzg5MiwxODcuOTU4MjU0IEM1My42MjYzMzE4LDE4OC41MjQxOTkgNTIuNDMyOTcyMywxODguMjYxMzYzIDUxLjYyMzI2ODIsMTg3LjM2Njg3NCBDNTAuNzg2MDA4OCwxODYuNDc0NTA0IDUwLjYyOTE1NTMsMTg1LjI4MTE0NCA1MS4yNDgwOTEyLDE4NC43MDY3MiBDNTEuODc3NjI1NCwxODQuMTQwNzc1IDUzLjAzNDk1MTIsMTg0LjQwNTczMSA1My44NzQzMzAyLDE4NS4yOTgxMDEgQzU0LjcxMTU4OTIsMTg2LjIwMTA2OSA1NC44NzQ4MDE5LDE4Ny4zODU5NSA1NC4yMzY3ODkyLDE4Ny45NTgyNTQgWiBNNTguNTU2MjQxMywxOTUuMTQ2MzQ3IEM1Ny43NzE5NzMyLDE5NS42OTEwOTYgNTYuNDg5NTg4NiwxOTUuMTgwMjYxIDU1LjY5Njg0MTcsMTk0LjA0MjAxMyBDNTQuOTEyNTczMywxOTIuOTAzNzY0IDU0LjkxMjU3MzMsMTkxLjUzODcxMyA1NS43MTM3OTksMTkwLjk5MTg0NSBDNTYuNTA4NjY1MSwxOTAuNDQ0OTc3IDU3Ljc3MTk3MzIsMTkwLjkzNjczNSA1OC41NzUzMTgxLDE5Mi4wNjY1MDUgQzU5LjM1NzQ2NjksMTkzLjIyMzgzIDU5LjM1NzQ2NjksMTk0LjU4ODg4IDU4LjU1NjI0MTMsMTk1LjE0NjM0NyBaIE02NS44NjEzNTkyLDIwMy40NzExNzQgQzY1LjE1OTc1NzEsMjA0LjI0NDg0NiA2My42NjU0MDgzLDIwNC4wMzcxMiA2Mi41NzE2NzE3LDIwMi45ODE1MzggQzYxLjQ1MjQ5OTksMjAxLjk0OTI3IDYxLjE0MDkxMjIsMjAwLjQ4NDU5NiA2MS44NDQ2MzQxLDE5OS43MTA5MjYgQzYyLjU1NDcxNDYsMTk4LjkzNTEzNyA2NC4wNTc1NDIyLDE5OS4xNTM0NiA2NS4xNTk3NTcxLDIwMC4yMDA1NjQgQzY2LjI3MDQ1MDYsMjAxLjIzMDcxMiA2Ni42MDk1OTM2LDIwMi43MDU5ODQgNjUuODYxMzU5MiwyMDMuNDcxMTc0IFogTTc1LjMwMjUxNTEsMjA2LjI4MTU0MiBDNzQuOTkzMDQ3NCwyMDcuMjg0MTM0IDczLjU1MzgwOSwyMDcuNzM5ODU3IDcyLjEwMzk3MjQsMjA3LjMxMzgwOSBDNzAuNjU2MjU1NiwyMDYuODc1MDQzIDY5LjcwODc3NDgsMjA1LjcwMDc2MSA3MC4wMDEyODU3LDIwNC42ODc1NzEgQzcwLjMwMjI3NSwyMDMuNjc4NjIxIDcxLjc0Nzg3MjEsMjAzLjIwMzgyIDczLjIwODMwNjksMjAzLjY1OTU0MyBDNzQuNjUzOTA0MSwyMDQuMDk2MTkgNzUuNjAzNTA0OCwyMDUuMjYxOTk0IDc1LjMwMjUxNTEsMjA2LjI4MTU0MiBaIE04Ni4wNDY5NDcsMjA3LjQ3MzYyNyBDODYuMDgyOTgwNiwyMDguNTI5MjA5IDg0Ljg1MzU4NzEsMjA5LjQwNDYyMiA4My4zMzE2ODI5LDIwOS40MjM3IEM4MS44MDEzLDIwOS40NTc2MTQgODAuNTYzNDI4LDIwOC42MDMzOTggODAuNTQ2NDcwOCwyMDcuNTY0NzcyIEM4MC41NDY0NzA4LDIwNi40OTg1OTEgODEuNzQ4MzA4OCwyMDUuNjMxNjU3IDgzLjI3ODY5MTcsMjA1LjYwNjIyMSBDODQuODAwNTk2MiwyMDUuNTc2NTQ2IDg2LjA0Njk0NywyMDYuNDI0NDAzIDg2LjA0Njk0NywyMDcuNDczNjI3IFogTTk2LjYwMjE0NzEsMjA3LjA2OTAyMyBDOTYuNzg0NDM2NiwyMDguMDk5MTcxIDk1LjcyNjczNDEsMjA5LjE1Njg3MiA5NC4yMTU0MjgsMjA5LjQzODc4NSBDOTIuNzI5NTU3NywyMDkuNzEwMDk5IDkxLjM1MzkwODYsMjA5LjA3NDIwNiA5MS4xNjUyNjAzLDIwOC4wNTI1MzggQzkwLjk4MDg1MTUsMjA2Ljk5Njk1NSA5Mi4wNTc2MzA2LDIwNS45MzkyNTMgOTMuNTQxMzgxMywyMDUuNjY1ODIgQzk1LjA1NDgwNywyMDUuNDAyOTg0IDk2LjQwOTI1OTYsMjA2LjAyMTkxOSA5Ni42MDIxNDcxLDIwNy4wNjkwMjMgWlwiLFxuICAgIGZpbGw6IFwiIzE2MTYxNFwiXG4gIH0pKSk7XG59XG52YXIgdHlwZV9naXRodWJfZGVmYXVsdCA9IFN2Z1R5cGVHaXRIdWI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbnZhciBFT0kgPSAoeyBibG9jaywgaW5saW5lLCBjbGFzc05hbWUgfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgeyBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHsgb3JpZ2luYWxfdXJsLCBhdHRyaWJ1dGVzLCBkb21haW4gfSA9IChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suZm9ybWF0KSB8fCB7fTtcbiAgaWYgKCFvcmlnaW5hbF91cmwgfHwgIWF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB0aXRsZSA9IChfYSA9IGF0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5pZCA9PT0gXCJ0aXRsZVwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlc1swXTtcbiAgbGV0IG93bmVyID0gKF9iID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcIm93bmVyXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWVzWzBdO1xuICBjb25zdCBsYXN0VXBkYXRlZEF0ID0gKF9jID0gYXR0cmlidXRlcy5maW5kKChhdHRyKSA9PiBhdHRyLmlkID09PSBcInVwZGF0ZWRfYXRcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZXNbMF07XG4gIGNvbnN0IGxhc3RVcGRhdGVkID0gbGFzdFVwZGF0ZWRBdCA/IGZvcm1hdE5vdGlvbkRhdGVUaW1lKGxhc3RVcGRhdGVkQXQpIDogbnVsbDtcbiAgbGV0IGV4dGVybmFsSW1hZ2U7XG4gIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgY2FzZSBcImdpdGh1Yi5jb21cIjpcbiAgICAgIGV4dGVybmFsSW1hZ2UgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQodHlwZV9naXRodWJfZGVmYXVsdCwgbnVsbCk7XG4gICAgICBpZiAob3duZXIpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBvd25lci5zcGxpdChcIi9cIik7XG4gICAgICAgIG93bmVyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFVuc3VwcG9ydGVkIGV4dGVybmFsX29iamVjdF9pbnN0YW5jZSBkb21haW4gXCIke2RvbWFpbn1cImAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYmxvY2ssIG51bGwsIDIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuTGluaywge1xuICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgIGhyZWY6IG9yaWdpbmFsX3VybCxcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgXCJub3Rpb24tZXh0ZXJuYWxcIixcbiAgICAgIGlubGluZSA/IFwibm90aW9uLWV4dGVybmFsLW1lbnRpb25cIiA6IFwibm90aW9uLWV4dGVybmFsLWJsb2NrIG5vdGlvbi1yb3dcIixcbiAgICAgIGNsYXNzTmFtZVxuICAgIClcbiAgfSwgZXh0ZXJuYWxJbWFnZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtaW1hZ2VcIlxuICB9LCBleHRlcm5hbEltYWdlKSwgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLWRlc2NyaXB0aW9uXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXRpdGxlXCJcbiAgfSwgdGl0bGUpLCAob3duZXIgfHwgbGFzdFVwZGF0ZWQpICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1zdWJ0aXRsZVwiXG4gIH0sIG93bmVyICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgb3duZXIpLCBvd25lciAmJiBsYXN0VXBkYXRlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIFwiIFxcdTIwMjIgXCIpLCBsYXN0VXBkYXRlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIFwiVXBkYXRlZCBcIiwgbGFzdFVwZGF0ZWQpKSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvdGV4dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0OCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHBhcnNlUGFnZUlkIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9ncmFjZWZ1bC1pbWFnZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MyBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEltZyB9IGZyb20gXCJyZWFjdC1pbWFnZVwiO1xudmFyIEdyYWNlZnVsSW1hZ2UgPSAocHJvcHMpID0+IHtcbiAgaWYgKGlzQnJvd3Nlcikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoSW1nLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLXRpdGxlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0QmxvY2tUaXRsZSBhcyBnZXRCbG9ja1RpdGxlMiB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFnZS1pY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0QmxvY2tJY29uLCBnZXRCbG9ja1RpdGxlIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvaWNvbnMvZGVmYXVsdC1wYWdlLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDQgZnJvbSBcInJlYWN0XCI7XG52YXIgRGVmYXVsdFBhZ2VJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWVcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAzMCAzMFwiLFxuICAgIHdpZHRoOiBcIjE2XCJcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDQuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTE2LDFINHYyOGgyMlYxMUwxNiwxeiBNMTYsMy44MjhMMjMuMTcyLDExSDE2VjMuODI4eiBNMjQsMjdINlYzaDh2MTBoMTBWMjd6IE04LDE3aDE0di0ySDhWMTd6IE04LDIxaDE0di0ySDhWMjF6IE04LDI1aDE0di0ySDhWMjV6XCJcbiAgfSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGF6eS1pbWFnZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVVybCB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCB7IEltYWdlU3RhdGUsIExhenlJbWFnZUZ1bGwgfSBmcm9tIFwicmVhY3QtbGF6eS1pbWFnZXNcIjtcbnZhciBMYXp5SW1hZ2UgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBzcmMsXG4gICAgYWx0LFxuICAgIGNsYXNzTmFtZSxcbiAgICBzdHlsZSxcbiAgICB6b29tYWJsZSA9IGZhbHNlLFxuICAgIHByaW9yaXR5ID0gZmFsc2UsXG4gICAgaGVpZ2h0XG4gIH0gPSBfYiwgcmVzdCA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwic3JjXCIsXG4gICAgXCJhbHRcIixcbiAgICBcImNsYXNzTmFtZVwiLFxuICAgIFwic3R5bGVcIixcbiAgICBcInpvb21hYmxlXCIsXG4gICAgXCJwcmlvcml0eVwiLFxuICAgIFwiaGVpZ2h0XCJcbiAgXSk7XG4gIHZhciBfYTIsIF9iMiwgX2M7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCB6b29tLCBwcmV2aWV3SW1hZ2VzLCBmb3JjZUN1c3RvbUltYWdlcywgY29tcG9uZW50cyB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCB6b29tUmVmID0gUmVhY3Q1LnVzZVJlZih6b29tID8gem9vbS5jbG9uZSgpIDogbnVsbCk7XG4gIGNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdJbWFnZXMgPyAoX2MgPSAoX2EyID0gcmVjb3JkTWFwID09IG51bGwgPyB2b2lkIDAgOiByZWNvcmRNYXAucHJldmlld19pbWFnZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTJbc3JjXSkgIT0gbnVsbCA/IF9jIDogKF9iMiA9IHJlY29yZE1hcCA9PSBudWxsID8gdm9pZCAwIDogcmVjb3JkTWFwLnByZXZpZXdfaW1hZ2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2IyW25vcm1hbGl6ZVVybChzcmMpXSA6IG51bGw7XG4gIGNvbnN0IG9uTG9hZCA9IFJlYWN0NS51c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgaWYgKHpvb21hYmxlICYmIChlLnRhcmdldC5zcmMgfHwgZS50YXJnZXQuc3Jjc2V0KSkge1xuICAgICAgICBpZiAoem9vbVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgO1xuICAgICAgICAgIHpvb21SZWYuY3VycmVudC5hdHRhY2goZS50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbem9vbVJlZiwgem9vbWFibGVdXG4gICk7XG4gIGNvbnN0IGF0dGFjaFpvb20gPSBSZWFjdDUudXNlQ2FsbGJhY2soXG4gICAgKGltYWdlKSA9PiB7XG4gICAgICBpZiAoem9vbVJlZi5jdXJyZW50ICYmIGltYWdlKSB7XG4gICAgICAgIDtcbiAgICAgICAgem9vbVJlZi5jdXJyZW50LmF0dGFjaChpbWFnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbem9vbVJlZl1cbiAgKTtcbiAgY29uc3QgYXR0YWNoWm9vbVJlZiA9IFJlYWN0NS51c2VNZW1vKFxuICAgICgpID0+IHpvb21hYmxlID8gYXR0YWNoWm9vbSA6IHZvaWQgMCxcbiAgICBbem9vbWFibGUsIGF0dGFjaFpvb21dXG4gICk7XG4gIGlmIChwcmV2aWV3SW1hZ2UpIHtcbiAgICBjb25zdCBhc3BlY3RSYXRpbyA9IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCAvIHByZXZpZXdJbWFnZS5vcmlnaW5hbFdpZHRoO1xuICAgIGlmIChjb21wb25lbnRzLkltYWdlKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuSW1hZ2UsIHtcbiAgICAgICAgc3JjLFxuICAgICAgICBhbHQsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIHdpZHRoOiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxIZWlnaHQsXG4gICAgICAgIGJsdXJEYXRhVVJMOiBwcmV2aWV3SW1hZ2UuZGF0YVVSSUJhc2U2NCxcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiYmx1clwiLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgb25Mb2FkXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChMYXp5SW1hZ2VGdWxsLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgIHNyY1xuICAgIH0sIHJlc3QpLCB7XG4gICAgICBleHBlcmltZW50YWxEZWNvZGU6IHRydWVcbiAgICB9KSwgKHsgaW1hZ2VTdGF0ZSwgcmVmIH0pID0+IHtcbiAgICAgIGNvbnN0IGlzTG9hZGVkID0gaW1hZ2VTdGF0ZSA9PT0gSW1hZ2VTdGF0ZS5Mb2FkU3VjY2VzcztcbiAgICAgIGNvbnN0IHdyYXBwZXJTdHlsZSA9IHtcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiXG4gICAgICB9O1xuICAgICAgY29uc3QgaW1nU3R5bGUgPSB7fTtcbiAgICAgIGlmIChoZWlnaHQpIHtcbiAgICAgICAgd3JhcHBlclN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltZ1N0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB3cmFwcGVyU3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2FzcGVjdFJhdGlvICogMTAwfSVgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgXCJsYXp5LWltYWdlLXdyYXBwZXJcIixcbiAgICAgICAgICBpc0xvYWRlZCAmJiBcImxhenktaW1hZ2UtbG9hZGVkXCIsXG4gICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICksXG4gICAgICAgIHN0eWxlOiB3cmFwcGVyU3R5bGVcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImltZ1wiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJsYXp5LWltYWdlLXByZXZpZXdcIixcbiAgICAgICAgc3JjOiBwcmV2aWV3SW1hZ2UuZGF0YVVSSUJhc2U2NCxcbiAgICAgICAgYWx0LFxuICAgICAgICByZWYsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICBkZWNvZGluZzogXCJhc3luY1wiXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxhenktaW1hZ2UtcmVhbFwiLFxuICAgICAgICBzcmMsXG4gICAgICAgIGFsdCxcbiAgICAgICAgcmVmOiBhdHRhY2hab29tUmVmLFxuICAgICAgICBzdHlsZTogX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIHN0eWxlKSwgaW1nU3R5bGUpLFxuICAgICAgICB3aWR0aDogcHJldmlld0ltYWdlLm9yaWdpbmFsV2lkdGgsXG4gICAgICAgIGhlaWdodDogcHJldmlld0ltYWdlLm9yaWdpbmFsSGVpZ2h0LFxuICAgICAgICBkZWNvZGluZzogXCJhc3luY1wiLFxuICAgICAgICBsb2FkaW5nOiBcImxhenlcIlxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChjb21wb25lbnRzLkltYWdlICYmIGZvcmNlQ3VzdG9tSW1hZ2VzKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuSW1hZ2UsIHtcbiAgICAgICAgc3JjLFxuICAgICAgICBhbHQsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodCB8fCBudWxsLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgb25Mb2FkXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImltZ1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBzdHlsZSxcbiAgICAgIHNyYyxcbiAgICAgIGFsdCxcbiAgICAgIHJlZjogYXR0YWNoWm9vbVJlZixcbiAgICAgIGxvYWRpbmc6IFwibGF6eVwiLFxuICAgICAgZGVjb2Rpbmc6IFwiYXN5bmNcIlxuICAgIH0sIHJlc3QpKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFnZS1pY29uLnRzeFxudmFyIGlzSWNvbkJsb2NrID0gKHZhbHVlKSA9PiB7XG4gIHJldHVybiB2YWx1ZS50eXBlID09PSBcInBhZ2VcIiB8fCB2YWx1ZS50eXBlID09PSBcImNhbGxvdXRcIiB8fCB2YWx1ZS50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld1wiIHx8IHZhbHVlLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIjtcbn07XG52YXIgUGFnZUljb25JbXBsID0gKHtcbiAgYmxvY2ssXG4gIGNsYXNzTmFtZSxcbiAgaW5saW5lID0gdHJ1ZSxcbiAgaGlkZURlZmF1bHRJY29uID0gZmFsc2UsXG4gIGRlZmF1bHRJY29uXG59KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgeyBtYXBJbWFnZVVybCwgcmVjb3JkTWFwLCBkYXJrTW9kZSB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBsZXQgaXNJbWFnZSA9IGZhbHNlO1xuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmIChpc0ljb25CbG9jayhibG9jaykpIHtcbiAgICBjb25zdCBpY29uID0gKChfYSA9IGdldEJsb2NrSWNvbihibG9jaywgcmVjb3JkTWFwKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyaW0oKSkgfHwgZGVmYXVsdEljb247XG4gICAgY29uc3QgdGl0bGUgPSBnZXRCbG9ja1RpdGxlKGJsb2NrLCByZWNvcmRNYXApO1xuICAgIGlmIChpY29uICYmIGlzVXJsKGljb24pKSB7XG4gICAgICBjb25zdCB1cmwgPSBtYXBJbWFnZVVybChpY29uLCBibG9jayk7XG4gICAgICBpc0ltYWdlID0gdHJ1ZTtcbiAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICAgIHNyYzogdXJsLFxuICAgICAgICBhbHQ6IHRpdGxlIHx8IFwicGFnZSBpY29uXCIsXG4gICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIilcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaWNvbiAmJiBpY29uLnN0YXJ0c1dpdGgoXCIvaWNvbnMvXCIpKSB7XG4gICAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vd3d3Lm5vdGlvbi5zb1wiICsgaWNvbiArIFwiP21vZGU9XCIgKyAoZGFya01vZGUgPyBcImRhcmtcIiA6IFwibGlnaHRcIik7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KExhenlJbWFnZSwge1xuICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgYWx0OiB0aXRsZSB8fCBcInBhZ2UgaWNvblwiLFxuICAgICAgICBjbGFzc05hbWU6IGNzKGNsYXNzTmFtZSwgXCJub3Rpb24tcGFnZS1pY29uXCIpXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpY29uKSB7XG4gICAgICBpZiAoIWhpZGVEZWZhdWx0SWNvbikge1xuICAgICAgICBpc0ltYWdlID0gdHJ1ZTtcbiAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYuY3JlYXRlRWxlbWVudChEZWZhdWx0UGFnZUljb24sIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNzKGNsYXNzTmFtZSwgXCJub3Rpb24tcGFnZS1pY29uXCIpLFxuICAgICAgICAgIGFsdDogdGl0bGUgPyB0aXRsZSA6IFwicGFnZSBpY29uXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzSW1hZ2UgPSBmYWxzZTtcbiAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKSxcbiAgICAgICAgcm9sZTogXCJpbWdcIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGljb25cbiAgICAgIH0sIGljb24pO1xuICAgIH1cbiAgfVxuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgaW5saW5lID8gXCJub3Rpb24tcGFnZS1pY29uLWlubGluZVwiIDogXCJub3Rpb24tcGFnZS1pY29uLWhlcm9cIixcbiAgICAgIGlzSW1hZ2UgPyBcIm5vdGlvbi1wYWdlLWljb24taW1hZ2VcIiA6IFwibm90aW9uLXBhZ2UtaWNvbi1zcGFuXCJcbiAgICApXG4gIH0sIGNvbnRlbnQpO1xufTtcbnZhciBQYWdlSWNvbiA9IFJlYWN0Ni5tZW1vKFBhZ2VJY29uSW1wbCk7XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtdGl0bGUudHN4XG52YXIgUGFnZVRpdGxlSW1wbCA9IChfYSkgPT4ge1xuICB2YXIgX2IgPSBfYSwgeyBibG9jaywgY2xhc3NOYW1lLCBkZWZhdWx0SWNvbiB9ID0gX2IsIHJlc3QgPSBfX29ialJlc3QoX2IsIFtcImJsb2NrXCIsIFwiY2xhc3NOYW1lXCIsIFwiZGVmYXVsdEljb25cIl0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2spXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZTIoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKCF0aXRsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRpdGxlRGVjb3JhdGlvbiA9IFtbdGl0bGVdXTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKVxuICAgIH0sIHJlc3QpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoUGFnZUljb24sIHtcbiAgICAgIGJsb2NrLFxuICAgICAgZGVmYXVsdEljb24sXG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLXBhZ2UtdGl0bGUtaWNvblwiXG4gICAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIlxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChUZXh0LCB7XG4gICAgICB2YWx1ZTogdGl0bGVEZWNvcmF0aW9uLFxuICAgICAgYmxvY2tcbiAgICB9KSkpO1xuICB9XG4gIGlmICghKChfYTIgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnRpdGxlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKVxuICB9LCByZXN0KSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFBhZ2VJY29uLCB7XG4gICAgYmxvY2ssXG4gICAgZGVmYXVsdEljb24sXG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLWljb25cIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIlxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgIHZhbHVlOiAoX2IyID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50aXRsZSxcbiAgICBibG9ja1xuICB9KSkpO1xufTtcbnZhciBQYWdlVGl0bGUgPSBSZWFjdDcubWVtbyhQYWdlVGl0bGVJbXBsKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvdGV4dC50c3hcbnZhciBUZXh0ID0gKHsgdmFsdWUsIGJsb2NrLCBsaW5rUHJvcHMsIGxpbmtQcm90b2NvbCB9KSA9PiB7XG4gIGNvbnN0IHsgY29tcG9uZW50cywgcmVjb3JkTWFwLCBtYXBQYWdlVXJsLCBtYXBJbWFnZVVybCwgcm9vdERvbWFpbiB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFJlYWN0OC5GcmFnbWVudCwgbnVsbCwgdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLm1hcCgoW3RleHQsIGRlY29yYXRpb25zXSwgaW5kZXgpID0+IHtcbiAgICBpZiAoIWRlY29yYXRpb25zKSB7XG4gICAgICBpZiAodGV4dCA9PT0gXCIsXCIpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgc3R5bGU6IHsgcGFkZGluZzogXCIwLjVlbVwiIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFJlYWN0OC5GcmFnbWVudCwge1xuICAgICAgICAgIGtleTogaW5kZXhcbiAgICAgICAgfSwgdGV4dCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IGRlY29yYXRpb25zLnJlZHVjZShcbiAgICAgIChlbGVtZW50LCBkZWNvcmF0b3IpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgc3dpdGNoIChkZWNvcmF0b3JbMF0pIHtcbiAgICAgICAgICBjYXNlIFwicFwiOiB7XG4gICAgICAgICAgICBjb25zdCBibG9ja0lkID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgbGlua2VkQmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgICAgICAgIGlmICghbGlua2VkQmxvY2spIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1wicFwiIG1pc3NpbmcgYmxvY2snLCBibG9ja0lkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoYmxvY2tJZClcbiAgICAgICAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChQYWdlVGl0bGUsIHtcbiAgICAgICAgICAgICAgYmxvY2s6IGxpbmtlZEJsb2NrXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJcXHUyMDIzXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUeXBlID0gZGVjb3JhdG9yWzFdWzBdO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBkZWNvcmF0b3JbMV1bMV07XG4gICAgICAgICAgICBzd2l0Y2ggKGxpbmtUeXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ1XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gKF9iID0gcmVjb3JkTWFwLm5vdGlvbl91c2VyW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1wiXFx1MjAyM1wiIG1pc3NpbmcgdXNlcicsIGlkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gW3VzZXIuZ2l2ZW5fbmFtZSwgdXNlci5mYW1pbHlfbmFtZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoR3JhY2VmdWxJbWFnZSwge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi11c2VyXCIsXG4gICAgICAgICAgICAgICAgICBzcmM6IG1hcEltYWdlVXJsKHVzZXIucHJvZmlsZV9waG90bywgYmxvY2spLFxuICAgICAgICAgICAgICAgICAgYWx0OiBuYW1lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEJsb2NrID0gKF9jID0gcmVjb3JkTWFwLmJsb2NrW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghbGlua2VkQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcIlxcdTIwMjNcIiBtaXNzaW5nIGJsb2NrJywgbGlua1R5cGUsIGlkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgICBocmVmOiBtYXBQYWdlVXJsKGlkKVxuICAgICAgICAgICAgICAgIH0sIGxpbmtQcm9wcyksIHtcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgICAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFBhZ2VUaXRsZSwge1xuICAgICAgICAgICAgICAgICAgYmxvY2s6IGxpbmtlZEJsb2NrXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogYG5vdGlvbi0ke2RlY29yYXRvclsxXX1gXG4gICAgICAgICAgICB9LCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcImNvZGVcIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWlubGluZS1jb2RlXCJcbiAgICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJiXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwiYlwiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiaVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcImVtXCIsIG51bGwsIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFwic1wiLCBudWxsLCBlbGVtZW50KTtcbiAgICAgICAgICBjYXNlIFwiX1wiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWlubGluZS11bmRlcnNjb3JlXCJcbiAgICAgICAgICAgIH0sIGVsZW1lbnQpO1xuICAgICAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuRXF1YXRpb24sIHtcbiAgICAgICAgICAgICAgbWF0aDogZGVjb3JhdG9yWzFdLFxuICAgICAgICAgICAgICBpbmxpbmU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgICBjYXNlIFwiYVwiOiB7XG4gICAgICAgICAgICBjb25zdCB2ID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgcGF0aG5hbWUgPSB2LnN1YnN0cigxKTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VQYWdlSWQocGF0aG5hbWUsIHsgdXVpZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGlmICgodlswXSA9PT0gXCIvXCIgfHwgdi5pbmNsdWRlcyhyb290RG9tYWluKSkgJiYgaWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgaHJlZiA9IHYuaW5jbHVkZXMocm9vdERvbWFpbikgPyB2IDogYCR7bWFwUGFnZVVybChpZCl9JHtnZXRIYXNoRnJhZ21lbnRWYWx1ZSh2KX1gO1xuICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgICBocmVmXG4gICAgICAgICAgICAgIH0sIGxpbmtQcm9wcyksIGVsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChjb21wb25lbnRzLkxpbmssIF9fc3ByZWFkVmFsdWVzKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgICBocmVmOiBsaW5rUHJvdG9jb2wgPyBgJHtsaW5rUHJvdG9jb2x9OiR7ZGVjb3JhdG9yWzFdfWAgOiBkZWNvcmF0b3JbMV1cbiAgICAgICAgICAgICAgfSwgbGlua1Byb3BzKSwgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJkXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdiA9PSBudWxsID8gdm9pZCAwIDogdi50eXBlO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHYuc3RhcnRfZGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoc3RhcnREYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJkYXRlcmFuZ2VcIikge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSB2LnN0YXJ0X2RhdGU7XG4gICAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB2LmVuZF9kYXRlO1xuICAgICAgICAgICAgICByZXR1cm4gYCR7Zm9ybWF0RGF0ZShzdGFydERhdGUpfSBcXHUyMTkyICR7Zm9ybWF0RGF0ZShlbmREYXRlKX1gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJ1XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSAoX2QgPSByZWNvcmRNYXAubm90aW9uX3VzZXJbdXNlcklkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWlzc2luZyB1c2VyXCIsIHVzZXJJZCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IFt1c2VyLmdpdmVuX25hbWUsIHVzZXIuZmFtaWx5X25hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoR3JhY2VmdWxJbWFnZSwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXVzZXJcIixcbiAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybCh1c2VyLnByb2ZpbGVfcGhvdG8sIGJsb2NrKSxcbiAgICAgICAgICAgICAgYWx0OiBuYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImVvaVwiOiB7XG4gICAgICAgICAgICBjb25zdCBibG9ja0lkID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxPYmplY3RJbnN0YW5jZSA9IChfZSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChFT0ksIHtcbiAgICAgICAgICAgICAgYmxvY2s6IGV4dGVybmFsT2JqZWN0SW5zdGFuY2UsXG4gICAgICAgICAgICAgIGlubGluZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAodHJ1ZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVuc3VwcG9ydGVkIHRleHQgZm9ybWF0XCIsIGRlY29yYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChSZWFjdDguRnJhZ21lbnQsIG51bGwsIHRleHQpXG4gICAgKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KFJlYWN0OC5GcmFnbWVudCwge1xuICAgICAga2V5OiBpbmRleFxuICAgIH0sIGZvcm1hdHRlZCk7XG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2hlYWRlci50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTMgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRQYWdlQnJlYWRjcnVtYnMgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyB1c2VIb3RrZXlzIH0gZnJvbSBcInJlYWN0LWhvdGtleXMtaG9va1wiO1xuXG4vLyBzcmMvaWNvbnMvc2VhcmNoLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDkgZnJvbSBcInJlYWN0XCI7XG52YXIgU2VhcmNoSWNvbiA9IChwcm9wcykgPT4ge1xuICBjb25zdCBfYSA9IHByb3BzLCB7IGNsYXNzTmFtZSB9ID0gX2EsIHJlc3QgPSBfX29ialJlc3QoX2EsIFtcImNsYXNzTmFtZVwiXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24taWNvblwiLCBjbGFzc05hbWUpLFxuICAgIHZpZXdCb3g6IFwiMCAwIDE3IDE3XCJcbiAgfSwgcmVzdCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYuNzgwMjcgMTMuNjcyOUM4LjI0ODA1IDEzLjY3MjkgOS42MDE1NiAxMy4xOTgyIDEwLjcwOSAxMi40MDcyTDE0Ljg3NSAxNi41NzMyQzE1LjA2ODQgMTYuNzY2NiAxNS4zMjMyIDE2Ljg2MzMgMTUuNTk1NyAxNi44NjMzQzE2LjE2NyAxNi44NjMzIDE2LjU3MTMgMTYuNDIzOCAxNi41NzEzIDE1Ljg2MTNDMTYuNTcxMyAxNS41OTc3IDE2LjQ4MzQgMTUuMzUxNiAxNi4yOSAxNS4xNTgyTDEyLjE1MDQgMTEuMDA5OEMxMy4wMjA1IDkuODY3MTkgMTMuNTM5MSA4LjQ1MjE1IDEzLjUzOTEgNi45MTQwNkMxMy41MzkxIDMuMTk2MjkgMTAuNDk4IDAuMTU1MjczIDYuNzgwMjcgMC4xNTUyNzNDMy4wNjI1IDAuMTU1MjczIDAuMDIxNDg0NCAzLjE5NjI5IDAuMDIxNDg0NCA2LjkxNDA2QzAuMDIxNDg0NCAxMC42MzE4IDMuMDYyNSAxMy42NzI5IDYuNzgwMjcgMTMuNjcyOVpNNi43ODAyNyAxMi4yMTM5QzMuODc5ODggMTIuMjEzOSAxLjQ4MDQ3IDkuODE0NDUgMS40ODA0NyA2LjkxNDA2QzEuNDgwNDcgNC4wMTM2NyAzLjg3OTg4IDEuNjE0MjYgNi43ODAyNyAxLjYxNDI2QzkuNjgwNjYgMS42MTQyNiAxMi4wODAxIDQuMDEzNjcgMTIuMDgwMSA2LjkxNDA2QzEyLjA4MDEgOS44MTQ0NSA5LjY4MDY2IDEyLjIxMzkgNi43ODAyNyAxMi4yMTM5WlwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3NlYXJjaC1kaWFsb2cudHN4XG52YXIgaW1wb3J0X2xvZGFzaCA9IF9fdG9FU00ocmVxdWlyZV9sb2Rhc2goKSwgMSk7XG5pbXBvcnQgKiBhcyBSZWFjdDEyIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0QmxvY2tQYXJlbnRQYWdlLCBnZXRCbG9ja1RpdGxlIGFzIGdldEJsb2NrVGl0bGUzIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvaWNvbnMvY2xlYXItaWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG52YXIgQ2xlYXJJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAzMCAzMFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZDogXCJNMTUsMEM2LjcxNiwwLDAsNi43MTYsMCwxNXM2LjcxNiwxNSwxNSwxNXMxNS02LjcxNiwxNS0xNVMyMy4yODQsMCwxNSwweiBNMjIsMjAuNkwyMC42LDIyTDE1LDE2LjRMOS40LDIyTDgsMjAuNmw1LjYtNS42IEw4LDkuNEw5LjQsOGw1LjYsNS42TDIwLjYsOEwyMiw5LjRMMTYuNCwxNUwyMiwyMC42elwiXG4gIH0pKTtcbn07XG5cbi8vIHNyYy9pY29ucy9sb2FkaW5nLWljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDExIGZyb20gXCJyZWFjdFwiO1xudmFyIExvYWRpbmdJY29uID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IF9hID0gcHJvcHMsIHsgY2xhc3NOYW1lIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1wiY2xhc3NOYW1lXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7XG4gICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdCksIHtcbiAgICB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZGVmc1wiLCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwibGluZWFyR3JhZGllbnRcIiwge1xuICAgIHgxOiBcIjI4LjE1NDI5NjklXCIsXG4gICAgeTE6IFwiNjMuNzQwMjM0NCVcIixcbiAgICB4MjogXCI3NC42Mjg5MDYyJVwiLFxuICAgIHkyOiBcIjE3Ljc4MzIwMzElXCIsXG4gICAgaWQ6IFwibGluZWFyR3JhZGllbnQtMVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJzdG9wXCIsIHtcbiAgICBzdG9wQ29sb3I6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAxKVwiLFxuICAgIG9mZnNldDogXCIwJVwiXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwic3RvcFwiLCB7XG4gICAgc3RvcENvbG9yOiBcInJnYmEoMTY0LCAxNjQsIDE2NCwgMClcIixcbiAgICBzdG9wT3BhY2l0eTogXCIwXCIsXG4gICAgb2Zmc2V0OiBcIjEwMCVcIlxuICB9KSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgaWQ6IFwiUGFnZS0xXCIsXG4gICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICBzdHJva2VXaWR0aDogXCIxXCIsXG4gICAgZmlsbDogXCJub25lXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTIzNi4wMDAwMDAsIC0yODYuMDAwMDAwKVwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKDIzOC4wMDAwMDAsIDI4Ni4wMDAwMDApXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcImNpcmNsZVwiLCB7XG4gICAgaWQ6IFwiT3ZhbC0yXCIsXG4gICAgc3Ryb2tlOiBcInVybCgjbGluZWFyR3JhZGllbnQtMSlcIixcbiAgICBzdHJva2VXaWR0aDogXCI0XCIsXG4gICAgY3g6IFwiMTBcIixcbiAgICBjeTogXCIxMlwiLFxuICAgIHI6IFwiMTBcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTEwLDIgQzQuNDc3MTUyNSwyIDAsNi40NzcxNTI1IDAsMTJcIixcbiAgICBpZDogXCJPdmFsLTJcIixcbiAgICBzdHJva2U6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAxKVwiLFxuICAgIHN0cm9rZVdpZHRoOiBcIjRcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIGlkOiBcIlJlY3RhbmdsZS0xXCIsXG4gICAgZmlsbDogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDEpXCIsXG4gICAgeDogXCI4XCIsXG4gICAgeTogXCIwXCIsXG4gICAgd2lkdGg6IFwiNFwiLFxuICAgIGhlaWdodDogXCI0XCIsXG4gICAgcng6IFwiOFwiXG4gIH0pKSkpKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3NlYXJjaC1kaWFsb2cudHN4XG52YXIgU2VhcmNoRGlhbG9nID0gY2xhc3MgZXh0ZW5kcyBSZWFjdDEyLkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgcXVlcnk6IFwiXCIsXG4gICAgICBzZWFyY2hSZXN1bHQ6IG51bGwsXG4gICAgICBzZWFyY2hFcnJvcjogbnVsbFxuICAgIH07XG4gICAgdGhpcy5fb25BZnRlck9wZW4gPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9vbkNoYW5nZVF1ZXJ5ID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcXVlcnkgfSk7XG4gICAgICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0OiBudWxsLCBzZWFyY2hFcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2VhcmNoKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9vbkNsZWFyUXVlcnkgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9vbkNoYW5nZVF1ZXJ5KHsgdGFyZ2V0OiB7IHZhbHVlOiBcIlwiIH0gfSk7XG4gICAgfTtcbiAgICB0aGlzLl93YXJtdXBTZWFyY2ggPSAoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBjb25zdCB7IHNlYXJjaE5vdGlvbiwgcm9vdEJsb2NrSWQgfSA9IHRoaXMucHJvcHM7XG4gICAgICB5aWVsZCBzZWFyY2hOb3Rpb24oe1xuICAgICAgICBxdWVyeTogXCJcIixcbiAgICAgICAgYW5jZXN0b3JJZDogcm9vdEJsb2NrSWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3NlYXJjaEltcGwgPSAoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBjb25zdCB7IHNlYXJjaE5vdGlvbiwgcm9vdEJsb2NrSWQgfSA9IHRoaXMucHJvcHM7XG4gICAgICBjb25zdCB7IHF1ZXJ5IH0gPSB0aGlzLnN0YXRlO1xuICAgICAgaWYgKCFxdWVyeS50cmltKCkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHNlYXJjaFJlc3VsdDogbnVsbCwgc2VhcmNoRXJyb3I6IG51bGwgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IHRydWUgfSk7XG4gICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBzZWFyY2hOb3Rpb24oe1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgYW5jZXN0b3JJZDogcm9vdEJsb2NrSWRcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coXCJzZWFyY2hcIiwgcXVlcnksIHJlc3VsdCk7XG4gICAgICBsZXQgc2VhcmNoUmVzdWx0ID0gbnVsbDtcbiAgICAgIGxldCBzZWFyY2hFcnJvciA9IG51bGw7XG4gICAgICBpZiAocmVzdWx0LmVycm9yIHx8IHJlc3VsdC5lcnJvcklkKSB7XG4gICAgICAgIHNlYXJjaEVycm9yID0gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VhcmNoUmVzdWx0ID0gX19zcHJlYWRWYWx1ZXMoe30sIHJlc3VsdCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBzZWFyY2hSZXN1bHQucmVzdWx0cy5tYXAoKHJlc3VsdDIpID0+IHtcbiAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgIGNvbnN0IGJsb2NrID0gKF9hID0gc2VhcmNoUmVzdWx0LnJlY29yZE1hcC5ibG9ja1tyZXN1bHQyLmlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgICAgICAgIGlmICghYmxvY2spXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgY29uc3QgdGl0bGUgPSBnZXRCbG9ja1RpdGxlMyhibG9jaywgc2VhcmNoUmVzdWx0LnJlY29yZE1hcCk7XG4gICAgICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQyLnRpdGxlID0gdGl0bGU7XG4gICAgICAgICAgcmVzdWx0Mi5ibG9jayA9IGJsb2NrO1xuICAgICAgICAgIHJlc3VsdDIucmVjb3JkTWFwID0gc2VhcmNoUmVzdWx0LnJlY29yZE1hcDtcbiAgICAgICAgICByZXN1bHQyLnBhZ2UgPSBnZXRCbG9ja1BhcmVudFBhZ2UoYmxvY2ssIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXAsIHtcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZVxuICAgICAgICAgIH0pIHx8IGJsb2NrO1xuICAgICAgICAgIGlmICghcmVzdWx0Mi5wYWdlLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoX2IgPSByZXN1bHQyLmhpZ2hsaWdodCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdDIuaGlnaGxpZ2h0Lmh0bWwgPSByZXN1bHQyLmhpZ2hsaWdodC50ZXh0LnJlcGxhY2UoLzxnemtOZm9VVT4vZ2ksIFwiPGI+XCIpLnJlcGxhY2UoLzxcXC9nemtOZm9VVT4vZ2ksIFwiPC9iPlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0c01hcCA9IHJlc3VsdHMucmVkdWNlKFxuICAgICAgICAgIChtYXAsIHJlc3VsdDIpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIG1hcCksIHtcbiAgICAgICAgICAgIFtyZXN1bHQyLnBhZ2UuaWRdOiByZXN1bHQyXG4gICAgICAgICAgfSksXG4gICAgICAgICAge31cbiAgICAgICAgKTtcbiAgICAgICAgc2VhcmNoUmVzdWx0LnJlc3VsdHMgPSBPYmplY3QudmFsdWVzKHNlYXJjaFJlc3VsdHNNYXApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3RhdGUucXVlcnkgPT09IHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IGZhbHNlLCBzZWFyY2hSZXN1bHQsIHNlYXJjaEVycm9yIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2lucHV0UmVmID0gUmVhY3QxMi5jcmVhdGVSZWYoKTtcbiAgfVxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLl9zZWFyY2ggPSAoMCwgaW1wb3J0X2xvZGFzaC5kZWZhdWx0KSh0aGlzLl9zZWFyY2hJbXBsLmJpbmQodGhpcyksIDFlMyk7XG4gICAgdGhpcy5fd2FybXVwU2VhcmNoKCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaXNPcGVuLCBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgaXNMb2FkaW5nLCBxdWVyeSwgc2VhcmNoUmVzdWx0LCBzZWFyY2hFcnJvciB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBoYXNRdWVyeSA9ICEhcXVlcnkudHJpbSgpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KE5vdGlvbkNvbnRleHRDb25zdW1lciwgbnVsbCwgKGN0eDIpID0+IHtcbiAgICAgIGNvbnN0IHsgY29tcG9uZW50cywgZGVmYXVsdFBhZ2VJY29uLCBtYXBQYWdlVXJsIH0gPSBjdHgyO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5Nb2RhbCwge1xuICAgICAgICBpc09wZW4sXG4gICAgICAgIGNvbnRlbnRMYWJlbDogXCJTZWFyY2hcIixcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2hcIixcbiAgICAgICAgb3ZlcmxheUNsYXNzTmFtZTogXCJub3Rpb24tc2VhcmNoLW92ZXJsYXlcIixcbiAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IG9uQ2xvc2UsXG4gICAgICAgIG9uQWZ0ZXJPcGVuOiB0aGlzLl9vbkFmdGVyT3BlblxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJxdWlja0ZpbmRNZW51XCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwic2VhcmNoQmFyXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiaW5saW5lSWNvblwiXG4gICAgICB9LCBpc0xvYWRpbmcgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KExvYWRpbmdJY29uLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJsb2FkaW5nSWNvblwiXG4gICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoU2VhcmNoSWNvbiwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwic2VhcmNoSW5wdXRcIixcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoXCIsXG4gICAgICAgIHZhbHVlOiBxdWVyeSxcbiAgICAgICAgcmVmOiB0aGlzLl9pbnB1dFJlZixcbiAgICAgICAgb25DaGFuZ2U6IHRoaXMuX29uQ2hhbmdlUXVlcnlcbiAgICAgIH0pLCBxdWVyeSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcm9sZTogXCJidXR0b25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImNsZWFyQnV0dG9uXCIsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuX29uQ2xlYXJRdWVyeVxuICAgICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChDbGVhckljb24sIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImNsZWFySWNvblwiXG4gICAgICB9KSkpLCBoYXNRdWVyeSAmJiBzZWFyY2hSZXN1bHQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCBzZWFyY2hSZXN1bHQucmVzdWx0cy5sZW5ndGggPyAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KE5vdGlvbkNvbnRleHRQcm92aWRlciwgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgY3R4MiksIHtcbiAgICAgICAgcmVjb3JkTWFwOiBzZWFyY2hSZXN1bHQucmVjb3JkTWFwXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyZXN1bHRzUGFuZVwiXG4gICAgICB9LCBzZWFyY2hSZXN1bHQucmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGFnZUxpbmssIHtcbiAgICAgICAgICBrZXk6IHJlc3VsdC5pZCxcbiAgICAgICAgICBjbGFzc05hbWU6IGNzKFwicmVzdWx0XCIsIFwibm90aW9uLXBhZ2UtbGlua1wiKSxcbiAgICAgICAgICBocmVmOiBtYXBQYWdlVXJsKFxuICAgICAgICAgICAgcmVzdWx0LnBhZ2UuaWQsXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHQucmVjb3JkTWFwXG4gICAgICAgICAgKVxuICAgICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFBhZ2VUaXRsZSwge1xuICAgICAgICAgIGJsb2NrOiByZXN1bHQucGFnZSxcbiAgICAgICAgICBkZWZhdWx0SWNvbjogZGVmYXVsdFBhZ2VJY29uXG4gICAgICAgIH0pLCAoKF9hID0gcmVzdWx0LmhpZ2hsaWdodCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmh0bWwpICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tc2VhcmNoLXJlc3VsdC1oaWdobGlnaHRcIixcbiAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgICAgX19odG1sOiByZXN1bHQuaGlnaGxpZ2h0Lmh0bWxcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0pKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImZvb3RlclwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJyZXN1bHRzRm9vdGVyXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwicmVzdWx0c0NvdW50XCJcbiAgICAgIH0sIHNlYXJjaFJlc3VsdC50b3RhbCksIHNlYXJjaFJlc3VsdC50b3RhbCA9PT0gMSA/IFwiIHJlc3VsdFwiIDogXCIgcmVzdWx0c1wiKSkpIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNQYW5lXCJcbiAgICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzXCJcbiAgICAgIH0sIFwiTm8gcmVzdWx0c1wiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJub1Jlc3VsdHNEZXRhaWxcIlxuICAgICAgfSwgXCJUcnkgZGlmZmVyZW50IHNlYXJjaCB0ZXJtc1wiKSkpLCBoYXNRdWVyeSAmJiAhc2VhcmNoUmVzdWx0ICYmIHNlYXJjaEVycm9yICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwibm9SZXN1bHRzUGFuZVwiXG4gICAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1wiXG4gICAgICB9LCBcIlNlYXJjaCBlcnJvclwiKSkpKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvaGVhZGVyLnRzeFxudmFyIEhlYWRlciA9ICh7IGJsb2NrIH0pID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJoZWFkZXJcIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24taGVhZGVyXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1uYXYtaGVhZGVyXCJcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChCcmVhZGNydW1icywge1xuICAgIGJsb2NrXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFNlYXJjaCwge1xuICAgIGJsb2NrXG4gIH0pKSk7XG59O1xudmFyIEJyZWFkY3J1bWJzID0gKHsgYmxvY2ssIHJvb3RPbmx5ID0gZmFsc2UgfSkgPT4ge1xuICBjb25zdCB7IHJlY29yZE1hcCwgbWFwUGFnZVVybCwgY29tcG9uZW50cyB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCBicmVhZGNydW1icyA9IFJlYWN0MTMudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgYnJlYWRjcnVtYnMyID0gZ2V0UGFnZUJyZWFkY3J1bWJzKHJlY29yZE1hcCwgYmxvY2suaWQpO1xuICAgIGlmIChyb290T25seSkge1xuICAgICAgcmV0dXJuIFticmVhZGNydW1iczJbMF1dLmZpbHRlcihCb29sZWFuKTtcbiAgICB9XG4gICAgcmV0dXJuIGJyZWFkY3J1bWJzMjtcbiAgfSwgW3JlY29yZE1hcCwgYmxvY2suaWQsIHJvb3RPbmx5XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiYnJlYWRjcnVtYnNcIixcbiAgICBrZXk6IFwiYnJlYWRjcnVtYnNcIlxuICB9LCBicmVhZGNydW1icy5tYXAoKGJyZWFkY3J1bWIsIGluZGV4KSA9PiB7XG4gICAgaWYgKCFicmVhZGNydW1iKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcGFnZUxpbmtQcm9wcyA9IHt9O1xuICAgIGNvbnN0IGNvbXBvbmVudE1hcCA9IHtcbiAgICAgIHBhZ2VMaW5rOiBjb21wb25lbnRzLlBhZ2VMaW5rXG4gICAgfTtcbiAgICBpZiAoYnJlYWRjcnVtYi5hY3RpdmUpIHtcbiAgICAgIGNvbXBvbmVudE1hcC5wYWdlTGluayA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFnZUxpbmtQcm9wcy5ocmVmID0gbWFwUGFnZVVybChicmVhZGNydW1iLnBhZ2VJZCk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFJlYWN0MTMuRnJhZ21lbnQsIHtcbiAgICAgIGtleTogYnJlYWRjcnVtYi5wYWdlSWRcbiAgICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KGNvbXBvbmVudE1hcC5wYWdlTGluaywgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBjcyhcImJyZWFkY3J1bWJcIiwgYnJlYWRjcnVtYi5hY3RpdmUgJiYgXCJhY3RpdmVcIilcbiAgICB9LCBwYWdlTGlua1Byb3BzKSwgYnJlYWRjcnVtYi5pY29uICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUGFnZUljb24sIHtcbiAgICAgIGNsYXNzTmFtZTogXCJpY29uXCIsXG4gICAgICBibG9jazogYnJlYWRjcnVtYi5ibG9ja1xuICAgIH0pLCBicmVhZGNydW1iLnRpdGxlICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJ0aXRsZVwiXG4gICAgfSwgYnJlYWRjcnVtYi50aXRsZSkpLCBpbmRleCA8IGJyZWFkY3J1bWJzLmxlbmd0aCAtIDEgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInNwYWNlclwiXG4gICAgfSwgXCIvXCIpKTtcbiAgfSkpO1xufTtcbnZhciBTZWFyY2ggPSAoeyBibG9jaywgc2VhcmNoLCB0aXRsZSA9IFwiU2VhcmNoXCIgfSkgPT4ge1xuICBjb25zdCB7IHNlYXJjaE5vdGlvbiwgcm9vdFBhZ2VJZCwgaXNTaG93aW5nU2VhcmNoLCBvbkhpZGVTZWFyY2ggfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3Qgb25TZWFyY2hOb3Rpb24gPSBzZWFyY2ggfHwgc2VhcmNoTm90aW9uO1xuICBjb25zdCBbaXNTZWFyY2hPcGVuLCBzZXRJc1NlYXJjaE9wZW5dID0gUmVhY3QxMy51c2VTdGF0ZShpc1Nob3dpbmdTZWFyY2gpO1xuICBSZWFjdDEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNTZWFyY2hPcGVuKGlzU2hvd2luZ1NlYXJjaCk7XG4gIH0sIFtpc1Nob3dpbmdTZWFyY2hdKTtcbiAgY29uc3Qgb25PcGVuU2VhcmNoID0gUmVhY3QxMy51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNTZWFyY2hPcGVuKHRydWUpO1xuICB9LCBbXSk7XG4gIGNvbnN0IG9uQ2xvc2VTZWFyY2ggPSBSZWFjdDEzLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4oZmFsc2UpO1xuICAgIGlmIChvbkhpZGVTZWFyY2gpIHtcbiAgICAgIG9uSGlkZVNlYXJjaCgpO1xuICAgIH1cbiAgfSwgW29uSGlkZVNlYXJjaF0pO1xuICB1c2VIb3RrZXlzKFwiY21kK3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgb25PcGVuU2VhcmNoKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG4gIHVzZUhvdGtleXMoXCJjbWQra1wiLCAoZXZlbnQpID0+IHtcbiAgICBvbk9wZW5TZWFyY2goKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcbiAgY29uc3QgaGFzU2VhcmNoID0gISFvblNlYXJjaE5vdGlvbjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMy5GcmFnbWVudCwgbnVsbCwgaGFzU2VhcmNoICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJvbGU6IFwiYnV0dG9uXCIsXG4gICAgY2xhc3NOYW1lOiBjcyhcImJyZWFkY3J1bWJcIiwgXCJidXR0b25cIiwgXCJub3Rpb24tc2VhcmNoLWJ1dHRvblwiKSxcbiAgICBvbkNsaWNrOiBvbk9wZW5TZWFyY2hcbiAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChTZWFyY2hJY29uLCB7XG4gICAgY2xhc3NOYW1lOiBcInNlYXJjaEljb25cIlxuICB9KSwgdGl0bGUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJ0aXRsZVwiXG4gIH0sIHRpdGxlKSksIGlzU2VhcmNoT3BlbiAmJiBoYXNTZWFyY2ggJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChTZWFyY2hEaWFsb2csIHtcbiAgICBpc09wZW46IGlzU2VhcmNoT3BlbixcbiAgICByb290QmxvY2tJZDogcm9vdFBhZ2VJZCB8fCAoYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLmlkKSxcbiAgICBvbkNsb3NlOiBvbkNsb3NlU2VhcmNoLFxuICAgIHNlYXJjaE5vdGlvbjogb25TZWFyY2hOb3Rpb25cbiAgfSkpO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXNzZXQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0VGV4dENvbnRlbnQgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL2xpdGUteW91dHViZS1lbWJlZC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTQgZnJvbSBcInJlYWN0XCI7XG52YXIgcXMgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChcbiAgICAoa2V5KSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWBcbiAgKS5qb2luKFwiJlwiKTtcbn07XG52YXIgTGl0ZVlvdVR1YmVFbWJlZCA9ICh7XG4gIGlkLFxuICBkZWZhdWx0UGxheSA9IGZhbHNlLFxuICBtdXRlID0gZmFsc2UsXG4gIGxhenlJbWFnZSA9IGZhbHNlLFxuICBpZnJhbWVUaXRsZSA9IFwiWW91VHViZSB2aWRlb1wiLFxuICBhbHQgPSBcIlZpZGVvIHByZXZpZXdcIixcbiAgcGFyYW1zID0ge30sXG4gIGFkTGlua3NQcmVjb25uZWN0ID0gdHJ1ZSxcbiAgc3R5bGUsXG4gIGNsYXNzTmFtZVxufSkgPT4ge1xuICBjb25zdCBtdXRlUGFyYW0gPSBtdXRlIHx8IGRlZmF1bHRQbGF5ID8gXCIxXCIgOiBcIjBcIjtcbiAgY29uc3QgcXVlcnlTdHJpbmcgPSBSZWFjdDE0LnVzZU1lbW8oXG4gICAgKCkgPT4gcXMoX19zcHJlYWRWYWx1ZXMoeyBhdXRvcGxheTogXCIxXCIsIG11dGU6IG11dGVQYXJhbSB9LCBwYXJhbXMpKSxcbiAgICBbbXV0ZVBhcmFtLCBwYXJhbXNdXG4gICk7XG4gIGNvbnN0IHJlc29sdXRpb24gPSBcImhxZGVmYXVsdFwiO1xuICBjb25zdCBwb3N0ZXJVcmwgPSBgaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS8ke2lkfS8ke3Jlc29sdXRpb259LmpwZ2A7XG4gIGNvbnN0IHl0VXJsID0gXCJodHRwczovL3d3dy55b3V0dWJlLW5vY29va2llLmNvbVwiO1xuICBjb25zdCBpZnJhbWVTcmMgPSBgJHt5dFVybH0vZW1iZWQvJHtpZH0/JHtxdWVyeVN0cmluZ31gO1xuICBjb25zdCBbaXNQcmVjb25uZWN0ZWQsIHNldElzUHJlY29ubmVjdGVkXSA9IFJlYWN0MTQudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWZyYW1lSW5pdGlhbGl6ZWQsIHNldElmcmFtZUluaXRpYWxpemVkXSA9IFJlYWN0MTQudXNlU3RhdGUoZGVmYXVsdFBsYXkpO1xuICBjb25zdCBbaXNJZnJhbWVMb2FkZWQsIHNldElzSWZyYW1lTG9hZGVkXSA9IFJlYWN0MTQudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB3YXJtQ29ubmVjdGlvbnMgPSBSZWFjdDE0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoaXNQcmVjb25uZWN0ZWQpXG4gICAgICByZXR1cm47XG4gICAgc2V0SXNQcmVjb25uZWN0ZWQodHJ1ZSk7XG4gIH0sIFtpc1ByZWNvbm5lY3RlZF0pO1xuICBjb25zdCBvbkxvYWRJZnJhbWUgPSBSZWFjdDE0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoaWZyYW1lSW5pdGlhbGl6ZWQpXG4gICAgICByZXR1cm47XG4gICAgc2V0SWZyYW1lSW5pdGlhbGl6ZWQodHJ1ZSk7XG4gIH0sIFtpZnJhbWVJbml0aWFsaXplZF0pO1xuICBjb25zdCBvbklmcmFtZUxvYWRlZCA9IFJlYWN0MTQudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzSWZyYW1lTG9hZGVkKHRydWUpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFJlYWN0MTQuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlbG9hZFwiLFxuICAgIGhyZWY6IHBvc3RlclVybCxcbiAgICBhczogXCJpbWFnZVwiXG4gIH0pLCBpc1ByZWNvbm5lY3RlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFJlYWN0MTQuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIsIHtcbiAgICByZWw6IFwicHJlY29ubmVjdFwiLFxuICAgIGhyZWY6IHl0VXJsXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwibGlua1wiLCB7XG4gICAgcmVsOiBcInByZWNvbm5lY3RcIixcbiAgICBocmVmOiBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb21cIlxuICB9KSksIGlzUHJlY29ubmVjdGVkICYmIGFkTGlua3NQcmVjb25uZWN0ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoUmVhY3QxNC5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVjb25uZWN0XCIsXG4gICAgaHJlZjogXCJodHRwczovL3N0YXRpYy5kb3VibGVjbGljay5uZXRcIlxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImxpbmtcIiwge1xuICAgIHJlbDogXCJwcmVjb25uZWN0XCIsXG4gICAgaHJlZjogXCJodHRwczovL2dvb2dsZWFkcy5nLmRvdWJsZWNsaWNrLm5ldFwiXG4gIH0pKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgb25DbGljazogb25Mb2FkSWZyYW1lLFxuICAgIG9uUG9pbnRlck92ZXI6IHdhcm1Db25uZWN0aW9ucyxcbiAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgXCJub3Rpb24teXQtbGl0ZVwiLFxuICAgICAgaXNJZnJhbWVMb2FkZWQgJiYgXCJub3Rpb24teXQtbG9hZGVkXCIsXG4gICAgICBpZnJhbWVJbml0aWFsaXplZCAmJiBcIm5vdGlvbi15dC1pbml0aWFsaXplZFwiLFxuICAgICAgY2xhc3NOYW1lXG4gICAgKSxcbiAgICBzdHlsZVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICBzcmM6IHBvc3RlclVybCxcbiAgICBjbGFzc05hbWU6IFwibm90aW9uLXl0LXRodW1ibmFpbFwiLFxuICAgIGxvYWRpbmc6IGxhenlJbWFnZSA/IFwibGF6eVwiIDogdm9pZCAwLFxuICAgIGFsdFxuICB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi15dC1wbGF5YnRuXCJcbiAgfSksIGlmcmFtZUluaXRpYWxpemVkICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiwge1xuICAgIHdpZHRoOiBcIjU2MFwiLFxuICAgIGhlaWdodDogXCIzMTVcIixcbiAgICBmcmFtZUJvcmRlcjogXCIwXCIsXG4gICAgYWxsb3c6IFwiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmVcIixcbiAgICBhbGxvd0Z1bGxTY3JlZW46IHRydWUsXG4gICAgdGl0bGU6IGlmcmFtZVRpdGxlLFxuICAgIHNyYzogaWZyYW1lU3JjLFxuICAgIG9uTG9hZDogb25JZnJhbWVMb2FkZWRcbiAgfSkpKTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LnRzeFxudmFyIGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIjtcbnZhciBzdXBwb3J0ZWRBc3NldFR5cGVzID0gW1xuICBcInZpZGVvXCIsXG4gIFwiaW1hZ2VcIixcbiAgXCJlbWJlZFwiLFxuICBcImZpZ21hXCIsXG4gIFwidHlwZWZvcm1cIixcbiAgXCJleGNhbGlkcmF3XCIsXG4gIFwibWFwc1wiLFxuICBcInR3ZWV0XCIsXG4gIFwicGRmXCIsXG4gIFwiZ2lzdFwiLFxuICBcImNvZGVwZW5cIixcbiAgXCJkcml2ZVwiXG5dO1xudmFyIEFzc2V0ID0gKHsgYmxvY2ssIHpvb21hYmxlID0gdHJ1ZSwgY2hpbGRyZW4gfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2o7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCBtYXBJbWFnZVVybCwgY29tcG9uZW50cyB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBpZiAoIWJsb2NrIHx8ICFzdXBwb3J0ZWRBc3NldFR5cGVzLmluY2x1ZGVzKGJsb2NrLnR5cGUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgc3R5bGUgPSB7XG4gICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICBhbGlnblNlbGY6IFwiY2VudGVyXCIsXG4gICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgIG1heFdpZHRoOiBcIjEwMCVcIixcbiAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiXG4gIH07XG4gIGNvbnN0IGFzc2V0U3R5bGUgPSB7fTtcbiAgaWYgKGJsb2NrLmZvcm1hdCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGJsb2NrX2FzcGVjdF9yYXRpbyxcbiAgICAgIGJsb2NrX2hlaWdodCxcbiAgICAgIGJsb2NrX3dpZHRoLFxuICAgICAgYmxvY2tfZnVsbF93aWR0aCxcbiAgICAgIGJsb2NrX3BhZ2Vfd2lkdGgsXG4gICAgICBibG9ja19wcmVzZXJ2ZV9zY2FsZVxuICAgIH0gPSBibG9jay5mb3JtYXQ7XG4gICAgaWYgKGJsb2NrX2Z1bGxfd2lkdGggfHwgYmxvY2tfcGFnZV93aWR0aCkge1xuICAgICAgaWYgKGJsb2NrX2Z1bGxfd2lkdGgpIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSBcIjEwMHZ3XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgfVxuICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICBpZiAoYmxvY2tfaGVpZ2h0KSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gYmxvY2tfaGVpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrX2FzcGVjdF9yYXRpbykge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBgJHtibG9ja19hc3BlY3RfcmF0aW8gKiAxMDB9JWA7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgICAgICBzdHlsZS5vYmplY3RGaXQgPSBcImNvbnRhaW5cIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChibG9ja19hc3BlY3RfcmF0aW8gJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBgJHtibG9ja19hc3BlY3RfcmF0aW8gKiAxMDB9JWA7XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX2hlaWdodCkge1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBibG9ja19oZWlnaHQ7XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlKSB7XG4gICAgICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gXCI3NSVcIjtcbiAgICAgICAgICBzdHlsZS5taW5IZWlnaHQgPSAxMDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICgoX2EgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ibG9ja19hbGlnbm1lbnQpIHtcbiAgICAgICAgY2FzZSBcImNlbnRlclwiOiB7XG4gICAgICAgICAgc3R5bGUuYWxpZ25TZWxmID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibGVmdFwiOiB7XG4gICAgICAgICAgc3R5bGUuYWxpZ25TZWxmID0gXCJzdGFydFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyaWdodFwiOiB7XG4gICAgICAgICAgc3R5bGUuYWxpZ25TZWxmID0gXCJlbmRcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGJsb2NrX3dpZHRoKSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gYmxvY2tfd2lkdGg7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUgJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjUwJVwiO1xuICAgICAgICBzdHlsZS5taW5IZWlnaHQgPSAxMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYmxvY2tfaGVpZ2h0ICYmIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGJsb2NrX2hlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICBhc3NldFN0eWxlLm9iamVjdEZpdCA9IFwiY292ZXJcIjtcbiAgICB9IGVsc2UgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlKSB7XG4gICAgICBhc3NldFN0eWxlLm9iamVjdEZpdCA9IFwiY29udGFpblwiO1xuICAgIH1cbiAgfVxuICBsZXQgc291cmNlID0gKChfYiA9IHJlY29yZE1hcC5zaWduZWRfdXJscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iW2Jsb2NrLmlkXSkgfHwgKChfZSA9IChfZCA9IChfYyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfZFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lWzBdKTtcbiAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICBpZiAoIXNvdXJjZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChibG9jay50eXBlID09PSBcInR3ZWV0XCIpIHtcbiAgICBjb25zdCBzcmMgPSBzb3VyY2U7XG4gICAgaWYgKCFzcmMpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpZCA9IHNyYy5zcGxpdChcIj9cIilbMF0uc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGlmICghaWQpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBzdHlsZTogX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgYXNzZXRTdHlsZSksIHtcbiAgICAgICAgbWF4V2lkdGg6IDQyMCxcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBtYXJnaW5MZWZ0OiBcImF1dG9cIixcbiAgICAgICAgbWFyZ2luUmlnaHQ6IFwiYXV0b1wiXG4gICAgICB9KVxuICAgIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5Ud2VldCwge1xuICAgICAgaWRcbiAgICB9KSk7XG4gIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJwZGZcIikge1xuICAgIHN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiKDIyNiwgMjI2LCAyMjYpXCI7XG4gICAgc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICBpZiAoIXN0eWxlLnBhZGRpbmcpIHtcbiAgICAgIHN0eWxlLnBhZGRpbmcgPSBcIjhweCAxNnB4XCI7XG4gICAgfVxuICAgIGlmICghaXNTZXJ2ZXIpIHtcbiAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KGNvbXBvbmVudHMuUGRmLCB7XG4gICAgICAgIGZpbGU6IHNvdXJjZVxuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwiZW1iZWRcIiB8fCBibG9jay50eXBlID09PSBcInZpZGVvXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJmaWdtYVwiIHx8IGJsb2NrLnR5cGUgPT09IFwidHlwZWZvcm1cIiB8fCBibG9jay50eXBlID09PSBcImdpc3RcIiB8fCBibG9jay50eXBlID09PSBcIm1hcHNcIiB8fCBibG9jay50eXBlID09PSBcImV4Y2FsaWRyYXdcIiB8fCBibG9jay50eXBlID09PSBcImNvZGVwZW5cIiB8fCBibG9jay50eXBlID09PSBcImRyaXZlXCIpIHtcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiICYmIHNvdXJjZSAmJiBzb3VyY2UuaW5kZXhPZihcInlvdXR1YmVcIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwieW91dHUuYmVcIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwidmltZW9cIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwid2lzdGlhXCIpIDwgMCAmJiBzb3VyY2UuaW5kZXhPZihcImxvb21cIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwidmlkZW9hc2tcIikgPCAwICYmIHNvdXJjZS5pbmRleE9mKFwiZ2V0Y2xvdWRhcHBcIikgPCAwKSB7XG4gICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gdm9pZCAwO1xuICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCB7XG4gICAgICAgIHBsYXlzSW5saW5lOiB0cnVlLFxuICAgICAgICBjb250cm9sczogdHJ1ZSxcbiAgICAgICAgcHJlbG9hZDogXCJtZXRhZGF0YVwiLFxuICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgc3JjOiBzb3VyY2UsXG4gICAgICAgIHRpdGxlOiBibG9jay50eXBlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHNyYyA9ICgoX2YgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZi5kaXNwbGF5X3NvdXJjZSkgfHwgc291cmNlO1xuICAgICAgaWYgKHNyYykge1xuICAgICAgICBjb25zdCB5b3V0dWJlVmlkZW9JZCA9IGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIiA/IGdldFlvdXR1YmVJZChzcmMpIDogbnVsbDtcbiAgICAgICAgaWYgKHlvdXR1YmVWaWRlb0lkKSB7XG4gICAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoTGl0ZVlvdVR1YmVFbWJlZCwge1xuICAgICAgICAgICAgaWQ6IHlvdXR1YmVWaWRlb0lkLFxuICAgICAgICAgICAgc3R5bGU6IGFzc2V0U3R5bGUsXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwiZ2lzdFwiKSB7XG4gICAgICAgICAgaWYgKCFzcmMuZW5kc1dpdGgoXCIucGliYlwiKSkge1xuICAgICAgICAgICAgc3JjID0gYCR7c3JjfS5waWJiYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXNzZXRTdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjUwJVwiO1xuICAgICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIsIHtcbiAgICAgICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1hc3NldC1vYmplY3QtZml0XCIsXG4gICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICB0aXRsZTogXCJHaXRIdWIgR2lzdFwiLFxuICAgICAgICAgICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgICAgICAgICAgbG9hZGluZzogXCJsYXp5XCIsXG4gICAgICAgICAgICBzY3JvbGxpbmc6IFwiYXV0b1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1hc3NldC1vYmplY3QtZml0XCIsXG4gICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgIHNyYyxcbiAgICAgICAgICAgIHRpdGxlOiBgaWZyYW1lICR7YmxvY2sudHlwZX1gLFxuICAgICAgICAgICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgICAgICAgICAgYWxsb3dGdWxsU2NyZWVuOiB0cnVlLFxuICAgICAgICAgICAgbG9hZGluZzogXCJsYXp5XCIsXG4gICAgICAgICAgICBzY3JvbGxpbmc6IFwiYXV0b1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgaWYgKHNvdXJjZS5pbmNsdWRlcyhcImZpbGUubm90aW9uLnNvXCIpKSB7XG4gICAgICBzb3VyY2UgPSAoX2kgPSAoX2ggPSAoX2cgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2cuc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2hbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfaVswXTtcbiAgICB9XG4gICAgY29uc3Qgc3JjID0gbWFwSW1hZ2VVcmwoc291cmNlLCBibG9jayk7XG4gICAgY29uc3QgY2FwdGlvbiA9IGdldFRleHRDb250ZW50KChfaiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfai5jYXB0aW9uKTtcbiAgICBjb25zdCBhbHQgPSBjYXB0aW9uIHx8IFwibm90aW9uIGltYWdlXCI7XG4gICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoTGF6eUltYWdlLCB7XG4gICAgICBzcmMsXG4gICAgICBhbHQsXG4gICAgICB6b29tYWJsZSxcbiAgICAgIGhlaWdodDogc3R5bGUuaGVpZ2h0LFxuICAgICAgc3R5bGU6IGFzc2V0U3R5bGVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChSZWFjdDE1LkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBzdHlsZVxuICB9LCBjb250ZW50LCBibG9jay50eXBlID09PSBcImltYWdlXCIgJiYgY2hpbGRyZW4pLCBibG9jay50eXBlICE9PSBcImltYWdlXCIgJiYgY2hpbGRyZW4pO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXNzZXQtd3JhcHBlci50c3hcbnZhciB1cmxTdHlsZSA9IHsgd2lkdGg6IFwiMTAwJVwiIH07XG52YXIgQXNzZXRXcmFwcGVyID0gKHsgYmxvY2tJZCwgYmxvY2sgfSkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgY29uc3QgdmFsdWUgPSBibG9jaztcbiAgY29uc3QgeyBjb21wb25lbnRzLCBtYXBQYWdlVXJsLCByb290RG9tYWluLCB6b29tIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGxldCBpc1VSTCA9IGZhbHNlO1xuICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgY29uc3QgY2FwdGlvbiA9IChfYyA9IChfYiA9IChfYSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FwdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF07XG4gICAgaWYgKGNhcHRpb24pIHtcbiAgICAgIGNvbnN0IGlkID0gcGFyc2VQYWdlSWQyKGNhcHRpb24sIHsgdXVpZDogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IGlzUGFnZSA9IGNhcHRpb24uY2hhckF0KDApID09PSBcIi9cIiAmJiBpZDtcbiAgICAgIGlmIChpc1BhZ2UgfHwgaXNWYWxpZFVSTChjYXB0aW9uKSkge1xuICAgICAgICBpc1VSTCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IGZpZ3VyZSA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoXCJmaWd1cmVcIiwge1xuICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICBcIm5vdGlvbi1hc3NldC13cmFwcGVyXCIsXG4gICAgICBgbm90aW9uLWFzc2V0LXdyYXBwZXItJHtibG9jay50eXBlfWAsXG4gICAgICAoKF9kID0gdmFsdWUuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2QuYmxvY2tfZnVsbF93aWR0aCkgJiYgXCJub3Rpb24tYXNzZXQtd3JhcHBlci1mdWxsXCIsXG4gICAgICBibG9ja0lkXG4gICAgKVxuICB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNi5jcmVhdGVFbGVtZW50KEFzc2V0LCB7XG4gICAgYmxvY2s6IHZhbHVlLFxuICAgIHpvb21hYmxlOiB6b29tICYmICFpc1VSTFxuICB9LCAoKF9lID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYXB0aW9uKSAmJiAhaXNVUkwgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChcImZpZ2NhcHRpb25cIiwge1xuICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtY2FwdGlvblwiXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoVGV4dCwge1xuICAgIHZhbHVlOiB2YWx1ZS5wcm9wZXJ0aWVzLmNhcHRpb24sXG4gICAgYmxvY2tcbiAgfSkpKSk7XG4gIGlmIChpc1VSTCkge1xuICAgIGNvbnN0IGNhcHRpb24gPSAoX2YgPSB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNhcHRpb25bMF1bMF07XG4gICAgY29uc3QgaWQgPSBwYXJzZVBhZ2VJZDIoY2FwdGlvbiwgeyB1dWlkOiB0cnVlIH0pO1xuICAgIGNvbnN0IGlzUGFnZSA9IGNhcHRpb24uY2hhckF0KDApID09PSBcIi9cIiAmJiBpZDtcbiAgICBjb25zdCBjYXB0aW9uSG9zdG5hbWUgPSBleHRyYWN0SG9zdG5hbWUoY2FwdGlvbik7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50cy5QYWdlTGluaywge1xuICAgICAgc3R5bGU6IHVybFN0eWxlLFxuICAgICAgaHJlZjogaXNQYWdlID8gbWFwUGFnZVVybChpZCkgOiBjYXB0aW9uLFxuICAgICAgdGFyZ2V0OiBjYXB0aW9uSG9zdG5hbWUgJiYgY2FwdGlvbkhvc3RuYW1lICE9PSByb290RG9tYWluICYmICFjYXB0aW9uLnN0YXJ0c1dpdGgoXCIvXCIpID8gXCJibGFua19cIiA6IG51bGxcbiAgICB9LCBmaWd1cmUpO1xuICB9XG4gIHJldHVybiBmaWd1cmU7XG59O1xuZnVuY3Rpb24gaXNWYWxpZFVSTChzdHIpIHtcbiAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgXCJeKGh0dHBzPzpcXFxcL1xcXFwvKT8oKChbYS16XFxcXGRdKFthLXpcXFxcZC1dKlthLXpcXFxcZF0pKilcXFxcLikrW2Etel17Mix9fCgoXFxcXGR7MSwzfVxcXFwuKXszfVxcXFxkezEsM30pKShcXFxcOlxcXFxkKyk/KFxcXFwvWy1hLXpcXFxcZCVfLn4rXSopKihcXFxcP1s7JmEtelxcXFxkJV8ufis9LV0qKT8oXFxcXCNbLWEtelxcXFxkX10qKT8kXCIsXG4gICAgXCJpXCJcbiAgKTtcbiAgcmV0dXJuICEhcGF0dGVybi50ZXN0KHN0cik7XG59XG5mdW5jdGlvbiBleHRyYWN0SG9zdG5hbWUodXJsKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaG9zdG5hbWUgPSBuZXcgVVJMKHVybCkuaG9zdG5hbWU7XG4gICAgcmV0dXJuIGhvc3RuYW1lO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jaGVja2JveC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTggZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy9jaGVjay50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBTdmdDaGVjayhwcm9wcykge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTcuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgdmlld0JveDogXCIwIDAgMTQgMTRcIlxuICB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk01LjUgMTJMMTQgMy41IDEyLjUgMmwtNyA3LTQtNC4wMDNMMCA2LjQ5OXpcIlxuICB9KSk7XG59XG52YXIgY2hlY2tfZGVmYXVsdCA9IFN2Z0NoZWNrO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jaGVja2JveC50c3hcbnZhciBDaGVja2JveCA9ICh7IGlzQ2hlY2tlZCB9KSA9PiB7XG4gIGxldCBjb250ZW50ID0gbnVsbDtcbiAgaWYgKGlzQ2hlY2tlZCkge1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtY2hlY2tlZFwiXG4gICAgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChjaGVja19kZWZhdWx0LCBudWxsKSk7XG4gIH0gZWxzZSB7XG4gICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eS1jaGVja2JveC11bmNoZWNrZWRcIlxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcm9wZXJ0eSBub3Rpb24tcHJvcGVydHktY2hlY2tib3hcIlxuICB9LCBjb250ZW50KTtcbn07XG5cbi8vIHNyYy9uZXh0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxOSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJyZWFjdC1mYXN0LWNvbXBhcmVcIjtcbnZhciB3cmFwTmV4dEltYWdlID0gKE5leHRJbWFnZSkgPT4ge1xuICByZXR1cm4gUmVhY3QxOS5tZW1vKGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRJbWFnZShfYSkge1xuICAgIHZhciBfYiA9IF9hLCB7XG4gICAgICBzcmMsXG4gICAgICBhbHQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgbGF5b3V0XG4gICAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICBcInNyY1wiLFxuICAgICAgXCJhbHRcIixcbiAgICAgIFwid2lkdGhcIixcbiAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICBcImNsYXNzTmFtZVwiLFxuICAgICAgXCJzdHlsZVwiLFxuICAgICAgXCJsYXlvdXRcIlxuICAgIF0pO1xuICAgIGlmICghbGF5b3V0KSB7XG4gICAgICBsYXlvdXQgPSB3aWR0aCAmJiBoZWlnaHQgPyBcImludHJpbnNpY1wiIDogXCJmaWxsXCI7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOS5jcmVhdGVFbGVtZW50KE5leHRJbWFnZSwgX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgc3JjLFxuICAgICAgYWx0LFxuICAgICAgd2lkdGg6IGxheW91dCA9PT0gXCJpbnRyaW5zaWNcIiAmJiB3aWR0aCxcbiAgICAgIGhlaWdodDogbGF5b3V0ID09PSBcImludHJpbnNpY1wiICYmIGhlaWdodCxcbiAgICAgIG9iamVjdEZpdDogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLm9iamVjdEZpdCxcbiAgICAgIG9iamVjdFBvc2l0aW9uOiBzdHlsZSA9PSBudWxsID8gdm9pZCAwIDogc3R5bGUub2JqZWN0UG9zaXRpb24sXG4gICAgICBsYXlvdXRcbiAgICB9LCByZXN0KSk7XG4gIH0sIGlzRXF1YWwpO1xufTtcbnZhciB3cmFwTmV4dExpbmsgPSAoTmV4dExpbmspID0+IGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRMaW5rKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7XG4gICAgaHJlZixcbiAgICBhcyxcbiAgICBwYXNzSHJlZixcbiAgICBwcmVmZXRjaCxcbiAgICByZXBsYWNlLFxuICAgIHNjcm9sbCxcbiAgICBzaGFsbG93LFxuICAgIGxvY2FsZVxuICB9ID0gX2IsIGxpbmtQcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiaHJlZlwiLFxuICAgIFwiYXNcIixcbiAgICBcInBhc3NIcmVmXCIsXG4gICAgXCJwcmVmZXRjaFwiLFxuICAgIFwicmVwbGFjZVwiLFxuICAgIFwic2Nyb2xsXCIsXG4gICAgXCJzaGFsbG93XCIsXG4gICAgXCJsb2NhbGVcIlxuICBdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoTmV4dExpbmssIHtcbiAgICBocmVmLFxuICAgIGFzLFxuICAgIHBhc3NIcmVmLFxuICAgIHByZWZldGNoLFxuICAgIHJlcGxhY2UsXG4gICAgc2Nyb2xsLFxuICAgIHNoYWxsb3csXG4gICAgbG9jYWxlXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBsaW5rUHJvcHMpKSk7XG59O1xuXG4vLyBzcmMvY29udGV4dC50c3hcbnZhciBEZWZhdWx0TGluayA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MjAuY3JlYXRlRWxlbWVudChcImFcIiwgX19zcHJlYWRWYWx1ZXMoe1xuICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCJcbn0sIHByb3BzKSk7XG52YXIgRGVmYXVsdExpbmtNZW1vID0gUmVhY3QyMC5tZW1vKERlZmF1bHRMaW5rKTtcbnZhciBEZWZhdWx0UGFnZUxpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoXCJhXCIsIF9fc3ByZWFkVmFsdWVzKHt9LCBwcm9wcykpO1xudmFyIERlZmF1bHRQYWdlTGlua01lbW8gPSBSZWFjdDIwLm1lbW8oRGVmYXVsdFBhZ2VMaW5rKTtcbnZhciBEZWZhdWx0RW1iZWQgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoQXNzZXRXcmFwcGVyLCBfX3NwcmVhZFZhbHVlcyh7fSwgcHJvcHMpKTtcbnZhciBEZWZhdWx0SGVhZGVyID0gSGVhZGVyO1xudmFyIGR1bW15Q29tcG9uZW50ID0gKG5hbWUpID0+ICgpID0+IHtcbiAgY29uc29sZS53YXJuKFxuICAgIGBXYXJuaW5nOiB1c2luZyBlbXB0eSBjb21wb25lbnQgXCIke25hbWV9XCIgKHlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBpbiBOb3Rpb25SZW5kZXJlci5jb21wb25lbnRzKWBcbiAgKTtcbiAgcmV0dXJuIG51bGw7XG59O1xudmFyIGR1bW15T3ZlcnJpZGVGbiA9IChfLCBkZWZhdWx0VmFsdWVGbikgPT4gZGVmYXVsdFZhbHVlRm4oKTtcbnZhciBkZWZhdWx0Q29tcG9uZW50cyA9IHtcbiAgSW1hZ2U6IG51bGwsXG4gIExpbms6IERlZmF1bHRMaW5rTWVtbyxcbiAgUGFnZUxpbms6IERlZmF1bHRQYWdlTGlua01lbW8sXG4gIENoZWNrYm94LFxuICBDYWxsb3V0OiB2b2lkIDAsXG4gIENvZGU6IGR1bW15Q29tcG9uZW50KFwiQ29kZVwiKSxcbiAgRXF1YXRpb246IGR1bW15Q29tcG9uZW50KFwiRXF1YXRpb25cIiksXG4gIENvbGxlY3Rpb246IGR1bW15Q29tcG9uZW50KFwiQ29sbGVjdGlvblwiKSxcbiAgUHJvcGVydHk6IHZvaWQgMCxcbiAgcHJvcGVydHlUZXh0VmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlTZWxlY3RWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVJlbGF0aW9uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGb3JtdWxhVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlUaXRsZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGVyc29uVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlGaWxlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlDaGVja2JveFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5VXJsVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlFbWFpbFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5UGhvbmVOdW1iZXJWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eU51bWJlclZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5TGFzdEVkaXRlZFRpbWVWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eUNyZWF0ZWRUaW1lVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlEYXRlVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgUGRmOiBkdW1teUNvbXBvbmVudChcIlBkZlwiKSxcbiAgVHdlZXQ6IGR1bW15Q29tcG9uZW50KFwiVHdlZXRcIiksXG4gIE1vZGFsOiBkdW1teUNvbXBvbmVudChcIk1vZGFsXCIpLFxuICBIZWFkZXI6IERlZmF1bHRIZWFkZXIsXG4gIEVtYmVkOiBEZWZhdWx0RW1iZWRcbn07XG52YXIgZGVmYXVsdE5vdGlvbkNvbnRleHQgPSB7XG4gIHJlY29yZE1hcDoge1xuICAgIGJsb2NrOiB7fSxcbiAgICBjb2xsZWN0aW9uOiB7fSxcbiAgICBjb2xsZWN0aW9uX3ZpZXc6IHt9LFxuICAgIGNvbGxlY3Rpb25fcXVlcnk6IHt9LFxuICAgIG5vdGlvbl91c2VyOiB7fSxcbiAgICBzaWduZWRfdXJsczoge31cbiAgfSxcbiAgY29tcG9uZW50czogZGVmYXVsdENvbXBvbmVudHMsXG4gIG1hcFBhZ2VVcmw6IGRlZmF1bHRNYXBQYWdlVXJsKCksXG4gIG1hcEltYWdlVXJsOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbjogbnVsbCxcbiAgaXNTaG93aW5nU2VhcmNoOiBmYWxzZSxcbiAgb25IaWRlU2VhcmNoOiBudWxsLFxuICBmdWxsUGFnZTogZmFsc2UsXG4gIGRhcmtNb2RlOiBmYWxzZSxcbiAgcHJldmlld0ltYWdlczogZmFsc2UsXG4gIGZvcmNlQ3VzdG9tSW1hZ2VzOiBmYWxzZSxcbiAgc2hvd0NvbGxlY3Rpb25WaWV3RHJvcGRvd246IHRydWUsXG4gIGxpbmtUYWJsZVRpdGxlUHJvcGVydGllczogdHJ1ZSxcbiAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHk6IGZhbHNlLFxuICBzaG93VGFibGVPZkNvbnRlbnRzOiBmYWxzZSxcbiAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXM6IDMsXG4gIGRlZmF1bHRQYWdlSWNvbjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlcjogbnVsbCxcbiAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uOiAwLjUsXG4gIHpvb206IG51bGxcbn07XG52YXIgY3R4ID0gUmVhY3QyMC5jcmVhdGVDb250ZXh0KGRlZmF1bHROb3Rpb25Db250ZXh0KTtcbnZhciBOb3Rpb25Db250ZXh0UHJvdmlkZXIgPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBjb21wb25lbnRzOiB0aGVtZUNvbXBvbmVudHMgPSB7fSxcbiAgICBjaGlsZHJlbixcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHJvb3RQYWdlSWRcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb21wb25lbnRzXCIsXG4gICAgXCJjaGlsZHJlblwiLFxuICAgIFwibWFwUGFnZVVybFwiLFxuICAgIFwibWFwSW1hZ2VVcmxcIixcbiAgICBcInJvb3RQYWdlSWRcIlxuICBdKTtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVzdCkpIHtcbiAgICBpZiAocmVzdFtrZXldID09PSB2b2lkIDApIHtcbiAgICAgIGRlbGV0ZSByZXN0W2tleV07XG4gICAgfVxuICB9XG4gIGNvbnN0IHdyYXBwZWRUaGVtZUNvbXBvbmVudHMgPSBSZWFjdDIwLnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRWYWx1ZXMoe30sIHRoZW1lQ29tcG9uZW50cyksXG4gICAgW3RoZW1lQ29tcG9uZW50c11cbiAgKTtcbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dEltYWdlKSB7XG4gICAgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5JbWFnZSA9IHdyYXBOZXh0SW1hZ2UodGhlbWVDb21wb25lbnRzLm5leHRJbWFnZSk7XG4gIH1cbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dExpbmspIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMaW5rID0gd3JhcE5leHRMaW5rKHRoZW1lQ29tcG9uZW50cy5uZXh0TGluayk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMod3JhcHBlZFRoZW1lQ29tcG9uZW50cykpIHtcbiAgICBpZiAoIXdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XSkge1xuICAgICAgZGVsZXRlIHdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBSZWFjdDIwLnVzZU1lbW8oXG4gICAgKCkgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdE5vdGlvbkNvbnRleHQpLCByZXN0KSwge1xuICAgICAgcm9vdFBhZ2VJZCxcbiAgICAgIG1hcFBhZ2VVcmw6IG1hcFBhZ2VVcmwgIT0gbnVsbCA/IG1hcFBhZ2VVcmwgOiBkZWZhdWx0TWFwUGFnZVVybChyb290UGFnZUlkKSxcbiAgICAgIG1hcEltYWdlVXJsOiBtYXBJbWFnZVVybCAhPSBudWxsID8gbWFwSW1hZ2VVcmwgOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gICAgICBjb21wb25lbnRzOiBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgZGVmYXVsdENvbXBvbmVudHMpLCB3cmFwcGVkVGhlbWVDb21wb25lbnRzKVxuICAgIH0pLFxuICAgIFttYXBJbWFnZVVybCwgbWFwUGFnZVVybCwgd3JhcHBlZFRoZW1lQ29tcG9uZW50cywgcm9vdFBhZ2VJZCwgcmVzdF1cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIwLmNyZWF0ZUVsZW1lbnQoY3R4LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufTtcbnZhciBOb3Rpb25Db250ZXh0Q29uc3VtZXIgPSBjdHguQ29uc3VtZXI7XG52YXIgdXNlTm90aW9uQ29udGV4dCA9ICgpID0+IHtcbiAgcmV0dXJuIFJlYWN0MjAudXNlQ29udGV4dChjdHgpO1xufTtcblxuLy8gc3JjL3RoaXJkLXBhcnR5L2VxdWF0aW9uLnRzeFxudmFyIGthdGV4U2V0dGluZ3MgPSB7XG4gIHRocm93T25FcnJvcjogZmFsc2UsXG4gIHN0cmljdDogZmFsc2Vcbn07XG52YXIgRXF1YXRpb24gPSAoX2EpID0+IHtcbiAgdmFyIF9iID0gX2EsIHsgYmxvY2ssIG1hdGgsIGlubGluZSA9IGZhbHNlLCBjbGFzc05hbWUgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXCJibG9ja1wiLCBcIm1hdGhcIiwgXCJpbmxpbmVcIiwgXCJjbGFzc05hbWVcIl0pO1xuICBjb25zdCB7IHJlY29yZE1hcCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBtYXRoID0gbWF0aCB8fCBnZXRCbG9ja1RpdGxlNChibG9jaywgcmVjb3JkTWFwKTtcbiAgaWYgKCFtYXRoKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MjEuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIHJvbGU6IFwiYnV0dG9uXCIsXG4gICAgdGFiSW5kZXg6IDAsXG4gICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgIFwibm90aW9uLWVxdWF0aW9uXCIsXG4gICAgICBpbmxpbmUgPyBcIm5vdGlvbi1lcXVhdGlvbi1pbmxpbmVcIiA6IFwibm90aW9uLWVxdWF0aW9uLWJsb2NrXCIsXG4gICAgICBjbGFzc05hbWVcbiAgICApXG4gIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDIxLmNyZWF0ZUVsZW1lbnQoS2F0ZXgsIF9fc3ByZWFkVmFsdWVzKHtcbiAgICBtYXRoLFxuICAgIHNldHRpbmdzOiBrYXRleFNldHRpbmdzXG4gIH0sIHJlc3QpKSk7XG59O1xuZXhwb3J0IHtcbiAgRXF1YXRpb25cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/build/third-party/equation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-notion-x/build/third-party/modal.js":
/*!****************************************************************!*\
  !*** ./node_modules/react-notion-x/build/third-party/modal.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Modal: () => (/* reexport default export from named module */ react_modal__WEBPACK_IMPORTED_MODULE_0__)\n/* harmony export */ });\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-modal */ \"(ssr)/./node_modules/react-modal/lib/index.js\");\n// src/third-party/modal.tsx\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvYnVpbGQvdGhpcmQtcGFydHkvbW9kYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNnQztBQUc5QiIsInNvdXJjZXMiOlsid2VicGFjazovL25vdGlvbi14LWV4YW1wbGUtZnVsbC8uL25vZGVfbW9kdWxlcy9yZWFjdC1ub3Rpb24teC9idWlsZC90aGlyZC1wYXJ0eS9tb2RhbC5qcz82YzUxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy90aGlyZC1wYXJ0eS9tb2RhbC50c3hcbmltcG9ydCBNb2RhbCBmcm9tIFwicmVhY3QtbW9kYWxcIjtcbmV4cG9ydCB7XG4gIE1vZGFsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-notion-x/build/third-party/modal.js\n");

/***/ })

};
;